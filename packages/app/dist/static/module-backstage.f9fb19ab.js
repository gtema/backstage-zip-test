"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Rt,d,e){e.d(d,{r:function(){return Kt}});var n=e(53907),l=e(30705),u=e(56563),m=e(2784),a=e(77277),c=e(80236),P=e(73557),b=e(39857),t=e(43642),v=e(80079),h=e(90941),$=e(32915),L=e(40562),k=e(21853),G=e(60744),E=e(66569),A=e(30254),x=e(13384),f=e(15933),T=e(58838),C=e(86737),_=e(4989),p=e(44407),W=e(18628),K=e(84219),Ie=e(98685),ge=e(39781),Xe=e(39412),$t=e(73689),ot=e(48032),Vt=e(34505);const kt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},J={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function sn($e){var _t;const{colors:ct,shape:hn,options:un}=$e,st=`linear-gradient(90deg, ${(ct.length===1?[ct[0],ct[0]]:ct).join(", ")})`,Pt=`${hn},  ${st}`,fn=(_t=un==null?void 0:un.fontColor)!=null?_t:"#FFFFFF";return{colors:ct,shape:hn,backgroundImage:Pt,fontColor:fn}}const Se={home:sn({colors:J.teal,shape:kt.wave}),documentation:sn({colors:J.pinkSea,shape:kt.wave2}),tool:sn({colors:J.purpleSky,shape:kt.round}),service:sn({colors:J.marineBlue,shape:kt.wave}),website:sn({colors:J.veryBlue,shape:kt.wave}),library:sn({colors:J.rubyRed,shape:kt.wave}),other:sn({colors:J.darkGrey,shape:kt.wave}),app:sn({colors:J.toastyOrange,shape:kt.wave}),apis:sn({colors:J.teal,shape:kt.wave2}),card:sn({colors:J.greens,shape:kt.wave})},Ne=16,O='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function Le($e){const{palette:_t,htmlFontSize:ct=Ne,fontFamily:hn=O,defaultPageTheme:un,pageTheme:vn=Se}=$e;if(!vn[un])throw new Error(`${un} is not defined in pageTheme.`);return{palette:_t,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{htmlFontSize:ct,fontFamily:hn,h6:{fontWeight:700,fontSize:20,marginBottom:2},h5:{fontWeight:700,fontSize:24,marginBottom:4},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:vn[un],getPageTheme:({themeId:st})=>{var Pt;return(Pt=vn[st])!=null?Pt:vn[un]}}}function ce($e){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:$e.typography.fontFamily},body:{height:"100%",fontFamily:$e.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:$e.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:$e.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:$e.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:$e.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:$e.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,ot.darken)($e.palette.link,.3),background:(0,ot.lighten)($e.palette.link,.95)},[$e.breakpoints.up("md")]:{minWidth:120,fontSize:$e.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:$e.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"}},active:{fontWeight:"bold"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:$e.spacing(1),marginBottom:$e.spacing(1),color:$e.palette.grey[900]},outlined:{color:$e.palette.text.primary},label:{lineHeight:`${$e.spacing(2.5)}px`,fontWeight:$e.typography.fontWeightMedium,fontSize:`${$e.spacing(1.75)}px`},labelSmall:{fontSize:`${$e.spacing(1.5)}px`},deleteIcon:{color:$e.palette.grey[500],width:`${$e.spacing(3)}px`,height:`${$e.spacing(3)}px`,margin:`0 ${$e.spacing(.75)}px 0 -${$e.spacing(.75)}px`},deleteIconSmall:{width:`${$e.spacing(2)}px`,height:`${$e.spacing(2)}px`,margin:`0 ${$e.spacing(.5)}px 0 -${$e.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function R($e){const _t=Le($e),ct=(0,$t.Z)(_t),hn=ce(ct);return{...ct,overrides:hn}}const N=R({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:Vt.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:Se}),te=R({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:Vt.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:Se});var _e=e(98192),Ge=e(15222),wt=e(41547),pt=e(87561);const Tt=[(0,l.ni)({api:l.NW,deps:{configApi:l.Ds},factory:({configApi:$e})=>n.pM.compile(`${$e.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.ni)({api:l.$v,deps:{},factory:()=>new n.CX}),(0,l.ni)({api:l.v_,deps:{},factory:()=>new n.gN}),(0,l.ni)({api:l.VE,deps:{alertApi:l.$v},factory:({alertApi:$e})=>{const _t=new n.KN($e,new n.gr);return n.Jv.forward(_t,{hidden:!1}),_t}}),(0,l.ni)({api:l.E6,deps:{errorApi:l.VE},factory:({errorApi:$e})=>n.CJ.create({errorApi:$e})}),(0,l.ni)({api:l.gP,deps:{configApi:l.Ds,identityApi:l.$4,discoveryApi:l.NW},factory:({configApi:$e,identityApi:_t,discoveryApi:ct})=>(0,n.jJ)({middleware:[n.II.resolvePluginProtocol({discoveryApi:ct}),n.II.injectIdentityAuth({identityApi:_t,config:$e})]})}),(0,l.ni)({api:l.ZM,deps:{},factory:()=>new n.YM}),(0,l.ni)({api:l.Kp,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.eE.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.p_,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n._i.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.F4,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.Td.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,defaultScopes:["read:user"],environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.D,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.sn.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.ux,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.aq.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.gW,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.$_.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.bq,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.xP.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,defaultScopes:["team"],environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.Km,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.C4.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,defaultScopes:["REPO_READ"]})}),(0,l.ni)({api:l.uB,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:$e,oauthRequestApi:_t,configApi:ct})=>n.uC.create({configApi:ct,discoveryApi:$e,oauthRequestApi:_t,environment:ct.getOptionalString("auth.environment")})}),(0,l.ni)({api:u.RV,deps:{discovery:l.NW,identity:l.$4,config:l.Ds},factory:({config:$e,discovery:_t,identity:ct})=>u.iM.create({config:$e,discovery:_t,identity:ct})})];function q({children:$e}){return(0,P.GV)()?m.createElement(m.Fragment,null,$e):m.createElement(P.VA,null,$e)}const oe=()=>m.createElement(c.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Ae=({step:$e,error:_t})=>{let ct="";return $e==="load-config"?ct=`The configuration failed to load, someone should have a look at this error: ${_t.message}`:$e==="load-chunk"&&(ct=`Lazy loaded chunk failed to load, try to reload the page: ${_t.message}`),m.createElement(q,null,m.createElement(c.mf,{status:"501",statusMessage:ct}))},Je=({error:$e,resetError:_t,plugin:ct})=>m.createElement(c.yu,{title:`Error in ${ct==null?void 0:ct.getId()}`,defaultExpanded:!0,error:$e},m.createElement(a.Z,{variant:"outlined",onClick:_t},"Retry")),St={Progress:c.Ex,Router:b.VK,NotFoundErrorPage:oe,BootErrorPage:Ae,ErrorBoundaryFallback:Je},mt={brokenImage:v.Z,catalog:W.Z,scaffolder:$.Z,techdocs:L.Z,search:k.Z,chat:G.Z,dashboard:E.Z,docs:A.Z,email:x.Z,github:T.Z,group:K.Z,help:C.Z,"kind:api":f.Z,"kind:component":p.Z,"kind:domain":t.Z,"kind:group":K.Z,"kind:location":_.Z,"kind:system":h.Z,"kind:user":Ie.Z,"kind:resource":Xe.Z,user:Ie.Z,warning:ge.Z},rn=[{id:"light",title:"Light Theme",variant:"light",icon:m.createElement(Ge.Z,null),Provider:({children:$e})=>m.createElement(wt.Z,{theme:N},m.createElement(pt.ZP,null,$e))},{id:"dark",title:"Dark Theme",variant:"dark",icon:m.createElement(_e.Z,null),Provider:({children:$e})=>m.createElement(wt.Z,{theme:te},m.createElement(pt.ZP,null,$e))}];function Kt($e){var _t,ct,hn,un;return(0,n.bg)({...$e,apis:(_t=$e==null?void 0:$e.apis)!=null?_t:[],bindRoutes:$e==null?void 0:$e.bindRoutes,components:{...St,...$e==null?void 0:$e.components},configLoader:$e==null?void 0:$e.configLoader,defaultApis:Tt,icons:{...mt,...$e==null?void 0:$e.icons},plugins:(ct=$e==null?void 0:$e.plugins)!=null?ct:[],featureFlags:(hn=$e==null?void 0:$e.featureFlags)!=null?hn:[],themes:(un=$e==null?void 0:$e.themes)!=null?un:rn})}},88285:function(Rt,d,e){e.d(d,{MS:function(){return P},mk:function(){return b},n3:function(){return a}});var n=e(34520),l=e(32272),u=e(96279),m=e.n(u);const a=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function c(t){return!t.cursor}class P{constructor(v){this.discoveryApi=v.discoveryApi,this.fetchApi=v.fetchApi||{fetch:m()}}async getEntityAncestors(v,h){const{kind:$,namespace:L,name:k}=(0,n.of)(v.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}/ancestry`,h)}async getLocationById(v,h){return await this.requestOptional("GET",`/locations/${encodeURIComponent(v)}`,h)}async getEntities(v,h){const{filter:$=[],fields:L=[],order:k,offset:G,limit:E,after:A}=v!=null?v:{},x=this.getParams($);if(L.length&&x.push(`fields=${L.map(encodeURIComponent).join(",")}`),k)for(const _ of[k].flat())_&&x.push(`order=${encodeURIComponent(_.order)}:${encodeURIComponent(_.field)}`);G!==void 0&&x.push(`offset=${G}`),E!==void 0&&x.push(`limit=${E}`),A!==void 0&&x.push(`after=${encodeURIComponent(A)}`);const f=x.length?`?${x.join("&")}`:"",T=await this.requestRequired("GET",`/entities${f}`,h),C=(_,p)=>{var W,K;if(((W=_.metadata)==null?void 0:W.name)===void 0||_.kind===void 0||((K=p.metadata)==null?void 0:K.name)===void 0||p.kind===void 0)return 0;const Ie=(0,n.eE)(_),ge=(0,n.eE)(p);return Ie<ge?-1:Ie>ge?1:0};return{items:T.sort(C)}}async getEntitiesByRefs(v,h){var $;const L={entityRefs:v.entityRefs};($=v.fields)!=null&&$.length&&(L.fields=v.fields);const G=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,E=await this.fetchApi.fetch(G,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(L)});if(!E.ok)throw await l.VL.fromResponse(E);const{items:A}=await E.json();return{items:A.map(x=>x!=null?x:void 0)}}async queryEntities(v={},h){var $,L;const k=[];if(c(v)){const{fields:E=[],filter:A,limit:x,orderFields:f,fullTextFilter:T}=v;k.push(...this.getParams(A)),x!==void 0&&k.push(`limit=${x}`),f!==void 0&&(Array.isArray(f)?f:[f]).forEach(({field:_,order:p})=>k.push(`orderField=${_},${p}`)),E.length&&k.push(`fields=${E.map(encodeURIComponent).join(",")}`);const C=($=T==null?void 0:T.term)==null?void 0:$.trim();C&&k.push(`fullTextFilterTerm=${C}`),(L=T==null?void 0:T.fields)!=null&&L.length&&k.push(`fullTextFilterFields=${T.fields.join(",")}`)}else{const{fields:E=[],limit:A,cursor:x}=v;k.push(`cursor=${x}`),A!==void 0&&k.push(`limit=${A}`),E.length&&k.push(`fields=${E.map(encodeURIComponent).join(",")}`)}const G=k.length?`?${k.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${G}`,h)}async getEntityByRef(v,h){const{kind:$,namespace:L,name:k}=(0,n.of)(v);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}`,h)}async getEntityByName(v,h){const{kind:$,namespace:L="default",name:k}=v;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}`,h)}async refreshEntity(v,h){const $=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify({entityRef:v})});if($.status!==200)throw new Error(await $.text())}async getEntityFacets(v,h){const{filter:$=[],facets:L}=v,k=this.getParams($);for(const E of L)k.push(`facet=${encodeURIComponent(E)}`);const G=k.length?`?${k.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${G}`,h)}async addLocation(v,h){const{type:$="url",target:L,dryRun:k}=v,G=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${k?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify({type:$,target:L})});if(G.status!==201)throw new Error(await G.text());const{location:E,entities:A,exists:x}=await G.json();if(!E)throw new Error(`Location wasn't added: ${L}`);return{location:E,entities:A,exists:x}}async getLocationByRef(v,h){return(await this.requestRequired("GET","/locations",h)).map(L=>L.data).find(L=>v===(0,n.NZ)(L))}async removeLocationById(v,h){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(v)}`,h)}async removeEntityByUid(v,h){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(v)}`,h)}async validateEntity(v,h,$){const L=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...($==null?void 0:$.token)&&{Authorization:`Bearer ${$==null?void 0:$.token}`}},method:"POST",body:JSON.stringify({entity:v,location:h})});if(L.ok)return{valid:!0};if(L.status!==400)throw await l.VL.fromResponse(L);const{errors:k=[]}=await L.json();return{valid:!1,errors:k}}async requestIgnored(v,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},G=await this.fetchApi.fetch(L,{method:v,headers:k});if(!G.ok)throw await l.VL.fromResponse(G)}async requestRequired(v,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},G=await this.fetchApi.fetch(L,{method:v,headers:k});if(!G.ok)throw await l.VL.fromResponse(G);return G.json()}async requestOptional(v,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},G=await this.fetchApi.fetch(L,{method:v,headers:k});if(!G.ok){if(G.status===404)return;throw await l.VL.fromResponse(G)}return await G.json()}getParams(v=[]){const h=[];for(const $ of[v].flat()){const L=[];for(const[k,G]of Object.entries($))for(const E of[G].flat())E===a?L.push(encodeURIComponent(k)):typeof E=="string"&&L.push(`${encodeURIComponent(k)}=${encodeURIComponent(E)}`);L.length&&h.push(`filter=${L.join(",")}`)}return h}}const b="backstage.io/catalog-processing"},34520:function(Rt,d,e){e.d(d,{$1:function(){return vt},CV:function(){return Z},Dg:function(){return it},In:function(){return he},KS:function(){return Wn},M6:function(){return pr},M_:function(){return ft},NZ:function(){return nr},Ou:function(){return or},P1:function(){return Hn},S4:function(){return Ue},Tf:function(){return G},X9:function(){return yt},Zj:function(){return Zt},_b:function(){return Zn},aS:function(){return rr},cz:function(){return jn},eE:function(){return p},hr:function(){return tr},iB:function(){return C},l2:function(){return k},nP:function(){return tn},of:function(){return _},q1:function(){return vr},w$:function(){return gn},wI:function(){return fe},wP:function(){return er},y$:function(){return X},zG:function(){return L}});var n=e(76635),l=e.n(n),u=e(53911),m=e.n(u);function a(o){return o.kind.toLocaleUpperCase("en-US")==="API"}function c(o){return o.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function P(o){return o.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function b(o){return o.kind.toLocaleUpperCase("en-US")==="GROUP"}function t(o){return o.kind.toLocaleUpperCase("en-US")==="LOCATION"}function v(o){return o.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function h(o){return o.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function $(o){return o.kind.toLocaleUpperCase("en-US")==="USER"}const L="default",k="backstage.io/view-url",G="backstage.io/edit-url",E="kubernetes.io/api-server",A="kubernetes.io/api-server-certificate-authority",x="kubernetes.io/auth-provider";class f{constructor(i=L){this.namespace=i}async enforce(i){return i.metadata.namespace?i:lodash.merge({metadata:{namespace:this.namespace}},i)}}function T(o){let i=o.indexOf(":");const g=o.indexOf("/");g!==-1&&g<i&&(i=-1);const M=i===-1?void 0:o.slice(0,i),Ee=g===-1?void 0:o.slice(i+1,g),je=o.slice(Math.max(i+1,g+1));if(M===""||Ee===""||je==="")throw new TypeError(`Entity reference "${o}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:M,namespace:Ee,name:je}}function C(o){return{kind:o.kind,namespace:o.metadata.namespace||L,name:o.metadata.name}}function _(o,i){var g,M,Ee,je;if(!o)throw new Error("Entity reference must not be empty");const et=i==null?void 0:i.defaultKind,xt=(i==null?void 0:i.defaultNamespace)||L;let Wt,cn,mn;if(typeof o=="string"){const Sn=T(o);Wt=(g=Sn.kind)!=null?g:et,cn=(M=Sn.namespace)!=null?M:xt,mn=Sn.name}else Wt=(Ee=o.kind)!=null?Ee:et,cn=(je=o.namespace)!=null?je:xt,mn=o.name;if(Wt)if(cn){if(!mn){const Sn=JSON.stringify(o);throw new Error(`Entity reference ${Sn} had missing or empty name`)}}else{const Sn=JSON.stringify(o);throw new Error(`Entity reference ${Sn} had missing or empty namespace`)}else{const Sn=JSON.stringify(o);throw new Error(`Entity reference ${Sn} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Wt,namespace:cn,name:mn}}function p(o){var i,g;let M,Ee,je;return"metadata"in o?(M=o.kind,Ee=(i=o.metadata.namespace)!=null?i:L,je=o.metadata.name):(M=o.kind,Ee=(g=o.namespace)!=null?g:L,je=o.name),`${M.toLocaleLowerCase("en-US")}:${Ee.toLocaleLowerCase("en-US")}/${je.toLocaleLowerCase("en-US")}`}class W{constructor(i){const{kind:g,namespace:M,name:Ee}=_(i,{defaultKind:"Group",defaultNamespace:L});if(g.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=p({kind:g,namespace:M,name:Ee})}async enforce(i){if(i.kind!=="Group")return i;const g=i;return g.spec.parent||p(g)!==this.parentRef&&(g.spec.parent=this.parentRef),g}}class K{static isValidPrefixAndOrSuffix(i,g,M,Ee){if(typeof i!="string")return!1;const je=i.split(g);return je.length===1?Ee(je[0]):je.length===2?M(je[0])&&Ee(je[1]):!1}static isJsonSafe(i){try{return l().isEqual(i,JSON.parse(JSON.stringify(i)))}catch{return!1}}static isValidDnsSubdomain(i){return typeof i=="string"&&i.length>=1&&i.length<=253&&i.split(".").every(K.isValidDnsLabel)}static isValidDnsLabel(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(i)}static isValidTag(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(i)}static isValidUrl(i){if(typeof i!="string")return!1;try{return new URL(i),!0}catch{return!1}}static isValidString(i){var g;return typeof i=="string"&&((g=i==null?void 0:i.trim())==null?void 0:g.length)>=1}static isNonEmptyString(i){var g;return typeof i=="string"&&((g=i==null?void 0:i.trim())==null?void 0:g.length)>=1}}var Ie="http://json-schema.org/draft-07/schema",ge="EntityEnvelope",Xe="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",$t=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],ot="object",Vt=["apiVersion","kind","metadata"],kt=!0,J={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},sn={$schema:Ie,$id:ge,description:Xe,examples:$t,type:ot,required:Vt,additionalProperties:kt,properties:J},Se="http://json-schema.org/draft-07/schema",Ne="Entity",O="The parts of the format that's common to all versions/kinds of entity.",Le=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ce="object",R=["apiVersion","kind","metadata"],N=!1,te={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},_e={$schema:Se,$id:Ne,description:O,examples:Le,type:ce,required:R,additionalProperties:N,properties:te},Ge="http://json-schema.org/draft-07/schema",wt="EntityMeta",pt="Metadata fields common to all versions/kinds of entity.",Tt=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],q="object",oe=["name"],Ae=!0,Je={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},St={$schema:Ge,$id:wt,description:pt,examples:Tt,type:q,required:oe,additionalProperties:Ae,properties:Je},mt="http://json-schema.org/draft-07/schema",rn="common",Kt="object",$e="Common definitions to import from other schemas",_t={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},ct={$schema:mt,$id:rn,type:Kt,description:$e,definitions:_t};const hn=new Map,un=[sn,_e,St,ct];function vn(o){if(!(o!=null&&o.length))throw new TypeError("Unknown error");const i=o[0];throw new TypeError(`${i.instancePath||"<root>"} ${i.message}${i.params?` - ${Object.entries(i.params).map(([g,M])=>`${g}: ${M}`).join(", ")}`:""}`)}function st(o,i={}){var g;const M=(g=i==null?void 0:i.disableCache)!=null?g:!1,Ee=M?"":JSON.stringify(o);if(!M){const Wt=hn.get(Ee);if(Wt)return Wt}const je=Pt(o),et=new(m())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});je.length&&et.addSchema(je,void 0,void 0,!0);const xt=et.compile(o);return M||hn.set(Ee,xt),xt}function Pt(o){if(typeof o!="object")return[];const i=new Set;o.$id&&i.add(o.$id);const g=new Array,M=[o];for(;M.length;){const Ee=M.pop();for(const je of fn(Ee))if(!i.has(je)){i.add(je);const et=un.find(xt=>xt.$id===je);et&&(g.push(et),M.push(et))}}return g}function*fn(o){const i=[o];for(;i.length;){const g=i.pop();if(typeof g=="object"&&g)for(const[M,Ee]of Object.entries(g))M==="$ref"&&typeof Ee=="string"?yield Ee.split("#")[0]:i.push(Ee)}}function pn(o){const i=st(o||sn);return g=>{if(i(g)===!0)return g;throw vn(i.errors)}}function fe(o){const i=st(o);return g=>{var M;if(i(g)===!0)return g;const je=(M=i.errors)==null?void 0:M.filter(et=>["/kind","/apiVersion"].includes(et.instancePath));if(je!=null&&je.length&&je.every(et=>et.keyword==="enum"))return!1;throw vn(i.errors)}}function j(o){const i=st(o||_e);return g=>{if(i(g)===!0)return g;throw vn(i.errors)}}class X{static isValidApiVersion(i){return K.isValidPrefixAndOrSuffix(i,"/",K.isValidDnsSubdomain,g=>g.length>=1&&g.length<=63&&/^[a-z0-9A-Z]+$/.test(g))}static isValidKind(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(i)}static isValidObjectName(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(i)}static isValidNamespace(i){return K.isValidDnsLabel(i)}static isValidLabelKey(i){return K.isValidPrefixAndOrSuffix(i,"/",K.isValidDnsSubdomain,X.isValidObjectName)}static isValidLabelValue(i){return i===""||X.isValidObjectName(i)}static isValidAnnotationKey(i){return K.isValidPrefixAndOrSuffix(i,"/",K.isValidDnsSubdomain,X.isValidObjectName)}static isValidAnnotationValue(i){return typeof i=="string"}}const ue={isValidApiVersion:X.isValidApiVersion,isValidKind:X.isValidKind,isValidEntityName:X.isValidObjectName,isValidNamespace:X.isValidNamespace,isValidLabelKey:X.isValidLabelKey,isValidLabelValue:X.isValidLabelValue,isValidAnnotationKey:X.isValidAnnotationKey,isValidAnnotationValue:X.isValidAnnotationValue,isValidTag:o=>typeof o=="string"&&o.length>=1&&o.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(o)};function he(o={}){return{...ue,...o}}class De{constructor(i=he()){this.validators=i}async enforce(i){var g,M,Ee,je,et,xt,Wt;function cn(On,Gn,ar){if(Gn==null)throw new Error(`${On} must have a value`);let Qn;try{Qn=ar(Gn)}catch(F){throw new Error(`${On} could not be validated, ${F}`)}if(!Qn){let F;switch(ar.name){case"isValidLabelValue":case"isValidObjectName":F="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":F="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":F="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":F="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":F="a string";break;case"isValidKind":F="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":F="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":F="a non empty string";break;default:F=void 0;break}const le=F?` expected ${F} but found "${Gn}".`:"";throw new Error(`"${On}" is not valid;${le} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function mn(On,Gn,ar){return Gn===void 0||cn(On,Gn,ar)}cn("apiVersion",i.apiVersion,this.validators.isValidApiVersion),cn("kind",i.kind,this.validators.isValidKind),cn("metadata.name",i.metadata.name,this.validators.isValidEntityName),mn("metadata.namespace",i.metadata.namespace,this.validators.isValidNamespace);for(const[On,Gn]of Object.entries((g=i.metadata.labels)!=null?g:[]))cn(`labels.${On}`,On,this.validators.isValidLabelKey),cn(`labels.${On}`,Gn,this.validators.isValidLabelValue);for(const[On,Gn]of Object.entries((M=i.metadata.annotations)!=null?M:[]))cn(`annotations.${On}`,On,this.validators.isValidAnnotationKey),cn(`annotations.${On}`,Gn,this.validators.isValidAnnotationValue);const Sn=(Ee=i.metadata.tags)!=null?Ee:[];for(let On=0;On<Sn.length;++On)cn(`tags.${On}`,Sn[On],this.validators.isValidTag);const Ln=(je=i.metadata.links)!=null?je:[];for(let On=0;On<Ln.length;++On)cn(`links.${On}.url`,(et=Ln[On])==null?void 0:et.url,K.isValidUrl),mn(`links.${On}.title`,(xt=Ln[On])==null?void 0:xt.title,K.isNonEmptyString),mn(`links.${On}.icon`,(Wt=Ln[On])==null?void 0:Wt.icon,X.isValidObjectName);return i}}const at=null;class tt{constructor(i=at){this.knownFields=i}async enforce(i){for(const g of Object.keys(i))if(!this.knownFields.includes(g))throw new Error(`Unknown field ${g}`);return i}}class ut{async enforce(i){if(!this.validate){const Ee=new Ajv({allowUnionTypes:!0});this.validate=Ee.addSchema([ct,St],void 0,void 0,!0).compile(_e)}if(this.validate(i)===!0)return i;const[M]=this.validate.errors||[];throw M?new Error(`Malformed envelope, ${M.instancePath||"<root>"} ${M.message}`):new Error("Malformed envelope, Unknown error")}}class Lt{constructor(i){this.policies=i}async enforce(i){let g=i;for(const M of this.policies){const Ee=await M.enforce(g);if(!Ee)throw new Error(`Policy ${M.constructor.name} did not return a result`);g=Ee}return g}}class de{constructor(i){this.policies=i}async enforce(i){for(const g of this.policies){const M=await g.enforce(i);if(M)return M}throw new Error("The entity did not match any known policy")}}const ne={allOf(o){return new Lt(o)},oneOf(o){return new de(o)}};var S="http://json-schema.org/draft-07/schema",z="ApiV1alpha1",Q="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",me=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],xe=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],Fe={$schema:S,$id:z,description:Q,examples:me,allOf:xe};function He(o){let i;return{async check(g){return i||(i=fe(o)),i(g)===g}}}const dt=He(Fe);var ae="http://json-schema.org/draft-07/schema",pe="ComponentV1alpha1",ve='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Te=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],nt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Bt={$schema:ae,$id:pe,description:ve,examples:Te,allOf:nt};const Ut=He(Bt);var Dt="http://json-schema.org/draft-07/schema",Ce="DomainV1alpha1",we="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Ke=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Ye=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],We={$schema:Dt,$id:Ce,description:we,examples:Ke,allOf:Ye};const Ct=He(We);var It="http://json-schema.org/draft-07/schema",jt="GroupV1alpha1",Gt="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",_n=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],wn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],xn={$schema:It,$id:jt,description:Gt,examples:_n,allOf:wn};const Tn=He(xn);var kn="http://json-schema.org/draft-07/schema",Mn="LocationV1alpha1",yn="A location is a marker that references other places to look for catalog data.",zn=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],lt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],ye={$schema:kn,$id:Mn,description:yn,examples:zn,allOf:lt};const Ze=He(ye),Ue="ownedBy",vt="ownerOf",it="consumesApi",yt="apiConsumedBy",ft="providesApi",Zt="apiProvidedBy",tn="dependsOn",gn="dependencyOf",Zn="parentOf",er="childOf",tr="memberOf",Wn="hasMember",jn="partOf",rr="hasPart";var D="http://json-schema.org/draft-07/schema",I="ResourceV1alpha1",V="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",ie=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Me=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],rt={$schema:D,$id:I,description:V,examples:ie,allOf:Me};const B=He(rt);var H="http://json-schema.org/draft-07/schema",Oe="SystemV1alpha1",ze="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",Mt=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Ft=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Ht={$schema:H,$id:Oe,description:ze,examples:Mt,allOf:Ft};const bn=He(Ht);var Cn="http://json-schema.org/draft-07/schema",an="UserV1alpha1",Fn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Un=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Jn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Yn={$schema:Cn,$id:an,description:Fn,examples:Un,allOf:Jn};const Xn=He(Yn),Hn="backstage.io/managed-by-location",vr="backstage.io/managed-by-origin-location",pr="backstage.io/source-location",cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function or(o){if(typeof o!="string")throw new TypeError(`Unable to parse location ref '${o}', unexpected argument ${typeof o}`);const i=o.indexOf(":");if(i<0)throw new TypeError(`Unable to parse location ref '${o}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const g=o.substring(0,i).trim(),M=o.substring(i+1).trim();if(!g||!M)throw new TypeError(`Unable to parse location ref '${o}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(g==="http"||g==="https")throw new TypeError(`Invalid location ref '${o}', please prefix it with 'url:', e.g. 'url:${o}'`);if(cr.test(M))throw new TypeError(`Invalid location ref '${o}', target is a javascript: URL`);return{type:g,target:M}}function nr(o){const{type:i,target:g}=o;if(i){if(!g)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(cr.test(g))throw new TypeError(`Invalid location ref '${i}:${g}', target is a javascript: URL`);return`${i}:${g}`}function Z(o){var i,g,M,Ee,je;const et=(je=(g=(i=o.metadata)==null?void 0:i.annotations)==null?void 0:g[pr])!=null?je:(Ee=(M=o.metadata)==null?void 0:M.annotations)==null?void 0:Ee[Hn];if(!et)throw new Error(`Entity '${p(o)}' is missing location`);return or(et)}},53911:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.MissingRefError=d.ValidationError=d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;const n=e(61889),l=e(57993),u=e(99908),m=e(51020),a=["/properties"],c="http://json-schema.org/draft-07/schema";class P extends n.default{_addVocabularies(){super._addVocabularies(),l.default.forEach(L=>this.addVocabulary(L)),this.opts.discriminator&&this.addKeyword(u.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const L=this.opts.$data?this.$dataMetaSchema(m,a):m;this.addMetaSchema(L,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}Rt.exports=d=P,Object.defineProperty(d,"__esModule",{value:!0}),d.default=P;var b=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return b.KeywordCxt}});var t=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});var v=e(14319);Object.defineProperty(d,"ValidationError",{enumerable:!0,get:function(){return v.default}});var h=e(30283);Object.defineProperty(d,"MissingRefError",{enumerable:!0,get:function(){return h.default}})},91475:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.regexpCode=d.getEsmExportName=d.getProperty=d.safeStringify=d.stringify=d.strConcat=d.addCodeArg=d.str=d._=d.nil=d._Code=d.Name=d.IDENTIFIER=d._CodeOrName=void 0;class e{}d._CodeOrName=e,d.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(A){if(super(),!d.IDENTIFIER.test(A))throw new Error("CodeGen: name must be a valid identifier");this.str=A}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}d.Name=n;class l extends e{constructor(A){super(),this._items=typeof A=="string"?[A]:A}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const A=this._items[0];return A===""||A==='""'}get str(){var A;return(A=this._str)!==null&&A!==void 0?A:this._str=this._items.reduce((x,f)=>`${x}${f}`,"")}get names(){var A;return(A=this._names)!==null&&A!==void 0?A:this._names=this._items.reduce((x,f)=>(f instanceof n&&(x[f.str]=(x[f.str]||0)+1),x),{})}}d._Code=l,d.nil=new l("");function u(E,...A){const x=[E[0]];let f=0;for(;f<A.length;)c(x,A[f]),x.push(E[++f]);return new l(x)}d._=u;const m=new l("+");function a(E,...A){const x=[$(E[0])];let f=0;for(;f<A.length;)x.push(m),c(x,A[f]),x.push(m,$(E[++f]));return P(x),new l(x)}d.str=a;function c(E,A){A instanceof l?E.push(...A._items):A instanceof n?E.push(A):E.push(v(A))}d.addCodeArg=c;function P(E){let A=1;for(;A<E.length-1;){if(E[A]===m){const x=b(E[A-1],E[A+1]);if(x!==void 0){E.splice(A-1,3,x);continue}E[A++]="+"}A++}}function b(E,A){if(A==='""')return E;if(E==='""')return A;if(typeof E=="string")return A instanceof n||E[E.length-1]!=='"'?void 0:typeof A!="string"?`${E.slice(0,-1)}${A}"`:A[0]==='"'?E.slice(0,-1)+A.slice(1):void 0;if(typeof A=="string"&&A[0]==='"'&&!(E instanceof n))return`"${E}${A.slice(1)}`}function t(E,A){return A.emptyStr()?E:E.emptyStr()?A:a`${E}${A}`}d.strConcat=t;function v(E){return typeof E=="number"||typeof E=="boolean"||E===null?E:$(Array.isArray(E)?E.join(","):E)}function h(E){return new l($(E))}d.stringify=h;function $(E){return JSON.stringify(E).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}d.safeStringify=$;function L(E){return typeof E=="string"&&d.IDENTIFIER.test(E)?new l(`.${E}`):u`[${E}]`}d.getProperty=L;function k(E){if(typeof E=="string"&&d.IDENTIFIER.test(E))return new l(`${E}`);throw new Error(`CodeGen: invalid export name: ${E}, use explicit $id name mapping`)}d.getEsmExportName=k;function G(E){return new l(E.toString())}d.regexpCode=G},82481:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.or=d.and=d.not=d.CodeGen=d.operators=d.varKinds=d.ValueScopeName=d.ValueScope=d.Scope=d.Name=d.regexpCode=d.stringify=d.getProperty=d.nil=d.strConcat=d.str=d._=void 0;const n=e(91475),l=e(66162);var u=e(91475);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(d,"strConcat",{enumerable:!0,get:function(){return u.strConcat}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(d,"getProperty",{enumerable:!0,get:function(){return u.getProperty}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(d,"regexpCode",{enumerable:!0,get:function(){return u.regexpCode}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return u.Name}});var m=e(66162);Object.defineProperty(d,"Scope",{enumerable:!0,get:function(){return m.Scope}}),Object.defineProperty(d,"ValueScope",{enumerable:!0,get:function(){return m.ValueScope}}),Object.defineProperty(d,"ValueScopeName",{enumerable:!0,get:function(){return m.ValueScopeName}}),Object.defineProperty(d,"varKinds",{enumerable:!0,get:function(){return m.varKinds}}),d.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(R,N){return this}}class c extends a{constructor(R,N,te){super(),this.varKind=R,this.name=N,this.rhs=te}render({es5:R,_n:N}){const te=R?l.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${_e};`+N}optimizeNames(R,N){if(R[this.name.str])return this.rhs&&(this.rhs=ot(this.rhs,R,N)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class P extends a{constructor(R,N,te){super(),this.lhs=R,this.rhs=N,this.sideEffects=te}render({_n:R}){return`${this.lhs} = ${this.rhs};`+R}optimizeNames(R,N){if(!(this.lhs instanceof n.Name&&!R[this.lhs.str]&&!this.sideEffects))return this.rhs=ot(this.rhs,R,N),this}get names(){const R=this.lhs instanceof n.Name?{}:{...this.lhs.names};return $t(R,this.rhs)}}class b extends P{constructor(R,N,te,_e){super(R,te,_e),this.op=N}render({_n:R}){return`${this.lhs} ${this.op}= ${this.rhs};`+R}}class t extends a{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`${this.label}:`+R}}class v extends a{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`break${this.label?` ${this.label}`:""};`+R}}class h extends a{constructor(R){super(),this.error=R}render({_n:R}){return`throw ${this.error};`+R}get names(){return this.error.names}}class $ extends a{constructor(R){super(),this.code=R}render({_n:R}){return`${this.code};`+R}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(R,N){return this.code=ot(this.code,R,N),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class L extends a{constructor(R=[]){super(),this.nodes=R}render(R){return this.nodes.reduce((N,te)=>N+te.render(R),"")}optimizeNodes(){const{nodes:R}=this;let N=R.length;for(;N--;){const te=R[N].optimizeNodes();Array.isArray(te)?R.splice(N,1,...te):te?R[N]=te:R.splice(N,1)}return R.length>0?this:void 0}optimizeNames(R,N){const{nodes:te}=this;let _e=te.length;for(;_e--;){const Ge=te[_e];Ge.optimizeNames(R,N)||(Vt(R,Ge.names),te.splice(_e,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((R,N)=>Xe(R,N.names),{})}}class k extends L{render(R){return"{"+R._n+super.render(R)+"}"+R._n}}class G extends L{}class E extends k{}E.kind="else";class A extends k{constructor(R,N){super(N),this.condition=R}render(R){let N=`if(${this.condition})`+super.render(R);return this.else&&(N+="else "+this.else.render(R)),N}optimizeNodes(){super.optimizeNodes();const R=this.condition;if(R===!0)return this.nodes;let N=this.else;if(N){const te=N.optimizeNodes();N=this.else=Array.isArray(te)?new E(te):te}if(N)return R===!1?N instanceof A?N:N.nodes:this.nodes.length?this:new A(kt(R),N instanceof A?[N]:N.nodes);if(!(R===!1||!this.nodes.length))return this}optimizeNames(R,N){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(R,N),!!(super.optimizeNames(R,N)||this.else))return this.condition=ot(this.condition,R,N),this}get names(){const R=super.names;return $t(R,this.condition),this.else&&Xe(R,this.else.names),R}}A.kind="if";class x extends k{}x.kind="for";class f extends x{constructor(R){super(),this.iteration=R}render(R){return`for(${this.iteration})`+super.render(R)}optimizeNames(R,N){if(super.optimizeNames(R,N))return this.iteration=ot(this.iteration,R,N),this}get names(){return Xe(super.names,this.iteration.names)}}class T extends x{constructor(R,N,te,_e){super(),this.varKind=R,this.name=N,this.from=te,this.to=_e}render(R){const N=R.es5?l.varKinds.var:this.varKind,{name:te,from:_e,to:Ge}=this;return`for(${N} ${te}=${_e}; ${te}<${Ge}; ${te}++)`+super.render(R)}get names(){const R=$t(super.names,this.from);return $t(R,this.to)}}class C extends x{constructor(R,N,te,_e){super(),this.loop=R,this.varKind=N,this.name=te,this.iterable=_e}render(R){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(R)}optimizeNames(R,N){if(super.optimizeNames(R,N))return this.iterable=ot(this.iterable,R,N),this}get names(){return Xe(super.names,this.iterable.names)}}class _ extends k{constructor(R,N,te){super(),this.name=R,this.args=N,this.async=te}render(R){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(R)}}_.kind="func";class p extends L{render(R){return"return "+super.render(R)}}p.kind="return";class W extends k{render(R){let N="try"+super.render(R);return this.catch&&(N+=this.catch.render(R)),this.finally&&(N+=this.finally.render(R)),N}optimizeNodes(){var R,N;return super.optimizeNodes(),(R=this.catch)===null||R===void 0||R.optimizeNodes(),(N=this.finally)===null||N===void 0||N.optimizeNodes(),this}optimizeNames(R,N){var te,_e;return super.optimizeNames(R,N),(te=this.catch)===null||te===void 0||te.optimizeNames(R,N),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(R,N),this}get names(){const R=super.names;return this.catch&&Xe(R,this.catch.names),this.finally&&Xe(R,this.finally.names),R}}class K extends k{constructor(R){super(),this.error=R}render(R){return`catch(${this.error})`+super.render(R)}}K.kind="catch";class Ie extends k{render(R){return"finally"+super.render(R)}}Ie.kind="finally";class ge{constructor(R,N={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...N,_n:N.lines?`
`:""},this._extScope=R,this._scope=new l.Scope({parent:R}),this._nodes=[new G]}toString(){return this._root.render(this.opts)}name(R){return this._scope.name(R)}scopeName(R){return this._extScope.name(R)}scopeValue(R,N){const te=this._extScope.value(R,N);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(R,N){return this._extScope.getValue(R,N)}scopeRefs(R){return this._extScope.scopeRefs(R,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(R,N,te,_e){const Ge=this._scope.toName(N);return te!==void 0&&_e&&(this._constants[Ge.str]=te),this._leafNode(new c(R,Ge,te)),Ge}const(R,N,te){return this._def(l.varKinds.const,R,N,te)}let(R,N,te){return this._def(l.varKinds.let,R,N,te)}var(R,N,te){return this._def(l.varKinds.var,R,N,te)}assign(R,N,te){return this._leafNode(new P(R,N,te))}add(R,N){return this._leafNode(new b(R,d.operators.ADD,N))}code(R){return typeof R=="function"?R():R!==n.nil&&this._leafNode(new $(R)),this}object(...R){const N=["{"];for(const[te,_e]of R)N.length>1&&N.push(","),N.push(te),(te!==_e||this.opts.es5)&&(N.push(":"),(0,n.addCodeArg)(N,_e));return N.push("}"),new n._Code(N)}if(R,N,te){if(this._blockNode(new A(R)),N&&te)this.code(N).else().code(te).endIf();else if(N)this.code(N).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(R){return this._elseNode(new A(R))}else(){return this._elseNode(new E)}endIf(){return this._endBlockNode(A,E)}_for(R,N){return this._blockNode(R),N&&this.code(N).endFor(),this}for(R,N){return this._for(new f(R),N)}forRange(R,N,te,_e,Ge=this.opts.es5?l.varKinds.var:l.varKinds.let){const wt=this._scope.toName(R);return this._for(new T(Ge,wt,N,te),()=>_e(wt))}forOf(R,N,te,_e=l.varKinds.const){const Ge=this._scope.toName(R);if(this.opts.es5){const wt=N instanceof n.Name?N:this.var("_arr",N);return this.forRange("_i",0,(0,n._)`${wt}.length`,pt=>{this.var(Ge,(0,n._)`${wt}[${pt}]`),te(Ge)})}return this._for(new C("of",_e,Ge,N),()=>te(Ge))}forIn(R,N,te,_e=this.opts.es5?l.varKinds.var:l.varKinds.const){if(this.opts.ownProperties)return this.forOf(R,(0,n._)`Object.keys(${N})`,te);const Ge=this._scope.toName(R);return this._for(new C("in",_e,Ge,N),()=>te(Ge))}endFor(){return this._endBlockNode(x)}label(R){return this._leafNode(new t(R))}break(R){return this._leafNode(new v(R))}return(R){const N=new p;if(this._blockNode(N),this.code(R),N.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(p)}try(R,N,te){if(!N&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new W;if(this._blockNode(_e),this.code(R),N){const Ge=this.name("e");this._currNode=_e.catch=new K(Ge),N(Ge)}return te&&(this._currNode=_e.finally=new Ie,this.code(te)),this._endBlockNode(K,Ie)}throw(R){return this._leafNode(new h(R))}block(R,N){return this._blockStarts.push(this._nodes.length),R&&this.code(R).endBlock(N),this}endBlock(R){const N=this._blockStarts.pop();if(N===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-N;if(te<0||R!==void 0&&te!==R)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${R} expected`);return this._nodes.length=N,this}func(R,N=n.nil,te,_e){return this._blockNode(new _(R,N,te)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(R=1){for(;R-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(R){return this._currNode.nodes.push(R),this}_blockNode(R){this._currNode.nodes.push(R),this._nodes.push(R)}_endBlockNode(R,N){const te=this._currNode;if(te instanceof R||N&&te instanceof N)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${N?`${R.kind}/${N.kind}`:R.kind}"`)}_elseNode(R){const N=this._currNode;if(!(N instanceof A))throw new Error('CodeGen: "else" without "if"');return this._currNode=N.else=R,this}get _root(){return this._nodes[0]}get _currNode(){const R=this._nodes;return R[R.length-1]}set _currNode(R){const N=this._nodes;N[N.length-1]=R}}d.CodeGen=ge;function Xe(ce,R){for(const N in R)ce[N]=(ce[N]||0)+(R[N]||0);return ce}function $t(ce,R){return R instanceof n._CodeOrName?Xe(ce,R.names):ce}function ot(ce,R,N){if(ce instanceof n.Name)return te(ce);if(!_e(ce))return ce;return new n._Code(ce._items.reduce((Ge,wt)=>(wt instanceof n.Name&&(wt=te(wt)),wt instanceof n._Code?Ge.push(...wt._items):Ge.push(wt),Ge),[]));function te(Ge){const wt=N[Ge.str];return wt===void 0||R[Ge.str]!==1?Ge:(delete R[Ge.str],wt)}function _e(Ge){return Ge instanceof n._Code&&Ge._items.some(wt=>wt instanceof n.Name&&R[wt.str]===1&&N[wt.str]!==void 0)}}function Vt(ce,R){for(const N in R)ce[N]=(ce[N]||0)-(R[N]||0)}function kt(ce){return typeof ce=="boolean"||typeof ce=="number"||ce===null?!ce:(0,n._)`!${Le(ce)}`}d.not=kt;const J=O(d.operators.AND);function sn(...ce){return ce.reduce(J)}d.and=sn;const Se=O(d.operators.OR);function Ne(...ce){return ce.reduce(Se)}d.or=Ne;function O(ce){return(R,N)=>R===n.nil?N:N===n.nil?R:(0,n._)`${Le(R)} ${ce} ${Le(N)}`}function Le(ce){return ce instanceof n.Name?ce:(0,n._)`(${ce})`}},66162:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.ValueScope=d.ValueScopeName=d.Scope=d.varKinds=d.UsedValueState=void 0;const n=e(91475);class l extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var u;(function(b){b[b.Started=0]="Started",b[b.Completed=1]="Completed"})(u=d.UsedValueState||(d.UsedValueState={})),d.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class m{constructor({prefixes:t,parent:v}={}){this._names={},this._prefixes=t,this._parent=v}toName(t){return t instanceof n.Name?t:this.name(t)}name(t){return new n.Name(this._newName(t))}_newName(t){const v=this._names[t]||this._nameGroup(t);return`${t}${v.index++}`}_nameGroup(t){var v,h;if(!((h=(v=this._parent)===null||v===void 0?void 0:v._prefixes)===null||h===void 0)&&h.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}d.Scope=m;class a extends n.Name{constructor(t,v){super(v),this.prefix=t}setValue(t,{property:v,itemIndex:h}){this.value=t,this.scopePath=(0,n._)`.${new n.Name(v)}[${h}]`}}d.ValueScopeName=a;const c=(0,n._)`\n`;class P extends m{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?c:n.nil}}get(){return this._scope}name(t){return new a(t,this._newName(t))}value(t,v){var h;if(v.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(t),{prefix:L}=$,k=(h=v.key)!==null&&h!==void 0?h:v.ref;let G=this._values[L];if(G){const x=G.get(k);if(x)return x}else G=this._values[L]=new Map;G.set(k,$);const E=this._scope[L]||(this._scope[L]=[]),A=E.length;return E[A]=v.ref,$.setValue(v,{property:L,itemIndex:A}),$}getValue(t,v){const h=this._values[t];if(h)return h.get(v)}scopeRefs(t,v=this._values){return this._reduceValues(v,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,n._)`${t}${h.scopePath}`})}scopeCode(t=this._values,v,h){return this._reduceValues(t,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},v,h)}_reduceValues(t,v,h={},$){let L=n.nil;for(const k in t){const G=t[k];if(!G)continue;const E=h[k]=h[k]||new Map;G.forEach(A=>{if(E.has(A))return;E.set(A,u.Started);let x=v(A);if(x){const f=this.opts.es5?d.varKinds.var:d.varKinds.const;L=(0,n._)`${L}${f} ${A} = ${x};${this.opts._n}`}else if(x=$==null?void 0:$(A))L=(0,n._)`${L}${x}${this.opts._n}`;else throw new l(A);E.set(A,u.Completed)})}return L}}d.ValueScope=P},59428:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendErrors=d.resetErrorsCount=d.reportExtraError=d.reportError=d.keyword$DataError=d.keywordError=void 0;const n=e(82481),l=e(1849),u=e(99583);d.keywordError={message:({keyword:E})=>(0,n.str)`must pass "${E}" keyword validation`},d.keyword$DataError={message:({keyword:E,schemaType:A})=>A?(0,n.str)`"${E}" keyword must be ${A} ($data)`:(0,n.str)`"${E}" keyword is invalid ($data)`};function m(E,A=d.keywordError,x,f){const{it:T}=E,{gen:C,compositeRule:_,allErrors:p}=T,W=h(E,A,x);(f!=null?f:_||p)?b(C,W):t(T,(0,n._)`[${W}]`)}d.reportError=m;function a(E,A=d.keywordError,x){const{it:f}=E,{gen:T,compositeRule:C,allErrors:_}=f,p=h(E,A,x);b(T,p),C||_||t(f,u.default.vErrors)}d.reportExtraError=a;function c(E,A){E.assign(u.default.errors,A),E.if((0,n._)`${u.default.vErrors} !== null`,()=>E.if(A,()=>E.assign((0,n._)`${u.default.vErrors}.length`,A),()=>E.assign(u.default.vErrors,null)))}d.resetErrorsCount=c;function P({gen:E,keyword:A,schemaValue:x,data:f,errsCount:T,it:C}){if(T===void 0)throw new Error("ajv implementation error");const _=E.name("err");E.forRange("i",T,u.default.errors,p=>{E.const(_,(0,n._)`${u.default.vErrors}[${p}]`),E.if((0,n._)`${_}.instancePath === undefined`,()=>E.assign((0,n._)`${_}.instancePath`,(0,n.strConcat)(u.default.instancePath,C.errorPath))),E.assign((0,n._)`${_}.schemaPath`,(0,n.str)`${C.errSchemaPath}/${A}`),C.opts.verbose&&(E.assign((0,n._)`${_}.schema`,x),E.assign((0,n._)`${_}.data`,f))})}d.extendErrors=P;function b(E,A){const x=E.const("err",A);E.if((0,n._)`${u.default.vErrors} === null`,()=>E.assign(u.default.vErrors,(0,n._)`[${x}]`),(0,n._)`${u.default.vErrors}.push(${x})`),E.code((0,n._)`${u.default.errors}++`)}function t(E,A){const{gen:x,validateName:f,schemaEnv:T}=E;T.$async?x.throw((0,n._)`new ${E.ValidationError}(${A})`):(x.assign((0,n._)`${f}.errors`,A),x.return(!1))}const v={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function h(E,A,x){const{createErrors:f}=E.it;return f===!1?(0,n._)`{}`:$(E,A,x)}function $(E,A,x={}){const{gen:f,it:T}=E,C=[L(T,x),k(E,x)];return G(E,A,C),f.object(...C)}function L({errorPath:E},{instancePath:A}){const x=A?(0,n.str)`${E}${(0,l.getErrorPath)(A,l.Type.Str)}`:E;return[u.default.instancePath,(0,n.strConcat)(u.default.instancePath,x)]}function k({keyword:E,it:{errSchemaPath:A}},{schemaPath:x,parentSchema:f}){let T=f?A:(0,n.str)`${A}/${E}`;return x&&(T=(0,n.str)`${T}${(0,l.getErrorPath)(x,l.Type.Str)}`),[v.schemaPath,T]}function G(E,{params:A,message:x},f){const{keyword:T,data:C,schemaValue:_,it:p}=E,{opts:W,propertyName:K,topSchemaRef:Ie,schemaPath:ge}=p;f.push([v.keyword,T],[v.params,typeof A=="function"?A(E):A||(0,n._)`{}`]),W.messages&&f.push([v.message,typeof x=="function"?x(E):x]),W.verbose&&f.push([v.schema,_],[v.parentSchema,(0,n._)`${Ie}${ge}`],[u.default.data,C]),K&&f.push([v.propertyName,K])}},62902:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.resolveSchema=d.getCompilingSchema=d.resolveRef=d.compileSchema=d.SchemaEnv=void 0;const n=e(82481),l=e(14319),u=e(99583),m=e(2710),a=e(1849),c=e(4371);class P{constructor(x){var f;this.refs={},this.dynamicAnchors={};let T;typeof x.schema=="object"&&(T=x.schema),this.schema=x.schema,this.schemaId=x.schemaId,this.root=x.root||this,this.baseId=(f=x.baseId)!==null&&f!==void 0?f:(0,m.normalizeId)(T==null?void 0:T[x.schemaId||"$id"]),this.schemaPath=x.schemaPath,this.localRefs=x.localRefs,this.meta=x.meta,this.$async=T==null?void 0:T.$async,this.refs={}}}d.SchemaEnv=P;function b(A){const x=h.call(this,A);if(x)return x;const f=(0,m.getFullPath)(this.opts.uriResolver,A.root.baseId),{es5:T,lines:C}=this.opts.code,{ownProperties:_}=this.opts,p=new n.CodeGen(this.scope,{es5:T,lines:C,ownProperties:_});let W;A.$async&&(W=p.scopeValue("Error",{ref:l.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const K=p.scopeName("validate");A.validateName=K;const Ie={gen:p,allErrors:this.opts.allErrors,data:u.default.data,parentData:u.default.parentData,parentDataProperty:u.default.parentDataProperty,dataNames:[u.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:p.scopeValue("schema",this.opts.code.source===!0?{ref:A.schema,code:(0,n.stringify)(A.schema)}:{ref:A.schema}),validateName:K,ValidationError:W,schema:A.schema,schemaEnv:A,rootId:f,baseId:A.baseId||f,schemaPath:n.nil,errSchemaPath:A.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let ge;try{this._compilations.add(A),(0,c.validateFunctionCode)(Ie),p.optimize(this.opts.code.optimize);const Xe=p.toString();ge=`${p.scopeRefs(u.default.scope)}return ${Xe}`,this.opts.code.process&&(ge=this.opts.code.process(ge,A));const ot=new Function(`${u.default.self}`,`${u.default.scope}`,ge)(this,this.scope.get());if(this.scope.value(K,{ref:ot}),ot.errors=null,ot.schema=A.schema,ot.schemaEnv=A,A.$async&&(ot.$async=!0),this.opts.code.source===!0&&(ot.source={validateName:K,validateCode:Xe,scopeValues:p._values}),this.opts.unevaluated){const{props:Vt,items:kt}=Ie;ot.evaluated={props:Vt instanceof n.Name?void 0:Vt,items:kt instanceof n.Name?void 0:kt,dynamicProps:Vt instanceof n.Name,dynamicItems:kt instanceof n.Name},ot.source&&(ot.source.evaluated=(0,n.stringify)(ot.evaluated))}return A.validate=ot,A}catch(Xe){throw delete A.validate,delete A.validateName,ge&&this.logger.error("Error compiling schema, function code:",ge),Xe}finally{this._compilations.delete(A)}}d.compileSchema=b;function t(A,x,f){var T;f=(0,m.resolveUrl)(this.opts.uriResolver,x,f);const C=A.refs[f];if(C)return C;let _=L.call(this,A,f);if(_===void 0){const p=(T=A.localRefs)===null||T===void 0?void 0:T[f],{schemaId:W}=this.opts;p&&(_=new P({schema:p,schemaId:W,root:A,baseId:x}))}if(_!==void 0)return A.refs[f]=v.call(this,_)}d.resolveRef=t;function v(A){return(0,m.inlineRef)(A.schema,this.opts.inlineRefs)?A.schema:A.validate?A:b.call(this,A)}function h(A){for(const x of this._compilations)if($(x,A))return x}d.getCompilingSchema=h;function $(A,x){return A.schema===x.schema&&A.root===x.root&&A.baseId===x.baseId}function L(A,x){let f;for(;typeof(f=this.refs[x])=="string";)x=f;return f||this.schemas[x]||k.call(this,A,x)}function k(A,x){const f=this.opts.uriResolver.parse(x),T=(0,m._getFullPath)(this.opts.uriResolver,f);let C=(0,m.getFullPath)(this.opts.uriResolver,A.baseId,void 0);if(Object.keys(A.schema).length>0&&T===C)return E.call(this,f,A);const _=(0,m.normalizeId)(T),p=this.refs[_]||this.schemas[_];if(typeof p=="string"){const W=k.call(this,A,p);return typeof(W==null?void 0:W.schema)!="object"?void 0:E.call(this,f,W)}if(typeof(p==null?void 0:p.schema)=="object"){if(p.validate||b.call(this,p),_===(0,m.normalizeId)(x)){const{schema:W}=p,{schemaId:K}=this.opts,Ie=W[K];return Ie&&(C=(0,m.resolveUrl)(this.opts.uriResolver,C,Ie)),new P({schema:W,schemaId:K,root:A,baseId:C})}return E.call(this,f,p)}}d.resolveSchema=k;const G=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function E(A,{baseId:x,schema:f,root:T}){var C;if(((C=A.fragment)===null||C===void 0?void 0:C[0])!=="/")return;for(const W of A.fragment.slice(1).split("/")){if(typeof f=="boolean")return;const K=f[(0,a.unescapeFragment)(W)];if(K===void 0)return;f=K;const Ie=typeof f=="object"&&f[this.opts.schemaId];!G.has(W)&&Ie&&(x=(0,m.resolveUrl)(this.opts.uriResolver,x,Ie))}let _;if(typeof f!="boolean"&&f.$ref&&!(0,a.schemaHasRulesButRef)(f,this.RULES)){const W=(0,m.resolveUrl)(this.opts.uriResolver,x,f.$ref);_=k.call(this,T,W)}const{schemaId:p}=this.opts;if(_=_||new P({schema:f,schemaId:p,root:T,baseId:x}),_.schema!==_.root.schema)return _}},99583:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};d.default=l},30283:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(2710);class l extends Error{constructor(m,a,c,P){super(P||`can't resolve reference ${c} from id ${a}`),this.missingRef=(0,n.resolveUrl)(m,a,c),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(m,this.missingRef))}}d.default=l},2710:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getSchemaRefs=d.resolveUrl=d.normalizeId=d._getFullPath=d.getFullPath=d.inlineRef=void 0;const n=e(1849),l=e(69378),u=e(19522),m=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function a(E,A=!0){return typeof E=="boolean"?!0:A===!0?!P(E):A?b(E)<=A:!1}d.inlineRef=a;const c=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function P(E){for(const A in E){if(c.has(A))return!0;const x=E[A];if(Array.isArray(x)&&x.some(P)||typeof x=="object"&&P(x))return!0}return!1}function b(E){let A=0;for(const x in E){if(x==="$ref")return 1/0;if(A++,!m.has(x)&&(typeof E[x]=="object"&&(0,n.eachItem)(E[x],f=>A+=b(f)),A===1/0))return 1/0}return A}function t(E,A="",x){x!==!1&&(A=$(A));const f=E.parse(A);return v(E,f)}d.getFullPath=t;function v(E,A){return E.serialize(A).split("#")[0]+"#"}d._getFullPath=v;const h=/#\/?$/;function $(E){return E?E.replace(h,""):""}d.normalizeId=$;function L(E,A,x){return x=$(x),E.resolve(A,x)}d.resolveUrl=L;const k=/^[a-z_][-a-z0-9._]*$/i;function G(E,A){if(typeof E=="boolean")return{};const{schemaId:x,uriResolver:f}=this.opts,T=$(E[x]||A),C={"":T},_=t(f,T,!1),p={},W=new Set;return u(E,{allKeys:!0},(ge,Xe,$t,ot)=>{if(ot===void 0)return;const Vt=_+Xe;let kt=C[ot];typeof ge[x]=="string"&&(kt=J.call(this,ge[x])),sn.call(this,ge.$anchor),sn.call(this,ge.$dynamicAnchor),C[Xe]=kt;function J(Se){const Ne=this.opts.uriResolver.resolve;if(Se=$(kt?Ne(kt,Se):Se),W.has(Se))throw Ie(Se);W.add(Se);let O=this.refs[Se];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?K(ge,O.schema,Se):Se!==$(Vt)&&(Se[0]==="#"?(K(ge,p[Se],Se),p[Se]=ge):this.refs[Se]=Vt),Se}function sn(Se){if(typeof Se=="string"){if(!k.test(Se))throw new Error(`invalid anchor "${Se}"`);J.call(this,`#${Se}`)}}}),p;function K(ge,Xe,$t){if(Xe!==void 0&&!l(ge,Xe))throw Ie($t)}function Ie(ge){return new Error(`reference "${ge}" resolves to more than one schema`)}}d.getSchemaRefs=G},18288:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getRules=d.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],n=new Set(e);function l(m){return typeof m=="string"&&n.has(m)}d.isJSONType=l;function u(){const m={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...m,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},m.number,m.string,m.array,m.object],post:{rules:[]},all:{},keywords:{}}}d.getRules=u},1849:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.checkStrictMode=d.getErrorPath=d.Type=d.useFunc=d.setEvaluated=d.evaluatedPropsToName=d.mergeEvaluated=d.eachItem=d.unescapeJsonPointer=d.escapeJsonPointer=d.escapeFragment=d.unescapeFragment=d.schemaRefOrVal=d.schemaHasRulesButRef=d.schemaHasRules=d.checkUnknownRules=d.alwaysValidSchema=d.toHash=void 0;const n=e(82481),l=e(91475);function u(_){const p={};for(const W of _)p[W]=!0;return p}d.toHash=u;function m(_,p){return typeof p=="boolean"?p:Object.keys(p).length===0?!0:(a(_,p),!c(p,_.self.RULES.all))}d.alwaysValidSchema=m;function a(_,p=_.schema){const{opts:W,self:K}=_;if(!W.strictSchema||typeof p=="boolean")return;const Ie=K.RULES.keywords;for(const ge in p)Ie[ge]||C(_,`unknown keyword: "${ge}"`)}d.checkUnknownRules=a;function c(_,p){if(typeof _=="boolean")return!_;for(const W in _)if(p[W])return!0;return!1}d.schemaHasRules=c;function P(_,p){if(typeof _=="boolean")return!_;for(const W in _)if(W!=="$ref"&&p.all[W])return!0;return!1}d.schemaHasRulesButRef=P;function b({topSchemaRef:_,schemaPath:p},W,K,Ie){if(!Ie){if(typeof W=="number"||typeof W=="boolean")return W;if(typeof W=="string")return(0,n._)`${W}`}return(0,n._)`${_}${p}${(0,n.getProperty)(K)}`}d.schemaRefOrVal=b;function t(_){return $(decodeURIComponent(_))}d.unescapeFragment=t;function v(_){return encodeURIComponent(h(_))}d.escapeFragment=v;function h(_){return typeof _=="number"?`${_}`:_.replace(/~/g,"~0").replace(/\//g,"~1")}d.escapeJsonPointer=h;function $(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}d.unescapeJsonPointer=$;function L(_,p){if(Array.isArray(_))for(const W of _)p(W);else p(_)}d.eachItem=L;function k({mergeNames:_,mergeToName:p,mergeValues:W,resultToName:K}){return(Ie,ge,Xe,$t)=>{const ot=Xe===void 0?ge:Xe instanceof n.Name?(ge instanceof n.Name?_(Ie,ge,Xe):p(Ie,ge,Xe),Xe):ge instanceof n.Name?(p(Ie,Xe,ge),ge):W(ge,Xe);return $t===n.Name&&!(ot instanceof n.Name)?K(Ie,ot):ot}}d.mergeEvaluated={props:k({mergeNames:(_,p,W)=>_.if((0,n._)`${W} !== true && ${p} !== undefined`,()=>{_.if((0,n._)`${p} === true`,()=>_.assign(W,!0),()=>_.assign(W,(0,n._)`${W} || {}`).code((0,n._)`Object.assign(${W}, ${p})`))}),mergeToName:(_,p,W)=>_.if((0,n._)`${W} !== true`,()=>{p===!0?_.assign(W,!0):(_.assign(W,(0,n._)`${W} || {}`),E(_,W,p))}),mergeValues:(_,p)=>_===!0?!0:{..._,...p},resultToName:G}),items:k({mergeNames:(_,p,W)=>_.if((0,n._)`${W} !== true && ${p} !== undefined`,()=>_.assign(W,(0,n._)`${p} === true ? true : ${W} > ${p} ? ${W} : ${p}`)),mergeToName:(_,p,W)=>_.if((0,n._)`${W} !== true`,()=>_.assign(W,p===!0?!0:(0,n._)`${W} > ${p} ? ${W} : ${p}`)),mergeValues:(_,p)=>_===!0?!0:Math.max(_,p),resultToName:(_,p)=>_.var("items",p)})};function G(_,p){if(p===!0)return _.var("props",!0);const W=_.var("props",(0,n._)`{}`);return p!==void 0&&E(_,W,p),W}d.evaluatedPropsToName=G;function E(_,p,W){Object.keys(W).forEach(K=>_.assign((0,n._)`${p}${(0,n.getProperty)(K)}`,!0))}d.setEvaluated=E;const A={};function x(_,p){return _.scopeValue("func",{ref:p,code:A[p.code]||(A[p.code]=new l._Code(p.code))})}d.useFunc=x;var f;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(f=d.Type||(d.Type={}));function T(_,p,W){if(_ instanceof n.Name){const K=p===f.Num;return W?K?(0,n._)`"[" + ${_} + "]"`:(0,n._)`"['" + ${_} + "']"`:K?(0,n._)`"/" + ${_}`:(0,n._)`"/" + ${_}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return W?(0,n.getProperty)(_).toString():"/"+h(_)}d.getErrorPath=T;function C(_,p,W=_.opts.strictSchema){if(W){if(p=`strict mode: ${p}`,W===!0)throw new Error(p);_.self.logger.warn(p)}}d.checkStrictMode=C},66557:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.shouldUseRule=d.shouldUseGroup=d.schemaHasRulesForType=void 0;function e({schema:u,self:m},a){const c=m.RULES.types[a];return c&&c!==!0&&n(u,c)}d.schemaHasRulesForType=e;function n(u,m){return m.rules.some(a=>l(u,a))}d.shouldUseGroup=n;function l(u,m){var a;return u[m.keyword]!==void 0||((a=m.definition.implements)===null||a===void 0?void 0:a.some(c=>u[c]!==void 0))}d.shouldUseRule=l},74616:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.boolOrEmptySchema=d.topBoolOrEmptySchema=void 0;const n=e(59428),l=e(82481),u=e(99583),m={message:"boolean schema is false"};function a(b){const{gen:t,schema:v,validateName:h}=b;v===!1?P(b,!1):typeof v=="object"&&v.$async===!0?t.return(u.default.data):(t.assign((0,l._)`${h}.errors`,null),t.return(!0))}d.topBoolOrEmptySchema=a;function c(b,t){const{gen:v,schema:h}=b;h===!1?(v.var(t,!1),P(b)):v.var(t,!0)}d.boolOrEmptySchema=c;function P(b,t){const{gen:v,data:h}=b,$={gen:v,keyword:"false schema",data:h,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:b};(0,n.reportError)($,m,void 0,t)}},93277:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.reportTypeError=d.checkDataTypes=d.checkDataType=d.coerceAndCheckDataType=d.getJSONTypes=d.getSchemaTypes=d.DataType=void 0;const n=e(18288),l=e(66557),u=e(59428),m=e(82481),a=e(1849);var c;(function(f){f[f.Correct=0]="Correct",f[f.Wrong=1]="Wrong"})(c=d.DataType||(d.DataType={}));function P(f){const T=b(f.type);if(T.includes("null")){if(f.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!T.length&&f.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');f.nullable===!0&&T.push("null")}return T}d.getSchemaTypes=P;function b(f){const T=Array.isArray(f)?f:f?[f]:[];if(T.every(n.isJSONType))return T;throw new Error("type must be JSONType or JSONType[]: "+T.join(","))}d.getJSONTypes=b;function t(f,T){const{gen:C,data:_,opts:p}=f,W=h(T,p.coerceTypes),K=T.length>0&&!(W.length===0&&T.length===1&&(0,l.schemaHasRulesForType)(f,T[0]));if(K){const Ie=G(T,_,p.strictNumbers,c.Wrong);C.if(Ie,()=>{W.length?$(f,T,W):A(f)})}return K}d.coerceAndCheckDataType=t;const v=new Set(["string","number","integer","boolean","null"]);function h(f,T){return T?f.filter(C=>v.has(C)||T==="array"&&C==="array"):[]}function $(f,T,C){const{gen:_,data:p,opts:W}=f,K=_.let("dataType",(0,m._)`typeof ${p}`),Ie=_.let("coerced",(0,m._)`undefined`);W.coerceTypes==="array"&&_.if((0,m._)`${K} == 'object' && Array.isArray(${p}) && ${p}.length == 1`,()=>_.assign(p,(0,m._)`${p}[0]`).assign(K,(0,m._)`typeof ${p}`).if(G(T,p,W.strictNumbers),()=>_.assign(Ie,p))),_.if((0,m._)`${Ie} !== undefined`);for(const Xe of C)(v.has(Xe)||Xe==="array"&&W.coerceTypes==="array")&&ge(Xe);_.else(),A(f),_.endIf(),_.if((0,m._)`${Ie} !== undefined`,()=>{_.assign(p,Ie),L(f,Ie)});function ge(Xe){switch(Xe){case"string":_.elseIf((0,m._)`${K} == "number" || ${K} == "boolean"`).assign(Ie,(0,m._)`"" + ${p}`).elseIf((0,m._)`${p} === null`).assign(Ie,(0,m._)`""`);return;case"number":_.elseIf((0,m._)`${K} == "boolean" || ${p} === null
              || (${K} == "string" && ${p} && ${p} == +${p})`).assign(Ie,(0,m._)`+${p}`);return;case"integer":_.elseIf((0,m._)`${K} === "boolean" || ${p} === null
              || (${K} === "string" && ${p} && ${p} == +${p} && !(${p} % 1))`).assign(Ie,(0,m._)`+${p}`);return;case"boolean":_.elseIf((0,m._)`${p} === "false" || ${p} === 0 || ${p} === null`).assign(Ie,!1).elseIf((0,m._)`${p} === "true" || ${p} === 1`).assign(Ie,!0);return;case"null":_.elseIf((0,m._)`${p} === "" || ${p} === 0 || ${p} === false`),_.assign(Ie,null);return;case"array":_.elseIf((0,m._)`${K} === "string" || ${K} === "number"
              || ${K} === "boolean" || ${p} === null`).assign(Ie,(0,m._)`[${p}]`)}}}function L({gen:f,parentData:T,parentDataProperty:C},_){f.if((0,m._)`${T} !== undefined`,()=>f.assign((0,m._)`${T}[${C}]`,_))}function k(f,T,C,_=c.Correct){const p=_===c.Correct?m.operators.EQ:m.operators.NEQ;let W;switch(f){case"null":return(0,m._)`${T} ${p} null`;case"array":W=(0,m._)`Array.isArray(${T})`;break;case"object":W=(0,m._)`${T} && typeof ${T} == "object" && !Array.isArray(${T})`;break;case"integer":W=K((0,m._)`!(${T} % 1) && !isNaN(${T})`);break;case"number":W=K();break;default:return(0,m._)`typeof ${T} ${p} ${f}`}return _===c.Correct?W:(0,m.not)(W);function K(Ie=m.nil){return(0,m.and)((0,m._)`typeof ${T} == "number"`,Ie,C?(0,m._)`isFinite(${T})`:m.nil)}}d.checkDataType=k;function G(f,T,C,_){if(f.length===1)return k(f[0],T,C,_);let p;const W=(0,a.toHash)(f);if(W.array&&W.object){const K=(0,m._)`typeof ${T} != "object"`;p=W.null?K:(0,m._)`!${T} || ${K}`,delete W.null,delete W.array,delete W.object}else p=m.nil;W.number&&delete W.integer;for(const K in W)p=(0,m.and)(p,k(K,T,C,_));return p}d.checkDataTypes=G;const E={message:({schema:f})=>`must be ${f}`,params:({schema:f,schemaValue:T})=>typeof f=="string"?(0,m._)`{type: ${f}}`:(0,m._)`{type: ${T}}`};function A(f){const T=x(f);(0,u.reportError)(T,E)}d.reportTypeError=A;function x(f){const{gen:T,data:C,schema:_}=f,p=(0,a.schemaRefOrVal)(f,_,"type");return{gen:T,keyword:"type",data:C,schema:_.type,schemaCode:p,schemaValue:p,parentSchema:_,params:{},it:f}}},35192:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.assignDefaults=void 0;const n=e(82481),l=e(1849);function u(a,c){const{properties:P,items:b}=a.schema;if(c==="object"&&P)for(const t in P)m(a,t,P[t].default);else c==="array"&&Array.isArray(b)&&b.forEach((t,v)=>m(a,v,t.default))}d.assignDefaults=u;function m(a,c,P){const{gen:b,compositeRule:t,data:v,opts:h}=a;if(P===void 0)return;const $=(0,n._)`${v}${(0,n.getProperty)(c)}`;if(t){(0,l.checkStrictMode)(a,`default is ignored for: ${$}`);return}let L=(0,n._)`${$} === undefined`;h.useDefaults==="empty"&&(L=(0,n._)`${L} || ${$} === null || ${$} === ""`),b.if(L,(0,n._)`${$} = ${(0,n.stringify)(P)}`)}},4371:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getData=d.KeywordCxt=d.validateFunctionCode=void 0;const n=e(74616),l=e(93277),u=e(66557),m=e(93277),a=e(35192),c=e(83558),P=e(20521),b=e(82481),t=e(99583),v=e(2710),h=e(1849),$=e(59428);function L(q){if(_(q)&&(W(q),C(q))){A(q);return}k(q,()=>(0,n.topBoolOrEmptySchema)(q))}d.validateFunctionCode=L;function k({gen:q,validateName:oe,schema:Ae,schemaEnv:Je,opts:St},mt){St.code.es5?q.func(oe,(0,b._)`${t.default.data}, ${t.default.valCxt}`,Je.$async,()=>{q.code((0,b._)`"use strict"; ${f(Ae,St)}`),E(q,St),q.code(mt)}):q.func(oe,(0,b._)`${t.default.data}, ${G(St)}`,Je.$async,()=>q.code(f(Ae,St)).code(mt))}function G(q){return(0,b._)`{${t.default.instancePath}="", ${t.default.parentData}, ${t.default.parentDataProperty}, ${t.default.rootData}=${t.default.data}${q.dynamicRef?(0,b._)`, ${t.default.dynamicAnchors}={}`:b.nil}}={}`}function E(q,oe){q.if(t.default.valCxt,()=>{q.var(t.default.instancePath,(0,b._)`${t.default.valCxt}.${t.default.instancePath}`),q.var(t.default.parentData,(0,b._)`${t.default.valCxt}.${t.default.parentData}`),q.var(t.default.parentDataProperty,(0,b._)`${t.default.valCxt}.${t.default.parentDataProperty}`),q.var(t.default.rootData,(0,b._)`${t.default.valCxt}.${t.default.rootData}`),oe.dynamicRef&&q.var(t.default.dynamicAnchors,(0,b._)`${t.default.valCxt}.${t.default.dynamicAnchors}`)},()=>{q.var(t.default.instancePath,(0,b._)`""`),q.var(t.default.parentData,(0,b._)`undefined`),q.var(t.default.parentDataProperty,(0,b._)`undefined`),q.var(t.default.rootData,t.default.data),oe.dynamicRef&&q.var(t.default.dynamicAnchors,(0,b._)`{}`)})}function A(q){const{schema:oe,opts:Ae,gen:Je}=q;k(q,()=>{Ae.$comment&&oe.$comment&&ot(q),ge(q),Je.let(t.default.vErrors,null),Je.let(t.default.errors,0),Ae.unevaluated&&x(q),K(q),Vt(q)})}function x(q){const{gen:oe,validateName:Ae}=q;q.evaluated=oe.const("evaluated",(0,b._)`${Ae}.evaluated`),oe.if((0,b._)`${q.evaluated}.dynamicProps`,()=>oe.assign((0,b._)`${q.evaluated}.props`,(0,b._)`undefined`)),oe.if((0,b._)`${q.evaluated}.dynamicItems`,()=>oe.assign((0,b._)`${q.evaluated}.items`,(0,b._)`undefined`))}function f(q,oe){const Ae=typeof q=="object"&&q[oe.schemaId];return Ae&&(oe.code.source||oe.code.process)?(0,b._)`/*# sourceURL=${Ae} */`:b.nil}function T(q,oe){if(_(q)&&(W(q),C(q))){p(q,oe);return}(0,n.boolOrEmptySchema)(q,oe)}function C({schema:q,self:oe}){if(typeof q=="boolean")return!q;for(const Ae in q)if(oe.RULES.all[Ae])return!0;return!1}function _(q){return typeof q.schema!="boolean"}function p(q,oe){const{schema:Ae,gen:Je,opts:St}=q;St.$comment&&Ae.$comment&&ot(q),Xe(q),$t(q);const mt=Je.const("_errs",t.default.errors);K(q,mt),Je.var(oe,(0,b._)`${mt} === ${t.default.errors}`)}function W(q){(0,h.checkUnknownRules)(q),Ie(q)}function K(q,oe){if(q.opts.jtd)return J(q,[],!1,oe);const Ae=(0,l.getSchemaTypes)(q.schema),Je=(0,l.coerceAndCheckDataType)(q,Ae);J(q,Ae,!Je,oe)}function Ie(q){const{schema:oe,errSchemaPath:Ae,opts:Je,self:St}=q;oe.$ref&&Je.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(oe,St.RULES)&&St.logger.warn(`$ref: keywords ignored in schema at path "${Ae}"`)}function ge(q){const{schema:oe,opts:Ae}=q;oe.default!==void 0&&Ae.useDefaults&&Ae.strictSchema&&(0,h.checkStrictMode)(q,"default is ignored in the schema root")}function Xe(q){const oe=q.schema[q.opts.schemaId];oe&&(q.baseId=(0,v.resolveUrl)(q.opts.uriResolver,q.baseId,oe))}function $t(q){if(q.schema.$async&&!q.schemaEnv.$async)throw new Error("async schema in sync schema")}function ot({gen:q,schemaEnv:oe,schema:Ae,errSchemaPath:Je,opts:St}){const mt=Ae.$comment;if(St.$comment===!0)q.code((0,b._)`${t.default.self}.logger.log(${mt})`);else if(typeof St.$comment=="function"){const rn=(0,b.str)`${Je}/$comment`,Kt=q.scopeValue("root",{ref:oe.root});q.code((0,b._)`${t.default.self}.opts.$comment(${mt}, ${rn}, ${Kt}.schema)`)}}function Vt(q){const{gen:oe,schemaEnv:Ae,validateName:Je,ValidationError:St,opts:mt}=q;Ae.$async?oe.if((0,b._)`${t.default.errors} === 0`,()=>oe.return(t.default.data),()=>oe.throw((0,b._)`new ${St}(${t.default.vErrors})`)):(oe.assign((0,b._)`${Je}.errors`,t.default.vErrors),mt.unevaluated&&kt(q),oe.return((0,b._)`${t.default.errors} === 0`))}function kt({gen:q,evaluated:oe,props:Ae,items:Je}){Ae instanceof b.Name&&q.assign((0,b._)`${oe}.props`,Ae),Je instanceof b.Name&&q.assign((0,b._)`${oe}.items`,Je)}function J(q,oe,Ae,Je){const{gen:St,schema:mt,data:rn,allErrors:Kt,opts:$e,self:_t}=q,{RULES:ct}=_t;if(mt.$ref&&($e.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(mt,ct))){St.block(()=>Ge(q,"$ref",ct.all.$ref.definition));return}$e.jtd||Se(q,oe),St.block(()=>{for(const un of ct.rules)hn(un);hn(ct.post)});function hn(un){(0,u.shouldUseGroup)(mt,un)&&(un.type?(St.if((0,m.checkDataType)(un.type,rn,$e.strictNumbers)),sn(q,un),oe.length===1&&oe[0]===un.type&&Ae&&(St.else(),(0,m.reportTypeError)(q)),St.endIf()):sn(q,un),Kt||St.if((0,b._)`${t.default.errors} === ${Je||0}`))}}function sn(q,oe){const{gen:Ae,schema:Je,opts:{useDefaults:St}}=q;St&&(0,a.assignDefaults)(q,oe.type),Ae.block(()=>{for(const mt of oe.rules)(0,u.shouldUseRule)(Je,mt)&&Ge(q,mt.keyword,mt.definition,oe.type)})}function Se(q,oe){q.schemaEnv.meta||!q.opts.strictTypes||(Ne(q,oe),q.opts.allowUnionTypes||O(q,oe),Le(q,q.dataTypes))}function Ne(q,oe){if(oe.length){if(!q.dataTypes.length){q.dataTypes=oe;return}oe.forEach(Ae=>{R(q.dataTypes,Ae)||te(q,`type "${Ae}" not allowed by context "${q.dataTypes.join(",")}"`)}),N(q,oe)}}function O(q,oe){oe.length>1&&!(oe.length===2&&oe.includes("null"))&&te(q,"use allowUnionTypes to allow union type keyword")}function Le(q,oe){const Ae=q.self.RULES.all;for(const Je in Ae){const St=Ae[Je];if(typeof St=="object"&&(0,u.shouldUseRule)(q.schema,St)){const{type:mt}=St.definition;mt.length&&!mt.some(rn=>ce(oe,rn))&&te(q,`missing type "${mt.join(",")}" for keyword "${Je}"`)}}}function ce(q,oe){return q.includes(oe)||oe==="number"&&q.includes("integer")}function R(q,oe){return q.includes(oe)||oe==="integer"&&q.includes("number")}function N(q,oe){const Ae=[];for(const Je of q.dataTypes)R(oe,Je)?Ae.push(Je):oe.includes("integer")&&Je==="number"&&Ae.push("integer");q.dataTypes=Ae}function te(q,oe){const Ae=q.schemaEnv.baseId+q.errSchemaPath;oe+=` at "${Ae}" (strictTypes)`,(0,h.checkStrictMode)(q,oe,q.opts.strictTypes)}class _e{constructor(oe,Ae,Je){if((0,c.validateKeywordUsage)(oe,Ae,Je),this.gen=oe.gen,this.allErrors=oe.allErrors,this.keyword=Je,this.data=oe.data,this.schema=oe.schema[Je],this.$data=Ae.$data&&oe.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(oe,this.schema,Je,this.$data),this.schemaType=Ae.schemaType,this.parentSchema=oe.schema,this.params={},this.it=oe,this.def=Ae,this.$data)this.schemaCode=oe.gen.const("vSchema",Tt(this.$data,oe));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,Ae.schemaType,Ae.allowUndefined))throw new Error(`${Je} value must be ${JSON.stringify(Ae.schemaType)}`);("code"in Ae?Ae.trackErrors:Ae.errors!==!1)&&(this.errsCount=oe.gen.const("_errs",t.default.errors))}result(oe,Ae,Je){this.failResult((0,b.not)(oe),Ae,Je)}failResult(oe,Ae,Je){this.gen.if(oe),Je?Je():this.error(),Ae?(this.gen.else(),Ae(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(oe,Ae){this.failResult((0,b.not)(oe),void 0,Ae)}fail(oe){if(oe===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(oe),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(oe){if(!this.$data)return this.fail(oe);const{schemaCode:Ae}=this;this.fail((0,b._)`${Ae} !== undefined && (${(0,b.or)(this.invalid$data(),oe)})`)}error(oe,Ae,Je){if(Ae){this.setParams(Ae),this._error(oe,Je),this.setParams({});return}this._error(oe,Je)}_error(oe,Ae){(oe?$.reportExtraError:$.reportError)(this,this.def.error,Ae)}$dataError(){(0,$.reportError)(this,this.def.$dataError||$.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$.resetErrorsCount)(this.gen,this.errsCount)}ok(oe){this.allErrors||this.gen.if(oe)}setParams(oe,Ae){Ae?Object.assign(this.params,oe):this.params=oe}block$data(oe,Ae,Je=b.nil){this.gen.block(()=>{this.check$data(oe,Je),Ae()})}check$data(oe=b.nil,Ae=b.nil){if(!this.$data)return;const{gen:Je,schemaCode:St,schemaType:mt,def:rn}=this;Je.if((0,b.or)((0,b._)`${St} === undefined`,Ae)),oe!==b.nil&&Je.assign(oe,!0),(mt.length||rn.validateSchema)&&(Je.elseIf(this.invalid$data()),this.$dataError(),oe!==b.nil&&Je.assign(oe,!1)),Je.else()}invalid$data(){const{gen:oe,schemaCode:Ae,schemaType:Je,def:St,it:mt}=this;return(0,b.or)(rn(),Kt());function rn(){if(Je.length){if(!(Ae instanceof b.Name))throw new Error("ajv implementation error");const $e=Array.isArray(Je)?Je:[Je];return(0,b._)`${(0,m.checkDataTypes)($e,Ae,mt.opts.strictNumbers,m.DataType.Wrong)}`}return b.nil}function Kt(){if(St.validateSchema){const $e=oe.scopeValue("validate$data",{ref:St.validateSchema});return(0,b._)`!${$e}(${Ae})`}return b.nil}}subschema(oe,Ae){const Je=(0,P.getSubschema)(this.it,oe);(0,P.extendSubschemaData)(Je,this.it,oe),(0,P.extendSubschemaMode)(Je,oe);const St={...this.it,...Je,items:void 0,props:void 0};return T(St,Ae),St}mergeEvaluated(oe,Ae){const{it:Je,gen:St}=this;Je.opts.unevaluated&&(Je.props!==!0&&oe.props!==void 0&&(Je.props=h.mergeEvaluated.props(St,oe.props,Je.props,Ae)),Je.items!==!0&&oe.items!==void 0&&(Je.items=h.mergeEvaluated.items(St,oe.items,Je.items,Ae)))}mergeValidEvaluated(oe,Ae){const{it:Je,gen:St}=this;if(Je.opts.unevaluated&&(Je.props!==!0||Je.items!==!0))return St.if(Ae,()=>this.mergeEvaluated(oe,b.Name)),!0}}d.KeywordCxt=_e;function Ge(q,oe,Ae,Je){const St=new _e(q,Ae,oe);"code"in Ae?Ae.code(St,Je):St.$data&&Ae.validate?(0,c.funcKeywordCode)(St,Ae):"macro"in Ae?(0,c.macroKeywordCode)(St,Ae):(Ae.compile||Ae.validate)&&(0,c.funcKeywordCode)(St,Ae)}const wt=/^\/(?:[^~]|~0|~1)*$/,pt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Tt(q,{dataLevel:oe,dataNames:Ae,dataPathArr:Je}){let St,mt;if(q==="")return t.default.rootData;if(q[0]==="/"){if(!wt.test(q))throw new Error(`Invalid JSON-pointer: ${q}`);St=q,mt=t.default.rootData}else{const _t=pt.exec(q);if(!_t)throw new Error(`Invalid JSON-pointer: ${q}`);const ct=+_t[1];if(St=_t[2],St==="#"){if(ct>=oe)throw new Error($e("property/index",ct));return Je[oe-ct]}if(ct>oe)throw new Error($e("data",ct));if(mt=Ae[oe-ct],!St)return mt}let rn=mt;const Kt=St.split("/");for(const _t of Kt)_t&&(mt=(0,b._)`${mt}${(0,b.getProperty)((0,h.unescapeJsonPointer)(_t))}`,rn=(0,b._)`${rn} && ${mt}`);return rn;function $e(_t,ct){return`Cannot access ${_t} ${ct} levels up, current level is ${oe}`}}d.getData=Tt},83558:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateKeywordUsage=d.validSchemaType=d.funcKeywordCode=d.macroKeywordCode=void 0;const n=e(82481),l=e(99583),u=e(9280),m=e(59428);function a(L,k){const{gen:G,keyword:E,schema:A,parentSchema:x,it:f}=L,T=k.macro.call(f.self,A,x,f),C=v(G,E,T);f.opts.validateSchema!==!1&&f.self.validateSchema(T,!0);const _=G.name("valid");L.subschema({schema:T,schemaPath:n.nil,errSchemaPath:`${f.errSchemaPath}/${E}`,topSchemaRef:C,compositeRule:!0},_),L.pass(_,()=>L.error(!0))}d.macroKeywordCode=a;function c(L,k){var G;const{gen:E,keyword:A,schema:x,parentSchema:f,$data:T,it:C}=L;t(C,k);const _=!T&&k.compile?k.compile.call(C.self,x,f,C):k.validate,p=v(E,A,_),W=E.let("valid");L.block$data(W,K),L.ok((G=k.valid)!==null&&G!==void 0?G:W);function K(){if(k.errors===!1)Xe(),k.modifying&&P(L),$t(()=>L.error());else{const ot=k.async?Ie():ge();k.modifying&&P(L),$t(()=>b(L,ot))}}function Ie(){const ot=E.let("ruleErrs",null);return E.try(()=>Xe((0,n._)`await `),Vt=>E.assign(W,!1).if((0,n._)`${Vt} instanceof ${C.ValidationError}`,()=>E.assign(ot,(0,n._)`${Vt}.errors`),()=>E.throw(Vt))),ot}function ge(){const ot=(0,n._)`${p}.errors`;return E.assign(ot,null),Xe(n.nil),ot}function Xe(ot=k.async?(0,n._)`await `:n.nil){const Vt=C.opts.passContext?l.default.this:l.default.self,kt=!("compile"in k&&!T||k.schema===!1);E.assign(W,(0,n._)`${ot}${(0,u.callValidateCode)(L,p,Vt,kt)}`,k.modifying)}function $t(ot){var Vt;E.if((0,n.not)((Vt=k.valid)!==null&&Vt!==void 0?Vt:W),ot)}}d.funcKeywordCode=c;function P(L){const{gen:k,data:G,it:E}=L;k.if(E.parentData,()=>k.assign(G,(0,n._)`${E.parentData}[${E.parentDataProperty}]`))}function b(L,k){const{gen:G}=L;G.if((0,n._)`Array.isArray(${k})`,()=>{G.assign(l.default.vErrors,(0,n._)`${l.default.vErrors} === null ? ${k} : ${l.default.vErrors}.concat(${k})`).assign(l.default.errors,(0,n._)`${l.default.vErrors}.length`),(0,m.extendErrors)(L)},()=>L.error())}function t({schemaEnv:L},k){if(k.async&&!L.$async)throw new Error("async keyword in sync schema")}function v(L,k,G){if(G===void 0)throw new Error(`keyword "${k}" failed to compile`);return L.scopeValue("keyword",typeof G=="function"?{ref:G}:{ref:G,code:(0,n.stringify)(G)})}function h(L,k,G=!1){return!k.length||k.some(E=>E==="array"?Array.isArray(L):E==="object"?L&&typeof L=="object"&&!Array.isArray(L):typeof L==E||G&&typeof L=="undefined")}d.validSchemaType=h;function $({schema:L,opts:k,self:G,errSchemaPath:E},A,x){if(Array.isArray(A.keyword)?!A.keyword.includes(x):A.keyword!==x)throw new Error("ajv implementation error");const f=A.dependencies;if(f!=null&&f.some(T=>!Object.prototype.hasOwnProperty.call(L,T)))throw new Error(`parent schema must have dependencies of ${x}: ${f.join(",")}`);if(A.validateSchema&&!A.validateSchema(L[x])){const C=`keyword "${x}" value is invalid at path "${E}": `+G.errorsText(A.validateSchema.errors);if(k.validateSchema==="log")G.logger.error(C);else throw new Error(C)}}d.validateKeywordUsage=$},20521:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendSubschemaMode=d.extendSubschemaData=d.getSubschema=void 0;const n=e(82481),l=e(1849);function u(c,{keyword:P,schemaProp:b,schema:t,schemaPath:v,errSchemaPath:h,topSchemaRef:$}){if(P!==void 0&&t!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(P!==void 0){const L=c.schema[P];return b===void 0?{schema:L,schemaPath:(0,n._)`${c.schemaPath}${(0,n.getProperty)(P)}`,errSchemaPath:`${c.errSchemaPath}/${P}`}:{schema:L[b],schemaPath:(0,n._)`${c.schemaPath}${(0,n.getProperty)(P)}${(0,n.getProperty)(b)}`,errSchemaPath:`${c.errSchemaPath}/${P}/${(0,l.escapeFragment)(b)}`}}if(t!==void 0){if(v===void 0||h===void 0||$===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:t,schemaPath:v,topSchemaRef:$,errSchemaPath:h}}throw new Error('either "keyword" or "schema" must be passed')}d.getSubschema=u;function m(c,P,{dataProp:b,dataPropType:t,data:v,dataTypes:h,propertyName:$}){if(v!==void 0&&b!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:L}=P;if(b!==void 0){const{errorPath:G,dataPathArr:E,opts:A}=P,x=L.let("data",(0,n._)`${P.data}${(0,n.getProperty)(b)}`,!0);k(x),c.errorPath=(0,n.str)`${G}${(0,l.getErrorPath)(b,t,A.jsPropertySyntax)}`,c.parentDataProperty=(0,n._)`${b}`,c.dataPathArr=[...E,c.parentDataProperty]}if(v!==void 0){const G=v instanceof n.Name?v:L.let("data",v,!0);k(G),$!==void 0&&(c.propertyName=$)}h&&(c.dataTypes=h);function k(G){c.data=G,c.dataLevel=P.dataLevel+1,c.dataTypes=[],P.definedProperties=new Set,c.parentData=P.data,c.dataNames=[...P.dataNames,G]}}d.extendSubschemaData=m;function a(c,{jtdDiscriminator:P,jtdMetadata:b,compositeRule:t,createErrors:v,allErrors:h}){t!==void 0&&(c.compositeRule=t),v!==void 0&&(c.createErrors=v),h!==void 0&&(c.allErrors=h),c.jtdDiscriminator=P,c.jtdMetadata=b}d.extendSubschemaMode=a},61889:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;var n=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var l=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});const u=e(14319),m=e(30283),a=e(18288),c=e(62902),P=e(82481),b=e(2710),t=e(93277),v=e(1849),h=e(85310),$=e(3075),L=(Ne,O)=>new RegExp(Ne,O);L.code="new RegExp";const k=["removeAdditional","useDefaults","coerceTypes"],G=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},x=200;function f(Ne){var O,Le,ce,R,N,te,_e,Ge,wt,pt,Tt,q,oe,Ae,Je,St,mt,rn,Kt,$e,_t,ct,hn,un,vn;const st=Ne.strict,Pt=(O=Ne.code)===null||O===void 0?void 0:O.optimize,fn=Pt===!0||Pt===void 0?1:Pt||0,pn=(ce=(Le=Ne.code)===null||Le===void 0?void 0:Le.regExp)!==null&&ce!==void 0?ce:L,fe=(R=Ne.uriResolver)!==null&&R!==void 0?R:$.default;return{strictSchema:(te=(N=Ne.strictSchema)!==null&&N!==void 0?N:st)!==null&&te!==void 0?te:!0,strictNumbers:(Ge=(_e=Ne.strictNumbers)!==null&&_e!==void 0?_e:st)!==null&&Ge!==void 0?Ge:!0,strictTypes:(pt=(wt=Ne.strictTypes)!==null&&wt!==void 0?wt:st)!==null&&pt!==void 0?pt:"log",strictTuples:(q=(Tt=Ne.strictTuples)!==null&&Tt!==void 0?Tt:st)!==null&&q!==void 0?q:"log",strictRequired:(Ae=(oe=Ne.strictRequired)!==null&&oe!==void 0?oe:st)!==null&&Ae!==void 0?Ae:!1,code:Ne.code?{...Ne.code,optimize:fn,regExp:pn}:{optimize:fn,regExp:pn},loopRequired:(Je=Ne.loopRequired)!==null&&Je!==void 0?Je:x,loopEnum:(St=Ne.loopEnum)!==null&&St!==void 0?St:x,meta:(mt=Ne.meta)!==null&&mt!==void 0?mt:!0,messages:(rn=Ne.messages)!==null&&rn!==void 0?rn:!0,inlineRefs:(Kt=Ne.inlineRefs)!==null&&Kt!==void 0?Kt:!0,schemaId:($e=Ne.schemaId)!==null&&$e!==void 0?$e:"$id",addUsedSchema:(_t=Ne.addUsedSchema)!==null&&_t!==void 0?_t:!0,validateSchema:(ct=Ne.validateSchema)!==null&&ct!==void 0?ct:!0,validateFormats:(hn=Ne.validateFormats)!==null&&hn!==void 0?hn:!0,unicodeRegExp:(un=Ne.unicodeRegExp)!==null&&un!==void 0?un:!0,int32range:(vn=Ne.int32range)!==null&&vn!==void 0?vn:!0,uriResolver:fe}}class T{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...f(O)};const{es5:Le,lines:ce}=this.opts.code;this.scope=new P.ValueScope({scope:{},prefixes:G,es5:Le,lines:ce}),this.logger=Xe(O.logger);const R=O.validateFormats;O.validateFormats=!1,this.RULES=(0,a.getRules)(),C.call(this,E,O,"NOT SUPPORTED"),C.call(this,A,O,"DEPRECATED","warn"),this._metaOpts=Ie.call(this),O.formats&&W.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&K.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),p.call(this),O.validateFormats=R}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:Le,schemaId:ce}=this.opts;let R=h;ce==="id"&&(R={...h},R.id=R.$id,delete R.$id),Le&&O&&this.addMetaSchema(R,R[ce],!1)}defaultMeta(){const{meta:O,schemaId:Le}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[Le]||O:void 0}validate(O,Le){let ce;if(typeof O=="string"){if(ce=this.getSchema(O),!ce)throw new Error(`no schema with key or ref "${O}"`)}else ce=this.compile(O);const R=ce(Le);return"$async"in ce||(this.errors=ce.errors),R}compile(O,Le){const ce=this._addSchema(O,Le);return ce.validate||this._compileSchemaEnv(ce)}compileAsync(O,Le){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ce}=this.opts;return R.call(this,O,Le);async function R(pt,Tt){await N.call(this,pt.$schema);const q=this._addSchema(pt,Tt);return q.validate||te.call(this,q)}async function N(pt){pt&&!this.getSchema(pt)&&await R.call(this,{$ref:pt},!0)}async function te(pt){try{return this._compileSchemaEnv(pt)}catch(Tt){if(!(Tt instanceof m.default))throw Tt;return _e.call(this,Tt),await Ge.call(this,Tt.missingSchema),te.call(this,pt)}}function _e({missingSchema:pt,missingRef:Tt}){if(this.refs[pt])throw new Error(`AnySchema ${pt} is loaded but ${Tt} cannot be resolved`)}async function Ge(pt){const Tt=await wt.call(this,pt);this.refs[pt]||await N.call(this,Tt.$schema),this.refs[pt]||this.addSchema(Tt,pt,Le)}async function wt(pt){const Tt=this._loading[pt];if(Tt)return Tt;try{return await(this._loading[pt]=ce(pt))}finally{delete this._loading[pt]}}}addSchema(O,Le,ce,R=this.opts.validateSchema){if(Array.isArray(O)){for(const te of O)this.addSchema(te,void 0,ce,R);return this}let N;if(typeof O=="object"){const{schemaId:te}=this.opts;if(N=O[te],N!==void 0&&typeof N!="string")throw new Error(`schema ${te} must be string`)}return Le=(0,b.normalizeId)(Le||N),this._checkUnique(Le),this.schemas[Le]=this._addSchema(O,ce,Le,R,!0),this}addMetaSchema(O,Le,ce=this.opts.validateSchema){return this.addSchema(O,Le,!0,ce),this}validateSchema(O,Le){if(typeof O=="boolean")return!0;let ce;if(ce=O.$schema,ce!==void 0&&typeof ce!="string")throw new Error("$schema must be a string");if(ce=ce||this.opts.defaultMeta||this.defaultMeta(),!ce)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const R=this.validate(ce,O);if(!R&&Le){const N="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(N);else throw new Error(N)}return R}getSchema(O){let Le;for(;typeof(Le=_.call(this,O))=="string";)O=Le;if(Le===void 0){const{schemaId:ce}=this.opts,R=new c.SchemaEnv({schema:{},schemaId:ce});if(Le=c.resolveSchema.call(this,R,O),!Le)return;this.refs[O]=Le}return Le.validate||this._compileSchemaEnv(Le)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Le=_.call(this,O);return typeof Le=="object"&&this._cache.delete(Le.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const Le=O;this._cache.delete(Le);let ce=O[this.opts.schemaId];return ce&&(ce=(0,b.normalizeId)(ce),delete this.schemas[ce],delete this.refs[ce]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const Le of O)this.addKeyword(Le);return this}addKeyword(O,Le){let ce;if(typeof O=="string")ce=O,typeof Le=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Le.keyword=ce);else if(typeof O=="object"&&Le===void 0){if(Le=O,ce=Le.keyword,Array.isArray(ce)&&!ce.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ot.call(this,ce,Le),!Le)return(0,v.eachItem)(ce,N=>Vt.call(this,N)),this;J.call(this,Le);const R={...Le,type:(0,t.getJSONTypes)(Le.type),schemaType:(0,t.getJSONTypes)(Le.schemaType)};return(0,v.eachItem)(ce,R.type.length===0?N=>Vt.call(this,N,R):N=>R.type.forEach(te=>Vt.call(this,N,R,te))),this}getKeyword(O){const Le=this.RULES.all[O];return typeof Le=="object"?Le.definition:!!Le}removeKeyword(O){const{RULES:Le}=this;delete Le.keywords[O],delete Le.all[O];for(const ce of Le.rules){const R=ce.rules.findIndex(N=>N.keyword===O);R>=0&&ce.rules.splice(R,1)}return this}addFormat(O,Le){return typeof Le=="string"&&(Le=new RegExp(Le)),this.formats[O]=Le,this}errorsText(O=this.errors,{separator:Le=", ",dataVar:ce="data"}={}){return!O||O.length===0?"No errors":O.map(R=>`${ce}${R.instancePath} ${R.message}`).reduce((R,N)=>R+Le+N)}$dataMetaSchema(O,Le){const ce=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const R of Le){const N=R.split("/").slice(1);let te=O;for(const _e of N)te=te[_e];for(const _e in ce){const Ge=ce[_e];if(typeof Ge!="object")continue;const{$data:wt}=Ge.definition,pt=te[_e];wt&&pt&&(te[_e]=Se(pt))}}return O}_removeAllSchemas(O,Le){for(const ce in O){const R=O[ce];(!Le||Le.test(ce))&&(typeof R=="string"?delete O[ce]:R&&!R.meta&&(this._cache.delete(R.schema),delete O[ce]))}}_addSchema(O,Le,ce,R=this.opts.validateSchema,N=this.opts.addUsedSchema){let te;const{schemaId:_e}=this.opts;if(typeof O=="object")te=O[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let Ge=this._cache.get(O);if(Ge!==void 0)return Ge;ce=(0,b.normalizeId)(te||ce);const wt=b.getSchemaRefs.call(this,O,ce);return Ge=new c.SchemaEnv({schema:O,schemaId:_e,meta:Le,baseId:ce,localRefs:wt}),this._cache.set(Ge.schema,Ge),N&&!ce.startsWith("#")&&(ce&&this._checkUnique(ce),this.refs[ce]=Ge),R&&this.validateSchema(O,!0),Ge}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):c.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const Le=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,O)}finally{this.opts=Le}}}d.default=T,T.ValidationError=u.default,T.MissingRefError=m.default;function C(Ne,O,Le,ce="error"){for(const R in Ne){const N=R;N in O&&this.logger[ce](`${Le}: option ${R}. ${Ne[N]}`)}}function _(Ne){return Ne=(0,b.normalizeId)(Ne),this.schemas[Ne]||this.refs[Ne]}function p(){const Ne=this.opts.schemas;if(Ne)if(Array.isArray(Ne))this.addSchema(Ne);else for(const O in Ne)this.addSchema(Ne[O],O)}function W(){for(const Ne in this.opts.formats){const O=this.opts.formats[Ne];O&&this.addFormat(Ne,O)}}function K(Ne){if(Array.isArray(Ne)){this.addVocabulary(Ne);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in Ne){const Le=Ne[O];Le.keyword||(Le.keyword=O),this.addKeyword(Le)}}function Ie(){const Ne={...this.opts};for(const O of k)delete Ne[O];return Ne}const ge={log(){},warn(){},error(){}};function Xe(Ne){if(Ne===!1)return ge;if(Ne===void 0)return console;if(Ne.log&&Ne.warn&&Ne.error)return Ne;throw new Error("logger must implement log, warn and error methods")}const $t=/^[a-z_$][a-z0-9_$:-]*$/i;function ot(Ne,O){const{RULES:Le}=this;if((0,v.eachItem)(Ne,ce=>{if(Le.keywords[ce])throw new Error(`Keyword ${ce} is already defined`);if(!$t.test(ce))throw new Error(`Keyword ${ce} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function Vt(Ne,O,Le){var ce;const R=O==null?void 0:O.post;if(Le&&R)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:N}=this;let te=R?N.post:N.rules.find(({type:Ge})=>Ge===Le);if(te||(te={type:Le,rules:[]},N.rules.push(te)),N.keywords[Ne]=!0,!O)return;const _e={keyword:Ne,definition:{...O,type:(0,t.getJSONTypes)(O.type),schemaType:(0,t.getJSONTypes)(O.schemaType)}};O.before?kt.call(this,te,_e,O.before):te.rules.push(_e),N.all[Ne]=_e,(ce=O.implements)===null||ce===void 0||ce.forEach(Ge=>this.addKeyword(Ge))}function kt(Ne,O,Le){const ce=Ne.rules.findIndex(R=>R.keyword===Le);ce>=0?Ne.rules.splice(ce,0,O):(Ne.rules.push(O),this.logger.warn(`rule ${Le} is not defined`))}function J(Ne){let{metaSchema:O}=Ne;O!==void 0&&(Ne.$data&&this.opts.$data&&(O=Se(O)),Ne.validateSchema=this.compile(O,!0))}const sn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Se(Ne){return{anyOf:[Ne,sn]}}},55947:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(69378);n.code='require("ajv/dist/runtime/equal").default',d.default=n},7836:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});function e(n){const l=n.length;let u=0,m=0,a;for(;m<l;)u++,a=n.charCodeAt(m++),a>=55296&&a<=56319&&m<l&&(a=n.charCodeAt(m),(a&64512)===56320&&m++);return u}d.default=e,e.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(12854);n.code='require("ajv/dist/runtime/uri").default',d.default=n},14319:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});class e extends Error{constructor(l){super("validation failed"),this.errors=l,this.ajv=this.validation=!0}}d.default=e},52251:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateAdditionalItems=void 0;const n=e(82481),l=e(1849),m={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:c}})=>(0,n.str)`must NOT have more than ${c} items`,params:({params:{len:c}})=>(0,n._)`{limit: ${c}}`},code(c){const{parentSchema:P,it:b}=c,{items:t}=P;if(!Array.isArray(t)){(0,l.checkStrictMode)(b,'"additionalItems" is ignored when "items" is not an array of schemas');return}a(c,t)}};function a(c,P){const{gen:b,schema:t,data:v,keyword:h,it:$}=c;$.items=!0;const L=b.const("len",(0,n._)`${v}.length`);if(t===!1)c.setParams({len:P.length}),c.pass((0,n._)`${L} <= ${P.length}`);else if(typeof t=="object"&&!(0,l.alwaysValidSchema)($,t)){const G=b.var("valid",(0,n._)`${L} <= ${P.length}`);b.if((0,n.not)(G),()=>k(G)),c.ok(G)}function k(G){b.forRange("i",P.length,L,E=>{c.subschema({keyword:h,dataProp:E,dataPropType:l.Type.Num},G),$.allErrors||b.if((0,n.not)(G),()=>b.break())})}}d.validateAdditionalItems=a,d.default=m},17831:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(99583),m=e(1849),c={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:P})=>(0,l._)`{additionalProperty: ${P.additionalProperty}}`},code(P){const{gen:b,schema:t,parentSchema:v,data:h,errsCount:$,it:L}=P;if(!$)throw new Error("ajv implementation error");const{allErrors:k,opts:G}=L;if(L.props=!0,G.removeAdditional!=="all"&&(0,m.alwaysValidSchema)(L,t))return;const E=(0,n.allSchemaProperties)(v.properties),A=(0,n.allSchemaProperties)(v.patternProperties);x(),P.ok((0,l._)`${$} === ${u.default.errors}`);function x(){b.forIn("key",h,p=>{!E.length&&!A.length?C(p):b.if(f(p),()=>C(p))})}function f(p){let W;if(E.length>8){const K=(0,m.schemaRefOrVal)(L,v.properties,"properties");W=(0,n.isOwnProperty)(b,K,p)}else E.length?W=(0,l.or)(...E.map(K=>(0,l._)`${p} === ${K}`)):W=l.nil;return A.length&&(W=(0,l.or)(W,...A.map(K=>(0,l._)`${(0,n.usePattern)(P,K)}.test(${p})`))),(0,l.not)(W)}function T(p){b.code((0,l._)`delete ${h}[${p}]`)}function C(p){if(G.removeAdditional==="all"||G.removeAdditional&&t===!1){T(p);return}if(t===!1){P.setParams({additionalProperty:p}),P.error(),k||b.break();return}if(typeof t=="object"&&!(0,m.alwaysValidSchema)(L,t)){const W=b.name("valid");G.removeAdditional==="failing"?(_(p,W,!1),b.if((0,l.not)(W),()=>{P.reset(),T(p)})):(_(p,W),k||b.if((0,l.not)(W),()=>b.break()))}}function _(p,W,K){const Ie={keyword:"additionalProperties",dataProp:p,dataPropType:m.Type.Str};K===!1&&Object.assign(Ie,{compositeRule:!0,createErrors:!1,allErrors:!1}),P.subschema(Ie,W)}}};d.default=c},15319:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:"allOf",schemaType:"array",code(u){const{gen:m,schema:a,it:c}=u;if(!Array.isArray(a))throw new Error("ajv implementation error");const P=m.name("valid");a.forEach((b,t)=>{if((0,n.alwaysValidSchema)(c,b))return;const v=u.subschema({keyword:"allOf",schemaProp:t},P);u.ok(P),u.mergeEvaluated(v)})}};d.default=l},60513:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const l={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e(9280).validateUnion,error:{message:"must match a schema in anyOf"}};d.default=l},51622:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:a,max:c}})=>c===void 0?(0,n.str)`must contain at least ${a} valid item(s)`:(0,n.str)`must contain at least ${a} and no more than ${c} valid item(s)`,params:({params:{min:a,max:c}})=>c===void 0?(0,n._)`{minContains: ${a}}`:(0,n._)`{minContains: ${a}, maxContains: ${c}}`},code(a){const{gen:c,schema:P,parentSchema:b,data:t,it:v}=a;let h,$;const{minContains:L,maxContains:k}=b;v.opts.next?(h=L===void 0?1:L,$=k):h=1;const G=c.const("len",(0,n._)`${t}.length`);if(a.setParams({min:h,max:$}),$===void 0&&h===0){(0,l.checkStrictMode)(v,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&h>$){(0,l.checkStrictMode)(v,'"minContains" > "maxContains" is always invalid'),a.fail();return}if((0,l.alwaysValidSchema)(v,P)){let T=(0,n._)`${G} >= ${h}`;$!==void 0&&(T=(0,n._)`${T} && ${G} <= ${$}`),a.pass(T);return}v.items=!0;const E=c.name("valid");$===void 0&&h===1?x(E,()=>c.if(E,()=>c.break())):h===0?(c.let(E,!0),$!==void 0&&c.if((0,n._)`${t}.length > 0`,A)):(c.let(E,!1),A()),a.result(E,()=>a.reset());function A(){const T=c.name("_valid"),C=c.let("count",0);x(T,()=>c.if(T,()=>f(C)))}function x(T,C){c.forRange("i",0,G,_=>{a.subschema({keyword:"contains",dataProp:_,dataPropType:l.Type.Num,compositeRule:!0},T),C()})}function f(T){c.code((0,n._)`${T}++`),$===void 0?c.if((0,n._)`${T} >= ${h}`,()=>c.assign(E,!0).break()):(c.if((0,n._)`${T} > ${$}`,()=>c.assign(E,!1).break()),h===1?c.assign(E,!0):c.if((0,n._)`${T} >= ${h}`,()=>c.assign(E,!0)))}}};d.default=m},8524:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateSchemaDeps=d.validatePropertyDeps=d.error=void 0;const n=e(82481),l=e(1849),u=e(9280);d.error={message:({params:{property:b,depsCount:t,deps:v}})=>{const h=t===1?"property":"properties";return(0,n.str)`must have ${h} ${v} when property ${b} is present`},params:({params:{property:b,depsCount:t,deps:v,missingProperty:h}})=>(0,n._)`{property: ${b},
    missingProperty: ${h},
    depsCount: ${t},
    deps: ${v}}`};const m={keyword:"dependencies",type:"object",schemaType:"object",error:d.error,code(b){const[t,v]=a(b);c(b,t),P(b,v)}};function a({schema:b}){const t={},v={};for(const h in b){if(h==="__proto__")continue;const $=Array.isArray(b[h])?t:v;$[h]=b[h]}return[t,v]}function c(b,t=b.schema){const{gen:v,data:h,it:$}=b;if(Object.keys(t).length===0)return;const L=v.let("missing");for(const k in t){const G=t[k];if(G.length===0)continue;const E=(0,u.propertyInData)(v,h,k,$.opts.ownProperties);b.setParams({property:k,depsCount:G.length,deps:G.join(", ")}),$.allErrors?v.if(E,()=>{for(const A of G)(0,u.checkReportMissingProp)(b,A)}):(v.if((0,n._)`${E} && (${(0,u.checkMissingProp)(b,G,L)})`),(0,u.reportMissingProp)(b,L),v.else())}}d.validatePropertyDeps=c;function P(b,t=b.schema){const{gen:v,data:h,keyword:$,it:L}=b,k=v.name("valid");for(const G in t)(0,l.alwaysValidSchema)(L,t[G])||(v.if((0,u.propertyInData)(v,h,G,L.opts.ownProperties),()=>{const E=b.subschema({keyword:$,schemaProp:G},k);b.mergeValidEvaluated(E,k)},()=>v.var(k,!0)),b.ok(k))}d.validateSchemaDeps=P,d.default=m},74413:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:c})=>(0,n.str)`must match "${c.ifClause}" schema`,params:({params:c})=>(0,n._)`{failingKeyword: ${c.ifClause}}`},code(c){const{gen:P,parentSchema:b,it:t}=c;b.then===void 0&&b.else===void 0&&(0,l.checkStrictMode)(t,'"if" without "then" and "else" is ignored');const v=a(t,"then"),h=a(t,"else");if(!v&&!h)return;const $=P.let("valid",!0),L=P.name("_valid");if(k(),c.reset(),v&&h){const E=P.let("ifClause");c.setParams({ifClause:E}),P.if(L,G("then",E),G("else",E))}else v?P.if(L,G("then")):P.if((0,n.not)(L),G("else"));c.pass($,()=>c.error(!0));function k(){const E=c.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},L);c.mergeEvaluated(E)}function G(E,A){return()=>{const x=c.subschema({keyword:E},L);P.assign($,L),c.mergeValidEvaluated(x,$),A?P.assign(A,(0,n._)`${E}`):c.setParams({ifClause:E})}}}};function a(c,P){const b=c.schema[P];return b!==void 0&&!(0,l.alwaysValidSchema)(c,b)}d.default=m},14226:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(52251),l=e(38968),u=e(3042),m=e(69719),a=e(51622),c=e(8524),P=e(53261),b=e(17831),t=e(81734),v=e(47673),h=e(73270),$=e(60513),L=e(84959),k=e(15319),G=e(74413),E=e(5095);function A(x=!1){const f=[h.default,$.default,L.default,k.default,G.default,E.default,P.default,b.default,c.default,t.default,v.default];return x?f.push(l.default,m.default):f.push(n.default,u.default),f.push(a.default),f}d.default=A},3042:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateTuple=void 0;const n=e(82481),l=e(1849),u=e(9280),m={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(c){const{schema:P,it:b}=c;if(Array.isArray(P))return a(c,"additionalItems",P);b.items=!0,!(0,l.alwaysValidSchema)(b,P)&&c.ok((0,u.validateArray)(c))}};function a(c,P,b=c.schema){const{gen:t,parentSchema:v,data:h,keyword:$,it:L}=c;E(v),L.opts.unevaluated&&b.length&&L.items!==!0&&(L.items=l.mergeEvaluated.items(t,b.length,L.items));const k=t.name("valid"),G=t.const("len",(0,n._)`${h}.length`);b.forEach((A,x)=>{(0,l.alwaysValidSchema)(L,A)||(t.if((0,n._)`${G} > ${x}`,()=>c.subschema({keyword:$,schemaProp:x,dataProp:x},k)),c.ok(k))});function E(A){const{opts:x,errSchemaPath:f}=L,T=b.length,C=T===A.minItems&&(T===A.maxItems||A[P]===!1);if(x.strictTuples&&!C){const _=`"${$}" is ${T}-tuple, but minItems or maxItems/${P} are not specified or different at path "${f}"`;(0,l.checkStrictMode)(L,_,x.strictTuples)}}}d.validateTuple=a,d.default=m},69719:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(9280),m=e(52251),c={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:P}})=>(0,n.str)`must NOT have more than ${P} items`,params:({params:{len:P}})=>(0,n._)`{limit: ${P}}`},code(P){const{schema:b,parentSchema:t,it:v}=P,{prefixItems:h}=t;v.items=!0,!(0,l.alwaysValidSchema)(v,b)&&(h?(0,m.validateAdditionalItems)(P,h):P.ok((0,u.validateArray)(P)))}};d.default=c},73270:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(u){const{gen:m,schema:a,it:c}=u;if((0,n.alwaysValidSchema)(c,a)){u.fail();return}const P=m.name("valid");u.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},P),u.failResult(P,()=>u.reset(),()=>u.error())},error:{message:"must NOT be valid"}};d.default=l},84959:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:a})=>(0,n._)`{passingSchemas: ${a.passing}}`},code(a){const{gen:c,schema:P,parentSchema:b,it:t}=a;if(!Array.isArray(P))throw new Error("ajv implementation error");if(t.opts.discriminator&&b.discriminator)return;const v=P,h=c.let("valid",!1),$=c.let("passing",null),L=c.name("_valid");a.setParams({passing:$}),c.block(k),a.result(h,()=>a.reset(),()=>a.error(!0));function k(){v.forEach((G,E)=>{let A;(0,l.alwaysValidSchema)(t,G)?c.var(L,!0):A=a.subschema({keyword:"oneOf",schemaProp:E,compositeRule:!0},L),E>0&&c.if((0,n._)`${L} && ${h}`).assign(h,!1).assign($,(0,n._)`[${$}, ${E}]`).else(),c.if(L,()=>{c.assign(h,!0),c.assign($,E),A&&a.mergeEvaluated(A,n.Name)})})}}};d.default=m},47673:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(1849),m=e(1849),a={keyword:"patternProperties",type:"object",schemaType:"object",code(c){const{gen:P,schema:b,data:t,parentSchema:v,it:h}=c,{opts:$}=h,L=(0,n.allSchemaProperties)(b),k=L.filter(C=>(0,u.alwaysValidSchema)(h,b[C]));if(L.length===0||k.length===L.length&&(!h.opts.unevaluated||h.props===!0))return;const G=$.strictSchema&&!$.allowMatchingProperties&&v.properties,E=P.name("valid");h.props!==!0&&!(h.props instanceof l.Name)&&(h.props=(0,m.evaluatedPropsToName)(P,h.props));const{props:A}=h;x();function x(){for(const C of L)G&&f(C),h.allErrors?T(C):(P.var(E,!0),T(C),P.if(E))}function f(C){for(const _ in G)new RegExp(C).test(_)&&(0,u.checkStrictMode)(h,`property ${_} matches pattern ${C} (use allowMatchingProperties)`)}function T(C){P.forIn("key",t,_=>{P.if((0,l._)`${(0,n.usePattern)(c,C)}.test(${_})`,()=>{const p=k.includes(C);p||c.subschema({keyword:"patternProperties",schemaProp:C,dataProp:_,dataPropType:m.Type.Str},E),h.opts.unevaluated&&A!==!0?P.assign((0,l._)`${A}[${_}]`,!0):!p&&!h.allErrors&&P.if((0,l.not)(E),()=>P.break())})})}}};d.default=a},38968:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(3042),l={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:u=>(0,n.validateTuple)(u,"items")};d.default=l},81734:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(4371),l=e(9280),u=e(1849),m=e(17831),a={keyword:"properties",type:"object",schemaType:"object",code(c){const{gen:P,schema:b,parentSchema:t,data:v,it:h}=c;h.opts.removeAdditional==="all"&&t.additionalProperties===void 0&&m.default.code(new n.KeywordCxt(h,m.default,"additionalProperties"));const $=(0,l.allSchemaProperties)(b);for(const A of $)h.definedProperties.add(A);h.opts.unevaluated&&$.length&&h.props!==!0&&(h.props=u.mergeEvaluated.props(P,(0,u.toHash)($),h.props));const L=$.filter(A=>!(0,u.alwaysValidSchema)(h,b[A]));if(L.length===0)return;const k=P.name("valid");for(const A of L)G(A)?E(A):(P.if((0,l.propertyInData)(P,v,A,h.opts.ownProperties)),E(A),h.allErrors||P.else().var(k,!0),P.endIf()),c.it.definedProperties.add(A),c.ok(k);function G(A){return h.opts.useDefaults&&!h.compositeRule&&b[A].default!==void 0}function E(A){c.subschema({keyword:"properties",schemaProp:A,dataProp:A},k)}}};d.default=a},53261:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:a})=>(0,n._)`{propertyName: ${a.propertyName}}`},code(a){const{gen:c,schema:P,data:b,it:t}=a;if((0,l.alwaysValidSchema)(t,P))return;const v=c.name("valid");c.forIn("key",b,h=>{a.setParams({propertyName:h}),a.subschema({keyword:"propertyNames",data:h,dataTypes:["string"],propertyName:h,compositeRule:!0},v),c.if((0,n.not)(v),()=>{a.error(!0),t.allErrors||c.break()})}),a.ok(v)}};d.default=m},5095:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:u,parentSchema:m,it:a}){m.if===void 0&&(0,n.checkStrictMode)(a,`"${u}" without "if" is ignored`)}};d.default=l},9280:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateUnion=d.validateArray=d.usePattern=d.callValidateCode=d.schemaProperties=d.allSchemaProperties=d.noPropertyInData=d.propertyInData=d.isOwnProperty=d.hasPropFunc=d.reportMissingProp=d.checkMissingProp=d.checkReportMissingProp=void 0;const n=e(82481),l=e(1849),u=e(99583),m=e(1849);function a(f,T){const{gen:C,data:_,it:p}=f;C.if(h(C,_,T,p.opts.ownProperties),()=>{f.setParams({missingProperty:(0,n._)`${T}`},!0),f.error()})}d.checkReportMissingProp=a;function c({gen:f,data:T,it:{opts:C}},_,p){return(0,n.or)(..._.map(W=>(0,n.and)(h(f,T,W,C.ownProperties),(0,n._)`${p} = ${W}`)))}d.checkMissingProp=c;function P(f,T){f.setParams({missingProperty:T},!0),f.error()}d.reportMissingProp=P;function b(f){return f.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}d.hasPropFunc=b;function t(f,T,C){return(0,n._)`${b(f)}.call(${T}, ${C})`}d.isOwnProperty=t;function v(f,T,C,_){const p=(0,n._)`${T}${(0,n.getProperty)(C)} !== undefined`;return _?(0,n._)`${p} && ${t(f,T,C)}`:p}d.propertyInData=v;function h(f,T,C,_){const p=(0,n._)`${T}${(0,n.getProperty)(C)} === undefined`;return _?(0,n.or)(p,(0,n.not)(t(f,T,C))):p}d.noPropertyInData=h;function $(f){return f?Object.keys(f).filter(T=>T!=="__proto__"):[]}d.allSchemaProperties=$;function L(f,T){return $(T).filter(C=>!(0,l.alwaysValidSchema)(f,T[C]))}d.schemaProperties=L;function k({schemaCode:f,data:T,it:{gen:C,topSchemaRef:_,schemaPath:p,errorPath:W},it:K},Ie,ge,Xe){const $t=Xe?(0,n._)`${f}, ${T}, ${_}${p}`:T,ot=[[u.default.instancePath,(0,n.strConcat)(u.default.instancePath,W)],[u.default.parentData,K.parentData],[u.default.parentDataProperty,K.parentDataProperty],[u.default.rootData,u.default.rootData]];K.opts.dynamicRef&&ot.push([u.default.dynamicAnchors,u.default.dynamicAnchors]);const Vt=(0,n._)`${$t}, ${C.object(...ot)}`;return ge!==n.nil?(0,n._)`${Ie}.call(${ge}, ${Vt})`:(0,n._)`${Ie}(${Vt})`}d.callValidateCode=k;const G=(0,n._)`new RegExp`;function E({gen:f,it:{opts:T}},C){const _=T.unicodeRegExp?"u":"",{regExp:p}=T.code,W=p(C,_);return f.scopeValue("pattern",{key:W.toString(),ref:W,code:(0,n._)`${p.code==="new RegExp"?G:(0,m.useFunc)(f,p)}(${C}, ${_})`})}d.usePattern=E;function A(f){const{gen:T,data:C,keyword:_,it:p}=f,W=T.name("valid");if(p.allErrors){const Ie=T.let("valid",!0);return K(()=>T.assign(Ie,!1)),Ie}return T.var(W,!0),K(()=>T.break()),W;function K(Ie){const ge=T.const("len",(0,n._)`${C}.length`);T.forRange("i",0,ge,Xe=>{f.subschema({keyword:_,dataProp:Xe,dataPropType:l.Type.Num},W),T.if((0,n.not)(W),Ie)})}}d.validateArray=A;function x(f){const{gen:T,schema:C,keyword:_,it:p}=f;if(!Array.isArray(C))throw new Error("ajv implementation error");if(C.some(ge=>(0,l.alwaysValidSchema)(p,ge))&&!p.opts.unevaluated)return;const K=T.let("valid",!1),Ie=T.name("_valid");T.block(()=>C.forEach((ge,Xe)=>{const $t=f.subschema({keyword:_,schemaProp:Xe,compositeRule:!0},Ie);T.assign(K,(0,n._)`${K} || ${Ie}`),f.mergeValidEvaluated($t,Ie)||T.if((0,n.not)(K))})),f.result(K,()=>f.reset(),()=>f.error(!0))}d.validateUnion=x},5671:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};d.default=e},10356:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(5671),l=e(24302),u=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,l.default];d.default=u},24302:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.callRef=d.getValidate=void 0;const n=e(30283),l=e(9280),u=e(82481),m=e(99583),a=e(62902),c=e(1849),P={keyword:"$ref",schemaType:"string",code(v){const{gen:h,schema:$,it:L}=v,{baseId:k,schemaEnv:G,validateName:E,opts:A,self:x}=L,{root:f}=G;if(($==="#"||$==="#/")&&k===f.baseId)return C();const T=a.resolveRef.call(x,f,k,$);if(T===void 0)throw new n.default(L.opts.uriResolver,k,$);if(T instanceof a.SchemaEnv)return _(T);return p(T);function C(){if(G===f)return t(v,E,G,G.$async);const W=h.scopeValue("root",{ref:f});return t(v,(0,u._)`${W}.validate`,f,f.$async)}function _(W){const K=b(v,W);t(v,K,W,W.$async)}function p(W){const K=h.scopeValue("schema",A.code.source===!0?{ref:W,code:(0,u.stringify)(W)}:{ref:W}),Ie=h.name("valid"),ge=v.subschema({schema:W,dataTypes:[],schemaPath:u.nil,topSchemaRef:K,errSchemaPath:$},Ie);v.mergeEvaluated(ge),v.ok(Ie)}}};function b(v,h){const{gen:$}=v;return h.validate?$.scopeValue("validate",{ref:h.validate}):(0,u._)`${$.scopeValue("wrapper",{ref:h})}.validate`}d.getValidate=b;function t(v,h,$,L){const{gen:k,it:G}=v,{allErrors:E,schemaEnv:A,opts:x}=G,f=x.passContext?m.default.this:u.nil;L?T():C();function T(){if(!A.$async)throw new Error("async schema referenced by sync schema");const W=k.let("valid");k.try(()=>{k.code((0,u._)`await ${(0,l.callValidateCode)(v,h,f)}`),p(h),E||k.assign(W,!0)},K=>{k.if((0,u._)`!(${K} instanceof ${G.ValidationError})`,()=>k.throw(K)),_(K),E||k.assign(W,!1)}),v.ok(W)}function C(){v.result((0,l.callValidateCode)(v,h,f),()=>p(h),()=>_(h))}function _(W){const K=(0,u._)`${W}.errors`;k.assign(m.default.vErrors,(0,u._)`${m.default.vErrors} === null ? ${K} : ${m.default.vErrors}.concat(${K})`),k.assign(m.default.errors,(0,u._)`${m.default.vErrors}.length`)}function p(W){var K;if(!G.opts.unevaluated)return;const Ie=(K=$==null?void 0:$.validate)===null||K===void 0?void 0:K.evaluated;if(G.props!==!0)if(Ie&&!Ie.dynamicProps)Ie.props!==void 0&&(G.props=c.mergeEvaluated.props(k,Ie.props,G.props));else{const ge=k.var("props",(0,u._)`${W}.evaluated.props`);G.props=c.mergeEvaluated.props(k,ge,G.props,u.Name)}if(G.items!==!0)if(Ie&&!Ie.dynamicItems)Ie.items!==void 0&&(G.items=c.mergeEvaluated.items(k,Ie.items,G.items));else{const ge=k.var("items",(0,u._)`${W}.evaluated.items`);G.items=c.mergeEvaluated.items(k,ge,G.items,u.Name)}}}d.callRef=t,d.default=P},99908:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(521),u=e(62902),m=e(1849),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:P,tagName:b}})=>P===l.DiscrError.Tag?`tag "${b}" must be string`:`value of tag "${b}" must be in oneOf`,params:({params:{discrError:P,tag:b,tagName:t}})=>(0,n._)`{error: ${P}, tag: ${t}, tagValue: ${b}}`},code(P){const{gen:b,data:t,schema:v,parentSchema:h,it:$}=P,{oneOf:L}=h;if(!$.opts.discriminator)throw new Error("discriminator: requires discriminator option");const k=v.propertyName;if(typeof k!="string")throw new Error("discriminator: requires propertyName");if(v.mapping)throw new Error("discriminator: mapping is not supported");if(!L)throw new Error("discriminator: requires oneOf keyword");const G=b.let("valid",!1),E=b.const("tag",(0,n._)`${t}${(0,n.getProperty)(k)}`);b.if((0,n._)`typeof ${E} == "string"`,()=>A(),()=>P.error(!1,{discrError:l.DiscrError.Tag,tag:E,tagName:k})),P.ok(G);function A(){const T=f();b.if(!1);for(const C in T)b.elseIf((0,n._)`${E} === ${C}`),b.assign(G,x(T[C]));b.else(),P.error(!1,{discrError:l.DiscrError.Mapping,tag:E,tagName:k}),b.endIf()}function x(T){const C=b.name("valid"),_=P.subschema({keyword:"oneOf",schemaProp:T},C);return P.mergeEvaluated(_,n.Name),C}function f(){var T;const C={},_=W(h);let p=!0;for(let ge=0;ge<L.length;ge++){let Xe=L[ge];Xe!=null&&Xe.$ref&&!(0,m.schemaHasRulesButRef)(Xe,$.self.RULES)&&(Xe=u.resolveRef.call($.self,$.schemaEnv.root,$.baseId,Xe==null?void 0:Xe.$ref),Xe instanceof u.SchemaEnv&&(Xe=Xe.schema));const $t=(T=Xe==null?void 0:Xe.properties)===null||T===void 0?void 0:T[k];if(typeof $t!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${k}"`);p=p&&(_||W(Xe)),K($t,ge)}if(!p)throw new Error(`discriminator: "${k}" must be required`);return C;function W({required:ge}){return Array.isArray(ge)&&ge.includes(k)}function K(ge,Xe){if(ge.const)Ie(ge.const,Xe);else if(ge.enum)for(const $t of ge.enum)Ie($t,Xe);else throw new Error(`discriminator: "properties/${k}" must have "const" or "enum"`)}function Ie(ge,Xe){if(typeof ge!="string"||ge in C)throw new Error(`discriminator: "${k}" values must be unique strings`);C[ge]=Xe}}}};d.default=c},521:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DiscrError=void 0;var e;(function(n){n.Tag="tag",n.Mapping="mapping"})(e=d.DiscrError||(d.DiscrError={}))},57993:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(10356),l=e(16282),u=e(14226),m=e(6989),a=e(68373),c=[n.default,l.default,(0,u.default)(),m.default,a.metadataVocabulary,a.contentVocabulary];d.default=c},43202:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:m})=>(0,n.str)`must match format "${m}"`,params:({schemaCode:m})=>(0,n._)`{format: ${m}}`},code(m,a){const{gen:c,data:P,$data:b,schema:t,schemaCode:v,it:h}=m,{opts:$,errSchemaPath:L,schemaEnv:k,self:G}=h;if(!$.validateFormats)return;b?E():A();function E(){const x=c.scopeValue("formats",{ref:G.formats,code:$.code.formats}),f=c.const("fDef",(0,n._)`${x}[${v}]`),T=c.let("fType"),C=c.let("format");c.if((0,n._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>c.assign(T,(0,n._)`${f}.type || "string"`).assign(C,(0,n._)`${f}.validate`),()=>c.assign(T,(0,n._)`"string"`).assign(C,f)),m.fail$data((0,n.or)(_(),p()));function _(){return $.strictSchema===!1?n.nil:(0,n._)`${v} && !${C}`}function p(){const W=k.$async?(0,n._)`(${f}.async ? await ${C}(${P}) : ${C}(${P}))`:(0,n._)`${C}(${P})`,K=(0,n._)`(typeof ${C} == "function" ? ${W} : ${C}.test(${P}))`;return(0,n._)`${C} && ${C} !== true && ${T} === ${a} && !${K}`}}function A(){const x=G.formats[t];if(!x){_();return}if(x===!0)return;const[f,T,C]=p(x);f===a&&m.pass(W());function _(){if($.strictSchema===!1){G.logger.warn(K());return}throw new Error(K());function K(){return`unknown format "${t}" ignored in schema at path "${L}"`}}function p(K){const Ie=K instanceof RegExp?(0,n.regexpCode)(K):$.code.formats?(0,n._)`${$.code.formats}${(0,n.getProperty)(t)}`:void 0,ge=c.scopeValue("formats",{key:t,ref:K,code:Ie});return typeof K=="object"&&!(K instanceof RegExp)?[K.type||"string",K.validate,(0,n._)`${ge}.validate`]:["string",K,ge]}function W(){if(typeof x=="object"&&!(x instanceof RegExp)&&x.async){if(!k.$async)throw new Error("async format in sync schema");return(0,n._)`await ${C}(${P})`}return typeof T=="function"?(0,n._)`${C}(${P})`:(0,n._)`${C}.test(${P})`}}}};d.default=u},6989:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const l=[e(43202).default];d.default=l},68373:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.contentVocabulary=d.metadataVocabulary=void 0,d.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],d.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(55947),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:c})=>(0,n._)`{allowedValue: ${c}}`},code(c){const{gen:P,data:b,$data:t,schemaCode:v,schema:h}=c;t||h&&typeof h=="object"?c.fail$data((0,n._)`!${(0,l.useFunc)(P,u.default)}(${b}, ${v})`):c.fail((0,n._)`${h} !== ${b}`)}};d.default=a},28109:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(55947),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:c})=>(0,n._)`{allowedValues: ${c}}`},code(c){const{gen:P,data:b,$data:t,schema:v,schemaCode:h,it:$}=c;if(!t&&v.length===0)throw new Error("enum must have non-empty array");const L=v.length>=$.opts.loopEnum;let k;const G=()=>k!=null?k:k=(0,l.useFunc)(P,u.default);let E;if(L||t)E=P.let("valid"),c.block$data(E,A);else{if(!Array.isArray(v))throw new Error("ajv implementation error");const f=P.const("vSchema",h);E=(0,n.or)(...v.map((T,C)=>x(f,C)))}c.pass(E);function A(){P.assign(E,!1),P.forOf("v",h,f=>P.if((0,n._)`${G()}(${b}, ${f})`,()=>P.assign(E,!0).break()))}function x(f,T){const C=v[T];return typeof C=="object"&&C!==null?(0,n._)`${G()}(${b}, ${f}[${T}])`:(0,n._)`${b} === ${C}`}}};d.default=a},16282:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(41619),l=e(36701),u=e(34660),m=e(72326),a=e(69354),c=e(60881),P=e(42632),b=e(41985),t=e(80750),v=e(28109),h=[n.default,l.default,u.default,m.default,a.default,c.default,P.default,b.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},t.default,v.default];d.default=h},42632:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:a}){const c=m==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${c} than ${a} items`},params:({schemaCode:m})=>(0,n._)`{limit: ${m}}`},code(m){const{keyword:a,data:c,schemaCode:P}=m,b=a==="maxItems"?n.operators.GT:n.operators.LT;m.fail$data((0,n._)`${c}.length ${b} ${P}`)}};d.default=u},34660:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(7836),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:c,schemaCode:P}){const b=c==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${b} than ${P} characters`},params:({schemaCode:c})=>(0,n._)`{limit: ${c}}`},code(c){const{keyword:P,data:b,schemaCode:t,it:v}=c,h=P==="maxLength"?n.operators.GT:n.operators.LT,$=v.opts.unicode===!1?(0,n._)`${b}.length`:(0,n._)`${(0,l.useFunc)(c.gen,u.default)}(${b})`;c.fail$data((0,n._)`${$} ${h} ${t}`)}};d.default=a},41619:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=n.operators,u={maximum:{okStr:"<=",ok:l.LTE,fail:l.GT},minimum:{okStr:">=",ok:l.GTE,fail:l.LT},exclusiveMaximum:{okStr:"<",ok:l.LT,fail:l.GTE},exclusiveMinimum:{okStr:">",ok:l.GT,fail:l.LTE}},m={message:({keyword:c,schemaCode:P})=>(0,n.str)`must be ${u[c].okStr} ${P}`,params:({keyword:c,schemaCode:P})=>(0,n._)`{comparison: ${u[c].okStr}, limit: ${P}}`},a={keyword:Object.keys(u),type:"number",schemaType:"number",$data:!0,error:m,code(c){const{keyword:P,data:b,schemaCode:t}=c;c.fail$data((0,n._)`${b} ${u[P].fail} ${t} || isNaN(${b})`)}};d.default=a},69354:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:a}){const c=m==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${c} than ${a} properties`},params:({schemaCode:m})=>(0,n._)`{limit: ${m}}`},code(m){const{keyword:a,data:c,schemaCode:P}=m,b=a==="maxProperties"?n.operators.GT:n.operators.LT;m.fail$data((0,n._)`Object.keys(${c}).length ${b} ${P}`)}};d.default=u},36701:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:m})=>(0,n.str)`must be multiple of ${m}`,params:({schemaCode:m})=>(0,n._)`{multipleOf: ${m}}`},code(m){const{gen:a,data:c,schemaCode:P,it:b}=m,t=b.opts.multipleOfPrecision,v=a.let("res"),h=t?(0,n._)`Math.abs(Math.round(${v}) - ${v}) > 1e-${t}`:(0,n._)`${v} !== parseInt(${v})`;m.fail$data((0,n._)`(${P} === 0 || (${v} = ${c}/${P}, ${h}))`)}};d.default=u},72326:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),m={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,l.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,l._)`{pattern: ${a}}`},code(a){const{data:c,$data:P,schema:b,schemaCode:t,it:v}=a,h=v.opts.unicodeRegExp?"u":"",$=P?(0,l._)`(new RegExp(${t}, ${h}))`:(0,n.usePattern)(a,b);a.fail$data((0,l._)`!${$}.test(${c})`)}};d.default=m},60881:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(1849),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:c}})=>(0,l.str)`must have required property '${c}'`,params:({params:{missingProperty:c}})=>(0,l._)`{missingProperty: ${c}}`},code(c){const{gen:P,schema:b,schemaCode:t,data:v,$data:h,it:$}=c,{opts:L}=$;if(!h&&b.length===0)return;const k=b.length>=L.loopRequired;if($.allErrors?G():E(),L.strictRequired){const f=c.parentSchema.properties,{definedProperties:T}=c.it;for(const C of b)if((f==null?void 0:f[C])===void 0&&!T.has(C)){const _=$.schemaEnv.baseId+$.errSchemaPath,p=`required property "${C}" is not defined at "${_}" (strictRequired)`;(0,u.checkStrictMode)($,p,$.opts.strictRequired)}}function G(){if(k||h)c.block$data(l.nil,A);else for(const f of b)(0,n.checkReportMissingProp)(c,f)}function E(){const f=P.let("missing");if(k||h){const T=P.let("valid",!0);c.block$data(T,()=>x(f,T)),c.ok(T)}else P.if((0,n.checkMissingProp)(c,b,f)),(0,n.reportMissingProp)(c,f),P.else()}function A(){P.forOf("prop",t,f=>{c.setParams({missingProperty:f}),P.if((0,n.noPropertyInData)(P,v,f,L.ownProperties),()=>c.error())})}function x(f,T){c.setParams({missingProperty:f}),P.forOf(f,t,()=>{P.assign(T,(0,n.propertyInData)(P,v,f,L.ownProperties)),P.if((0,l.not)(T),()=>{c.error(),P.break()})},l.nil)}}};d.default=a},41985:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(93277),l=e(82481),u=e(1849),m=e(55947),c={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:P,j:b}})=>(0,l.str)`must NOT have duplicate items (items ## ${b} and ${P} are identical)`,params:({params:{i:P,j:b}})=>(0,l._)`{i: ${P}, j: ${b}}`},code(P){const{gen:b,data:t,$data:v,schema:h,parentSchema:$,schemaCode:L,it:k}=P;if(!v&&!h)return;const G=b.let("valid"),E=$.items?(0,n.getSchemaTypes)($.items):[];P.block$data(G,A,(0,l._)`${L} === false`),P.ok(G);function A(){const C=b.let("i",(0,l._)`${t}.length`),_=b.let("j");P.setParams({i:C,j:_}),b.assign(G,!0),b.if((0,l._)`${C} > 1`,()=>(x()?f:T)(C,_))}function x(){return E.length>0&&!E.some(C=>C==="object"||C==="array")}function f(C,_){const p=b.name("item"),W=(0,n.checkDataTypes)(E,p,k.opts.strictNumbers,n.DataType.Wrong),K=b.const("indices",(0,l._)`{}`);b.for((0,l._)`;${C}--;`,()=>{b.let(p,(0,l._)`${t}[${C}]`),b.if(W,(0,l._)`continue`),E.length>1&&b.if((0,l._)`typeof ${p} == "string"`,(0,l._)`${p} += "_"`),b.if((0,l._)`typeof ${K}[${p}] == "number"`,()=>{b.assign(_,(0,l._)`${K}[${p}]`),P.error(),b.assign(G,!1).break()}).code((0,l._)`${K}[${p}] = ${C}`)})}function T(C,_){const p=(0,u.useFunc)(b,m.default),W=b.name("outer");b.label(W).for((0,l._)`;${C}--;`,()=>b.for((0,l._)`${_} = ${C}; ${_}--;`,()=>b.if((0,l._)`${p}(${t}[${C}], ${t}[${_}])`,()=>{P.error(),b.assign(G,!1).break(W)})))}}};d.default=c},53907:function(Rt,d,e){e.d(d,{CX:function(){return he},WY:function(){return Tn},uC:function(){return ue},xP:function(){return pn},C4:function(){return j},KN:function(){return S},gr:function(){return z},II:function(){return nt},wQ:function(){return nr},Td:function(){return Ge},aq:function(){return pt},eE:function(){return oe},_i:function(){return hn},gN:function(){return at},YM:function(){return Ce},sn:function(){return mt},$_:function(){return Pt},Jv:function(){return Q},pM:function(){return de},CJ:function(){return Ye},jJ:function(){return Fe},bg:function(){return cr}});var n=e(2784),l=e(13980),u=e.n(l),m=e(18473),a=e(82394),c=e.n(a),P=e(30705),b=e(30195),t=e(9850),v=e.n(t),h=e(12782),$=e.n(h);const L=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function k(Z){return typeof Z=="object"&&Z!==null&&!Array.isArray(Z)}function G(Z){if(Z===null)return"null";if(Array.isArray(Z))return"array";const o=typeof Z;return o==="number"&&isNaN(Z)?"nan":o==="string"&&Z===""?"empty-string":o}const E={type(Z,o,i,g){return`Invalid type in config for key '${Z}' in '${o}', got ${i}, wanted ${g}`},missing(Z){return`Missing required config value at '${Z}'`},convert(Z,o,i){return`Unable to convert config value for key '${Z}' in '${o}' to a ${i}`}};class A{constructor(o,i="mock-config",g,M=""){this.data=o,this.context=i,this.fallback=g,this.prefix=M,this.notifiedFilteredKeys=new Set}static fromConfigs(o){return o.length===0?new A(void 0):o.reduce((i,{data:g,context:M,filteredKeys:Ee,deprecatedKeys:je})=>{const et=new A(g,M,i);if(et.filteredKeys=Ee,je)for(const{key:xt,description:Wt}of je)console.warn(`The configuration key '${xt}' of ${M} is deprecated and may be removed soon. ${Wt||""}`);return et},void 0)}has(o){var i,g;return this.readValue(o)!==void 0?!0:(g=(i=this.fallback)==null?void 0:i.has(o))!=null?g:!1}keys(){var o,i;const g=this.data?Object.keys(this.data):[],M=(i=(o=this.fallback)==null?void 0:o.keys())!=null?i:[];return[...new Set([...g,...M])]}get(o){const i=this.getOptional(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o!=null?o:"")));return i}getOptional(o){var i,g;const M=v()(this.readValue(o)),Ee=(i=this.fallback)==null?void 0:i.getOptional(o);return M===void 0?Ee:Ee===void 0?M:$()({},{value:Ee},{value:M},(je,et)=>!k(et)||!k(je)?et:void 0).value}getConfig(o){const i=this.getOptionalConfig(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalConfig(o){var i;const g=this.readValue(o),M=(i=this.fallback)==null?void 0:i.getOptionalConfig(o);if(k(g))return this.copy(g,o,M);if(g!==void 0)throw new TypeError(E.type(this.fullKey(o),this.context,G(g),"object"));return M}getConfigArray(o){const i=this.getOptionalConfigArray(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalConfigArray(o){var i;const g=this.readConfigValue(o,M=>{if(!Array.isArray(M))return{expected:"object-array"};for(const[Ee,je]of M.entries())if(!k(je))return{expected:"object-array",value:je,key:`${o}[${Ee}]`};return!0});if(g)return g.map((M,Ee)=>this.copy(M,`${o}[${Ee}]`))}getNumber(o){const i=this.getOptionalNumber(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalNumber(o){const i=this.readConfigValue(o,M=>typeof M=="number"||typeof M=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const g=Number(i);if(!Number.isFinite(g))throw new Error(E.convert(this.fullKey(o),this.context,"number"));return g}getBoolean(o){const i=this.getOptionalBoolean(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalBoolean(o){const i=this.readConfigValue(o,M=>typeof M=="boolean"||typeof M=="number"||typeof M=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const g=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(g))return!0;if(/^(?:n|no|false|0|off)$/i.test(g))return!1;throw new Error(E.convert(this.fullKey(o),this.context,"boolean"))}getString(o){const i=this.getOptionalString(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalString(o){return this.readConfigValue(o,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(o){const i=this.getOptionalStringArray(o);if(i===void 0)throw new Error(E.missing(this.fullKey(o)));return i}getOptionalStringArray(o){return this.readConfigValue(o,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[g,M]of i.entries())if(typeof M!="string"||M==="")return{expected:"string-array",value:M,key:`${o}[${g}]`};return!0})}fullKey(o){return`${this.prefix}${this.prefix?".":""}${o}`}copy(o,i,g){const M=new A(o,this.context,g,this.fullKey(i));return M.filteredKeys=this.filteredKeys,M}readConfigValue(o,i){var g,M;const Ee=this.readValue(o);if(Ee===void 0)return(M=this.fallback)==null?void 0:M.readConfigValue(o,i);const je=i(Ee);if(je!==!0){const{key:et=o,value:xt=Ee,expected:Wt}=je;throw new TypeError(E.type(this.fullKey(et),this.context,G(xt),Wt))}return Ee}readValue(o){const i=o?o.split("."):[];for(const M of i)if(!L.test(M))throw new TypeError(`Invalid config key '${o}'`);if(this.data===void 0)return;let g=this.data;for(const[M,Ee]of i.entries())if(k(g))g=g[Ee];else if(g!==void 0){const je=this.fullKey(i.slice(0,M).join("."));throw new TypeError(E.type(je,this.context,G(g),"object"))}return g}}var x=e(73557),f=e(16060),T=e(64279),C=e(72164);class _{constructor(...o){this.holders=o}get(o){for(const i of this.holders){const g=i.get(o);if(g)return g}}}const p=(0,m.CT)("api-context"),W=Z=>{var o;const{apis:i,children:g}=Z,M=(o=(0,n.useContext)(p))==null?void 0:o.atVersion(1),Ee=M?new _(i,M):i;return n.createElement(p.Provider,{value:(0,m.EI)({1:Ee}),children:g})};W.propTypes={apis:u().shape({get:u().func.isRequired}).isRequired,children:u().node};class K{constructor(o){this.factories=o,this.apis=new Map}static validateFactories(o,i){for(const g of i){const M=[g],Ee=new Set;for(;M.length;){const je=M.shift(),et=o.get(je);if(et)for(const xt of Object.values(et.deps)){if(xt.id===g.id)throw new Error(`Circular dependency of api factory for ${g}`);Ee.has(xt)||(Ee.add(xt),M.push(xt))}}}}get(o){return this.load(o)}load(o,i=[]){const g=this.apis.get(o.id);if(g)return g;const M=this.factories.get(o);if(!M)return;if(i.includes(M.api))throw new Error(`Circular dependency of api factory for ${M.api}`);const Ee=this.loadDeps(o,M.deps,[...i,M.api]),je=M.factory(Ee);return this.apis.set(o.id,je),je}loadDeps(o,i,g){const M={};for(const Ee in i)if(i.hasOwnProperty(Ee)){const je=i[Ee],et=this.load(je,g);if(!et)throw new Error(`No API factory available for dependency ${je} of dependent ${o}`);M[Ee]=et}return M}}var Ie=(Z=>(Z[Z.default=10]="default",Z[Z.app=50]="app",Z[Z.static=100]="static",Z))(Ie||{});class ge{constructor(){this.factories=new Map}register(o,i){const g=Ie[o],M=this.factories.get(i.api.id);return M&&M.priority>=g?!1:(this.factories.set(i.api.id,{priority:g,factory:i}),!0)}get(o){const i=this.factories.get(o.id);if(i)return i.factory}getAllApis(){const o=new Set;for(const{factory:i}of this.factories.values())o.add(i.api);return o}}function Xe(Z){return new Promise((o,i)=>{const g=Z.width||500,M=Z.height||700,Ee=window.screen.width/2-g/2,je=window.screen.height/2-M/2,et=window.open(Z.url,Z.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${g},height=${M},top=${je},left=${Ee}`);let xt="";if(!et||typeof et.closed=="undefined"||et.closed){const Sn=new Error("Failed to open auth popup.");Sn.name="PopupRejectedError",i(Sn);return}const Wt=Sn=>{if(Sn.source!==et||Sn.origin!==Z.origin)return;const{data:Ln}=Sn;if(Ln.type==="config_info"){xt=Ln.targetOrigin;return}if(Ln.type!=="authorization_response")return;const On=Ln;if("error"in On){const Gn=new Error(On.error.message);Gn.name=On.error.name,i(Gn)}else o(On.response);mn()},cn=setInterval(()=>{if(et.closed){const Sn=`Login failed, ${xt&&xt!==window.location.origin?`Incorrect app origin, expected ${xt}`:"popup was closed"}`,Ln=new Error(Sn);Ln.name="PopupClosedError",i(Ln),mn()}},100);function mn(){window.removeEventListener("message",Wt),clearInterval(cn)}window.addEventListener("message",Wt)})}let $t=!1;function ot(Z){return[...Z].join(" ")}class Vt{constructor(o){var i;const{configApi:g,discoveryApi:M,environment:Ee,provider:je,joinScopes:et=ot,oauthRequestApi:xt,sessionTransform:Wt=cn=>cn}=o;!$t&&!g&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),$t=!0),this.enableExperimentalRedirectFlow=g&&(i=g.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=xt.createAuthRequester({provider:je,onAuthRequest:async cn=>this.enableExperimentalRedirectFlow?this.executeRedirect(cn):this.showPopup(cn)}),this.discoveryApi=M,this.environment=Ee,this.provider=je,this.joinScopesFunc=et,this.sessionTransform=Wt}async createSession(o){return o.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(o.scopes):this.showPopup(o.scopes):this.authRequester(o.scopes)}async refreshSession(o){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...o&&{scope:this.joinScopesFunc(o)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(M=>{throw new Error(`Auth refresh request failed, ${M}`)});if(!i.ok){const M=new Error(`Auth refresh request failed, ${i.statusText}`);throw M.status=i.status,M}const g=await i.json();if(g.error){const M=new Error(g.error.message);throw g.error.name&&(M.name=g.error.name),M}return await this.sessionTransform(g)}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!o.ok){const i=new Error(`Logout request failed, ${o.statusText}`);throw i.status=o.status,i}}async showPopup(o){const i=this.joinScopesFunc(o),g=await this.buildUrl("/start",{scope:i,origin:window.location.origin,flow:"popup"}),M=await Xe({url:g,name:`${this.provider.title} Login`,origin:new URL(g).origin,width:450,height:730});return await this.sessionTransform(M)}async executeRedirect(o){const i=this.joinScopesFunc(o);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(o,i){const g=await this.discoveryApi.getBaseUrl("auth"),M=this.buildQueryString({...i,env:this.environment});return`${g}/${this.provider.id}${o}${M}`}buildQueryString(o){if(!o)return"";const i=Object.entries(o).map(([g,M])=>{if(typeof M=="string")return`${encodeURIComponent(g)}=${encodeURIComponent(M)}`;if(M)return encodeURIComponent(g)}).filter(Boolean).join("&");return i?`?${i}`:""}}class kt{constructor(o){const{discoveryApi:i,environment:g,provider:M}=o;this.discoveryApi=i,this.environment=g,this.provider=M}async createSession(){const o=await this.buildUrl("/start"),i=await Xe({url:o,name:`${this.provider.title} Login`,origin:new URL(o).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!o.ok){const i=new Error(`Logout request failed, ${o.statusText}`);throw i.status=o.status,i}}async buildUrl(o){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${o}?env=${this.environment}`}}function J(Z,o){for(const i of o)if(!Z.has(i))return!1;return!0}class sn{constructor(o){this.options=o}sessionExistsAndHasScope(o,i){if(!o)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const g=this.options.sessionScopes(o);return J(g,i)}getExtendedScope(o,i){const g=new Set(this.options.defaultScopes);if(o&&this.options.sessionScopes!==void 0){const M=this.options.sessionScopes(o);for(const Ee of M)g.add(Ee)}if(i)for(const M of i)g.add(M);return g}}class Se{constructor(){this.isClosed=!1,this.observable=new(c())(o=>this.isClosed?(this.terminatingError?o.error(this.terminatingError):o.complete(),()=>{}):(this.subscribers.add(o),()=>{this.subscribers.delete(o)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(o))}error(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(i=>i.error(o))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,i,g){const M=typeof o=="function"?{next:o,error:i,complete:g}:o;return this.observable.subscribe(M)}}class Ne{constructor(o){this.subscribers=new Set,this.isClosed=!1,this.currentValue=o,this.terminatingError=void 0,this.observable=new(c())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=o,this.subscribers.forEach(i=>i.next(o))}error(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(i=>i.error(o))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,i,g){const M=typeof o=="function"?{next:o,error:i,complete:g}:o;return this.observable.subscribe(M)}}class O{constructor(){this.subject=new Ne(P.sM.SignedOut),this.signedIn=!1}setIsSignedIn(o){this.signedIn!==o&&(this.signedIn=o,this.subject.next(this.signedIn?P.sM.SignedIn:P.sM.SignedOut))}sessionState$(){return this.subject}}class Le{constructor(o){this.stateTracker=new O;const{connector:i,defaultScopes:g=new Set,sessionScopes:M,sessionShouldRefresh:Ee}=o;this.connector=i,this.sessionScopesFunc=M,this.sessionShouldRefreshFunc=Ee,this.helper=new sn({sessionScopes:M,defaultScopes:g})}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const g=await this.collapsedSessionRefresh(o.scopes),M=this.sessionScopesFunc(this.currentSession),Ee=this.sessionScopesFunc(g);return J(Ee,M)&&(this.currentSession=g),g}catch(g){if(o.optional)return;throw g}}if(!this.currentSession&&!o.instantPopup)try{const i=await this.collapsedSessionRefresh(o.scopes);return this.currentSession=i,this.getSession(o)}catch{}if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(o){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(o);try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}class ce{constructor(o){this.stateTracker=new O;const{connector:i,defaultScopes:g=new Set,sessionScopes:M}=o;this.connector=i,this.helper=new sn({sessionScopes:M,defaultScopes:g})}setSession(o){this.currentSession=o,this.stateTracker.setIsSignedIn(Boolean(o))}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes))return this.currentSession;if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class R{constructor(o){const{manager:i,storageKey:g,schema:M,sessionScopes:Ee,sessionShouldRefresh:je=()=>!1}=o;this.manager=i,this.storageKey=g,this.schema=M,this.sessionShouldRefreshFunc=je,this.helper=new sn({sessionScopes:Ee,defaultScopes:new Set})}setSession(o){this.manager.setSession(o),this.saveSession(o)}async getSession(o){const{scopes:i}=o,g=this.loadSession();if(this.helper.sessionExistsAndHasScope(g,i)&&!this.sessionShouldRefreshFunc(g))return this.manager.setSession(g),g;const M=await this.manager.getSession(o);return this.saveSession(M),M}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const o=localStorage.getItem(this.storageKey);if(o){const i=JSON.parse(o,(g,M)=>(M==null?void 0:M.__type)==="Set"?new Set(M.__value):M);try{return this.schema.parse(i)}catch(g){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${g}`),g}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(o){if(o===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(o)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(o,(i,g)=>g instanceof Set?{__type:"Set",__value:Array.from(g)}:g))}}const N={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class te{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=N,oauthRequestApi:je,defaultScopes:et=[],scopeTransform:xt=mn=>mn}=o,Wt=new Vt({configApi:i,discoveryApi:g,environment:M,provider:Ee,oauthRequestApi:je,sessionTransform(mn){return{...mn,providerInfo:{idToken:mn.providerInfo.idToken,accessToken:mn.providerInfo.accessToken,scopes:te.normalizeScopes(xt,mn.providerInfo.scope),expiresAt:new Date(Date.now()+mn.providerInfo.expiresInSeconds*1e3)}}}}),cn=new Le({connector:Wt,defaultScopes:new Set(et),sessionScopes:mn=>mn.providerInfo.scopes,sessionShouldRefresh:mn=>(mn.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new te({sessionManager:cn,scopeTransform:xt})}constructor(o){this.sessionManager=o.sessionManager,this.scopeTransform=o.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(o,i){var g;const M=te.normalizeScopes(this.scopeTransform,o),Ee=await this.sessionManager.getSession({...i,scopes:M});return(g=Ee==null?void 0:Ee.providerInfo.accessToken)!=null?g:""}async getIdToken(o={}){var i;const g=await this.sessionManager.getSession({...o,scopes:new Set(["openid"])});return(i=g==null?void 0:g.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.backstageIdentity}async getProfile(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.profile}static normalizeScopes(o,i){if(!i)return new Set;const g=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(o(g))}}const _e={id:"github",title:"GitHub",icon:()=>null};class Ge{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=_e,oauthRequestApi:je,defaultScopes:et=["read:user"]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:et})}}const wt={id:"gitlab",title:"GitLab",icon:()=>null};class pt{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=wt,oauthRequestApi:je,defaultScopes:et=["read_user"]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:et})}}const Tt={id:"google",title:"Google",icon:()=>null},q="https://www.googleapis.com/auth/";class oe{static create(o){const{configApi:i,discoveryApi:g,oauthRequestApi:M,environment:Ee="development",provider:je=Tt,defaultScopes:et=["openid",`${q}userinfo.email`,`${q}userinfo.profile`]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:M,provider:je,environment:Ee,defaultScopes:et,scopeTransform(xt){return xt.map(Wt=>Wt==="openid"?Wt:Wt==="profile"||Wt==="email"?`${q}userinfo.${Wt}`:Wt.startsWith(q)?Wt:`${q}${Wt}`)}})}}const Ae={id:"okta",title:"Okta",icon:()=>null},Je=new Set(["openid","profile","email","phone","address","groups","offline_access"]),St="okta.";class mt{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=Ae,oauthRequestApi:je,defaultScopes:et=["openid","email","profile","offline_access"]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:et,scopeTransform(xt){return xt.map(Wt=>Je.has(Wt)||Wt.startsWith(St)?Wt:`${St}${Wt}`)}})}}const rn=b.z.object({profile:b.z.object({email:b.z.string().optional(),displayName:b.z.string().optional(),picture:b.z.string().optional()}),backstageIdentity:b.z.object({token:b.z.string(),identity:b.z.object({type:b.z.literal("user"),userEntityRef:b.z.string(),ownershipEntityRefs:b.z.array(b.z.string())})})}),Kt={id:"saml",title:"SAML",icon:()=>null};class $e{constructor(o){this.sessionManager=o}static create(o){const{discoveryApi:i,environment:g="development",provider:M=Kt}=o,Ee=new kt({discoveryApi:i,environment:g,provider:M}),je=new ce({connector:Ee}),et=new R({manager:je,storageKey:`${M.id}Session`,schema:rn});return new $e(et)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.backstageIdentity}async getProfile(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.profile}}const _t={id:"microsoft",title:"Microsoft",icon:()=>null},ct=class{static create(Z){return new ct(Z)}constructor(Z){const{configApi:o,environment:i="development",provider:g=_t,oauthRequestApi:M,discoveryApi:Ee,defaultScopes:je=["openid","offline_access","profile","email","User.Read"],scopeTransform:et=xt=>xt.concat("offline_access")}=Z;this.configApi=o,this.environment=i,this.provider=g,this.oauthRequestApi=M,this.discoveryApi=Ee,this.scopeTransform=et,this.oauth2={[ct.MicrosoftGraphID]:te.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:je})}}microsoftGraph(){return this.oauth2[ct.MicrosoftGraphID]}static resourceForScopes(Z){var o;const i=[...new Set(Z.split(" ").map(ct.resourceForScope).filter(M=>M!=="openid"))];if(i.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${i.join(", ")}. Access tokens can only have a single audience.`));const g=(o=i[0])!=null?o:ct.MicrosoftGraphID;return Promise.resolve(g)}static resourceForScope(Z){var o;const i=(o=Z.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:o.groups;if(i){const{resourceURI:g}=i;return g.replace(/^api:\/\//,"")}switch(Z){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return ct.MicrosoftGraphID}}async getAccessToken(Z,o){const i=Z===void 0?ct.MicrosoftGraphID:await ct.resourceForScopes(Array.isArray(Z)?Z.join(" "):Z);return i in this.oauth2||(this.oauth2[i]=te.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[i].getAccessToken(Z,o)}getIdToken(Z){return this.microsoftGraph().getIdToken(Z)}getProfile(Z){return this.microsoftGraph().getProfile(Z)}getBackstageIdentity(Z){return this.microsoftGraph().getBackstageIdentity(Z)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};let hn=ct;hn.MicrosoftGraphID="00000003-0000-0000-c000-000000000000";const un={id:"onelogin",title:"onelogin",icon:()=>null},vn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),st="onelogin.";class Pt{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=un,oauthRequestApi:je}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(et){return et.map(xt=>vn.has(xt)||xt.startsWith(st)?xt:`${st}${xt}`)}})}}const fn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class pn{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=fn,oauthRequestApi:je,defaultScopes:et=["team"]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:et})}}const fe={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class j{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=fe,oauthRequestApi:je,defaultScopes:et=["PROJECT_ADMIN"]}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M,defaultScopes:et})}}const X={id:"atlassian",title:"Atlassian",icon:()=>null};class ue{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:Ee=X,oauthRequestApi:je}=o;return te.create({configApi:i,discoveryApi:g,oauthRequestApi:je,provider:Ee,environment:M})}}class he{constructor(){this.subject=new Se}post(o){this.subject.next(o)}alert$(){return this.subject}}class De{constructor(o){this.actualApis=o}static fromApis(o){return new De(o)}captureEvent(o){this.actualApis.forEach(i=>{try{i.captureEvent(o)}catch{}})}}class at{captureEvent(o){}}const tt="theme";class ut{constructor(o){this.themes=o,this.subject=new Ne(void 0)}static createWithStorage(o){var i;const g=new ut(o);if(!window.localStorage)return g;const M=(i=window.localStorage.getItem(tt))!=null?i:void 0;return g.setActiveThemeId(M),g.activeThemeId$().subscribe(Ee=>{Ee?window.localStorage.setItem(tt,Ee):window.localStorage.removeItem(tt)}),window.addEventListener("storage",Ee=>{var je;if(Ee.key===tt){const et=(je=localStorage.getItem(tt))!=null?je:void 0;g.setActiveThemeId(et)}}),g}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(o){this.activeThemeId=o,this.subject.next(o)}}const Lt="Invalid discovery URL pattern,";class de{constructor(o){this.parts=o}static compile(o){const i=o.split(/\{\{\s*pluginId\s*\}\}/),g=i.join("pluginId");let M;try{M=new URL(g)}catch{throw new Error(`${Lt} URL '${g}' is invalid`)}if(M.hash)throw new Error(`${Lt} URL must not have a hash`);if(M.search)throw new Error(`${Lt} URL must not have a query`);if(g.endsWith("/"))throw new Error(`${Lt} URL must not end with a slash`);return new de(i)}async getBaseUrl(o){return this.parts.join(encodeURIComponent(o))}}class ne{constructor(o,i){this.endpoints=o,this.defaultEndpoint=i}static fromConfig(o,i){var g,M;const Ee=(g=i==null?void 0:i.pathPattern)!=null?g:"/api/{{ pluginId }}",je=o.getString("backend.baseUrl"),et=(M=o.getOptionalConfigArray("discovery.endpoints"))==null?void 0:M.flatMap(xt=>{const Wt=typeof xt.get("target")=="object"?xt.getString("target.external"):xt.getString("target"),cn=de.compile(Wt);return xt.getStringArray("plugins").map(mn=>[mn,cn])});return new ne(new Map(et),de.compile(`${je}${Ee}`))}async getBaseUrl(o){const i=this.endpoints.get(o);return i?i.getBaseUrl(o):this.defaultEndpoint.getBaseUrl(o)}}class S{constructor(o,i){this.alertApi=o,this.errorApi=i}post(o,i){return i!=null&&i.hidden||this.alertApi.post({message:o.message,severity:"error"}),this.errorApi.post(o,i)}error$(){return this.errorApi.error$()}}class z{constructor(){this.subject=new Se}post(o,i){this.subject.next({error:o,context:i})}error$(){return this.subject}}class Q{static forward(o,i){window.addEventListener("unhandledrejection",g=>{o.post(g.reason,i)})}}function me(Z){if(Z.length<3)throw new Error(`The '${Z}' feature flag must have a minimum length of three characters.`);if(Z.length>150)throw new Error(`The '${Z}' feature flag must not exceed 150 characters.`);if(!Z.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${Z}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class xe{constructor(){this.registeredFeatureFlags=[]}registerFlag(o){me(o.name),this.registeredFeatureFlags.push(o)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(o){return this.flags||(this.flags=this.load()),this.flags.get(o)===P.CL.Active}save(o){this.flags||(this.flags=this.load()),o.merge||this.flags.clear();for(const[g,M]of Object.entries(o.states))this.flags.set(g,M);const i=Array.from(this.flags.entries()).filter(([,g])=>g===P.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const o=window.localStorage.getItem("featureFlags");if(!o)return new Map;const i=JSON.parse(o);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const g=Object.entries(i).filter(([M,Ee])=>(me(M),Ee===P.CL.Active));return new Map(g)}catch{return new Map}}}function Fe(Z){var o;let i=Z.baseImplementation||e.g.fetch;const g=[(o=Z.middleware)!=null?o:[]].flat().reverse();for(const M of g)i=M.apply(i);return{fetch:i}}class He{constructor(o,i,g,M){this.identityApi=o,this.allowUrl=i,this.headerName=g,this.headerValue=M}static create(o){var i,g;const M=dt(o),Ee=((i=o.header)==null?void 0:i.name)||"authorization",je=((g=o.header)==null?void 0:g.value)||(et=>`Bearer ${et}`);return new He(o.identityApi,M,Ee,je)}apply(o){return async(i,g)=>{const M=new Request(i,g),{token:Ee}=await this.identityApi.getCredentials();return M.headers.get(this.headerName)||typeof Ee!="string"||!Ee||!this.allowUrl(M.url)?o(i,g):(M.headers.set(this.headerName,this.headerValue(Ee)),o(M))}}}function dt(Z){return Z.allowUrl?Z.allowUrl:Z.urlPrefixAllowlist?ae(Z.urlPrefixAllowlist):Z.config?ae([Z.config.getString("backend.baseUrl")]):()=>!1}function ae(Z){const o=Z.map(i=>i.replace(/\/$/,""));return i=>o.some(g=>i===g||i.startsWith(`${g}/`))}function pe(Z,o){return!o||o==="/"?Z:`${Z.replace(/\/$/,"")}/${o.replace(/^\//,"")}`}class ve{constructor(o){this.discoveryApi=o}apply(o){return async(i,g)=>{const M=new Request(i,g),Ee="plugin://";if(!M.url.startsWith(Ee))return o(i,g);const{hostname:je,pathname:et,search:xt,hash:Wt,username:cn,password:mn}=new URL(`http://${M.url.substring(Ee.length)}`);let Sn=await this.discoveryApi.getBaseUrl(je);if(cn||mn){const On=new URL(Sn),Gn=`${cn}${mn?`:${mn}`:""}@`;Sn=`${On.protocol}//${Gn}${On.host}${On.pathname}`}const Ln=`${pe(Sn,et)}${xt}${Wt}`;return o(Ln,typeof i=="string"||Te(i)?g:i)}}}function Te(Z){return typeof Z=="object"&&(Z==null?void 0:Z.constructor)===URL}class nt{static resolvePluginProtocol(o){return new ve(o.discoveryApi)}static injectIdentityAuth(o){return He.create(o)}constructor(){}}function Bt(Z,o){for(const i of o)if(!Z.has(i))return!1;return!0}function Ut(Z,...o){const i=new Set(Z);for(const g of o)for(const M of g)i.add(M);return i}class Dt{constructor(){this.requests=[],this.subject=new Ne(this.getCurrentPending())}request(o){return new Promise((i,g)=>{this.requests.push({scopes:o,resolve:i,reject:g}),this.subject.next(this.getCurrentPending())})}resolve(o,i){this.requests=this.requests.filter(g=>Bt(o,g.scopes)?(g.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(o){this.requests.forEach(i=>i.reject(o)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const o=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,g)=>Ut(i,g.scopes),this.requests[0].scopes);return{scopes:o,resolve:i=>{o&&this.resolve(o,i)},reject:i=>{o&&this.reject(i)}}}}class Ce{constructor(){this.subject=new Ne([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(o){const i=new Dt,g=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:M=>{const Ee=this.currentRequests.slice(),je=this.makeAuthRequest(M,o);je?Ee[g]=je:delete Ee[g],this.currentRequests=Ee,this.subject.next(Ee.filter(Boolean))}}),M=>i.request(M)}makeAuthRequest(o,i){const{scopes:g}=o;if(g)return{provider:i.provider,trigger:async()=>{const M=await i.onAuthRequest(g);o.resolve(M)},reject:()=>{const M=new Error("Login failed, rejected by user");M.name="RejectedError",o.reject(M)}}}authRequest$(){return this.subject}}const we=new Map,Ke=class{constructor(Z,o){this.namespace=Z,this.errorApi=o,this.subscribers=new Set,this.observable=new(c())(i=>(this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}static create(Z){var o;return new Ke((o=Z.namespace)!=null?o:"",Z.errorApi)}static addStorageEventListener(){window.addEventListener("storage",Z=>{var o;for(const[i,g]of we.entries())(o=Z.key)!=null&&o.startsWith(i)&&g.handleStorageChange(Z.key)})}get(Z){return this.snapshot(Z).value}snapshot(Z){let o,i="absent";try{const g=localStorage.getItem(this.getKeyName(Z));g&&(o=JSON.parse(g,(M,Ee)=>(typeof Ee=="object"&&Ee!==null&&Object.freeze(Ee),Ee)),i="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${Z}`))}return{key:Z,value:o,presence:i}}forBucket(Z){const o=`${this.namespace}/${Z}`;return we.has(o)||we.set(o,new Ke(o,this.errorApi)),we.get(o)}async set(Z,o){localStorage.setItem(this.getKeyName(Z),JSON.stringify(o)),this.notifyChanges(Z)}async remove(Z){localStorage.removeItem(this.getKeyName(Z)),this.notifyChanges(Z)}observe$(Z){return Ke.hasSubscribed||(Ke.addStorageEventListener(),Ke.hasSubscribed=!0),this.observable.filter(({key:o})=>o===Z)}handleStorageChange(Z){if(!(Z!=null&&Z.startsWith(this.namespace)))return;const o=Z==null?void 0:Z.slice(`${this.namespace}/`.length);o.includes("/")||this.notifyChanges(decodeURIComponent(o))}getKeyName(Z){return`${this.namespace}/${encodeURIComponent(Z)}`}notifyChanges(Z){const o=this.snapshot(Z);for(const i of this.subscribers)i.next(o)}};let Ye=Ke;Ye.hasSubscribed=!1;const We=(0,n.createContext)(void 0);function Ct(){const[Z]=(0,x.is)(n.createElement(x.AW,{index:!0,element:n.createElement("div",null)}));return!Z.index}const It=(Z,o)=>{var i;try{const g=(0,f.fp)(o,{pathname:Z}),M=g==null?void 0:g.filter(xt=>{var Wt;return((Wt=xt==null?void 0:xt.route.routeRefs)==null?void 0:Wt.size)>0}).pop(),Ee=M==null?void 0:M.route;if(!Ee)return;let je;Ee.routeRefs.size===1&&(je=Ee.routeRefs.values().next().value);const et=Object.entries((M==null?void 0:M.params)||{}).reduce((xt,[Wt,cn])=>(cn!==void 0&&(xt[Wt]=cn),xt),{});return{extension:"App",pluginId:((i=Ee.plugin)==null?void 0:i.getId())||"root",...je?{routeRef:je.id}:{},params:et}}catch{return}},jt=({pathname:Z,search:o,hash:i,attributes:g})=>{const M=(0,P.z$)();return(0,n.useEffect)(()=>{M.captureEvent("navigate",`${Z}${o}${i}`,{attributes:g})},[M,Z,o,i,g]),null},Gt=({routeObjects:Z})=>{const{pathname:o,search:i,hash:g}=(0,x.TH)(),{params:M,...Ee}=It(o,Z)||{params:{}};return n.createElement(P.fC,{attributes:Ee},n.createElement(jt,{pathname:o,search:i,hash:g,attributes:M}))};function _n(Z){return Ct()?wn(Z):""}function wn(Z){var o;let{pathname:i}=new URL((o=Z.getOptionalString("app.baseUrl"))!=null?o:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function xn({component:Z,appIdentityProxy:o,children:i}){const[g,M]=(0,n.useState)(),Ee=(0,P.h_)(P.Ds),je=_n(Ee);return g?(o.setTarget(g,{signOutTargetUrl:je||"/"}),n.createElement(n.Fragment,null,i)):n.createElement(Z,{onSignInSuccess:M})}function Tn(Z){const{Router:o,SignInPage:i}=(0,P.qD)().getComponents(),g=(0,P.h_)(P.Ds),M=wn(g),Ee=`${M}/*`,je=(0,n.useContext)(We);if(!je)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:et,appIdentityProxy:xt}=je;return i?Ct()?n.createElement(o,null,n.createElement(Gt,{routeObjects:et}),n.createElement(xn,{component:i,appIdentityProxy:xt},n.createElement(x.Z5,null,n.createElement(x.AW,{path:Ee,element:n.createElement(n.Fragment,null,Z.children)})))):n.createElement(o,{basename:M},n.createElement(Gt,{routeObjects:et}),n.createElement(xn,{component:i,appIdentityProxy:xt},Z.children)):(xt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:M||"/"}),Ct()?n.createElement(o,null,n.createElement(Gt,{routeObjects:et}),n.createElement(x.Z5,null,n.createElement(x.AW,{path:Ee,element:n.createElement(n.Fragment,null,Z.children)}))):n.createElement(o,{basename:M},n.createElement(Gt,{routeObjects:et}),Z.children))}function kn(Z){const o={};for(const g in Z.collectors)Z.collectors.hasOwnProperty(g)&&(o[g]=Z.collectors[g]());const i=[{node:n.Children.toArray(Z.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:g,parent:M,contexts:Ee}=i.shift();n.Children.forEach(g,je=>{if(!(0,n.isValidElement)(je))return;const et={};for(const xt in o)if(o.hasOwnProperty(xt)){const Wt=o[xt];et[xt]=Wt.visit(Wt.accumulator,je,M,Ee[xt])}for(const xt of Z.discoverers){const Wt=xt(je);Wt&&i.push({node:Wt,parent:je,contexts:et})}})}return Object.fromEntries(Object.entries(o).map(([g,M])=>[g,M.accumulator]))}function Mn(Z,o){return()=>({accumulator:Z(),visit:o})}function yn(Z){var o;return(o=Z.props)==null?void 0:o.children}function zn(Z){var o,i,g;if((o=Z.props)!=null&&o.path&&((i=Z.props)!=null&&i.element))return(g=Z.props)==null?void 0:g.element}const lt=Mn(()=>new Set,(Z,o)=>{const i=(0,P.IY)(o,"core.plugin");i&&Z.add(i)}),ye=Z=>{const{children:o}=Z,i=(0,P.h_)(P.W0),g="with"in Z?i.isActive(Z.with):!i.isActive(Z.without);return n.createElement(n.Fragment,null,g?o:null)};(0,P.R5)(ye,"core.featureFlagged",!0);const Ze={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set};function Ue(Z){var o,i;const g=Z;return g!=null&&g.type?(i=(o=g.type.displayName)!=null?o:g.type.name)!=null?i:String(g.type):String(g)}function vt(Z,o=new Array){return n.Children.forEach(Z,i=>{if(!(0,n.isValidElement)(i))return;const g=(0,P.IY)(i,"core.mountPoint");if(g){const M=(0,P.IY)(i,"core.plugin");o.push({routeRef:g,plugin:M})}vt(i.props.children,o)}),o}const it=Mn(()=>({paths:new Map,parents:new Map,objects:new Array}),(Z,o,i,g)=>{var M,Ee,je,et,xt,Wt;if(g!=null&&g.isElementAncestor)return g;if((i==null?void 0:i.props.element)===o)return{...g,isElementAncestor:!0};const cn=(M=o.props)==null?void 0:M.path,mn=(0,P.IY)(o,"core.mountPoint");if(mn&&cn)throw new Error(`Path property may not be set directly on a routable extension "${Ue(o)}"`);const Sn=(je=(Ee=g==null?void 0:g.obj)==null?void 0:Ee.children)!=null?je:Z.objects;if(cn!==void 0){if(typeof cn!="string")throw new Error(`Element path must be a string at "${Ue(o)}"`);const Ln=cn.startsWith("/")?cn.slice(1):cn,On=o.props.element;if((0,P.IY)(o,"core.gatherMountPoints")){if(On)throw new Error(`Mount point gatherers may not have an element prop "${Ue(o)}"`);const Gn={path:Ln,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((et=o.props)==null?void 0:et.caseSensitive),children:[Ze],plugin:void 0};return Sn.push(Gn),{obj:Gn,gatherPath:Ln,routeRef:g==null?void 0:g.routeRef,gatherRouteRef:g==null?void 0:g.routeRef}}if(On){const[Gn,...ar]=vt(On);if(ar.length>0)throw new Error(`Route element with path "${cn}" may not contain multiple routable extensions`);if(!Gn)return g;const{routeRef:Qn,plugin:F}=Gn,le={path:Ln,element:"mounted",routeRefs:new Set([Qn]),caseSensitive:Boolean((xt=o.props)==null?void 0:xt.caseSensitive),children:[Ze],plugin:F};return Sn.push(le),Z.paths.set(Qn,Ln),Z.parents.set(Qn,g==null?void 0:g.routeRef),{obj:le,routeRef:Qn!=null?Qn:g==null?void 0:g.routeRef,gatherPath:Ln,gatherRouteRef:g==null?void 0:g.gatherRouteRef}}}if(mn){if((g==null?void 0:g.gatherPath)===void 0)throw new Error(`Routable extension "${Ue(o)}" with mount point "${mn}" must be assigned a path`);return(Wt=g==null?void 0:g.obj)==null||Wt.routeRefs.add(mn),Z.paths.set(mn,g.gatherPath),Z.parents.set(mn,g==null?void 0:g.gatherRouteRef),{...g,routeRef:mn}}return g}),yt=Mn(()=>({paths:new Map,parents:new Map,objects:new Array}),(Z,o,i,g)=>{var M,Ee,je,et,xt;if((i==null?void 0:i.props.element)===o)return g;let Wt=g==null?void 0:g.obj,cn=g==null?void 0:g.routeRef,mn=g==null?void 0:g.sticky;const Sn=(M=o.props)==null?void 0:M.path,Ln=(Ee=Wt==null?void 0:Wt.children)!=null?Ee:Z.objects,On=Boolean((je=o.props)==null?void 0:je.caseSensitive);let Gn=g==null?void 0:g.path;if((0,P.IY)(o,"core.gatherMountPoints")){if(!Sn)throw new Error("Mount point gatherer must have a path");Gn=Sn}const ar=(et=o.props)==null?void 0:et.element;let Qn=(0,P.IY)(o,"core.mountPoint");if(!Qn&&(0,n.isValidElement)(ar)&&(Qn=(0,P.IY)(ar,"core.mountPoint")),Qn){let le=Sn;if(Gn&&(le?Gn=void 0:le=Gn),!le)throw new Error("Mounted routable extension must have a path");Z.paths.set(Qn,le),cn&&mn?(Z.parents.set(Qn,cn),Sn&&(cn=Qn,mn=!1)):(Z.parents.set(Qn,cn),cn=Qn),Sn?(Wt={caseSensitive:On,path:Sn,element:"mounted",routeRefs:new Set([Qn]),children:[Ze],plugin:(0,P.IY)(o.props.element,"core.plugin")},Ln.push(Wt)):Wt==null||Wt.routeRefs.add(Qn)}if((0,P.IY)(o,"core.gatherMountPoints")&&(mn=!0),(0,P.IY)(o,"core.gatherMountPoints")){if(!Sn)throw new Error("Mount point gatherer must have a path");Qn||(Wt={caseSensitive:On,path:Sn,element:"gathered",routeRefs:new Set,children:[Ze],plugin:(xt=g==null?void 0:g.obj)==null?void 0:xt.plugin},Ln.push(Wt))}return{obj:Wt,path:Gn,routeRef:cn,sticky:mn}}),ft=Mn(()=>new Set,(Z,o)=>{if(o.type===ye){const i=o.props;Z.add("with"in i?i.with:i.without)}}),Zt=(0,m.uW)("route-ref-type",()=>Symbol("route-ref-type"));function tn(Z){return Z[Zt]==="absolute"}function gn(Z){return Z[Zt]==="sub"}function Zn(Z){return Z[Zt]==="external"}function er(...Z){const o=Z.join("/").replace(/\/\/+/g,"/");return o!=="/"&&o.endsWith("/")?o.slice(0,-1):o}function tr(Z,o,i){let g,M="";if(tn(Z))g=Z;else if(gn(Z))g=Z.parent,M=Z.path;else if(Zn(Z)){const et=i.get(Z);if(!et)return[void 0,""];if(tn(et))g=et;else if(gn(et))g=et.parent,M=et.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${et}`)}else throw Z[Zt]?new Error(`Unknown or invalid route ref type, ${Z[Zt]}`):new Error(`Unknown object passed to useRouteRef, got ${Z}`);if(!g)return[void 0,""];const Ee=o.get(g);if(Ee===void 0)return[void 0,""];const je=er(Ee,M);return[g,je]}function Wn(Z,o,i,g,M){var Ee;const je=(Ee=(0,f.fp)(M,o))!=null?Ee:[],et=Array();let xt=-1;for(let mn=Z;mn&&(xt=je.findIndex(Sn=>Sn.route.routeRefs.has(mn)),xt===-1);mn=g.get(mn))et.unshift(mn);et.length===0&&(xt-=1);const Wt=xt===-1?"":je[xt].pathname,cn=et.slice(0,-1).map(mn=>{const Sn=i.get(mn);if(Sn===void 0)throw new Error(`No path for ${mn}`);if(Sn.includes(":"))throw new Error(`Cannot route to ${Z} with parent ${mn} as it has parameters`);return Sn});return`${er(Wt,...cn)}/`}class jn{constructor(o,i,g,M,Ee){this.routePaths=o,this.routeParents=i,this.routeObjects=g,this.routeBindings=M,this.appBasePath=Ee}resolve(o,i){const[g,M]=tr(o,this.routePaths,this.routeBindings);if(!g)return;let Ee;typeof i=="string"?Ee=this.trimPath(i):i.pathname?Ee={...i,pathname:this.trimPath(i.pathname)}:Ee=i;const je=this.appBasePath+Wn(g,Ee,this.routePaths,this.routeParents,this.routeObjects);return(...[xt])=>er(je,(0,f.Gn)(M,xt))}trimPath(o){return o&&(o.startsWith(this.appBasePath)?o.slice(this.appBasePath.length):o)}}const rr=(0,m.CT)("routing-context"),D=({routePaths:Z,routeParents:o,routeObjects:i,routeBindings:g,basePath:M="",children:Ee})=>{const je=new jn(Z,o,i,g,M),et=(0,m.EI)({1:je});return n.createElement(rr.Provider,{value:et},Ee)};function I(Z,o){const i=new Set(o.values());i.delete(void 0);for(const g of o.keys()){if(i.has(g))continue;let M=g,Ee="";for(;M;){const et=Z.get(M);if(et===void 0)throw new Error(`No path for ${M}`);Ee=er(et,Ee),M=o.get(M)}const je=Ee.match(/:(\w+)/g);if(je){for(let et=0;et<je.length;et++)for(let xt=et+1;xt<je.length;xt++)if(je[xt]===je[et])throw new Error(`Parameter ${je[xt]} is duplicated in path ${Ee}`)}}}function V(Z,o){for(const i of o)if(i.externalRoutes){for(const[g,M]of Object.entries(i.externalRoutes))if(!M.optional&&!Z.has(M))throw new Error(`External route '${g}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const ie=(0,m.CT)("app-context"),Me=({appContext:Z,children:o})=>{const i=(0,m.EI)({1:Z});return n.createElement(ie.Provider,{value:i,children:o})};function rt(Z){return new Error(`Tried to access IdentityApi ${Z} before app was loaded`)}function B(Z){console.warn(`WARNING: Call to ${Z} is deprecated and will break in the future`)}class H{constructor(){this.resolveTarget=()=>{},this.signOutTargetUrl="/",this.waitForTarget=new Promise(o=>{this.resolveTarget=o})}setTarget(o,i){this.target=o,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(o)}getUserId(){if(!this.target)throw rt("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return B("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw rt("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return B("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(o=>o.getProfileInfo())}async getBackstageIdentity(){const o=await this.waitForTarget.then(i=>i.getBackstageIdentity());return o.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${o.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),o}async getCredentials(){return this.waitForTarget.then(o=>o.getCredentials())}async getIdToken(){return this.waitForTarget.then(o=>{if(!o.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return B("getIdToken"),o.getIdToken()})}async signOut(){await this.waitForTarget.then(o=>o.signOut()),window.location.href=this.signOutTargetUrl}}function Oe(Z,o,i){if(Z!==void 0){const M=i.find(Ee=>Ee.id===Z);if(M)return M}if(o){const M=i.find(Ee=>Ee.variant==="dark");if(M)return M}const g=i.find(M=>M.variant==="light");return g||i[0]}const ze=()=>{const Z=(0,n.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[o,i]=(0,n.useState)(Z.matches);return(0,n.useEffect)(()=>{const g=M=>{i(M.matches)};return Z.addListener(g),()=>{Z.removeListener(g)}},[Z]),o};function Mt({children:Z}){const o=(0,P.h_)(P.hg),i=(0,C.Z)(o.activeThemeId$(),o.getActiveThemeId()),g=Boolean(window.matchMedia)?ze():!1,M=Oe(i,g,o.getInstalledThemes());if(!M)throw new Error("App has no themes");return n.createElement(M.Provider,{children:Z})}const Ft=async(Z="__APP_INJECTED_RUNTIME_CONFIG__")=>{const o=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"}}}];if(!o)throw new Error("No static configuration provided");if(!Array.isArray(o))throw new Error("Static configuration has invalid format");const i=o.slice();if(Z!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const M=JSON.parse(Z);Array.isArray(M)?i.push(...M):i.push({data:M,context:"env"})}catch(M){throw new Error(`Failed to load runtime configuration, ${M}`)}const g=window.__APP_CONFIG__;return g&&i.push({context:"window",data:g}),i};class Ht{constructor(){this.apis=[]}add(o,i){return this.apis.push([o.id,i]),i}build(){return new bn(new Map(this.apis))}}class bn{constructor(o){this.apis=o}static builder(){return new Ht}static from(o){return new bn(new Map(o.map(([i,g])=>[i.id,g])))}static with(o,i){return new bn(new Map([[o.id,i]]))}with(o,i){return new bn(new Map([...this.apis,[o.id,i]]))}get(o){return this.apis.get(o.id)}}function Cn(Z){const o=new Map;return Z&&Z({bind:(g,M)=>{for(const[Ee,je]of Object.entries(M)){const et=g[Ee];if(!et)throw new Error(`Key ${Ee} is not an existing external route`);if(!je&&!et.optional)throw new Error(`External route ${Ee} is required but was undefined`);je&&o.set(et,je)}}}),o}var an=(Z,o,i)=>{if(!o.has(Z))throw TypeError("Cannot "+i)},Fn=(Z,o,i)=>(an(Z,o,"read from private field"),i?i.call(Z):o.get(Z)),Un=(Z,o,i)=>{if(o.has(Z))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(Z):o.set(Z,i)},Jn=(Z,o,i,g)=>(an(Z,o,"write to private field"),g?g.call(Z,i):o.set(Z,i),i),Yn;function Xn(Z){const o=new URL(Z);return o.protocol=document.location.protocol,o.hostname=document.location.hostname,o.port=document.location.port,o.toString().replace(/\/$/,"")}function Hn(Z,o,i){var g;const M=Boolean(Z),Ee=(0,T.default)(Z||(()=>Promise.resolve([])));let je;if(M&&Ee.loading){const{Progress:Wt}=o;je=n.createElement(Wt,null)}else if(Ee.error){const{BootErrorPage:Wt}=o;je=n.createElement(Wt,{step:"load-config",error:Ee.error})}const{ThemeProvider:et=Mt}=o;if(je)return{node:n.createElement(W,{apis:bn.with(P.hg,i)},n.createElement(et,null,je))};let xt;if((g=Ee.value)!=null&&g.length){const Wt=A.fromConfigs(Ee.value),cn=Wt.getOptionalString("app.baseUrl"),mn=Wt.getOptionalString("backend.baseUrl");let Sn=Ee.value;const Ln={data:{},context:"relative-resolver"};if(cn&&mn){const On=new URL(cn).origin,Gn=new URL(mn).origin;if(On===Gn){const ar=Xn(mn);mn!==ar&&(Ln.data.backend={baseUrl:ar})}}if(cn){const On=Xn(cn);cn!==On&&(Ln.data.app={baseUrl:On})}Object.keys(Ln.data).length&&(Sn=Sn.concat([Ln])),xt=A.fromConfigs(Sn)}else xt=A.fromConfigs([]);return{api:xt}}class vr{constructor(o){this.app=o}getPlugins(){return this.app.getPlugins()}getSystemIcon(o){return this.app.getSystemIcon(o)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class pr{constructor(o){this.appIdentityProxy=new H,Un(this,Yn,!1);var i,g,M,Ee,je;this.apis=(i=o.apis)!=null?i:[],this.icons=o.icons,this.plugins=new Set((g=o.plugins)!=null?g:[]),this.featureFlags=(M=o.featureFlags)!=null?M:[],this.components=o.components,this.themes=o.themes,this.configLoader=(Ee=o.configLoader)!=null?Ee:Ft,this.defaultApis=(je=o.defaultApis)!=null?je:[],this.bindRoutes=o.bindRoutes,this.apiFactoryRegistry=new ge}getPlugins(){return Array.from(this.plugins)}getSystemIcon(o){return this.icons[o]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(o){const i=this.getProvider();return()=>n.createElement(i,null,o)}getProvider(){if(Fn(this,Yn))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Jn(this,Yn,!0);const o=new vr(this);let i=!1;return({children:M})=>{const Ee=(0,n.useRef)(!0),je=(0,n.useMemo)(()=>ut.createWithStorage(this.themes),[]),{routing:et,featureFlags:xt,routeBindings:Wt}=(0,n.useMemo)(()=>{const Ln=kn({root:M,discoverers:[yn,zn],collectors:{routing:Ct()?yt:it,collectedPlugins:lt,featureFlags:ft}});return Ln.collectedPlugins.forEach(On=>this.plugins.add(On)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...Ln,routeBindings:Cn(this.bindRoutes)}},[M]);i||(i=!0,I(et.paths,et.parents),V(Wt,this.plugins));const cn=Hn(this.configLoader,this.components,je),mn="api"in cn;if(mn){const{api:Ln}=cn;this.configApi=Ln}if("node"in cn)return cn.node;if(mn&&Ee.current){Ee.current=!1;const Ln=this.getApiHolder().get(P.W0);if(Ln){for(const ar of this.featureFlags)Ln.registerFlag({...ar,pluginId:""});for(const ar of this.plugins.values())if("getFeatureFlags"in ar)for(const Qn of ar.getFeatureFlags())Ln.registerFlag({name:Qn.name,pluginId:ar.getId()});else for(const Qn of ar.output())Qn.type==="feature-flag"&&Ln.registerFlag({name:Qn.name,pluginId:ar.getId()});const On=Ln.getRegisteredFlags(),Gn=new Set(On.map(ar=>ar.name));for(const ar of xt)Gn.has(ar)||Ln.registerFlag({name:ar,pluginId:""})}}const{ThemeProvider:Sn=Mt}=this.components;return n.createElement(W,{apis:this.getApiHolder()},n.createElement(Me,{appContext:o},n.createElement(Sn,null,n.createElement(D,{routePaths:et.paths,routeParents:et.parents,routeObjects:et.objects,routeBindings:Wt,basePath:_n(cn.api)},n.createElement(We.Provider,{value:{routeObjects:et.objects,appIdentityProxy:this.appIdentityProxy}},M)))))}}getRouter(){return Tn}getApiHolder(){if(this.apiHolder){for(const o of this.plugins)for(const i of o.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return K.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:P.hg,deps:{},factory:()=>ut.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:P.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:P.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:P.W0,deps:{},factory:()=>new xe});for(const o of this.defaultApis)this.apiFactoryRegistry.register("default",o);for(const o of this.plugins)for(const i of o.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${o.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const o of this.apis)if(!this.apiFactoryRegistry.register("app",o))throw new Error(`Duplicate or forbidden API factory for ${o.api} in app`);return K.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new K(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(o){const i=new Set;for(const g of o){const M=g.getId();if(i.has(M))throw new Error(`Duplicate plugin found '${M}'`);i.add(M)}}}Yn=new WeakMap;function cr(Z){return new pr(Z)}let or=!1;const nr=Z=>{const o=(0,P.qD)(),{NotFoundErrorPage:i}=o.getComponents(),g=(0,n.useMemo)(()=>Ct(),[]),Ee=[...(0,P.vJ)(Z.children,je=>je.getElements().flatMap(et=>{var xt;let Wt=et.props.path;if(Wt==="")return[];Wt=(xt=Wt==null?void 0:Wt.replace(/\/\*$/,""))!=null?xt:"/";let cn=g?et:et.props.element;return!g&&!cn&&(cn=et,or||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),or=!0)),[{path:Wt,element:cn,children:et.props.children?[{path:Wt==="/"?"/":"*",element:et.props.children}]:void 0}]}).sort((et,xt)=>xt.path.localeCompare(et.path)).map(et=>({...et,path:et.path==="/"?"/":`${et.path}/*`}))),{path:"*",element:n.createElement(i,null)}];return(0,x.V$)(Ee)}},80236:function(Rt,d,e){e.d(d,{BT:function(){return gi},BV:function(){return Ai},Ex:function(){return va},Fw:function(){return Ea},GB:function(){return Re},Gk:function(){return gt},Hz:function(){return La},J3:function(){return Qo},Kq:function(){return _s},M6:function(){return lr},NX:function(){return je},Oh:function(){return fl},Oi:function(){return M},Oo:function(){return xo},Or:function(){return es},Pd:function(){return Ps},Pf:function(){return Pa},Ph:function(){return Ya},Qj:function(){return o},R6:function(){return Ro},SA:function(){return Ho},SX:function(){return en},T3:function(){return Sa},VC:function(){return Os},VY:function(){return Oa},XF:function(){return Ee},YE:function(){return pi},aR:function(){return wo},db:function(){return zs},dh:function(){return Rs},fy:function(){return Vs},g9:function(){return gl},h4:function(){return Ra},hB:function(){return $l},hu:function(){return ko},i9:function(){return cl},iA:function(){return Bo},in:function(){return Ht},k2:function(){return Co},mZ:function(){return pa},mf:function(){return el},mn:function(){return At},nU:function(){return jo},oZ:function(){return Ml},oz:function(){return Di},qE:function(){return Fn},qt:function(){return Qs},r0:function(){return $a},rJ:function(){return ia},rU:function(){return nr},sidebarConfig:function(){return Jr},sk:function(){return hr},tB:function(){return Gs},tR:function(){return di},tn:function(){return Do},ub:function(){return Dn},uw:function(){return Zi},v7:function(){return So},vK:function(){return bs},wA:function(){return Cs},xT:function(){return Ws},yW:function(){return Uo},yu:function(){return bt},zG:function(){return js}});var n=e(30705),l=e(61837),u=e(37265),m=e(90436),a=e(87685),c=e(99688),P=e(19928),b=e.n(P),t=e(2784),v=e(43434),h=e(79692),$=e(60364),L=e(41128),k=e(15459),G=e(12420),E=e(76600),A=e(41547),x=e(77277),f=e(86689),T=e(72779),C=e.n(T),_=e(76635),p=e.n(_),W=e(73557),K=e(39857),Ie=e(16060),ge=e(95544),Xe=e(56553),$t=e(26639),ot=e(39595),Vt=e(80030),kt=e(19353),J=e(95074),sn=e(41156),Se=e(88188),Ne=e(13725),O=e(11105),Le=e(97963),ce=e(46506),R=e.n(ce),N=e(54073),te=e.n(N),_e=e(10368),Ge=e(76985),wt=e(39829),pt=e(19574),Tt=e.n(pt),q=e(72164),oe=e(93657),Ae=e(60905),Je=e(79265),St=e(85910),mt=e(52059),rn=e(38225),Kt=e(11776),$e=e(38402),_t=e(49378),ct=e(27616),hn=e(8284),un=e(70660),vn=e(91750),st=e(38016),Pt=e(85256),fn=e(28316),pn=e(35292),fe=e(48049),j=e(51209),X=e(32407),ue=e(28156),he=e(8629),De=e(49429),at=e(38724),tt=e(79249),ut=e(3806),Lt=e(32272),de=e(15277),ne=e.n(de),S=e(29862),z=e(67358),Q=e(94339),me=e(14503),xe=e(24579),Fe=e(32552),He=e(27597),dt=e(39307),ae=e(21324),pe=e(7089),ve=e(42494),Te=e(74603),nt=e(56939),Bt=e(12231),Ut=e(73698),Dt=e(72379),Ce=e(74600),we=e.n(Ce),Ke=e(37390),Ye=e(97485),We=e(15584),Ct=e(89571),It=e(86136),jt=e(79784),Gt=e(19126),_n=e.n(Gt),wn=e(80079),xn=e(18671),Tn=e(50023),kn=e(4190),Mn=e(44882),yn=e(18473),zn=e(57998),lt=e(6487),ye=e(99152),Ze=e(67222),Ue=e(21070),vt=e(90324),it=e(98281),yt=e(33375),ft=e(44233),Zt=e(27604),tn=e(36444),gn=e(37971),Zn=e(59709),er=e(17373),tr=e(3702),Wn=e(93111),jn=e(44311),rr=e.n(jn),D=e(83543),I=e(59797),V=e(26739),ie=e(86619),Me=e(98989),rt=e(53305),B=e(16173),H=e(30195),Oe=e(63955),ze=e(74828),Mt=e(45455),Ft=e.n(Mt);function Ht(r){const[s,y]=(0,t.useState)([]),w=(0,n.h_)(n.$v),{anchorOrigin:U={vertical:"top",horizontal:"center"},transientTimeoutMs:ee}=r,re=ee!=null?ee:5e3;(0,t.useEffect)(()=>{const ke=w.alert$().subscribe(Et=>y(ht=>ht.concat(Et)));return()=>{ke.unsubscribe()}},[w]);const[Be]=s;if((0,t.useEffect)(()=>{if(Be&&Be.display==="transient"){const ke=setTimeout(()=>{y(Et=>{const ht=Et.filter(Jt=>Jt!==Be);return ht.length===Et.length?Et:ht})},re);return()=>clearTimeout(ke)}},[Be,re]),s.length===0)return null;const Ve=()=>{y(ke=>ke.filter(Et=>Et!==Be))};return t.createElement(u.Z,{open:!0,anchorOrigin:U},t.createElement(c.Z,{action:t.createElement(l.Z,{color:"inherit",size:"small",onClick:Ve,"data-testid":"error-button-close"},t.createElement(a.Z,null)),severity:Be.severity},t.createElement(m.Z,{component:"span"},String(Be.message),s.length>1&&t.createElement("em",null,` (${s.length-1} older ${b()("message",s.length-1)})`))))}function bn(r){let s=0;for(let w=0;w<r.length;w++)s=r.charCodeAt(w)+((s<<5)-s);let y="#";for(let w=0;w<3;w++){const U=s>>w*8&255;y+=`00${U.toString(16)}`.slice(-2)}return y}function Cn(r){var s;return(s=r.match(/\b\w/g))==null?void 0:s.join("").slice(0,2)}const an=(0,h.Z)(r=>({avatar:{width:"4rem",height:"4rem",color:r.palette.common.white},avatarText:{fontWeight:r.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Fn(r){const{displayName:s,picture:y,customStyles:w}=r,U=an();let ee={...w};const re={fontFamily:ee.fontFamily,fontSize:ee.fontSize,fontWeight:ee.fontWeight};return y||(ee={backgroundColor:bn(s||""),...w}),t.createElement(v.Z,{alt:s,src:y,className:U.avatar,style:ee},s&&t.createElement(m.Z,{variant:"h6",component:"span",className:U.avatarText,style:re},Cn(s)))}function Un(){const[r]=(0,W.is)(t.createElement(W.AW,{index:!0,element:t.createElement("div",null)}));return!r.index}const Jn=(0,h.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Yn=r=>/^([a-z+.-]+):/.test(r),Xn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Hn=window.open;if(Hn&&!Hn.__backstage){const r=function(...y){const w=String(y[0]);if(Xn.test(w))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Hn.apply(this,y)};r.__backstage=!0,window.open=r}const vr=()=>{try{return(0,n.h_)(n.Ds).getOptionalString("app.baseUrl")}catch{return}},pr=()=>{var r;const s="http://sample.dev",y=(r=vr())!=null?r:"/",{pathname:w}=new URL(y,s);return(0,_.trimEnd)(w,"/")},cr=r=>{let s=String(r);const y=pr(),w=Yn(s),U=s.startsWith(y);return!w&&!U&&(s=y.concat(s)),s},or=r=>{var s;return r instanceof Array?r.map(or).join(" ").trim():typeof r=="object"&&r?or((s=r==null?void 0:r.props)==null?void 0:s.children):["string","number"].includes(typeof r)?String(r):""},nr=t.forwardRef(({onClick:r,noTrack:s,...y},w)=>{const U=Jn(),ee=(0,n.z$)(),re=Un()?cr(y.to):y.to,Be=or(y.children)||re,Ve=Yn(re),ke=Ve&&!!/^https?:/.exec(re);if(Xn.test(re))throw new Error("Link component rejected javascript: URL as a security precaution");const Et=ht=>{r==null||r(ht),s||ee.captureEvent("click",Be,{attributes:{to:re}})};return Ve?t.createElement(f.Z,{...ke?{target:"_blank",rel:"noopener"}:{},...y,...y["aria-label"]?{"aria-label":`${y["aria-label"]}, Opens in a new window`}:{},ref:w,href:re,onClick:Et,className:C()(U.externalLink,y.className)},y.children,t.createElement(m.Z,{component:"span",className:U.visuallyHidden},", Opens in a new window")):t.createElement(f.Z,{...y,ref:w,component:K.rU,to:re,onClick:Et})}),Z=t.forwardRef((r,s)=>t.createElement(nr,{ref:s,...r,color:"initial"})),o=t.forwardRef((r,s)=>t.createElement(x.Z,{ref:s,component:Z,...r})),i=null;function g(r){const{text:s,tooltipDelay:y=1e3,tooltipText:w="Text copied to clipboard","aria-label":U="Copy text"}=r,ee=(0,n.h_)(n.VE),[re,Be]=(0,t.useState)(!1),[{error:Ve},ke]=(0,J.Z)();(0,t.useEffect)(()=>{Ve&&ee.post(Ve)},[Ve,ee]);const Et=ht=>{ht.stopPropagation(),Be(!0),ke(s)};return t.createElement(t.Fragment,null,t.createElement(Vt.ZP,{id:"copy-test-tooltip",title:w,placement:"top",leaveDelay:y,onClose:()=>Be(!1),open:re},t.createElement(l.Z,{onClick:Et,"aria-label":U},t.createElement(kt.Z,null))))}function M(r){const{text:s,language:y,showLineNumbers:w=!1,highlightedNumbers:U,customStyle:ee,showCopyCodeButton:re=!1}=r,Be=(0,$.Z)(),Ve=Be.palette.type==="dark"?$t.Z:ot.Z,ke=Be.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(ge.Z,{position:"relative"},t.createElement(Xe.Z,{customStyle:ee,language:y,style:Ve,showLineNumbers:w,wrapLines:!0,lineNumberStyle:{color:Be.palette.textVerySubtle},lineProps:Et=>U!=null&&U.includes(Et)?{style:{backgroundColor:ke}}:{}},s),re&&t.createElement(ge.Z,{position:"absolute",top:0,right:0},t.createElement(g,{text:s})))}function Ee(r){const{title:s,to:y}=r,w=(0,sn.Z)(U=>U.breakpoints.down("xs"));return y?w?t.createElement(l.Z,{component:K.rU,color:"primary",title:s,size:"small",to:y},t.createElement(Se.Z,null)):t.createElement(x.Z,{component:K.rU,variant:"contained",color:"primary",to:y},s):null}var je;(r=>{(s=>{s.TOP_BOTTOM="TB",s.BOTTOM_TOP="BT",s.LEFT_RIGHT="LR",s.RIGHT_LEFT="RL"})(r.Direction||(r.Direction={})),(s=>{s.UP_LEFT="UL",s.UP_RIGHT="UR",s.DOWN_LEFT="DL",s.DOWN_RIGHT="DR"})(r.Alignment||(r.Alignment={})),(s=>{s.NETWORK_SIMPLEX="network-simplex",s.TIGHT_TREE="tight-tree",s.LONGEST_PATH="longest-path"})(r.Ranker||(r.Ranker={})),(s=>{s.LEFT="l",s.RIGHT="r",s.CENTER="c"})(r.LabelPosition||(r.LabelPosition={}))})(je||(je={}));const et=(0,h.Z)(r=>({node:{fill:r.palette.primary.light,stroke:r.palette.primary.light},text:{fill:r.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function xt({node:{id:r}}){const s=et(),[y,w]=t.useState(0),[U,ee]=t.useState(0),re=t.useRef(null);t.useLayoutEffect(()=>{if(re.current){let{height:Et,width:ht}=re.current.getBBox();Et=Math.round(Et),ht=Math.round(ht),(Et!==U||ht!==y)&&(w(ht),ee(Et))}},[y,U]);const Be=10,Ve=y+Be*2,ke=U+Be*2;return t.createElement("g",null,t.createElement("rect",{className:s.node,width:Ve,height:ke,rx:10}),t.createElement("text",{ref:re,className:s.text,y:ke/2,x:Ve/2,textAnchor:"middle",alignmentBaseline:"middle"},r))}const Wt="arrow-marker",cn="node",mn="edge",Sn="label",Ln=(0,_e.Z)(r=>({node:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),On=r=>t.createElement(xt,{...r});function Gn({render:r=On,setNode:s,node:y}){const{width:w,height:U,x:ee=0,y:re=0}=y,Be=y,Ve=Ln(),ke=t.useRef(null);return t.useLayoutEffect(()=>{if(ke.current){let{height:Et,width:ht}=ke.current.getBBox();Et=Math.round(Et),ht=Math.round(ht),(Et!==U||ht!==w)&&s(y.id,{...y,height:Et,width:ht})}},[y,w,U,s]),t.createElement("g",{ref:ke,"data-testid":cn,className:Ve.node,transform:`translate(${ee-w/2},${re-U/2})`},r({node:Be}))}const ar=(0,_e.Z)(r=>({text:{fill:r.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Qn({edge:{label:r}}){const s=ar();return t.createElement("text",{className:s.text,textAnchor:"middle"},r)}const F=(0,_e.Z)(r=>({path:{strokeWidth:1,stroke:r.palette.textSubtle,fill:"none",transition:`${r.transitions.duration.shortest}ms`},label:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),le=r=>t.createElement(Qn,{...r});function Pe({render:r=le,setEdge:s,id:y,edge:w,curve:U}){const{x:ee=0,y:re=0,width:Be,height:Ve,points:ke}=w,Et=w,ht=F(),Jt=t.useRef(null);t.useLayoutEffect(()=>{if(Jt.current){let{height:Pn,width:qn}=Jt.current.getBBox();Pn=Math.round(Pn),qn=Math.round(qn),(Pn!==Ve||qn!==Be)&&s(y,{...w,height:Pn,width:qn})}},[w,Ve,Be,s,y]);let zt="";const dn=t.useMemo(()=>Ge.Z().x(Pn=>Pn.x).y(Pn=>Pn.y).curve(wt[U]),[U]);if(ke){const Pn=ke.filter(qn=>Tt()(qn.x)&&Tt()(qn.y));zt=dn(Pn)||""}return t.createElement(t.Fragment,null,zt&&t.createElement("path",{"data-testid":mn,className:ht.path,d:zt}),Et.label?t.createElement("g",{ref:Jt,"data-testid":Sn,className:ht.label,transform:`translate(${ee},${re})`},r({edge:Et})):null)}const qe="workspace";function At(r){var s,y;const{edges:w,nodes:U,renderNode:ee,direction:re=je.Direction.TOP_BOTTOM,align:Be,nodeMargin:Ve=50,edgeMargin:ke=10,rankMargin:Et=50,paddingX:ht=0,paddingY:Jt=0,acyclicer:zt,ranker:dn=je.Ranker.NETWORK_SIMPLEX,labelPosition:Pn=je.LabelPosition.RIGHT,labelOffset:qn=10,edgeRanks:Er=1,edgeWeight:Ir=1,renderLabel:kr,defs:Vn,zoom:fr="enabled",curve:mr="curveMonotoneX",fit:Nr="grow",...Hr}=r,Kr=(0,Le.Z)(),[Fr,fa]=t.useState(100),[qr,Ka]=t.useState(100),dr=t.useRef(new(R()).graphlib.Graph),[da,wa]=t.useState(((s=dr.current.graph())==null?void 0:s.width)||0),[ea,Fa]=t.useState(((y=dr.current.graph())==null?void 0:y.height)||0),[Mr,Yr]=t.useState([]),[ta,na]=t.useState([]),_r=Math.max(da,Fr),Ar=Math.max(ea,qr),ma=Math.min(ea,qr),ra=Nr==="grow"?Ar:ma,ha=t.useMemo(()=>te()(Rr=>{if(!Rr)return;const Lr=O.Z(Rr),Pr=O.Z(Rr.getElementById(qe));function zr(){Lr.call(Ne.sP().scaleExtent([1,10]).on("zoom",Xr=>{Xr.transform.x=Math.min(0,Math.max(Xr.transform.x,_r-_r*Xr.transform.k)),Xr.transform.y=Math.min(0,Math.max(Xr.transform.y,Ar-Ar*Xr.transform.k)),Pr.attr("transform",Xr.transform)}))}fr==="enabled"?zr():fr==="enable-on-click"&&Lr.on("click",()=>zr());const{width:jr,height:Da}=Rr.getBoundingClientRect();Fr!==jr&&fa(jr),qr!==Da&&Ka(Da)},100),[qr,Fr,_r,Ar,fr]),Fo=t.useCallback(()=>{const Rr=dr.current.nodes(),Lr=dr.current.edges();Rr.forEach(Pr=>{U.some(jr=>jr.id===Pr)||dr.current.removeNode(Pr)}),Lr.forEach(Pr=>{w.some(jr=>jr.from===Pr.v&&jr.to===Pr.w)||dr.current.removeEdge(Pr.v,Pr.w)}),U.forEach(Pr=>{const zr=dr.current.nodes().find(jr=>Pr.id===jr);if(zr&&dr.current.node(zr)){const{width:jr,height:Da,x:Xr,y:xl}=dr.current.node(zr);dr.current.setNode(zr,{...Pr,width:jr,height:Da,x:Xr,y:xl})}else dr.current.setNode(Pr.id,{...Pr,width:0,height:0})}),w.forEach(Pr=>{dr.current.setEdge(Pr.from,Pr.to,{...Pr,label:Pr.label,width:0,height:0,labelpos:Pn,labeloffset:qn,weight:Ir,minlen:Er})})},[w,U,Pn,qn,Ir,Er]),ga=t.useMemo(()=>te()(()=>{R().layout(dr.current);const{height:Rr,width:Lr}=dr.current.graph(),Pr=Math.max(0,Rr||0),zr=Math.max(0,Lr||0);wa(zr),Fa(Pr),Yr(dr.current.nodes()),na(dr.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(dr.current.setGraph({rankdir:re,align:Be,nodesep:Ve,edgesep:ke,ranksep:Et,marginx:ht,marginy:Jt,acyclicer:zt,ranker:dn}),Fo(),ga(),ga.cancel),[zt,Be,re,ke,ht,Jt,Ve,Et,dn,Fo,ga]);function Bl(Rr,Lr){return dr.current.setNode(Rr,Lr),ga(),dr.current}function Ul(Rr,Lr){return dr.current.setEdge(Rr,Lr),ga(),dr.current}return t.createElement("svg",{ref:ha,...Hr,width:"100%",height:ra,viewBox:`0 0 ${_r} ${Ar}`},t.createElement("defs",null,t.createElement("marker",{id:Wt,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Kr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Vn),t.createElement("g",{id:qe},t.createElement("svg",{width:da,height:ea,y:Ar/2-ea/2,x:_r/2-da/2,viewBox:`0 0 ${da} ${ea}`},ta.map(Rr=>{const Lr=dr.current.edge(Rr);return Lr?t.createElement(Pe,{key:`${Rr.v}-${Rr.w}`,id:Rr,setEdge:Ul,render:kr,edge:Lr,curve:mr}):null}),Mr.map(Rr=>{const Lr=dr.current.node(Rr);return Lr?t.createElement(Gn,{key:Rr,setNode:Bl,render:ee,node:Lr}):null}))))}const Nt=(0,h.Z)(r=>{var s,y;return{root:{padding:r.spacing(0),marginBottom:r.spacing(0),marginTop:r.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:r.spacing(6),marginTop:-r.spacing(3),zIndex:"unset"},icon:{fontSize:r.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:r.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:r.palette.banner.link}},button:{color:(s=r.palette.banner.closeButtonColor)!=null?s:"inherit"},info:{backgroundColor:r.palette.banner.info},error:{backgroundColor:r.palette.banner.error},warning:{backgroundColor:(y=r.palette.banner.warning)!=null?y:r.palette.banner.error}}},{name:"BackstageDismissableBanner"}),en=r=>{var s;const{variant:y,message:w,id:U,fixed:ee=!1}=r,re=Nt(),Ve=(0,n.h_)(n.E6).forBucket("notifications"),ke=(s=Ve.snapshot("dismissedBanners").value)!=null?s:[],[Et,ht]=(0,t.useState)(new Set(ke)),Jt=(0,q.Z)(Ve.observe$("dismissedBanners"));(0,t.useEffect)(()=>{var dn;if(Jt!=null&&Jt.value){const Pn=(dn=Jt==null?void 0:Jt.value)!=null?dn:[];ht(new Set(Pn))}},[Jt==null?void 0:Jt.value]);const zt=()=>{Ve.set("dismissedBanners",[...Et,U])};return t.createElement(u.Z,{anchorOrigin:ee?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Et.has(U),classes:{root:C()(re.root,!ee&&re.topPosition)}},t.createElement(oe.Z,{classes:{root:C()(re.content,re[y]),message:re.message},message:w,action:[t.createElement(l.Z,{key:"dismiss",title:"Permanently dismiss this message",className:re.button,onClick:zt},t.createElement(a.Z,{className:re.icon}))]}))},nn=(0,h.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Rn=({missing:r})=>{const s=nn();switch(r){case"field":return t.createElement("img",{src:Je,className:s.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:St,alt:"no Information",className:s.generalImg});case"content":return t.createElement("img",{src:mt,alt:"create Component",className:s.generalImg});case"data":return t.createElement("img",{src:rn,alt:"no Build",className:s.generalImg});default:return null}},In=(0,h.Z)(r=>({root:{backgroundColor:r.palette.background.default,padding:r.spacing(2,0,0,0)},action:{marginTop:r.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Dn(r){const{title:s,description:y,missing:w,action:U}=r,ee=In();return t.createElement(Ae.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:ee.root,spacing:2},t.createElement(Ae.Z,{item:!0,xs:12,md:6},t.createElement(Ae.Z,{container:!0,direction:"column"},t.createElement(Ae.Z,{item:!0,xs:!0},t.createElement(m.Z,{variant:"h5"},s)),t.createElement(Ae.Z,{item:!0,xs:!0},t.createElement(m.Z,{variant:"body1"},y)),t.createElement(Ae.Z,{item:!0,xs:!0,className:ee.action},U))),t.createElement(Ae.Z,{item:!0,xs:12,md:6,className:ee.imageContainer},typeof w=="string"?t.createElement(Rn,{missing:w}):w.customImage))}const Nn=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,ln=/^.*ANNOTATION.*$/m,sr=Nn.match(ln)[0],br=Nn.split(`
`).findIndex(r=>ln.test(r)),Sr=(0,h.Z)(r=>({code:{borderRadius:6,margin:`${r.spacing(2)}px 0px`,background:r.palette.type==="dark"?"#444":r.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function wr(r){return Array.from(Array(r+1).keys(),s=>s+br)}function Cr(r){const s=r.map(y=>sr.replace("ANNOTATION",y)).join(`
`);return Nn.replace(sr,s)}function Tr(r){const s=r.length<=1;return t.createElement(t.Fragment,null,"The ",s?"annotation":"annotations"," ",r.map(y=>t.createElement("code",null,y)).reduce((y,w)=>t.createElement(t.Fragment,null,y,", ",w))," ",s?"is":"are"," missing. You need to add the"," ",s?"annotation":"annotations"," to your component if you want to enable this tool.")}function hr(r){const{annotation:s,readMoreUrl:y}=r,w=Array.isArray(s)?s:[s],U=y||"https://backstage.io/docs/features/software-catalog/well-known-annotations",ee=Sr();return t.createElement(Dn,{missing:"field",title:"Missing Annotation",description:Tr(w),action:t.createElement(t.Fragment,null,t.createElement(m.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),t.createElement(ge.Z,{className:ee.code},t.createElement(M,{text:Cr(w),language:"yaml",showLineNumbers:!0,highlightedNumbers:wr(w.length),customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(x.Z,{color:"primary",component:nr,to:U},"Read more"))})}const ur=(r,s)=>(s.palette.type==="light"?L._j:L.$n)(s.palette[r].light,.6),yr=(r,s)=>(s.palette.type==="light"?L.$n:L._j)(s.palette[r].light,.9),Zr=(0,h.Z)(r=>({root:{marginRight:r.spacing(1),fill:({severity:s})=>ur(s,r)}})),Vr=({severity:r})=>{const s=Zr({severity:r});return t.createElement(vn.Z,{classes:s})},Br=({severity:r})=>{const s=Zr({severity:r});return t.createElement(st.Z,{classes:s})},Y=(0,h.Z)(r=>({panel:{backgroundColor:({severity:s})=>yr(s,r),color:({severity:s})=>ur(s,r),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:s})=>ur(s,r),fontWeight:r.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:s})=>ur(s,r),backgroundColor:({severity:s})=>yr(s,r)},details:{width:"100%",display:"block",color:r.palette.textContrast,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.border}`,padding:r.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),se=r=>r.charAt(0).toLocaleUpperCase("en-US")+r.slice(1);function Re(r){const{severity:s="warning",title:y,message:w,children:U,defaultExpanded:ee}=r,re=Y({severity:s}),Be=se(s)+(y?`: ${y}`:"");return t.createElement(ct.Z,{defaultExpanded:ee!=null?ee:!1,className:re.panel,role:"alert"},t.createElement(hn.Z,{expandIcon:t.createElement(Br,{severity:s}),className:re.summary},t.createElement(Vr,{severity:s}),t.createElement(m.Z,{className:re.summaryText,variant:"subtitle1"},Be)),(w||U)&&t.createElement(un.Z,null,t.createElement(Ae.Z,{container:!0},w&&t.createElement(Ae.Z,{item:!0,xs:12},t.createElement(m.Z,{className:re.message,variant:"body1"},w)),U&&t.createElement(Ae.Z,{item:!0,xs:12,className:re.details},U))))}const be=(0,h.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageErrorPanel"}),Qe=({error:r,message:s,stack:y,children:w})=>{const U=be();return t.createElement(Kt.Z,{dense:!0},t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(_t.Z,{classes:{secondary:U.text},primary:"Error",secondary:r}),t.createElement(g,{text:r})),t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(_t.Z,{classes:{secondary:U.text},primary:"Message",secondary:s}),t.createElement(g,{text:s})),y&&t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(_t.Z,{classes:{secondary:U.text},primary:"Stack Trace",secondary:y}),t.createElement(g,{text:y})),w)};function bt(r){const{title:s,error:y,defaultExpanded:w,children:U}=r;return t.createElement(Re,{severity:"error",title:s!=null?s:y.message,defaultExpanded:w},t.createElement(Qe,{error:y.name,message:y.message,stack:y.stack,children:U}))}const Ot=(0,h.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function gt(r){var s;const{title:y,error:w,defaultExpanded:U}=r,ee=Ot();if(w.name!=="ResponseError")return t.createElement(bt,{title:y!=null?y:w.message,defaultExpanded:U,error:w});const{body:re,cause:Be}=w,{request:Ve,response:ke}=re,Et=`${ke.statusCode}: ${Be.name}`,ht=Ve&&`${Ve.method} ${Ve.url}`,Jt=Be.message.replace(/\\n/g,`
`),zt=(s=Be.stack)==null?void 0:s.replace(/\\n/g,`
`),dn=JSON.stringify(re,void 0,2);return t.createElement(bt,{title:y!=null?y:w.message,defaultExpanded:U,error:{name:Et,message:Jt,stack:zt}},ht&&t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(_t.Z,{classes:{secondary:ee.text},primary:"Request",secondary:Ve?`${ht}`:void 0}),t.createElement(g,{text:ht})),t.createElement(t.Fragment,null,t.createElement(Pt.Z,{component:"li",className:ee.divider}),t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(_t.Z,{classes:{secondary:ee.text},primary:"Full Error as JSON"})),t.createElement(M,{language:"json",text:dn,showCopyCodeButton:!0})))}function on(r){const s=document.createElement("div");return s.setAttribute("id",r),s}function qt(r){document.body.insertBefore(r,document.body.lastElementChild.nextElementSibling)}function Xt(r){const s=useRef(null);useEffect(function(){const U=document.querySelector(`#${r}`),ee=U||on(r);return U||qt(ee),ee.appendChild(s.current),function(){s.current.remove(),ee.childNodes.length===-1&&ee.remove()}},[r]);function y(){return s.current||(s.current=document.createElement("div")),s.current}return y()}const Yt="core.calloutSeen";function $n(){const[r,s]=useState(()=>{const w=localStorage.getItem(Yt);return w?JSON.parse(w):{}}),y=useCallback((w,U)=>{const ee=localStorage.getItem(Yt),Be={...ee?JSON.parse(ee):{},[w]:U};s(Be),localStorage.setItem(Yt,JSON.stringify(Be))},[]);return{states:r,setState:y}}function Bn(r){const{states:s,setState:y}=$n(),w=useCallback(()=>{y(r,!0)},[y,r]);return{seen:s[r]===!0,markSeen:w}}function En(r){const{seen:s,markSeen:y}=Bn(r);return{show:s===!1,hide:y}}const Qt=(0,h.Z)(r=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${r.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:r.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function An(r){const{featureId:s,title:y,description:w,children:U}=r,{show:ee,hide:re}=En(s),Be=Xt("core.callout"),Ve=useRef(null),[ke,Et]=useState(),ht=Qt(),Jt=useCallback(()=>{if(Ve.current){const zt=Ve.current.getBoundingClientRect(),dn=Math.max(zt.width,zt.height),Pn=800,qn=zt.x-(dn-zt.width)/2-Pn,Er=zt.y-(dn-zt.height)/2-Pn,Ir=dn+2*Pn,kr=450,Vn=zt.x+zt.width/2-kr,fr=zt.y-(dn-zt.height)/2+dn+20;Et({dotLeft:qn,dotTop:Er,dotSize:Ir,borderWidth:Pn,textTop:fr,textLeft:Vn,textWidth:kr})}},[]);return useEffect(()=>(window.addEventListener("resize",Jt),window.addEventListener("scroll",Jt),()=>{window.removeEventListener("resize",Jt),window.removeEventListener("scroll",Jt)}),[Jt]),useLayoutEffect(Jt,[Ve.current,Jt]),ee?React.createElement(React.Fragment,null,React.createElement(Box,{className:ht.featureWrapper,ref:Ve},U),createPortal(React.createElement(Box,{className:ht.backdrop},React.createElement(ClickAwayListener,{onClickAway:re},React.createElement(React.Fragment,null,React.createElement(Box,{className:ht.dot,"data-testid":"dot",style:{left:ke==null?void 0:ke.dotLeft,top:ke==null?void 0:ke.dotTop,width:ke==null?void 0:ke.dotSize,height:ke==null?void 0:ke.dotSize,borderWidth:ke==null?void 0:ke.borderWidth},onClick:re,onKeyDown:re,role:"button",tabIndex:0},React.createElement(Box,{className:ht.pulseCircle})),React.createElement(Box,{className:ht.text,"data-testid":"text",style:{left:ke==null?void 0:ke.textLeft,top:ke==null?void 0:ke.textTop,width:ke==null?void 0:ke.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},y),React.createElement(Typography,null,w))))),Be)):React.createElement(React.Fragment,null,U)}const Kn=(0,h.Z)(r=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:r.palette.text.secondary,cursor:"default"},primary:{color:r.palette.primary.main},secondary:{color:r.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function gr({color:r="primary",disabled:s=!1,href:y="#",icon:w=t.createElement(pn.Z,null),label:U,onClick:ee,title:re}){const Be=Kn();return s?t.createElement(ge.Z,{title:re,className:C()(Be.link,Be.disabled)},w,t.createElement(m.Z,{variant:"caption",component:"span",className:Be.label},U)):t.createElement(nr,{title:re,className:C()(Be.link,Be[r]),to:y,onClick:ee},w,t.createElement(m.Z,{variant:"caption",component:"span",className:Be.label},U))}const ir=(0,h.Z)(r=>({links:{margin:r.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:r.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function lr(r){const{links:s}=r,y=ir();return t.createElement("nav",{className:y.links},s.map((w,U)=>t.createElement(gr,{key:U+1,...w})))}const Or=r=>{const s=r==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${s}) 0%,
    hsla(0, 0%, ${s}, 0.987) 8.1%,
    hsla(0, 0%, ${s}, 0.951) 15.5%,
    hsla(0, 0%, ${s}, 0.896) 22.5%,
    hsla(0, 0%, ${s}, 0.825) 29%,
    hsla(0, 0%, ${s}, 0.741) 35.3%,
    hsla(0, 0%, ${s}, 0.648) 41.2%,
    hsla(0, 0%, ${s}, 0.55) 47.1%,
    hsla(0, 0%, ${s}, 0.45) 52.9%,
    hsla(0, 0%, ${s}, 0.352) 58.8%,
    hsla(0, 0%, ${s}, 0.259) 64.7%,
    hsla(0, 0%, ${s}, 0.175) 71%,
    hsla(0, 0%, ${s}, 0.104) 77.5%,
    hsla(0, 0%, ${s}, 0.049) 84.5%,
    hsla(0, 0%, ${s}, 0.013) 91.9%,
    hsla(0, 0%, ${s}, 0) 100%
  `},Dr=100,Gr=10,Qr=(0,h.Z)(r=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Dr,height:`calc(100% + ${Gr}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Gr,background:`linear-gradient(90deg, ${Or(r.palette.type)})`},fadeRight:{right:-Gr,background:`linear-gradient(270deg, ${Or(r.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-r.spacing(2)},buttonRight:{right:-r.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function aa(r){const[[s,y],w]=React.useState([0,0]);return React.useLayoutEffect(()=>{const U=r.current;if(!U){w([0,0]);return}const ee=()=>{const re=U.scrollLeft,Be=U.scrollWidth-U.offsetWidth-U.scrollLeft;w([re,Be])};return ee(),U.addEventListener("scroll",ee),window.addEventListener("resize",ee),()=>{U.removeEventListener("scroll",ee),window.removeEventListener("resize",ee)}},[r]),[s,y]}function $r(r,s,y){const[w,U]=React.useState(0);return React.useLayoutEffect(()=>{if(w===0)return;const ee=window.performance.now(),re=requestAnimationFrame(Be=>{if(!r.current)return;const Ve=Be-ee,ke=Math.abs(w)*Ve/s,ht=Math.max(y,ke)*Math.sign(w);r.current.scrollBy({left:ht});const Jt=w-ht;Math.sign(w)!==Math.sign(Jt)?U(0):U(Jt)});return()=>cancelAnimationFrame(re)},[r,w,s,y]),U}function Ur(r){const{scrollStep:s=100,scrollSpeed:y=50,minScrollDistance:w=5,children:U,...ee}=r,re=Qr(r),Be=React.useRef(),[Ve,ke]=aa(Be),Et=$r(Be,y,w),ht=Jt=>{Be.current&&Et(Jt?s:-s)};return React.createElement(Box,{...ee,className:re.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:re.container,ref:Be},U),React.createElement(Box,{className:classNames(re.fade,re.fadeLeft,{[re.fadeHidden]:Ve===0})}),React.createElement(Box,{className:classNames(re.fade,re.fadeRight,{[re.fadeHidden]:ke===0})}),Ve>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>ht(!1),className:classNames(re.button,re.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),ke>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>ht(!0),className:classNames(re.button,re.buttonRight,{})},React.createElement(ChevronRight,null)))}const oa=(0,h.Z)(r=>({alpha:{color:r.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Ea(r){const s=oa(r),{shorthand:y,alpha:w}=r;return y?t.createElement(m.Z,{component:"span",className:s[w?"alpha":"beta"],style:{fontSize:"120%"}},w?t.createElement(t.Fragment,null,"\u03B1"):t.createElement(t.Fragment,null,"\u03B2")):t.createElement(m.Z,{component:"span",className:s[w?"alpha":"beta"]},w?"Alpha":"Beta")}const zo=(0,t.lazy)(()=>e.e(4091).then(e.bind(e,54091)).then(r=>({default:r.RealLogViewer})));function jo(r){const{Progress:s}=(0,n.qD)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(s,null)},t.createElement(zo,{...r}))}const Vo=(0,h.Z)(r=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${r.palette.border}`},"& th, & td":{border:`1px solid ${r.palette.border}`,padding:r.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:r.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:r.palette.background.paper},"& tr":{backgroundColor:r.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:r.palette.background.default},"& a":{color:r.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),za=(r,s)=>s?typeof s=="string"?r+s:t.Children.toArray(s.props.children).reduce(za,r):r,sa=({level:r,children:s})=>{const U=t.Children.toArray(s).reduce(za,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${r}`,{id:U},s)},Go={code:({inline:r,className:s,children:y,...w})=>{const U=String(y).replace(/\n+$/,""),ee=/language-(\w+)/.exec(s||"");return!r&&ee?t.createElement(M,{language:ee[1],text:U}):t.createElement("code",{className:s,...w},y)},h1:sa,h2:sa,h3:sa,h4:sa,h5:sa,h6:sa};function Ho(r){const{content:s,dialect:y="gfm",linkTarget:w,transformLinkUri:U,transformImageUri:ee,className:re}=r,Be=Vo();return t.createElement(X.D,{remarkPlugins:y==="gfm"?[ue.Z]:[],className:`${Be.markdown} ${re}`,children:s,components:Go,linkTarget:w,transformLinkUri:U,transformImageUri:ee})}const Jo=(0,h.Z)(r=>({root:{paddingLeft:r.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Yo=({request:r,busy:s,setBusy:y})=>{const w=Jo(),[U,ee]=(0,t.useState)(),re=async()=>{y(!0);try{await r.trigger()}catch(Ve){ee((0,Lt.VZ)(Ve)?Ve.message:"An unspecified error occurred")}finally{y(!1)}},Be=r.provider.icon;return t.createElement($e.Z,{disabled:s,classes:{root:w.root}},t.createElement(ut.Z,null,t.createElement(Be,{fontSize:"large"})),t.createElement(_t.Z,{primary:r.provider.title,secondary:U&&t.createElement(m.Z,{color:"error"},U)}),t.createElement(x.Z,{color:"primary",variant:"contained",onClick:re},"Log in"))},Xo=(0,h.Z)(r=>({dialog:{paddingTop:r.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:r.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:r.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Qo(r){var s;const y=Xo(),[w,U]=(0,t.useState)(!1),ee=(0,n.h_)(n.ZM),Be=(s=(0,n.h_)(n.Ds).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,Ve=(0,q.Z)((0,t.useMemo)(()=>ee.authRequest$(),[ee]),[]),ke=()=>{Ve.forEach(Et=>Et.reject())};return t.createElement(he.Z,{open:Boolean(Ve.length),fullWidth:!0,maxWidth:"xs",classes:{paper:y.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(tt.Z,{classes:{root:y.title},id:"oauth-req-dialog-title"},t.createElement(m.Z,{className:y.titleHeading,variant:"h1"},"Login Required"),Be?t.createElement(m.Z,null,"This will trigger a http redirect to OAuth Login."):null),t.createElement(at.Z,{dividers:!0,classes:{root:y.contentList}},t.createElement(Kt.Z,null,Ve.map(Et=>t.createElement(Yo,{key:Et.provider.title,request:Et,busy:w,setBusy:U}))))),t.createElement(De.Z,{classes:{root:y.actionButtons}},t.createElement(x.Z,{onClick:ke},"Reject All")))}const qo=(0,h.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function es(r){var s;const[y,w]=(0,t.useState)(!1),U=(0,S.t)(),ee=qo(),re=Be=>{U()&&w(Be)};return t.createElement(Vt.ZP,{title:(s=r.title)!=null?s:r.text||"",placement:r.placement,disableHoverListener:!y},t.createElement(ne(),{text:r.text,line:r.line,onToggled:re,containerClassName:ee.container}))}function va(r){const s=(0,$.Z)(),[y,w]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const U=setTimeout(()=>w(!0),s.transitions.duration.short);return()=>clearTimeout(U)},[s.transitions.duration.short]),y?t.createElement(z.Z,{...r,"data-testid":"progress"}):t.createElement(ge.Z,{display:"none"})}const ts=(0,h.Z)(r=>({root:{maxWidth:"fit-content",padding:r.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:r.palette.textSubtle},arrow:{color:r.palette.textSubtle}}),{name:"BackstageBottomLink"});function ja(r){const{link:s,title:y,onClick:w}=r,U=ts();return t.createElement(ge.Z,null,t.createElement(Pt.Z,null),t.createElement(nr,{to:s,onClick:w,underline:"none"},t.createElement(ge.Z,{display:"flex",alignItems:"center",className:U.root},t.createElement(ge.Z,{className:U.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(m.Z,null,t.createElement("strong",null,y))),t.createElement(He.Z,{className:U.arrow}))))}const ns=r=>{const{slackChannel:s}=r;if(s){if(typeof s=="string")return t.createElement(m.Z,null,"Please contact ",s," for help.");if(!s.href)return t.createElement(m.Z,null,"Please contact ",s.name," for help.")}else return null;return t.createElement(o,{to:s.href,variant:"contained"},s.name)},Va=class extends t.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,y){console.error(`ErrorBoundary, error: ${s}, info: ${y}`),this.setState({error:s,errorInfo:y})}render(){const{slackChannel:s,children:y}=this.props,{error:w}=this.state;return w?t.createElement(bt,{title:"Something Went Wrong",error:w},t.createElement(ns,{slackChannel:s})):y}},rs=(0,h.Z)(r=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:r.spacing(2,2,2,2.5)},headerTitle:{fontWeight:r.typography.fontWeightBold},headerSubheader:{paddingTop:r.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),as=(0,k.Z)(r=>({root:{display:"inline-block",padding:r.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(me.Z),Ga={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ia(r){const{title:s,subheader:y,divider:w=!0,deepLink:U,slackChannel:ee,errorBoundaryProps:re,variant:Be,children:Ve,headerStyle:ke,headerProps:Et,icon:ht,action:Jt,actionsClassName:zt,actions:dn,cardClassName:Pn,actionsTopRight:qn,className:Er,noPadding:Ir,titleTypographyProps:kr}=r,Vn=rs();let fr={},mr={};Be&&Be.split(/[\s]+/g).forEach(Fr=>{fr={...fr,...Ga.card[Fr]},mr={...mr,...Ga.cardContent[Fr]}});const Nr=()=>!y&&!ht?null:t.createElement("div",{className:Vn.headerSubheader,"data-testid":"info-card-subheader"},y&&t.createElement("div",{className:Vn.subheader},y),ht),Hr=re||(ee?{slackChannel:ee}:{});return t.createElement(Q.Z,{style:fr,className:Er},t.createElement(Va,{...Hr},s&&t.createElement(Fe.Z,{classes:{root:Vn.header,title:Vn.headerTitle,subheader:Vn.headerSubheader,avatar:Vn.headerAvatar,action:Vn.headerAction,content:Vn.headerContent},title:s,subheader:Nr(),action:Jt,style:{...ke},titleTypographyProps:kr,...Et}),qn&&t.createElement(as,null,qn),w&&t.createElement(Pt.Z,null),t.createElement(xe.Z,{className:C()(Pn,{[Vn.noPadding]:Ir}),style:mr},Ve),dn&&t.createElement(me.Z,{className:zt},dn),U&&t.createElement(ja,{...U})))}const os=(0,h.Z)(r=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:r.typography.pxToRem(45),fontWeight:r.typography.fontWeightBold,color:r.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ha={fractional:!0,inverse:!1,unit:"%",max:100},Ja=({palette:r,value:s,inverse:y,max:w})=>{if(isNaN(s))return"#ddd";const U=w||Ha.max,ee=y?U-s:s;return ee<U/3?r.status.error:ee<U*(2/3)?r.status.warning:r.status.ok};function ss(r){const[s,y]=useState(null),{getColor:w=Ja}=r,U=os(r),{palette:ee}=useTheme(),{value:re,fractional:Be,inverse:Ve,unit:ke,max:Et,description:ht}={...Ha,...r},Jt=Be?Math.round(re*Et):re,zt=Et!==100?Math.round(re):Jt,[dn,Pn]=useState(!1);return useEffect(()=>{const qn=s,Er=()=>Pn(!0),Ir=()=>Pn(!1);return qn&&ht?(qn.addEventListener("mouseenter",Er),qn.addEventListener("mouseleave",Ir),()=>{qn.removeEventListener("mouseenter",Er),qn.removeEventListener("mouseleave",Ir)}):()=>{Pn(!1)}},[ht,s]),React.createElement(Box,{ref:y,className:U.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Jt,strokeWidth:12,trailWidth:12,strokeColor:w({palette:ee,value:zt,inverse:Ve,max:Et}),className:U.circle}),ht&&dn?React.createElement(Box,{className:U.description},ht):React.createElement(Box,{className:U.overlay},isNaN(re)?"N/A":`${zt}${ke}`))}const is=(0,h.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function kl(r){const s=is(r),{title:y,subheader:w,progress:U,inverse:ee,deepLink:re,description:Be,icon:Ve,variant:ke,getColor:Et}=r,ht={inverse:ee,description:Be,getColor:Et,value:U};return React.createElement(Box,{className:s.root},React.createElement(ia,{title:y,subheader:w,deepLink:re,variant:ke,icon:Ve},React.createElement(ss,{...ht})))}function Zl(r){const{value:s,getColor:y=Ja}=r,{palette:w}=useTheme();if(isNaN(s))return null;let U=Math.round(s*100*100)/100;U>100&&(U=100);const ee=y({palette:w,value:U,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${U}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:U,strokeWidth:4,trailWidth:4,strokeColor:ee})))}const ls=(0,h.Z)(r=>(0,G.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),cs=()=>{const r=ls();return t.createElement(Dt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},us=(0,h.Z)(r=>(0,G.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),ds=()=>{const r=us();return t.createElement(Dt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},ms=(0,k.Z)(r=>(0,G.Z)({root:{"label + &":{marginTop:r.spacing(3)}},input:{borderRadius:r.shape.borderRadius,position:"relative",backgroundColor:r.palette.background.paper,border:"1px solid #ced4da",fontSize:r.typography.body1.fontSize,padding:r.spacing(1.25,3.25,1.25,1.5),transition:r.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:r.palette.background.paper,borderRadius:r.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(Te.Z),ps=(0,h.Z)(r=>(0,G.Z)({formControl:{margin:`${r.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Ya(r){const{multiple:s,items:y,label:w,placeholder:U,selected:ee,onChange:re,triggerReset:Be,native:Ve=!1,disabled:ke=!1,margin:Et}=r,ht=ps(),[Jt,zt]=(0,t.useState)(ee||(s?[]:"")),[dn,Pn]=(0,t.useState)(!1);(0,t.useEffect)(()=>{zt(s?[]:"")},[Be,s]),(0,t.useEffect)(()=>{zt(ee||(s?[]:""))},[ee,s]);const qn=Vn=>{zt(Vn.target.value),re(Vn.target.value)},Er=Vn=>{if(ke){Vn.preventDefault();return}Pn(fr=>s&&!(Vn.target instanceof HTMLElement)?!0:!fr)},Ir=()=>{Pn(!1)},kr=Vn=>()=>{const fr=Jt.filter(mr=>mr!==Vn);zt(fr),re(fr)};return t.createElement(ge.Z,{className:ht.root},t.createElement(ve.Z,{className:ht.formControl},t.createElement(nt.Z,{className:ht.formLabel},w),t.createElement(Ut.Z,{"aria-label":w,value:Jt,native:Ve,disabled:ke,"data-testid":"select",displayEmpty:!0,multiple:s,margin:Et,onChange:qn,open:dn,onOpen:Er,onClose:Ir,input:t.createElement(ms,null),label:w,tabIndex:0,renderValue:Vn=>{var fr;return s&&Jt.length!==0?t.createElement(ge.Z,{className:ht.chips},Vn.map(mr=>{var Nr,Hr;return t.createElement(pe.Z,{key:(Nr=y.find(Kr=>Kr.value===mr))==null?void 0:Nr.value,label:(Hr=y.find(Kr=>Kr.value===mr))==null?void 0:Hr.label,clickable:!0,onDelete:kr(mr),className:ht.chip})})):t.createElement(m.Z,null,Jt.length===0?U||"":(fr=y.find(mr=>mr.value===Vn))==null?void 0:fr.label)},IconComponent:()=>dn?t.createElement(ds,null):t.createElement(cs,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},U&&!s&&t.createElement(Bt.Z,{value:[]},U),Ve?y&&y.map(Vn=>t.createElement("option",{value:Vn.value,key:Vn.value},Vn.label)):y&&y.map(Vn=>t.createElement(Bt.Z,{key:Vn.value,value:Vn.value},s&&t.createElement(ae.Z,{color:"primary",checked:Jt.includes(Vn.value)||!1,className:ht.checkbox}),Vn.label)))))}const Ta=()=>{},Xa=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:Ta,stepHistory:[],setStepHistory:Ta,onStepChange:Ta});function Wl(r){const{children:s,elevated:y,onStepChange:w,activeStep:U=0}=r,[ee,re]=useState(U),[Be,Ve]=useState([0]);useEffect(()=>{re(U)},[U]);const ke=[];let Et;return Children.forEach(s,ht=>{isValidElement(ht)&&(ht.props.end?Et=ht:ke.push(ht))}),React.createElement(React.Fragment,null,React.createElement(Xa.Provider,{value:{stepIndex:ee,setStepIndex:re,stepHistory:Be,setStepHistory:Ve,onStepChange:w,stepperLength:Children.count(s)}},React.createElement(MuiStepper,{activeStep:ee,orientation:"vertical",elevation:y?2:0},ke)),ee>=Children.count(s)-1&&Et)}const fs=(0,h.Z)(r=>({root:{marginTop:r.spacing(3),"& button":{marginRight:r.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),hs=({text:r,handleClick:s})=>React.createElement(Button$1,{onClick:s},r||"Reset"),gs=({text:r,handleClick:s,disabled:y,last:w,stepIndex:U})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:y,"data-testid":`nextButton-${U}`,onClick:s},r||(w?"Finish":"Next")),Es=({text:r,handleClick:s,disabled:y,stepIndex:w})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:y,"data-testid":`skipButton-${w}`,onClick:s},r||"Skip"),vs=({text:r,handleClick:s,disabled:y,stepIndex:w})=>React.createElement(Button$1,{onClick:s,"data-testid":`backButton-${w}`,disabled:y},r||"Back"),Qa=({actions:r={},children:s})=>{const y=fs(),{stepperLength:w,stepIndex:U,setStepIndex:ee,stepHistory:re,setStepHistory:Be,onStepChange:Ve}=useContext(Xa),ke=(zt,dn)=>{dn&&dn(),Ve&&Ve(U,zt),ee(zt)},Et=()=>{const zt=r.nextStep?r.nextStep(U,w-1):U+1;ke(zt,r.onNext),Be([...re,zt])},ht=()=>{re.pop(),ke(re[re.length-1],r.onBack),Be([...re])},Jt=()=>{ke(0,r.onRestart),Be([0])};return React.createElement(Box,{className:y.root},[void 0,!0].includes(r.showBack)&&U!==0&&React.createElement(vs,{text:r.backText,handleClick:ht,disabled:U===0,stepIndex:U}),r.showSkip&&React.createElement(Es,{text:r.skipText,handleClick:Et,disabled:!!w&&U>=w||!!r.canSkip&&!r.canSkip(),stepIndex:U}),[void 0,!0].includes(r.showNext)&&React.createElement(gs,{text:r.nextText,handleClick:Et,disabled:!!w&&U>=w||!!r.canNext&&!r.canNext(),stepIndex:U}),r.showRestart&&U!==0&&React.createElement(hs,{text:r.restartText,handleClick:Jt,stepIndex:U}),s)},ys=(0,h.Z)(r=>({end:{padding:r.spacing(3)}}),{name:"SimpleStepperStep"});function Nl(r){const{title:s,children:y,end:w,actions:U,...ee}=r,re=ys();return w?React.createElement(Box,{className:re.end},React.createElement(Typography,{variant:"h6"},s),y,React.createElement(Qa,{actions:{...U||{},showNext:!1}})):React.createElement(MuiStep,{...ee},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},s)),React.createElement(StepContent,null,y,React.createElement(Qa,{actions:U})))}const la=(0,h.Z)(r=>({status:{fontWeight:r.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:r.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:r.palette.status.ok}},warning:{"&::before":{backgroundColor:r.palette.status.warning}},error:{"&::before":{backgroundColor:r.palette.status.error}},pending:{"&::before":{backgroundColor:r.palette.status.pending}},running:{"&::before":{backgroundColor:r.palette.status.running}},aborted:{"&::before":{backgroundColor:r.palette.status.aborted}}}),{name:"BackstageStatus"});function _s(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.ok),"aria-label":"Status ok","aria-hidden":"true",...r})}function Ps(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.warning),"aria-label":"Status warning","aria-hidden":"true",...r})}function bs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.error),"aria-label":"Status error","aria-hidden":"true",...r})}function Cs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.pending),"aria-label":"Status pending","aria-hidden":"true",...r})}function Os(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.running),"aria-label":"Status running","aria-hidden":"true",...r})}function Rs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.aborted),"aria-label":"Status aborted","aria-hidden":"true",...r})}const Ss=r=>(0,G.Z)({root:{fontWeight:r.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:r.spacing(4),border:"0",verticalAlign:"top"}}),As={root:{border:"0",verticalAlign:"top"}},ws=r=>(0,G.Z)({root:{margin:r.spacing(0,0,-1,0)}}),Ds=r=>(0,G.Z)({root:{padding:r.spacing(0,0,1,0)},random:{}}),Ts=(0,k.Z)(Ss,{name:"BackstageMetadataTableTitleCell"})(We.Z),Is=(0,k.Z)(As,{name:"BackstageMetadataTableCell"})(We.Z),Ms=({dense:r,children:s})=>t.createElement(Ke.Z,{size:r?"small":"medium"},t.createElement(Ye.Z,null,s)),Ls=({title:r,children:s,...y})=>t.createElement(Ct.Z,null,r&&t.createElement(Ts,null,r),t.createElement(Is,{colSpan:r?1:2,...y},s)),qa=(0,k.Z)(ws,{name:"BackstageMetadataTableList"})(({classes:r,children:s})=>t.createElement(Kt.Z,{disablePadding:!0,className:r.root},s)),eo=(0,k.Z)(Ds,{name:"BackstageMetadataTableListItem"})(({classes:r,children:s})=>t.createElement($e.Z,{className:r.root},s)),to=(0,G.Z)({root:{margin:"0 0",listStyleType:"none"}}),$s=r=>(0,G.Z)({root:{...to.root,paddingLeft:r.spacing(1)}}),no=(0,k.Z)(to,{name:"BackstageStructuredMetadataTableList"})(({classes:r,children:s})=>t.createElement(qa,{classes:r},s)),ro=(0,k.Z)($s,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:r,children:s})=>t.createElement(qa,{classes:r},s));function Bs(r,s){const y=r.map((w,U)=>t.createElement(eo,{key:U},Ia(w)));return s?t.createElement(ro,null,y):t.createElement(no,null,y)}function Us(r,s,y){const w=Object.keys(r).map(U=>{const ee=Ia(r[U],!0),re=y&&y.titleFormat?y.titleFormat(U):we()(U);return t.createElement(eo,{key:U},t.createElement(m.Z,{variant:"body2",component:"span"},`${re}: `),ee)});return s?t.createElement(ro,null,w):t.createElement(no,null,w)}function Ia(r,s,y){return t.isValidElement(r)?t.createElement(t.Fragment,null,r):typeof r=="object"&&!Array.isArray(r)?Us(r,s,y):Array.isArray(r)?Bs(r,y):typeof r=="boolean"?t.createElement(t.Fragment,null,r?"\u2705":"\u274C"):t.createElement(m.Z,{variant:"body2",component:"span"},r)}const xs=({value:r,options:s})=>t.createElement(t.Fragment,null,Ia(r,s)),ks=({title:r,value:s,options:y})=>t.createElement(Ls,{title:y&&y.titleFormat?y.titleFormat(r):we()(r)},t.createElement(xs,{value:s,options:y}));function Zs(r,s){return Object.keys(r).map(y=>t.createElement(ks,{key:y,title:y,value:r[y],options:s}))}function Ws(r){const{metadata:s,dense:y=!0,options:w}=r,U=Zs(s,w||{});return t.createElement(Ms,{dense:y},U)}function Ns(r){return qs.stringify(r,{strictNullHandling:!0})}function ao(r){return qs.parse(r,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function oo(r,s){return ao(r)[s]}function Ks(r,s,y){const w={...ao(r),[s]:y};return Ns(w)}function Kl(r,s=250){const[y,w]=useSearchParams(),U=y.toString(),[ee,re]=useState(oo(U,r));return useEffect(()=>{const Be=oo(U,r);re(Ve=>isEqual(Be,Ve)?Ve:Be)},[U,re,r]),useDebouncedEffect(()=>{const Be=Ks(U,r,ee);U!==Be&&w(Be,{replace:!0})},[w,ee,U,r],s),[ee,re]}const Fs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function so(){const s=(0,n.I_)().get(n.Ds),y=s==null?void 0:s.getOptionalConfig("app.support");return y?{url:y.getString("url"),items:y.getConfigArray("items").flatMap(w=>{var U;return{title:w.getString("title"),icon:w.getOptionalString("icon"),links:((U=w.getOptionalConfigArray("links"))!=null?U:[]).flatMap(ee=>({url:ee.getString("url"),title:ee.getString("title")}))}})}:Fs}function Wr(r,s){const w=(0,n.qD)().getSystemIcon(r);return w?t.createElement(w,{...s}):t.createElement(wn.Z,{...s})}function Fl(r){return Wr("brokenImage",r)}function zs(r){return Wr("catalog",r)}function zl(r){return Wr("chat",r)}function jl(r){return Wr("dashboard",r)}function js(r){return Wr("docs",r)}function Vl(r){return Wr("email",r)}function Vs(r){return Wr("github",r)}function Gl(r){return Wr("group",r)}function ya(r){return Wr("help",r)}function Gs(r){return Wr("user",r)}function Hl(r){return Wr("warning",r)}const Hs=(0,h.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Js=({icon:r})=>{var s;const y=(0,n.qD)(),w=r&&(s=y.getSystemIcon(r))!=null?s:ya;return t.createElement(w,null)},Ys=({link:r})=>{var s;return t.createElement(nr,{to:r.url},(s=r.title)!=null?s:r.url)},Xs=({item:r})=>{var s;return t.createElement($e.Z,null,t.createElement(It.Z,null,t.createElement(Js,{icon:r.icon})),t.createElement(_t.Z,{primary:r.title,secondary:(s=r.links)==null?void 0:s.reduce((y,w,U)=>[...y,U>0&&t.createElement("br",{key:U}),t.createElement(Ys,{link:w,key:w.url})],[])}))};function Qs(r){const{title:s,items:y,children:w}=r,{items:U}=so(),[ee,re]=(0,t.useState)(!1),[Be,Ve]=(0,t.useState)(null),ke=Hs(),Et=(0,sn.Z)(zt=>zt.breakpoints.down("sm")),ht=zt=>{Ve(zt.currentTarget),re(!0)},Jt=()=>{re(!1)};return t.createElement(t.Fragment,null,t.createElement(ge.Z,{display:"flex",ml:1},Et?t.createElement(l.Z,{color:"primary",size:"small",onClick:ht,"data-testid":"support-button","aria-label":"Support"},t.createElement(ya,null)):t.createElement(x.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:ht,startIcon:t.createElement(ya,null)},"Support")),t.createElement(jt.ZP,{"data-testid":"support-button-popover",open:ee,anchorEl:Be,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Jt},t.createElement(Kt.Z,{className:ke.popoverList},s&&t.createElement($e.Z,{alignItems:"flex-start"},t.createElement(m.Z,{variant:"subtitle1"},s)),t.Children.map(w,(zt,dn)=>t.createElement($e.Z,{alignItems:"flex-start",key:`child-${dn}`},zt)),(y!=null?y:U).map((zt,dn)=>t.createElement(Xs,{item:zt,key:`item-${dn}`}))),t.createElement(De.Z,null,t.createElement(x.Z,{color:"primary",onClick:Jt,"aria-label":"Close"},"Close"))))}const _a=72,io=24,lo=18,Jr={drawerWidthClosed:_a,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:_a,iconSize:_a-io*2,iconPadding:io,selectedIndicatorWidth:3,userBadgePadding:lo,userBadgeDiameter:_a-lo*2,mobileSidebarHeight:56},ei=r=>({...Jr,...r,iconContainerWidth:Jr.drawerWidthClosed,iconSize:Jr.drawerWidthClosed-Jr.iconPadding*2,userBadgeDiameter:Jr.drawerWidthClosed-Jr.userBadgePadding*2}),co={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Jr.defaultOpenDelayMs+200},ti=r=>({...co,...r}),ni="@backstage/core/sidebar-intro-dismissed",xr=(0,t.createContext)({sidebarConfig:Jr,submenuConfig:co}),Ma=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),uo={isOpen:!1,setOpen:()=>{}},mo=(0,t.createContext)(uo),po=(0,yn.CT)("sidebar-open-state-context");function fo(r){const{children:s,value:y}=r;return t.createElement(mo.Provider,{value:y},t.createElement(po.Provider,{value:(0,yn.EI)({1:y})},s))}const pa=()=>{const r=(0,t.useContext)(po),s=(0,t.useContext)(mo);if(r===void 0)return s||uo;const y=r.atVersion(1);if(y===void 0)throw new Error("No context found for version 1.");return y},ho={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},go=(0,t.createContext)(ho),Eo=(0,yn.CT)("sidebar-pin-state-context");function ri(r){const{children:s,value:y}=r;return t.createElement(go.Provider,{value:y},t.createElement(Eo.Provider,{value:(0,yn.EI)({1:y})},s))}const Pa=()=>{const r=(0,t.useContext)(Eo),s=(0,t.useContext)(go);if(r===void 0)return s||ho;const y=r.atVersion(1);if(y===void 0)throw new Error("No context found for version 1.");return y},ai=(0,h.Z)(r=>({root:{flexGrow:0,margin:r.spacing(0,2),color:r.palette.navigation.color},selected:s=>({color:`${r.palette.navigation.selectedColor}!important`,borderTop:`solid ${s.sidebarConfig.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),oi=r=>{const{to:s,label:y,icon:w,value:U}=r,{sidebarConfig:ee}=(0,t.useContext)(xr),re=ai({sidebarConfig:ee}),Be=(0,W.TH)(),{selectedMenuItemIndex:Ve,setSelectedMenuItemIndex:ke}=(0,t.useContext)(yo),Et=(Jt,zt)=>{ke(zt===Ve?-1:zt)},ht=U===Ve&&Ve>=0||U!==Ve&&!(Ve>=0)&&s===Be.pathname;return t.createElement(zn.Z,{"aria-label":y,label:y,icon:w,component:nr,to:s||Be.pathname,onChange:Et,value:U,selected:ht,classes:re})},La=r=>{const{children:s,to:y,label:w,icon:U,value:ee}=r,{isMobile:re}=Pa();return re?t.createElement(oi,{to:y,label:w,icon:U,value:ee}):t.createElement(t.Fragment,null,s)},vo=(0,h.Z)(r=>({root:{position:"fixed",backgroundColor:r.palette.navigation.background,color:r.palette.navigation.color,bottom:0,left:0,right:0,zIndex:r.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:s=>({background:r.palette.navigation.background,width:"100%",bottom:`${s.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${s.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:r.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:r.spacing(2,3)},overlayHeaderClose:{color:r.palette.text.primary},marginMobileSidebar:s=>({marginBottom:`${s.sidebarConfig.mobileSidebarHeight}px`})})),si=r=>(0,_.orderBy)(r,({props:{priority:s}})=>Number.isInteger(s)?s:-1,"desc"),ii=t.createElement(La).type,li=({children:r,label:s="Menu",open:y,onClose:w})=>{const{sidebarConfig:U}=(0,t.useContext)(xr),ee=vo({sidebarConfig:U});return t.createElement(kn.ZP,{anchor:"bottom",open:y,onClose:w,ModalProps:{BackdropProps:{classes:{root:ee.marginMobileSidebar}}},classes:{root:ee.marginMobileSidebar,paperAnchorBottom:ee.overlay}},t.createElement(ge.Z,{className:ee.overlayHeader},t.createElement(m.Z,{variant:"h3"},s),t.createElement(l.Z,{onClick:w,classes:{root:ee.overlayHeaderClose}},t.createElement(a.Z,null))),t.createElement(ge.Z,{component:"nav"},r))},yo=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),ci=r=>{const{sidebarConfig:s}=(0,t.useContext)(xr),{children:y}=r,w=vo({sidebarConfig:s}),U=(0,W.TH)(),[ee,re]=(0,t.useState)(-1);(0,t.useEffect)(()=>{re(-1)},[U.pathname]);let Be=(0,n.vJ)(y,ke=>ke.getElements().filter(Et=>Et.type===ii));if(y)Be.length?Be=si(Be):Be.push(t.createElement(La,{key:"default_menu",icon:t.createElement(Mn.Z,null)},y));else return null;const Ve=ee>=0&&!Be[ee].props.to;return t.createElement(fo,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(yo.Provider,{value:{selectedMenuItemIndex:ee,setSelectedMenuItemIndex:re}},t.createElement(li,{label:Be[ee]&&Be[ee].props.label,open:Ve,onClose:()=>re(-1)},Be[ee]&&Be[ee].props.children),t.createElement(Tn.Z,{className:w.root,"data-testid":"mobile-sidebar-root",component:"nav"},Be)))},_o={getSidebarPinState(){let r;try{r=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!r},setSidebarPinState(r){return window.localStorage.setItem("sidebarPinState",JSON.stringify(r))}},ui=(0,h.Z)(r=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[r.breakpoints.up("sm")]:{paddingLeft:s=>s.isPinned?s.sidebarConfig.drawerWidthOpen:s.sidebarConfig.drawerWidthClosed},[r.breakpoints.down("xs")]:{paddingBottom:s=>s.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Po=(0,t.createContext)({content:{contentRef:void 0}});function di(r){const[s,y]=(0,t.useState)(()=>_o.getSidebarPinState()),{sidebarConfig:w}=(0,t.useContext)(xr),U=(0,t.useRef)(null),ee=(0,t.useMemo)(()=>({content:{contentRef:U}}),[U]);(0,t.useEffect)(()=>{_o.setSidebarPinState(s)},[s]);const re=(0,sn.Z)(ke=>ke.breakpoints.down("xs"),{noSsr:!0}),Be=()=>y(!s),Ve=ui({isPinned:s,sidebarConfig:w});return t.createElement(ri,{value:{isPinned:s,toggleSidebarPinState:Be,isMobile:re}},t.createElement(Po.Provider,{value:ee},t.createElement(ge.Z,{className:Ve.root},r.children)))}function $a(){const{content:r}=(0,t.useContext)(Po);return{focusContent:(0,t.useCallback)(()=>{var y,w;(w=(y=r==null?void 0:r.contentRef)==null?void 0:y.current)==null||w.focus()},[r]),contentRef:r==null?void 0:r.contentRef}}const bo=(0,h.Z)(r=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:r.zIndex.appBar,background:r.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}},drawerWidth:s=>({width:s.sidebarConfig.drawerWidthClosed}),drawerOpen:s=>({width:s.sidebarConfig.drawerWidthOpen,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),mi=r=>{const{sidebarConfig:s}=(0,t.useContext)(xr),{openDelayMs:y=s.defaultOpenDelayMs,closeDelayMs:w=s.defaultCloseDelayMs,disableExpandOnHover:U,children:ee}=r,re=bo({sidebarConfig:s}),Be=(0,sn.Z)(Er=>Er.breakpoints.down("md"),{noSsr:!0}),[Ve,ke]=(0,t.useState)(0),Et=(0,t.useRef)(),{isPinned:ht,toggleSidebarPinState:Jt}=Pa(),zt=()=>{ht||U||(Et.current&&(clearTimeout(Et.current),Et.current=void 0),Ve!==2&&!Be&&(Et.current=window.setTimeout(()=>{Et.current=void 0,ke(2)},y),ke(1)))},dn=()=>{ht||U||(Et.current&&(clearTimeout(Et.current),Et.current=void 0),Ve===1?ke(0):Ve===2&&(Et.current=window.setTimeout(()=>{Et.current=void 0,ke(0)},w)))},Pn=Ve===2&&!Be||ht,qn=Er=>{Er?(ke(2),Jt()):(ke(0),Jt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(fi,null),t.createElement(fo,{value:{isOpen:Pn,setOpen:qn}},t.createElement(ge.Z,{className:re.root,"data-testid":"sidebar-root",onMouseEnter:U?()=>{}:zt,onFocus:U?()=>{}:zt,onMouseLeave:U?()=>{}:dn,onBlur:U?()=>{}:dn},t.createElement(ge.Z,{className:C()(re.drawer,re.drawerWidth,{[re.drawerOpen]:Pn})},ee))))},pi=r=>{var s,y;const w=ei((s=r.sidebarOptions)!=null?s:{}),U=ti((y=r.submenuOptions)!=null?y:{}),{children:ee,disableExpandOnHover:re,openDelayMs:Be,closeDelayMs:Ve}=r,{isMobile:ke}=Pa();return ke?t.createElement(ci,null,ee):t.createElement(xr.Provider,{value:{sidebarConfig:w,submenuConfig:U}},t.createElement(mi,{openDelayMs:Be,closeDelayMs:Ve,disableExpandOnHover:re},ee))};function fi(){const{sidebarConfig:r}=(0,t.useContext)(xr),{focusContent:s,contentRef:y}=$a(),w=bo({sidebarConfig:r});return y!=null&&y.current?t.createElement(x.Z,{onClick:s,variant:"contained",className:C()(w.visuallyHidden)},"Skip to content"):null}function ba(r,s){const y=new URLSearchParams(s.search).toString(),w=_n().parse(y),U=new URLSearchParams(r.search).toString(),ee=_n().parse(U);return(0,_.isEqual)(s.pathname,r.pathname)&&(0,_.isMatch)(ee,w)}const hi=(0,h.Z)(r=>{var s,y;return{item:{height:48,width:"100%","&:hover":{background:((s=r.palette.navigation.navItem)==null?void 0:s.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:r.palette.navigation.color,padding:r.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:r.palette.common.white},label:{margin:r.spacing(1.75),marginLeft:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((y=r.palette.navigation.navItem)==null?void 0:y.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor}},textContent:{color:r.palette.navigation.color,paddingLeft:r.spacing(4),paddingRight:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),gi=r=>{const{title:s,subtitle:y,to:w,icon:U,dropdownItems:ee}=r,re=hi(),{setIsHoveredOn:Be}=(0,t.useContext)(Ma),Ve=()=>{Be(!1)},ke=(0,W.WU)(w!=null?w:""),Et=(0,W.TH)();let ht=ba(Et,ke);const[Jt,zt]=(0,t.useState)(!1),dn=()=>{zt(!Jt)};return ee!==void 0?(ee.some(Pn=>{const qn=(0,Ie.i3)(Pn.to);return ht=ba(Et,qn),ht}),t.createElement(ge.Z,{className:re.itemContainer},t.createElement(Vt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(x.Z,{role:"button",onClick:dn,onTouchStart:Pn=>Pn.stopPropagation(),className:C()(re.item,ht?re.selected:void 0)},U&&t.createElement(U,{fontSize:"small"}),t.createElement(m.Z,{variant:"subtitle1",className:re.label},s,t.createElement("br",null),y&&t.createElement(m.Z,{variant:"caption",className:re.subtitle},y)),Jt?t.createElement(I.Z,{className:re.dropdownArrow}):t.createElement(D.Z,{className:re.dropdownArrow}))),ee&&Jt&&t.createElement(ge.Z,{className:re.dropdown},ee.map((Pn,qn)=>t.createElement(Vt.ZP,{key:qn,title:Pn.title,enterDelay:500,enterNextDelay:500},t.createElement(nr,{to:Pn.to,underline:"none",className:re.dropdownItem,onClick:Ve,onTouchStart:Er=>Er.stopPropagation()},t.createElement(m.Z,{className:re.textContent},Pn.title))))))):t.createElement(ge.Z,{className:re.itemContainer},t.createElement(Vt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(nr,{to:w,underline:"none",className:C()(re.item,ht?re.selected:void 0),onClick:Ve,onTouchStart:Pn=>Pn.stopPropagation()},U&&t.createElement(U,{fontSize:"small"}),t.createElement(m.Z,{variant:"subtitle1",className:re.label},s,t.createElement("br",null),y&&t.createElement(m.Z,{variant:"caption",className:re.subtitle},y)))))},Ei=(0,h.Z)(r=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:s=>{var y,w;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:s.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(w=(y=r.palette.navigation.submenu)==null?void 0:y.background)!=null?w:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:s.submenuConfig.drawerWidthClosed,transitionDelay:`${s.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:s=>({width:s.submenuConfig.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}}),title:{fontSize:r.typography.h5.fontSize,fontWeight:r.typography.fontWeightMedium,color:r.palette.common.white,padding:r.spacing(2.5),[r.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Co=r=>{const{isOpen:s}=pa(),{sidebarConfig:y,submenuConfig:w}=(0,t.useContext)(xr),U=s?y.drawerWidthOpen:y.drawerWidthClosed,ee=Ei({left:U,submenuConfig:w}),{isHoveredOn:re}=(0,t.useContext)(Ma),[Be,Ve]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{Ve(re)},[re]),t.createElement(ge.Z,{className:C()(ee.drawer,{[ee.drawerOpen]:Be})},t.createElement(m.Z,{variant:"h5",className:ee.title},r.title),r.children)},vi=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),yi=()=>{const r=vi();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},_i=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Pi=()=>{const r=_i();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},bi=r=>(0,h.Z)(s=>{var y,w,U,ee;return{root:{color:s.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:r.drawerWidthClosed,justifyContent:"center"},open:{[s.breakpoints.up("sm")]:{width:r.drawerWidthOpen}},highlightable:{"&:hover":{background:(w=(y=s.palette.navigation.navItem)==null?void 0:y.hoverBackground)!=null?w:"#404040"}},highlighted:{background:(ee=(U=s.palette.navigation.navItem)==null?void 0:U.hoverBackground)!=null?ee:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:r.iconContainerWidth,marginRight:-s.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:s.typography.fontWeightBold,fontSize:s.typography.fontSize},searchFieldHTMLInput:{padding:s.spacing(2,0,2)},searchContainer:{width:r.drawerWidthOpen-r.iconContainerWidth},secondaryAction:{width:s.spacing(6),textAlign:"center",marginRight:s.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:s.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${r.selectedIndicatorWidth}px ${s.palette.navigation.indicator}`,color:s.palette.navigation.selectedColor},"&$closed":{width:r.drawerWidthClosed},"& $closedItemIcon":{paddingRight:r.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-r.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Ca(r){return(0,t.useMemo)(()=>bi(r),[r])()}const Ci=(r,s)=>(0,n.vJ)(r.props.children,y=>{let w=!1;return y.getElements().forEach(({props:{to:U,dropdownItems:ee}})=>{if(!w){if(ee!=null&&ee.length){ee.forEach(({to:re})=>w=w||ba(s,(0,Ie.i3)(re)));return}U&&(w=ba(s,(0,Ie.i3)(U)))}}),w},[s.pathname]);function Ba(r){return r.to===void 0}const Oi=t.createElement(Co).type,Ri=t.forwardRef(function({to:s,end:y,style:w,className:U,activeStyle:ee,caseSensitive:re,activeClassName:Be="active","aria-current":Ve="page",...ke},Et){let{pathname:ht}=(0,W.TH)(),{pathname:Jt}=(0,W.WU)(s);re||(ht=ht.toLocaleLowerCase("en-US"),Jt=Jt.toLocaleLowerCase("en-US"));let zt=ht===Jt;!zt&&!y&&(zt=ht.startsWith(`${Jt}/`));const dn=zt?Ve:void 0;return t.createElement(K.rU,{...ke,to:s,ref:Et,"aria-current":dn,style:{...w,...zt?ee:void 0},className:C()([U,zt?Be:void 0])})}),Oo=(0,t.forwardRef)((r,s)=>{const{icon:y,text:w,hasNotifications:U=!1,hasSubmenu:ee=!1,disableHighlight:re=!1,onClick:Be,noTrack:Ve,children:ke,className:Et,...ht}=r,{sidebarConfig:Jt}=(0,t.useContext)(xr),zt=Ca(Jt),{isOpen:dn}=pa(),Pn=!dn&&ee?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},qn=t.createElement(ge.Z,{style:Pn},t.createElement(y,{fontSize:"small"}),!dn&&ee?t.createElement(Me.Z,{fontSize:"small"}):t.createElement(t.Fragment,null)),Er=t.createElement(V.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!U,className:C()({[zt.closedItemIcon]:!dn})},qn),Ir=t.createElement(t.Fragment,null,t.createElement(ge.Z,{"data-testid":"login-button",className:zt.iconContainer},Er),w&&t.createElement(m.Z,{variant:"subtitle2",className:zt.label},w),t.createElement("div",{className:zt.secondaryAction},ke)),kr=dn?Ir:Er,Vn={onClick:Be,className:C()(Et,zt.root,dn?zt.open:zt.closed,Ba(r)&&zt.buttonItem,{[zt.highlightable]:!re})},fr=(0,n.z$)(),{pathname:mr}=(0,W.WU)(!Ba(r)&&r.to?r.to:""),Nr=(0,t.useCallback)(Hr=>{if(!Ve){const Kr="click",Fr=w!=null?w:"Sidebar Item",fa=mr?{attributes:{to:mr}}:void 0;fr.captureEvent(Kr,Fr,fa)}Be==null||Be(Hr)},[fr,w,mr,Ve,Be]);return Ba(r)?t.createElement(x.Z,{role:"button","aria-label":w,...Vn,ref:s,onClick:Nr},kr):t.createElement(Ri,{...Vn,activeClassName:zt.selected,to:r.to?r.to:"",ref:s,"aria-label":w||r.to,...ht,onClick:Nr},kr)}),Si=({children:r,...s})=>{const{sidebarConfig:y}=(0,t.useContext)(xr),w=Ca(y),[U,ee]=(0,t.useState)(!1),re=(0,W.TH)(),Be=Ci(r,re),Ve=(0,sn.Z)(Jt=>Jt.breakpoints.down("sm")),ke=()=>{ee(!0)},Et=()=>{ee(!1)},ht=()=>Ve?U?t.createElement(I.Z,{fontSize:"small",className:w.submenuArrow}):t.createElement(D.Z,{fontSize:"small",className:w.submenuArrow}):!U&&t.createElement(Me.Z,{fontSize:"small",className:w.submenuArrow});return t.createElement(Ma.Provider,{value:{isHoveredOn:U,setIsHoveredOn:ee}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Et,onTouchStart:U?Et:ke,onMouseEnter:ke,className:C()(U&&w.highlighted)},t.createElement(Oo,{hasSubmenu:!0,className:Be?w.selected:"",...s},ht()),U&&r))},Ro=(0,t.forwardRef)((r,s)=>{const[y]=(0,n.vJ)(r.children,w=>w.getElements().filter(U=>U.type===Oi));return y?t.createElement(Si,{...r},y):t.createElement(Oo,{...r,ref:s})});function Jl(r){const{sidebarConfig:s}=useContext(xr),[y,w]=useState(""),U=Ca(s),ee=r.icon?r.icon:SearchIcon,re=()=>{r.onSearch(y),w("")},Be=ht=>{ht.key==="Enter"&&(ht.preventDefault(),re())},Ve=ht=>{w(ht.target.value)},ke=ht=>{ht.preventDefault(),ht.stopPropagation()},Et=ht=>{re(),ht.preventDefault()};return React.createElement(Box,{className:U.searchRoot},React.createElement(Ro,{icon:ee,to:r.to,onClick:Et,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:y,onClick:ke,onChange:Ve,onKeyDown:Be,className:U.searchContainer,InputProps:{disableUnderline:!0,className:U.searchField},inputProps:{className:U.searchFieldHTMLInput}})))}const Ai=(0,E.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Yl=(0,E.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),So=(0,E.Z)("hr")(({theme:r})=>({height:1,width:"100%",background:"#383838",border:"none",margin:r.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),wi=r=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:r.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.text.hint,borderRadius:"5px"}}),Di=(0,E.Z)("div")(({theme:r})=>{const s=wi(r);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":s,"&:hover":s}}),Xl=()=>{const{sidebarConfig:r}=useContext(xr),s=Ca(r),{isOpen:y,setOpen:w}=pa();if(useMediaQuery(re=>re.breakpoints.down("md"),{noSsr:!0}))return null;const ee=()=>{w(!y)};return React.createElement(Button$1,{role:"button",onClick:ee,className:s.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:s.arrows},y?React.createElement(yi,null):React.createElement(Pi,null)))},Ti=(0,h.Z)(r=>({introCard:s=>({color:"#b5b5b5",fontSize:12,width:s.sidebarConfig.drawerWidthOpen,marginTop:r.spacing(2.25),marginBottom:r.spacing(1.5),paddingLeft:s.sidebarConfig.iconPadding,paddingRight:s.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:r.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:r.spacing(.5),"&:hover":{color:r.palette.linkHover,transition:r.transitions.create("color",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:r.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Ii(r){const{sidebarConfig:s}=useContext(xr),y=Ti({sidebarConfig:s}),{text:w,onClose:U}=r,ee=()=>U();return React.createElement(Box,{className:y.introCard},React.createElement(Typography,{variant:"subtitle2"},w),React.createElement(Box,{className:y.introDismiss},React.createElement(IconButton,{onClick:ee,className:y.introDismissLink},React.createElement(CloseIcon,{className:y.introDismissIcon}),React.createElement(Typography,{component:"span",className:y.introDismissText},"Dismiss"))))}const Ao=r=>{const{text:s,onDismiss:y}=r,[w,U]=useState(!1),ee=()=>{U(!0)};return React.createElement(Collapse,{in:!w,onExited:y},React.createElement(Ii,{text:s,onClose:ee}))},Mi=null,Li="And your recently viewed plugins will pop up here!";function Ql(r){const{isOpen:s}=pa(),y={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:w,set:U}=useLocalStorageValue(ni),{starredItemsDismissed:ee,recentlyViewedItemsDismissed:re}=w!=null?w:{},Be=()=>{U(ke=>({...y,...ke,starredItemsDismissed:!0}))},Ve=()=>{U(ke=>({...y,...ke,recentlyViewedItemsDismissed:!0}))};return s?React.createElement(React.Fragment,null,!ee&&React.createElement(React.Fragment,null,React.createElement(Ao,{text:Mi,onDismiss:Be}),React.createElement(So,null)),!re&&React.createElement(Ao,{text:Li,onDismiss:Ve})):null}const $i=(0,h.Z)(r=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:r.spacing(3),paddingBottom:r.spacing(3),paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Oa(r){const{className:s,stretch:y,noPadding:w,children:U,...ee}=r,{contentRef:re}=$a(),Be=$i();return t.createElement("article",{ref:re,tabIndex:-1,...ee,className:C()(Be.root,s,{[Be.stretch]:y,[Be.noPadding]:w})},U)}const Bi=(0,h.Z)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3),minWidth:0},defaultTab:{...r.typography.caption,padding:r.spacing(3,3),textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function wo(r){const{tabs:s,onChange:y,selectedIndex:w}=r,[U,ee]=(0,t.useState)(w!=null?w:0),re=Bi(),Be=(0,t.useCallback)((Ve,ke)=>{w===void 0&&ee(ke),y&&w!==ke&&y(ke)},[w,y]);return(0,t.useEffect)(()=>{w!==void 0&&ee(w)},[w]),t.createElement(ge.Z,{className:re.tabsWrapper},t.createElement(ye.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Be,value:U},s.map((Ve,ke)=>t.createElement(lt.Z,{...Ve.tabProps,"data-testid":`header-tab-${ke}`,label:Ve.label,key:Ve.id,value:ke,className:re.defaultTab,classes:{selected:re.selected,root:re.tabRoot}}))))}function Ui(r){var s,y,w,U;const ee=(0,W.UO)(),Be=r.map(({path:Jt,children:zt})=>({caseSensitive:!1,path:`${Jt}/*`,element:zt})).sort((Jt,zt)=>zt.path.replace(/\/\*$/,"").localeCompare(Jt.path.replace(/\/\*$/,""))),Ve=(s=(0,W.V$)(Be))!=null?s:r[0].children;let ke=(y=ee["*"])!=null?y:"";ke.startsWith("/")||(ke=`/${ke}`);const[Et]=(w=(0,Ie.fp)(Be,ke))!=null?w:[],ht=Et?r.findIndex(Jt=>`${Jt.path}/*`===Et.route.path):0;return{index:ht===-1?0:ht,element:Ve,route:(U=r[ht])!=null?U:r[0]}}function Do(r){const{routes:s}=r,y=(0,W.s0)(),{index:w,route:U,element:ee}=Ui(s),re=(0,t.useMemo)(()=>s.map(Ve=>({id:Ve.path,label:Ve.title,tabProps:Ve.tabProps})),[s]),Be=Ve=>{let{path:ke}=s[Ve];ke=ke.replace(/\/\*$/,""),ke=ke.replace(/^\//,""),y(ke)};return t.createElement(t.Fragment,null,t.createElement(wo,{tabs:re,selectedIndex:w,onChange:Be}),t.createElement(Oa,null,t.createElement(xn.q,{title:U.title}),ee))}const Ua=()=>null;(0,n.R5)(Ua,"core.gatherMountPoints",!0);function To(r){const s=t.createElement(Ua,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(r).flatMap(y=>{if(!(0,t.isValidElement)(y))return[];if(y.type===t.Fragment)return To(y.props.children);if(y.type!==s)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:w,title:U,children:ee,tabProps:re}=y.props;return[{path:w,title:U,children:ee,tabProps:re}]})}function xi(r){const s=To(r.children);return t.createElement(Do,{routes:s})}xi.Route=Ua;const ki=(0,h.Z)(r=>({value:{marginBottom:r.spacing(.75)},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Zi(r){const{value:s,subvalue:y}=r,w=ki();return t.createElement(t.Fragment,null,t.createElement(ge.Z,{className:w.value},s),t.createElement(ge.Z,{className:w.subvalue},y))}const Wi=(0,h.Z)(r=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:r.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:r.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${r.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:r.spacing(2)}}}),{name:"BackstageTableFilters"}),Ni=r=>{var s;const y=Wi(),{onChangeFilters:w}=r,[U,ee]=(0,t.useState)({...r.selectedFilters}),[re,Be]=(0,t.useState)(!1),Ve=()=>{ee({}),Be(ke=>!ke)};return(0,t.useEffect)(()=>{w(U)},[U,w]),t.createElement(ge.Z,{className:y.root},t.createElement(ge.Z,{className:y.header},t.createElement(ge.Z,{className:y.value},"Filters"),t.createElement(x.Z,{color:"primary",onClick:Ve},"Clear all")),t.createElement(ge.Z,{className:y.filters},((s=r.filters)==null?void 0:s.length)&&r.filters.map(ke=>t.createElement(Ya,{triggerReset:re,key:ke.element.label,...ke.element,selected:U[ke.element.label],onChange:Et=>ee({...U,[ke.element.label]:Et})}))))},Io={Add:(0,t.forwardRef)((r,s)=>t.createElement(Ue.Z,{...r,ref:s})),Check:(0,t.forwardRef)((r,s)=>t.createElement(it.Z,{...r,ref:s})),Clear:(0,t.forwardRef)((r,s)=>t.createElement(yt.Z,{...r,ref:s})),Delete:(0,t.forwardRef)((r,s)=>t.createElement(ft.Z,{...r,ref:s})),DetailPanel:(0,t.forwardRef)((r,s)=>t.createElement(j.Z,{...r,ref:s})),Edit:(0,t.forwardRef)((r,s)=>t.createElement(Zt.Z,{...r,ref:s})),Export:(0,t.forwardRef)((r,s)=>t.createElement(tr.Z,{...r,ref:s})),Filter:(0,t.forwardRef)((r,s)=>t.createElement(tn.Z,{...r,ref:s})),FirstPage:(0,t.forwardRef)((r,s)=>t.createElement(gn.Z,{...r,ref:s})),LastPage:(0,t.forwardRef)((r,s)=>t.createElement(Zn.Z,{...r,ref:s})),NextPage:(0,t.forwardRef)((r,s)=>t.createElement(j.Z,{...r,ref:s})),PreviousPage:(0,t.forwardRef)((r,s)=>t.createElement(fe.Z,{...r,ref:s})),ResetSearch:(0,t.forwardRef)((r,s)=>t.createElement(yt.Z,{...r,ref:s})),Search:(0,t.forwardRef)((r,s)=>t.createElement(tn.Z,{...r,ref:s})),SortArrow:(0,t.forwardRef)((r,s)=>t.createElement(vt.Z,{...r,ref:s})),ThirdStateCheck:(0,t.forwardRef)((r,s)=>t.createElement(er.Z,{...r,ref:s})),ViewColumn:(0,t.forwardRef)((r,s)=>t.createElement(Wn.Z,{...r,ref:s}))};function Mo(r,s){const y=s.split(".");let w=r[y[0]];for(let U=1;U<y.length;++U){if(w===void 0)return w;const ee=y[U];w=w[ee]}return w}const Ki=(0,k.Z)(r=>({header:{padding:r.spacing(1,2,1,2.5),borderTop:`1px solid ${r.palette.grey.A100}`,borderBottom:`1px solid ${r.palette.grey.A100}`,fontWeight:r.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Ze.W$),Lo=(0,k.Z)(r=>({root:{padding:r.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:r.typography.fontWeightBold}},searchField:{paddingRight:r.spacing(2)}}),{name:"BackstageTableToolbar"})(Ze.UW),Fi=(0,h.Z)(r=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:r.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),zi=(0,h.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function ji(r,s){return r.map(y=>{var w;const U=(w=y.headerStyle)!=null?w:{};let ee=y.cellStyle||{};if(y.highlight)if(U.color=s.palette.textContrast,typeof ee=="object")ee.fontWeight=s.typography.fontWeightBold;else{const re=ee;ee=(Be,Ve,ke)=>({...re(Be,Ve,ke),fontWeight:s.typography.fontWeightBold})}return{...y,headerStyle:U,cellStyle:ee}})}function Vi(r,s){return(0,_.transform)(r,(y,w,U)=>{(0,_.isEqual)(w,s[U])||(y[U]=w)})}const $o={search:"",filtersOpen:!1,filters:{}};function Gi(r){const{toolbarRef:s,setSearch:y,hasFilters:w,selectedFiltersLength:U,toggleFilters:ee}=r,re=Fi(),Be=(0,t.useCallback)(Ve=>{r.onSearchChanged(Ve),y(Ve)},[r,y]);return w?t.createElement(ge.Z,{className:re.root},t.createElement(ge.Z,{className:re.root},t.createElement(l.Z,{onClick:ee,"aria-label":"filter list"},t.createElement(tn.Z,null)),t.createElement(m.Z,{className:re.title},"Filters (",U,")")),t.createElement(Lo,{...r,ref:s,onSearchChanged:Be})):t.createElement(Lo,{...r,ref:s,onSearchChanged:Be})}function Bo(r){const{data:s,columns:y,options:w,title:U,subtitle:ee,filters:re,initialState:Be,emptyContent:Ve,onStateChange:ke,components:Et,...ht}=r,Jt=zi(),zt=(0,$.Z)(),dn={...$o,...Be},[Pn,qn]=(0,t.useState)(dn.filtersOpen),Er=(0,t.useCallback)(()=>qn(Mr=>!Mr),[qn]),[Ir,kr]=(0,t.useState)(0),[Vn,fr]=(0,t.useState)(s),[mr,Nr]=(0,t.useState)(dn.filters),Hr=ji(y,zt),[Kr,Fr]=(0,t.useState)(dn.search);(0,t.useEffect)(()=>{if(ke){const Mr=Vi({search:Kr,filtersOpen:Pn,filters:mr},$o);ke(Mr)}},[Kr,Pn,mr,ke]);const fa={headerStyle:{textTransform:"uppercase"}},qr=(0,t.useCallback)(Mr=>{var Yr;return(Yr=y.find(ta=>ta.title===Mr))==null?void 0:Yr.field},[y]);(0,t.useEffect)(()=>{if(typeof s=="function")return;if(!mr){fr(s);return}const Mr=Object.values(mr);if(s&&Mr.flat().length){const Yr=s.filter(ta=>!!Object.entries(mr).filter(([,na])=>!!na.length).every(([na,_r])=>{const Ar=Mo(ta,qr(na));return Array.isArray(Ar)&&Array.isArray(_r)?Ar.some(ma=>_r.includes(ma)):Array.isArray(Ar)?Ar.includes(_r):Array.isArray(_r)?_r.includes(Ar):Ar===_r}));fr(Yr)}else fr(s);kr(Mr.flat().length)},[s,mr,qr]);const Ka=(Mr,Yr)=>{const ta=_r=>{const Ar=new Set,ma=ra=>{ra!=null&&Ar.add(ra)};return Yr&&Yr.forEach(ra=>{const ha=Mo(ra,qr(_r));Array.isArray(ha)?ha.forEach(ma):ma(ha)}),Ar},na=_r=>({placeholder:"All results",label:_r.column,multiple:_r.type==="multiple-select",items:[...ta(_r.column)].sort().map(Ar=>({label:Ar,value:Ar}))});return Mr.map(_r=>({type:_r.type,element:na(_r)}))},dr=!!(re!=null&&re.length),da=(0,t.useCallback)(Mr=>t.createElement(Gi,{setSearch:Fr,hasFilters:dr,selectedFiltersLength:Ir,toggleFilters:Er,...Mr}),[Er,dr,Ir,Fr]),wa=typeof s!="function"&&s.length===0,ea=y.length,Fa=(0,t.useCallback)(Mr=>Ve&&wa?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:ea},Ve))):t.createElement(Ze.os,{...Mr}),[wa,Ve,ea]);return t.createElement(ge.Z,{className:Jt.root},Pn&&s&&typeof s!="function"&&(re==null?void 0:re.length)&&t.createElement(Ni,{filters:Ka(re,s),selectedFilters:mr,onChangeFilters:Nr}),t.createElement(Ze.ZP,{components:{Header:Ki,Toolbar:da,Body:Fa,...Et},options:{...fa,...w},columns:Hr,icons:Io,title:t.createElement(t.Fragment,null,t.createElement(m.Z,{variant:"h5",component:"h2"},U),ee&&t.createElement(m.Z,{color:"textSecondary",variant:"body1"},ee)),data:typeof s=="function"?s:Vn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...ht}))}Bo.icons=Object.freeze(Io);function Hi(r,s){const y=r[r.length-1];if(y)return y>=.9?s.palette.status.ok:y>=.5?s.palette.status.warning:s.palette.status.error}function ql(r){var s;const y=useTheme();return r.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...r},r.title&&React.createElement("title",null,r.title),React.createElement(SparklinesLine,{color:(s=r.color)!=null?s:Hi(r.data,y)})):null}const Ji=r=>(0,h.Z)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Yi=({title:r="Unknown page",className:s})=>t.createElement(m.Z,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},r);function Uo(r){const{description:s,title:y,titleComponent:w=void 0,children:U,textAlign:ee="left"}=r,re=Ji({textAlign:ee})(),Be=w||t.createElement(Yi,{title:y,className:re.title});return t.createElement(t.Fragment,null,t.createElement(xn.q,{title:y}),t.createElement(ge.Z,{className:re.container},t.createElement(ge.Z,{className:re.leftItemsBox},Be,s&&t.createElement(m.Z,{className:re.description,variant:"body2"},s)),t.createElement(ge.Z,{className:re.rightItemsBox},U)))}const Xi=(0,h.Z)(r=>({micDrop:{maxWidth:"60%",bottom:r.spacing(2),right:r.spacing(2),[r.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${r.spacing(10)}px auto ${r.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Qi=()=>{const r=Xi();return t.createElement("img",{src:rt,className:r.micDrop,alt:"Girl dropping mic from her hands"})},qi=(0,h.Z)(r=>({container:{padding:r.spacing(8),[r.breakpoints.down("xs")]:{padding:r.spacing(2)}},title:{paddingBottom:r.spacing(5),[r.breakpoints.down("xs")]:{paddingBottom:r.spacing(4),fontSize:r.typography.h3.fontSize}},subtitle:{color:r.palette.textSubtle}}),{name:"BackstageErrorPage"});function el(r){const{status:s,statusMessage:y,additionalInfo:w,supportUrl:U}=r,ee=qi(),re=(0,W.s0)(),Be=so();return t.createElement(Ae.Z,{container:!0,spacing:0,className:ee.container},t.createElement(Ae.Z,{item:!0,xs:12,sm:8,md:4},t.createElement(m.Z,{"data-testid":"error",variant:"body1",className:ee.subtitle},"ERROR ",s,": ",y),t.createElement(m.Z,{variant:"body1",className:ee.subtitle},w),t.createElement(m.Z,{variant:"h2",className:ee.title},"Looks like someone dropped the mic!"),t.createElement(m.Z,{variant:"h6"},t.createElement(nr,{to:"#","data-testid":"go-back-link",onClick:()=>re(-1)},"Go back"),"... or please"," ",t.createElement(nr,{to:U||Be.url},"contact support")," if you think this is a bug.")),t.createElement(Qi,null))}const tl=(0,k.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(m.Z),xa=(0,k.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(ge.Z);function xo(r){const{children:s,...y}=r,[w,U]=t.useState(null),ee=t.Children.toArray(s),[re,Be,...Ve]=ee,ke=Ve.length?Ve.pop():ee[ee.length-1],Et=ee.length>3,ht=dn=>{U(dn.currentTarget)},Jt=()=>{U(null)},zt=Boolean(w);return t.createElement(t.Fragment,null,t.createElement(B.Z,{"aria-label":"breadcrumb",...y},ee.length>1&&t.createElement(xa,{clone:!0},re),ee.length>2&&t.createElement(xa,{clone:!0},Be),Et&&t.createElement(tl,{onClick:ht},"..."),t.createElement(ge.Z,{style:{fontStyle:"italic"}},ke)),t.createElement(jt.ZP,{open:zt,anchorEl:w,onClose:Jt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(Kt.Z,null,Ve.map((dn,Pn)=>t.createElement($e.Z,{key:Pn,button:!0},t.createElement(xa,{clone:!0},dn))))))}const nl=(0,h.Z)(r=>({header:{gridArea:"pageHeader",padding:r.spacing(3),width:"100%",boxShadow:r.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:r.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[r.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:r.page.fontColor,wordBreak:"break-word",fontSize:r.typography.h3.fontSize,marginBottom:0},subtitle:{color:r.page.fontColor,opacity:.8,display:"inline-block",marginTop:r.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:r.spacing(1),color:r.page.fontColor},breadcrumb:{color:r.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-r.spacing(.3),marginBottom:r.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-r.spacing(.3),marginBottom:r.spacing(.3)}}),{name:"BackstageHeader"}),rl=({type:r,typeLink:s,classes:y,pageTitle:w})=>r?s?t.createElement(xo,{className:y.breadcrumb},t.createElement(nr,{to:s},r),t.createElement(m.Z,null,w)):t.createElement(m.Z,{className:y.type},r):null,al=({pageTitle:r,classes:s,tooltip:y})=>{const w=t.createElement(m.Z,{className:s.title,variant:"h1"},r);return y?t.createElement(Vt.ZP,{title:y,placement:"top-start"},w):w},ol=({classes:r,subtitle:s})=>s?typeof s!="string"?t.createElement(t.Fragment,null,s):t.createElement(m.Z,{className:r.subtitle,variant:"subtitle2",component:"span"},s):null;function Ra(r){const{children:s,pageTitleOverride:y,style:w,subtitle:U,title:ee,tooltip:re,type:Be,typeLink:Ve}=r,ke=nl(),ht=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage",Jt=y||ee,zt=ee||y,dn=`${Jt} | %s | ${ht}`,Pn=`${Jt} | ${ht}`;return t.createElement(t.Fragment,null,t.createElement(xn.q,{titleTemplate:dn,defaultTitle:Pn}),t.createElement("header",{style:w,className:ke.header},t.createElement(ge.Z,{className:ke.leftItemsBox},t.createElement(rl,{classes:ke,type:Be,typeLink:Ve,pageTitle:zt}),t.createElement(al,{classes:ke,pageTitle:zt,tooltip:re}),t.createElement(ol,{classes:ke,subtitle:U})),t.createElement(Ae.Z,{container:!0,className:ke.rightItemsBox,spacing:4},s)))}const sl=({label:r,secondaryLabel:s,icon:y,disabled:w=!1,onClick:U})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:w,button:!0,onClick:ee=>{U&&U(ee)}},y&&React.createElement(ListItemIcon,null,y),React.createElement(ListItemText,{primary:r,secondary:s})));function ec(r){const{palette:{common:{white:s}}}=useTheme(),{actionItems:y}=r,[w,U]=React.useState(!1),ee=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>U(!0),"data-testid":"header-action-menu",ref:ee,style:{color:s,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:w,anchorEl:ee.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>U(!1)},React.createElement(List,null,y.map((re,Be)=>React.createElement(sl,{key:`header-action-menu-${Be}`,...re})))))}const il=(0,h.Z)(r=>({root:{textAlign:"left"},label:{color:r.page.fontColor,fontWeight:r.typography.fontWeightBold,letterSpacing:0,fontSize:r.typography.fontSize,marginBottom:r.spacing(1)/2,lineHeight:1},value:{color:(0,L.Fq)(r.page.fontColor,.8),fontSize:r.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),ll=({value:r,className:s})=>t.createElement(m.Z,{component:typeof r=="string"?"p":"span",className:s},r);function cl(r){const{label:s,value:y,url:w}=r,U=il(),ee=t.createElement(ll,{className:U.value,value:y||"<Unknown>"});return t.createElement(Ae.Z,{item:!0},t.createElement(m.Z,{component:"span",className:U.root},t.createElement(m.Z,{className:U.label},s),w?t.createElement(nr,{to:w},ee):ee))}const ul=r=>(0,G.Z)({root:{color:r.palette.common.white,padding:r.spacing(2,2,3),backgroundImage:r.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),dl=(0,h.Z)(ul,{name:"BackstageItemCardHeader"});function ko(r){const{title:s,subtitle:y,children:w}=r,U=dl(r);return t.createElement(ge.Z,{className:U.root},y&&t.createElement(m.Z,{variant:"subtitle2",component:"h3"},y),s&&t.createElement(m.Z,{variant:"h6",component:"h4"},s),w)}function tc(r){const{description:s,tags:y,title:w,type:U,subtitle:ee,label:re,onClick:Be,href:Ve}=r;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(ko,{title:w,subtitle:ee||U})),React.createElement(CardContent,null,y!=null&&y.length?React.createElement(Box,null,y.map((ke,Et)=>React.createElement(Chip,{size:"small",label:ke,key:Et}))):null,s),React.createElement(CardActions,null,!Ve&&React.createElement(o,{to:"#",onClick:Be,color:"primary"},re),Ve&&React.createElement(o,{to:Ve,color:"primary"},re)))}const ml=r=>(0,G.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:r.spacing(2)}}),pl=(0,h.Z)(ml,{name:"BackstageItemCardGrid"});function fl(r){const{children:s,...y}=r,w=pl(y);return t.createElement(ge.Z,{className:w.root,...y},s)}const hl=(0,h.Z)(r=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[r.breakpoints.down("xs")]:{height:"100%"}}}),{name:"BackstagePage"});function Sa(r){const{themeId:s,children:y}=r,w=hl();return t.createElement(A.Z,{theme:U=>({...U,page:U.getPageTheme({themeId:s})})},t.createElement("main",{className:w.root},y))}function gl(r){const{themeId:s,children:y,...w}=r;return t.createElement(Sa,{themeId:s},t.createElement(Ra,{...w}),y)}const El=H.z.object({providerInfo:H.z.object({}).catchall(H.z.unknown()).optional(),profile:H.z.object({email:H.z.string().optional(),displayName:H.z.string().optional(),picture:H.z.string().optional()}),backstageIdentity:H.z.object({token:H.z.string(),identity:H.z.object({type:H.z.literal("user"),userEntityRef:H.z.string(),ownershipEntityRefs:H.z.array(H.z.string())})})}),Zo={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function vl(r){const s=new Date(Date.now()+Zo.defaultTokenExpiryMillis);if(!r)return s;const[y,w,U]=r.split("."),ee=JSON.parse(window.atob(w));return typeof ee.exp!="number"?s:new Date(ee.exp*1e3-Zo.tokenExpiryMarginMillis)}class yl{constructor(s){this.options=s,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:s}=this.getSessionSync(),y=s.identity.userEntityRef,w=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(y);if(!w)throw new TypeError(`Invalid user entity reference "${y}"`);return w[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const s=this.state.type==="active"?this.state.session:void 0,y=this.fetchSession().then(w=>(this.state={type:"active",session:w,expiresAt:vl(w.backstageIdentity.token)},w),w=>{throw this.state={type:"failed",error:w},w});return this.state={type:"fetching",promise:y,previous:s},y}async fetchSession(){const s=await this.options.discoveryApi.getBaseUrl("auth"),y=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,w=new Headers(y);w.set("X-Requested-With","XMLHttpRequest");const U=await fetch(`${s}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:w,credentials:"include"});if(!U.ok)throw await ResponseError.fromResponse(U);return El.parse(await U.json())}}const nc=r=>{const s=useApi(discoveryApiRef),[{status:y,error:w},{execute:U}]=useAsync(async()=>{const ee=new yl({provider:r.provider,discoveryApi:s,headers:r.headers});await ee.start(),r.onSignInSuccess(ee)});return useMountEffect(U),y==="loading"?React.createElement(va,null):w?React.createElement(bt,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:w}):null};class ka{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const s="user:default/guest";return{type:"user",userEntityRef:s,ownershipEntityRefs:[s]}}async getCredentials(){return{}}async signOut(){}}function _l(r){const[s,y,w]=r.split(".");return JSON.parse(window.atob(y))}class Za{constructor(s){this.result=s}getUserId(){return this.result.userId}static fromResult(s){return new Za(s)}async getIdToken(){var s,y;return(y=(s=this.result).getIdToken)==null?void 0:y.call(s)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const s=await this.getIdToken();if(!s){const U=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:U,ownershipEntityRefs:[U]}}const{sub:y,ent:w}=_l(s);return{type:"user",userEntityRef:y,ownershipEntityRefs:w!=null?w:[]}}async getCredentials(){var s,y;return{token:await((y=(s=this.result).getIdToken)==null?void 0:y.call(s))}}async signOut(){var s,y;return(y=(s=this.result).signOut)==null?void 0:y.call(s)}}class ca{constructor(s,y,w){this.identity=s,this.authApi=y,this.profile=w}static createGuest(){return new ka}static fromLegacy(s){return Za.fromResult(s)}static create(s){return new ca(s.identity,s.authApi,s.profile)}getUserId(){const s=this.identity.userEntityRef,y=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!y)throw new TypeError(`Invalid user entity reference "${s}"`);return y[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(s){throw this.profilePromise=void 0,s}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Wa=(0,h.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Aa=({children:r})=>{const s=Wa();return t.createElement(Ae.Z,{component:"li",item:!0,classes:s},r)},Pl={Component:({config:r,onSignInStarted:s,onSignInSuccess:y,onSignInFailure:w})=>{const{apiRef:U,title:ee,message:re}=r,Be=(0,n.h_)(U),Ve=(0,n.h_)(n.VE),ke=async()=>{try{s();const Et=await Be.getBackstageIdentity({instantPopup:!0});if(!Et)throw w(),new Error(`The ${ee} provider is not configured to support sign-in`);const ht=await Be.getProfile();y(ca.create({identity:Et.identity,profile:ht,authApi:Be}))}catch(Et){w(),Ve.post(new Lt.SP("Login failed",Et))}};return t.createElement(Aa,null,t.createElement(ia,{variant:"fullHeight",title:ee,actions:t.createElement(x.Z,{color:"primary",variant:"outlined",onClick:ke},"Sign In")},t.createElement(m.Z,{variant:"body1"},re)))},loader:async(r,s)=>{const y=r.get(s),w=await y.getBackstageIdentity({optional:!0});if(!w)return;const U=await y.getProfile();return ca.create({identity:w.identity,profile:U,authApi:y})}},bl={Component:({onSignInStarted:r,onSignInSuccess:s})=>t.createElement(Aa,null,t.createElement(ia,{title:"Guest",variant:"fullHeight",actions:t.createElement(x.Z,{color:"primary",variant:"outlined",onClick:()=>{r(),s(new ka)}},"Enter")},t.createElement(m.Z,{variant:"body1"},"Enter as a Guest User.",t.createElement("br",null),"You will not have a verified identity,",t.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new ka},Cl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ol=(0,h.Z)(r=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:r.spacing(2)}}),{name:"BackstageCustomProvider"}),Wo=r=>{const{ref:s,...y}=r;return{inputRef:s,...y}},Rl={Component:({onSignInStarted:r,onSignInSuccess:s})=>{const y=Ol(),{register:w,handleSubmit:U,formState:ee}=(0,Oe.cI)({mode:"onChange"}),{errors:re}=ee,Be=({userId:Ve,idToken:ke})=>{r(),s(ca.fromLegacy({userId:Ve,getIdToken:ke!==void 0?async()=>ke:void 0,profile:{email:`${Ve}@example.com`}}))};return t.createElement(Aa,null,t.createElement(ia,{title:"Custom User",variant:"fullHeight"},t.createElement(m.Z,{variant:"body1"},"Enter your own User ID and credentials.",t.createElement("br",null),"This selection will not be stored."),t.createElement("form",{className:y.form,onSubmit:U(Be)},t.createElement(ve.Z,null,t.createElement(ie.Z,{...Wo(w("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(re.userId)}),re.userId&&t.createElement(ze.Z,{error:!0},re.userId.message)),t.createElement(ve.Z,null,t.createElement(ie.Z,{...Wo(w("idToken",{required:!1,validate:Ve=>!Ve||Cl.test(Ve)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(re.idToken)}),re.idToken&&t.createElement(ze.Z,{error:!0},re.idToken.message)),t.createElement(x.Z,{type:"submit",color:"primary",variant:"outlined",className:y.button,disabled:!(ee!=null&&ee.isDirty)||!Ft()(re)},"Continue"))))},loader:async()=>{}};class Na{constructor(s){this.config=s}static from(s){return new Na(s)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ua="@backstage/core:SignInPage:provider",No={guest:bl,custom:Rl,common:Pl};function Ko(r,s){if(r in s)throw new Error(`"${r}" ID is duplicated. IDs of identity providers have to be unique.`)}function Sl(r){return r.reduce((y,w)=>{if(typeof w=="string")return Ko(w,y),y[w]={components:No[w],id:w},y;const{id:U}=w;return Ko(U,y),y[U]={components:No.common,id:U,config:w},y},{})}const Al=(r,s)=>{const y=useApi(errorApiRef),w=useApiHolder(),[U,ee]=useState(!0),re=useCallback(Ve=>{s(Na.from({identityApi:Ve,signOut:async()=>{var ke;localStorage.removeItem(ua),await((ke=Ve.signOut)==null?void 0:ke.call(Ve))}}))},[s]);useLayoutEffect(()=>{var Ve;if(!U)return;const ke=localStorage.getItem(ua);if(ke===null){ee(!1);return}const Et=r[ke];if(!Et){ee(!1);return}let ht=!1;return Et.components.loader(w,(Ve=Et.config)==null?void 0:Ve.apiRef).then(Jt=>{if(ht){localStorage.removeItem(ua);return}Jt?re(Jt):ee(!1)}).catch(Jt=>{localStorage.removeItem(ua),!ht&&(y.post(Jt),ee(!1))}),()=>{ht=!0}},[U,y,s,w,r,re]);const Be=useMemo(()=>Object.keys(r).map(Ve=>{const ke=r[Ve],{Component:Et}=ke.components,ht=dn=>{re(dn)},Jt=()=>{var dn;localStorage.setItem(ua,((dn=ke==null?void 0:ke.config)==null?void 0:dn.id)||ke.id)},zt=()=>{localStorage.removeItem(ua)};return React.createElement(Et,{key:ke.id,config:ke.config,onSignInStarted:Jt,onSignInSuccess:ht,onSignInFailure:zt})}),[r,re]);return[U,Be]},wl=({onSignInSuccess:r,providers:s=[],title:y,align:w="left"})=>{const U=useApi(configApiRef),ee=Wa(),re=Sl(s),[Be,Ve]=Al(re,r);return Be?React.createElement(va,null):React.createElement(Sa,{themeId:"home"},React.createElement(Ra,{title:U.getString("app.title")}),React.createElement(Oa,null,y&&React.createElement(Uo,{title:y,textAlign:w}),React.createElement(Grid,{container:!0,justifyContent:w==="center"?w:"flex-start",spacing:2,component:"ul",classes:ee},Ve)))},Dl=({provider:r,auto:s,onSignInSuccess:y})=>{const w=Wa(),U=useApi(r.apiRef),ee=useApi(configApiRef),[re,Be]=useState(),[Ve,ke]=useState(!1),Et=async({checkExisting:ht,showPopup:Jt})=>{try{let zt;if(ht&&(zt=await U.getBackstageIdentity({optional:!0})),!zt&&(Jt||s)&&(ke(!0),zt=await U.getBackstageIdentity({instantPopup:!0}),!zt))throw new Error(`The ${r.title} provider is not configured to support sign-in`);if(!zt){ke(!0);return}const dn=await U.getProfile();y(ca.create({identity:zt.identity,authApi:U,profile:dn}))}catch(zt){Be(zt),ke(!0)}};return useMountEffect(()=>Et({checkExisting:!0})),Ve?React.createElement(Sa,{themeId:"home"},React.createElement(Ra,{title:ee.getString("app.title")}),React.createElement(Oa,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:w},React.createElement(Aa,null,React.createElement(ia,{variant:"fullHeight",title:r.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{Et({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},r.message),re&&re.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},re.message)))))):React.createElement(va,null)};function cc(r){return"provider"in r?React.createElement(Dl,{...r}):React.createElement(wl,{...r})}const Tl=(0,h.Z)(r=>({root:{padding:r.spacing(0,2,0,2.5),minHeight:r.spacing(3)},indicator:{backgroundColor:r.palette.info.main,height:r.spacing(.3)}}),{name:"BackstageTabbedCard"}),Il=(0,k.Z)(r=>({root:{padding:r.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:r.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Fe.Z);function Ml(r){const{slackChannel:s,errorBoundaryProps:y,children:w,title:U,deepLink:ee,value:re,onChange:Be}=r,Ve=Tl(),[ke,Et]=(0,t.useState)(0),ht=Be||((dn,Pn)=>Et(Pn));let Jt;re?t.Children.map(w,dn=>{var Pn;t.isValidElement(dn)&&(dn==null?void 0:dn.props.value)===re&&(Jt=(Pn=dn==null?void 0:dn.props)==null?void 0:Pn.children)}):t.Children.map(w,(dn,Pn)=>{t.isValidElement(dn)&&Pn===ke&&(Jt=dn==null?void 0:dn.props.children)});const zt=y||(s?{slackChannel:s}:{});return t.createElement(Q.Z,null,t.createElement(Va,{...zt},U&&t.createElement(Il,{title:U}),t.createElement(ye.Z,{selectionFollowsFocus:!0,classes:Ve,value:re||ke,onChange:ht},w),t.createElement(Pt.Z,null),t.createElement(xe.Z,null,Jt),ee&&t.createElement(ja,{...ee})))}const Ll=(0,h.Z)(r=>({root:{minWidth:r.spacing(6),minHeight:r.spacing(3),margin:r.spacing(0,2,0,0),padding:r.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:r.palette.text.primary}},selected:{fontWeight:r.typography.fontWeightBold}}),{name:"BackstageCardTab"});function $l(r){const{children:s,...y}=r,w=Ll();return t.createElement(lt.Z,{disableRipple:!0,classes:w,...y})}},49408:function(Rt,d,e){e.d(d,{P:function(){return m},u:function(){return a}});var n=e(18473),l=e(2784);const u="plugin-context",m=c=>{const{children:P,plugin:b}=c,{Provider:t}=(0,n.CT)(u);return l.createElement(t,{value:(0,n.EI)({1:{plugin:b}})},P)};function a(){const c=(0,n.Vt)(u);if(!c)throw new Error("Plugin Options context is not available");const P=c.atVersion(1);if(!P)throw new Error("Plugin Options v1 is not available");return P.plugin.getPluginOptions()}},30705:function(Rt,d,e){e.d(d,{$4:function(){return J},$v:function(){return W},CL:function(){return ot},CO:function(){return hn},D:function(){return A},Ds:function(){return ge},E6:function(){return Se},F4:function(){return E},IY:function(){return _e},I_:function(){return b},Km:function(){return _},Kp:function(){return G},NT:function(){return Tt},NW:function(){return Xe},Oi:function(){return $e},P4:function(){return ct},R5:function(){return te},Rz:function(){return Je},T0:function(){return $},VE:function(){return $t},W0:function(){return Vt},YO:function(){return un},ZM:function(){return sn},bq:function(){return C},fC:function(){return P},gP:function(){return kt},gW:function(){return T},h_:function(){return t},hg:function(){return Ie},ni:function(){return L},p_:function(){return f},qD:function(){return ce},rx:function(){return pn},sM:function(){return k},tg:function(){return Kt},uB:function(){return p},ux:function(){return x},vJ:function(){return Pt},v_:function(){return K},x8:function(){return rn},z$:function(){return Le}});var n=e(18473),l=e(2784),u=e(73557),m=e(49408);const a=(0,n.CT)("analytics-context"),c=()=>{const fe=(0,l.useContext)(a);if(fe===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const j=fe.atVersion(1);if(j===void 0)throw new Error("No context found for version 1.");return j},P=fe=>{const{attributes:j,children:X}=fe,he={...c(),...j},De=(0,n.EI)({1:he});return l.createElement(a.Provider,{value:De},X)};function b(){const fe=(0,n.Vt)("api-context");if(!fe)throw new Error("API context is not available");const j=fe.atVersion(1);if(!j)throw new Error("ApiContext v1 not available");return j}function t(fe){const X=b().get(fe);if(!X)throw new Error(`No implementation available for ${fe}`);return X}function v(fe){return function(X){const ue=De=>{const at=b(),tt={};for(const ut in fe)if(fe.hasOwnProperty(ut)){const Lt=fe[ut],de=at.get(Lt);if(!de)throw new Error(`No implementation available for ${Lt}`);tt[ut]=de}return React.createElement(X,{...De,...tt})},he=X.displayName||X.name||"Component";return ue.displayName=`withApis(${he})`,ue}}class h{constructor(j){if(this.config=j,!j.id.split(".").flatMap(ue=>ue.split("-")).every(ue=>ue.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${j.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function $(fe){return new h(fe)}function L(fe,j){return"id"in fe?{api:fe,deps:{},factory:()=>j}:fe}var k=(fe=>(fe.SignedIn="SignedIn",fe.SignedOut="SignedOut",fe))(k||{});const G=$({id:"core.auth.google"}),E=$({id:"core.auth.github"}),A=$({id:"core.auth.okta"}),x=$({id:"core.auth.gitlab"}),f=$({id:"core.auth.microsoft"}),T=$({id:"core.auth.onelogin"}),C=$({id:"core.auth.bitbucket"}),_=$({id:"core.auth.bitbucket-server"}),p=$({id:"core.auth.atlassian"}),W=$({id:"core.alert"}),K=$({id:"core.analytics"}),Ie=$({id:"core.apptheme"}),ge=$({id:"core.config"}),Xe=$({id:"core.discovery"}),$t=$({id:"core.error"});var ot=(fe=>(fe[fe.None=0]="None",fe[fe.Active=1]="Active",fe))(ot||{});const Vt=$({id:"core.featureflags"}),kt=$({id:"core.fetch"}),J=$({id:"core.identity"}),sn=$({id:"core.oauthrequest"}),Se=$({id:"core.storage"});class Ne{constructor(j,X={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=j,this.context=X}setContext(j){this.context=j}captureEvent(j,X,{value:ue,attributes:he}={}){try{this.analyticsApi.captureEvent({action:j,subject:X,value:ue,attributes:he,context:this.context})}catch(De){console.warn("Error during analytics event capture. %o",De)}}}function O(){try{return t(K)}catch{return{captureEvent:()=>{}}}}function Le(){const fe=(0,l.useRef)(null),j=c(),X=O();function ue(){return fe.current===null&&(fe.current=new Ne(X)),fe.current}const he=ue();return he.setContext(j),he}const ce=()=>{const fe=(0,n.Vt)("app-context");if(!fe)throw new Error("App context is not available");const j=fe.atVersion(1);if(!j)throw new Error("AppContext v1 not available");return j},R=(0,n.uW)("component-data-store",()=>new WeakMap),N="__backstage_data";function te(fe,j,X){var ue;const he=fe;let De=(ue=he[N])!=null?ue:R.get(fe);if(De||(De={map:new Map},Object.defineProperty(he,N,{enumerable:!1,configurable:!0,writable:!1,value:De}),R.set(fe,De)),De.map.has(j)){const at=fe.displayName||fe.name;throw new Error(`Attempted to attach duplicate data "${j}" to component "${at}"`)}De.map.set(j,X)}function _e(fe,j){var X;if(!fe)return;const ue=fe.type;if(!ue)return;const he=(X=ue[N])!=null?X:R.get(ue);if(he)return he.map.get(j)}const Ge=(0,n.uW)("route-ref-type",()=>Symbol("route-ref-type"));var wt;class pt{constructor(j,X){this.id=j,this.params=X,this[wt]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}wt=Ge;function Tt(fe){var j;return new pt(fe.id,(j=fe.params)!=null?j:[])}var q;const oe=/^\w+$/;class Ae{constructor(j,X,ue,he){this.id=j,this.path=X,this.parent=ue,this.params=he,this[q]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}q=Ge;function Je(fe){const{id:j,path:X,parent:ue}=fe,he=X.split("/").filter(tt=>tt.startsWith(":")).map(tt=>tt.substring(1)),De=[...ue.params,...he];if(ue.params.some(tt=>he.includes(tt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!X.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${X}'`);if(X.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${X}'`);for(const tt of he)if(!oe.test(tt))throw new Error(`SubRouteRef path has invalid param, got '${tt}'`);return new Ae(j,X,ue,De)}var St;class mt{constructor(j,X,ue){this.id=j,this.params=X,this.optional=ue,this[St]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}St=Ge;function rn(fe){var j;return new mt(fe.id,(j=fe.params)!=null?j:[],Boolean(fe.optional))}function Kt(fe){const{pathname:j}=(0,u.TH)(),X=(0,n.Vt)("routing-context");if(!X)throw new Error("Routing context is not available");const ue=X.atVersion(1),he=(0,l.useMemo)(()=>ue&&ue.resolve(fe,{pathname:j}),[ue,fe,j]);if(!X)throw new Error("useRouteRef used outside of routing context");if(!ue)throw new Error("RoutingContext v1 not available");const De="optional"in fe&&fe.optional;if(!he&&!De)throw new Error(`No path for ${fe}`);return he}function $e(fe){return(0,u.UO)()}class _t extends l.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(j){return{error:j}}render(){const{error:j}=this.state,{app:X,plugin:ue}=this.props,{ErrorBoundaryFallback:he}=X.getComponents();return j?l.createElement(he,{error:j,resetError:this.handleErrorReset,plugin:ue}):this.props.children}}function ct(fe){const{component:j,mountPoint:X,name:ue}=fe;return un({component:{lazy:()=>j().then(he=>{const De=tt=>{try{Kt(X)}catch(ut){if(typeof ut=="object"&&ut!==null){const{message:Lt}=ut;if(typeof Lt=="string"&&Lt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${X} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw ut}return l.createElement(he,{...tt})},at=ue||he.displayName||he.name||"LazyComponent";return De.displayName=`RoutableExtension(${at})`,De},he=>at=>{const tt=ce(),{BootErrorPage:ut}=tt.getComponents();return l.createElement(ut,{step:"load-chunk",error:he})})},data:{"core.mountPoint":X},name:ue})}function hn(fe){const{component:j,name:X}=fe;return un({component:j,name:X})}function un(fe){const{data:j={},name:X}=fe;X||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ue;if("lazy"in fe.component){const De=fe.component.lazy;ue=(0,l.lazy)(()=>De().then(at=>({default:at})))}else ue=fe.component.sync;const he=X||ue.displayName||ue.name||"Component";return{expose(De){const at=tt=>{const ut=ce(),{Progress:Lt}=ut.getComponents(),de=j==null?void 0:j["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement(Lt,null)},l.createElement(_t,{app:ut,plugin:De},l.createElement(P,{attributes:{pluginId:De.getId(),...X&&{extension:X},...de&&{routeRef:de.id}}},l.createElement(m.P,{plugin:De},l.createElement(ue,{...tt})))))};te(at,"core.plugin",De),te(at,"core.extensionName",X);for(const[tt,ut]of Object.entries(j))te(at,tt,ut);return at.displayName=`Extension(${he})`,at}}}function vn(fe,j,X,ue){return l.Children.toArray(fe).flatMap(he=>{if(!(0,l.isValidElement)(he))return[];if(he.type===l.Fragment)return vn(he.props.children,j,X,ue);if(_e(he,"core.featureFlagged")){const De=he.props;return("with"in De?j.isActive(De.with):!j.isActive(De.without))?vn(he.props.children,j,X,ue):[]}if(X===void 0||X(he))return[he];if(ue)throw new Error(ue);return vn(he.props.children,j,X,ue)})}class st{constructor(j,X){this.node=j,this.featureFlagsApi=X}selectByComponentData(j){const X=vn(this.node,this.featureFlagsApi,ue=>_e(ue,j.key)!==void 0,j.withStrictError);return new st(X,this.featureFlagsApi)}findComponentData(j){return vn(this.node,this.featureFlagsApi,ue=>_e(ue,j.key)!==void 0).map(ue=>_e(ue,j.key)).filter(ue=>ue!==void 0)}getElements(){return vn(this.node,this.featureFlagsApi)}}function Pt(fe,j,X=[]){const ue=t(Vt),he=new st(fe,ue);return(0,l.useMemo)(()=>j(he),[fe,...X])}class fn{constructor(j){this.config=j,this.options=void 0}getId(){return this.config.id}getApis(){var j;return(j=this.config.apis)!=null?j:[]}getFeatureFlags(){var j,X;return(X=(j=this.config.featureFlags)==null?void 0:j.slice())!=null?X:[]}get routes(){var j;return(j=this.config.routes)!=null?j:{}}get externalRoutes(){var j;return(j=this.config.externalRoutes)!=null?j:{}}provide(j){return j.expose(this)}__experimentalReconfigure(j){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(j))}getPluginOptions(){var j;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(j=this.options)!=null?j:{}}toString(){return`plugin{${this.config.id}}`}}function pn(fe){return new fn(fe)}},32272:function(Rt,d,e){e.d(d,{BD:function(){return m},SP:function(){return E},VL:function(){return x},VZ:function(){return u},dR:function(){return $}});var n=e(24852),l=e.n(n);function u(f){if(typeof f!="object"||f===null||Array.isArray(f))return!1;const T=f;return!(typeof T.name!="string"||T.name===""||typeof T.message!="string")}function m(f){if(typeof f!="object"||f===null||Array.isArray(f))throw new Error(`Encountered invalid error, not an object, got '${f}'`);const T=f;if(typeof T.name!="string"||T.name==="")throw new Error(`Encountered error object without a name, got '${f}'`);if(typeof T.message!="string")throw new Error(`Encountered error object without a message, got '${f}'`)}function a(f,T){const _={name:"Unknown",message:"<no reason given>",...serializeError$1(f)};return T!=null&&T.includeStack||delete _.stack,_}function c(f){const T=(0,n.deserializeError)(f);return f.stack||(T.stack=void 0),T}function P(f){if(u(f)){const T=String(f);return T!=="[object Object]"?T:`${f.name}: ${f.message}`}return`unknown error '${f}'`}class b extends Error{constructor(T,C){var _;let p=T;if(C!==void 0){const W=P(C);p?p+=`; caused by ${W}`:p=`caused by ${W}`}super(p),(_=Error.captureStackTrace)==null||_.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=u(C)?C:void 0}}class t extends null{}class v extends null{}class h extends null{}class $ extends b{}class L extends null{}class k extends null{}class G extends null{}class E extends b{constructor(T,C){super(T,C),this.name=u(C)?C.name:"Error"}}async function A(f){var T;try{const C=await f.text();if(C){if((T=f.headers.get("content-type"))!=null&&T.startsWith("application/json"))try{const _=JSON.parse(C);if(_.error&&_.response)return _}catch{}return{error:{name:"Error",message:`Request failed with status ${f.status} ${f.statusText}, ${C}`},response:{statusCode:f.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${f.status} ${f.statusText}`},response:{statusCode:f.status}}}class x extends Error{constructor(T){super(T.message),this.name="ResponseError",this.response=T.response,this.body=T.data,this.cause=T.cause}static async fromResponse(T){const C=await A(T),_=C.response.statusCode||T.status,p=C.error.name||T.statusText,W=`Request failed with ${_} ${p}`,K=c(C.error);return new x({message:W,response:T,data:C,cause:K})}}},49462:function(Rt,d,e){e.d(d,{Om:function(){return a},ae:function(){return x},nW:function(){return T},q3:function(){return f},zN:function(){return A}});var n=e(30705),l=e(1854),u=e(73250),m=e(2784);const a=(0,n.T0)({id:"core.scmauth"});var c=(C,_,p)=>{if(!_.has(C))throw TypeError("Cannot "+p)},P=(C,_,p)=>(c(C,_,"read from private field"),p?p.call(C):_.get(C)),b=(C,_,p)=>{if(_.has(C))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(C):_.set(C,p)},t=(C,_,p,W)=>(c(C,_,"write to private field"),W?W.call(C,p):_.set(C,p),p),v,h,$,L,k;class G{constructor(_){b(this,v,void 0),t(this,v,_)}async getCredentials(_){const p=new URL(_.url),W=P(this,v).find(K=>K.isUrlSupported(p));if(!W)throw new Error(`No auth provider available for '${_.url}', see https://backstage.io/link?scm-auth`);return W.getCredentials(_)}}v=new WeakMap;const E=class{constructor(C,_,p,W){b(this,h,void 0),b(this,$,void 0),b(this,L,void 0),b(this,k,void 0),t(this,h,_),t(this,$,p),t(this,L,W),t(this,k,C)}static createDefaultApiFactory(){return(0,n.ni)({api:a,deps:{github:n.F4,gitlab:n.ux,azure:n.p_,bitbucket:n.bq},factory:({github:C,gitlab:_,azure:p,bitbucket:W})=>E.merge(E.forGithub(C),E.forGitlab(_),E.forAzure(p),E.forBitbucket(W))})}static forAuthApi(C,_){return new E("generic",C,_.host,_.scopeMapping)}static forGithub(C,_){var p;const W=(p=_==null?void 0:_.host)!=null?p:"github.com";return new E("github",C,W,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(C,_){var p;const W=(p=_==null?void 0:_.host)!=null?p:"gitlab.com";return new E("gitlab",C,W,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(C,_){var p;const W=(p=_==null?void 0:_.host)!=null?p:"dev.azure.com";return new E("azure",C,W,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(C,_){var p;const W=(p=_==null?void 0:_.host)!=null?p:"bitbucket.org";return new E("bitbucket",C,W,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...C){return new G(C)}isUrlSupported(C){return C.host===P(this,$)}getAdditionalScopesForProvider(C){var _,p;return!(C!=null&&C.customScopes)||P(this,k)==="generic"?[]:(p=(_=C.customScopes)==null?void 0:_[P(this,k)])!=null?p:[]}async getCredentials(C){const{url:_,additionalScope:p,...W}=C,K=P(this,L).default.slice();p!=null&&p.repoWrite&&K.push(...P(this,L).repoWrite);const Ie=this.getAdditionalScopesForProvider(p);Ie.length&&K.push(...Ie);const ge=[...new Set(K)],Xe=await P(this,h).getAccessToken(ge,W);return{token:Xe,headers:{Authorization:`Bearer ${Xe}`}}}};let A=E;h=new WeakMap,$=new WeakMap,L=new WeakMap,k=new WeakMap;class x{static fromConfig(_){return l.Lx.fromConfig(_)}}const f=(0,n.T0)({id:"integration.scmintegrations"}),T=C=>{var _;const{type:p}=C,W=(0,n.qD)(),K=u.Z,Ie=p&&(_=W.getSystemIcon(p))!=null?_:K;return m.createElement(Ie,null)}},1854:function(Rt,d,e){e.d(d,{BT:function(){return Mn},Lx:function(){return rr},MY:function(){return we},ah:function(){return Wn}});var n=e(82717),l=e.n(n),u=e(76635),m=e.n(u),a=e(96279),c=e.n(a),P=e(42851),b=e(89393),t=e(26228),v=e(48834).Buffer;function h(D){const I=new URL("http://example.com");return I.host=D,I.host===D}function $(D){try{return new URL(D),!0}catch{return!1}}function L(D,I){return{list(){return D},byUrl(V){try{const ie=typeof V=="string"?new URL(V):V;return D.find(Me=>I(Me)===ie.host)}catch{return}},byHost(V){return D.find(ie=>I(ie)===V)}}}function k(D){const{url:I,base:V,lineNumber:ie}=D;try{return new URL(I),I}catch{}let Me;if(I.startsWith("/")){const{filepath:rt}=l()(V);Me=new URL(V);const B=(0,u.trimEnd)(Me.pathname.substring(0,Me.pathname.length-rt.length),"/");Me.pathname=`${B}${I}`}else Me=new URL(I,V);return Me.search=new URL(V).search,ie&&(Me.hash=`L${ie}`),Me.toString()}const G="amazonaws.com";function E(D){var I;const V=D.getOptionalString("endpoint"),ie=(I=D.getOptionalBoolean("s3ForcePathStyle"))!=null?I:!1;let Me,rt;if(V){try{const Mt=new URL(V);Me=Mt.host,rt=Mt.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${V}' is not a valid URL`)}if(rt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${V}'`)}else Me=G;const B=D.getOptionalString("accessKeyId"),H=D.getOptionalString("secretAccessKey"),Oe=D.getOptionalString("roleArn"),ze=D.getOptionalString("externalId");return{host:Me,endpoint:V,s3ForcePathStyle:ie,accessKeyId:B,secretAccessKey:H,roleArn:Oe,externalId:ze}}function A(D){const I=D.map(E);return I.some(V=>V.host===G)||I.push({host:G}),I}const x=class{constructor(D){this.integrationConfig=D}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return k(D)}resolveEditUrl(D){return D}};let f=x;f.factory=({config:D})=>{var I;const V=A((I=D.getOptionalConfigArray("integrations.awsS3"))!=null?I:[]);return L(V.map(ie=>new x(ie)),ie=>ie.config.host)};var T=(D,I,V)=>{if(!I.has(D))throw TypeError("Cannot "+V)},C=(D,I,V)=>(T(D,I,"read from private field"),V?V.call(D):I.get(D)),_=(D,I,V)=>{if(I.has(D))throw TypeError("Cannot add the same private member more than once");I instanceof WeakSet?I.add(D):I.set(D,V)},p=(D,I,V,ie)=>(T(D,I,"write to private field"),ie?ie.call(D,V):I.set(D,V),V),W,K,Ie,ge,Xe,$t,ot;const Vt="GB",kt=class{constructor(D,I,V,ie,Me,rt){_(this,W,void 0),_(this,K,void 0),_(this,Ie,void 0),_(this,ge,void 0),_(this,Xe,void 0),_(this,$t,void 0),_(this,ot,(...B)=>{const H=new URL(C(this,W));return H.pathname=B.map(Oe=>encodeURIComponent(Oe)).join("/"),H}),p(this,W,D),p(this,K,I),p(this,Ie,V),p(this,ge,ie),p(this,Xe,Me),p(this,$t,rt)}static fromRepoUrl(D){var I;const V=new URL(D);let ie,Me,rt;const B=V.pathname.split("/").map(Mt=>decodeURIComponent(Mt));if(B[2]==="_git"?(ie=B[1],Me=rt=B[3]):B[3]==="_git"?(ie=B[1],Me=B[2],rt=B[4]):B[4]==="_git"&&(ie=`${B[1]}/${B[2]}`,Me=B[3],rt=B[5]),!ie||!Me||!rt)throw new Error("Azure URL must point to a git repository");const H=(I=V.searchParams.get("path"))!=null?I:void 0;let Oe;const ze=V.searchParams.get("version");if(ze){if(ze.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Oe=ze.slice(2)}return new kt(V.origin,ie,Me,rt,H,Oe)}toRepoUrl(){let D;return C(this,Ie)===C(this,ge)?D=C(this,ot).call(this,C(this,K),"_git",C(this,ge)):D=C(this,ot).call(this,C(this,K),C(this,Ie),"_git",C(this,ge)),C(this,Xe)&&D.searchParams.set("path",C(this,Xe)),C(this,$t)&&D.searchParams.set("version",Vt+C(this,$t)),D.toString()}toFileUrl(){if(!C(this,Xe))throw new Error("Azure URL must point to a specific path to be able to download a file");const D=C(this,ot).call(this,C(this,K),C(this,Ie),"_apis","git","repositories",C(this,ge),"items");return D.searchParams.set("api-version","6.0"),D.searchParams.set("path",C(this,Xe)),C(this,$t)&&D.searchParams.set("version",C(this,$t)),D.toString()}toArchiveUrl(){const D=C(this,ot).call(this,C(this,K),C(this,Ie),"_apis","git","repositories",C(this,ge),"items");return D.searchParams.set("recursionLevel","full"),D.searchParams.set("download","true"),D.searchParams.set("api-version","6.0"),C(this,Xe)&&D.searchParams.set("scopePath",C(this,Xe)),C(this,$t)&&D.searchParams.set("version",C(this,$t)),D.toString()}toCommitsUrl(){const D=C(this,ot).call(this,C(this,K),C(this,Ie),"_apis","git","repositories",C(this,ge),"commits");return D.searchParams.set("api-version","6.0"),C(this,$t)&&D.searchParams.set("searchCriteria.itemVersion.version",C(this,$t)),D.toString()}getOwner(){return C(this,K)}getProject(){return C(this,Ie)}getRepo(){return C(this,ge)}getPath(){return C(this,Xe)}getRef(){return C(this,$t)}};let J=kt;W=new WeakMap,K=new WeakMap,Ie=new WeakMap,ge=new WeakMap,Xe=new WeakMap,$t=new WeakMap,ot=new WeakMap;const sn="dev.azure.com";function Se(D){var I;const V=(I=D.getOptionalString("host"))!=null?I:sn,ie=D.getOptionalString("token");if(!h(V))throw new Error(`Invalid Azure integration config, '${V}' is not a valid host`);return{host:V,token:ie}}function Ne(D){const I=D.map(Se);return I.some(V=>V.host===sn)||I.push({host:sn}),I}const O=class{constructor(D){this.integrationConfig=D}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){var I;const{url:V,base:ie}=D;if($(V))return V;try{const Me=J.fromRepoUrl(ie),rt=new URL(ie),B=new URL(`https://a.com${(I=Me.getPath())!=null?I:""}`),H=new URL(V,B).pathname;return rt.searchParams.set("path",H),D.lineNumber&&(rt.searchParams.set("line",String(D.lineNumber)),rt.searchParams.set("lineEnd",String(D.lineNumber+1)),rt.searchParams.set("lineStartColumn","1"),rt.searchParams.set("lineEndColumn","1")),rt.toString()}catch{return new URL(V,ie).toString()}}resolveEditUrl(D){return D}};let Le=O;Le.factory=({config:D})=>{var I;const V=Ne((I=D.getOptionalConfigArray("integrations.azure"))!=null?I:[]);return L(V.map(ie=>new O(ie)),ie=>ie.config.host)};function ce(D){return J.fromRepoUrl(D).toFileUrl()}function R(D){return J.fromRepoUrl(D).toArchiveUrl()}function N(D){return J.fromRepoUrl(D).toCommitsUrl()}function te(D,I){const V=I?{...I}:{};if(D.token){const ie=v.from(`:${D.token}`,"utf8");V.Authorization=`Basic ${ie.toString("base64")}`}return{headers:V}}const _e="bitbucket.org",Ge="https://api.bitbucket.org/2.0";function wt(D){var I;const V=(I=D.getOptionalString("host"))!=null?I:_e;let ie=D.getOptionalString("apiBaseUrl");const Me=D.getOptionalString("token"),rt=D.getOptionalString("username"),B=D.getOptionalString("appPassword");if(!h(V))throw new Error(`Invalid Bitbucket integration config, '${V}' is not a valid host`);return ie?ie=(0,u.trimEnd)(ie,"/"):V===_e?ie=Ge:ie=`https://${V}/rest/api/1.0`,{host:V,apiBaseUrl:ie,token:Me,username:rt,appPassword:B}}function pt(D){const I=D.map(wt);return I.some(V=>V.host===_e)||I.push({host:_e,apiBaseUrl:Ge}),I}const Tt=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(!D.lineNumber)return I;const V=new URL(I);return this.integrationConfig.host==="bitbucket.org"?V.hash=`lines-${D.lineNumber}`:V.hash=`${D.lineNumber}`,V.toString()}resolveEditUrl(D){const I=l()(D),V=new URL(D);return V.searchParams.set("mode","edit"),V.searchParams.set("spa","0"),V.searchParams.set("at",I.ref),V.toString()}};let q=Tt;q.factory=({config:D})=>{var I,V,ie;const Me=pt((ie=D.getOptionalConfigArray("integrations.bitbucket"))!=null?ie:[...(I=D.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?I:[],...(V=D.getOptionalConfigArray("integrations.bitbucketServer"))!=null?V:[]]);return L(Me.map(rt=>new Tt(rt)),rt=>rt.config.host)};async function oe(D,I){const{name:V,owner:ie,resource:Me}=parseGitUrl(D),rt=Me==="bitbucket.org";let B=rt?`${I.apiBaseUrl}/repositories/${ie}/${V}`:`${I.apiBaseUrl}/projects/${ie}/repos/${V}/default-branch`,H=await fetch(B,St(I));if(H.status===404&&!rt&&(B=`${I.apiBaseUrl}/projects/${ie}/repos/${V}/branches/default`,H=await fetch(B,St(I))),!H.ok){const ze=`Failed to retrieve default branch from ${B}, ${H.status} ${H.statusText}`;throw new Error(ze)}let Oe;if(rt)Oe=(await H.json()).mainbranch.name;else{const{displayId:ze}=await H.json();Oe=ze}if(!Oe)throw new Error(`Failed to read default branch from ${B}. Response ${H.status} ${H.json()}`);return Oe}async function Ae(D,I){const{name:V,owner:ie,ref:Me,protocol:rt,resource:B,filepath:H}=parseGitUrl(D),Oe=B==="bitbucket.org";let ze=Me;ze||(ze=await oe(D,I));const Mt=H?`&path=${encodeURIComponent(decodeURIComponent(H))}`:"";return Oe?`${rt}://${B}/${ie}/${V}/get/${ze}.tar.gz`:`${I.apiBaseUrl}/projects/${ie}/repos/${V}/archive?format=tgz&at=${ze}&prefix=${ie}-${V}${Mt}`}function Je(D,I){try{const{owner:V,name:ie,ref:Me,filepathtype:rt,filepath:B}=parseGitUrl(D);if(!V||!ie||rt!=="browse"&&rt!=="raw"&&rt!=="src")throw new Error("Invalid Bitbucket URL or file path");const H=B.replace(/^\//,"");if(I.host==="bitbucket.org"){if(!Me)throw new Error("Invalid Bitbucket URL or file path");return`${I.apiBaseUrl}/repositories/${V}/${ie}/src/${Me}/${H}`}return`${I.apiBaseUrl}/projects/${V}/repos/${ie}/raw/${H}?at=${Me}`}catch(V){throw new Error(`Incorrect URL: ${D}, ${V}`)}}function St(D){const I={};if(D.token)I.Authorization=`Bearer ${D.token}`;else if(D.username&&D.appPassword){const V=v.from(`${D.username}:${D.appPassword}`,"utf8");I.Authorization=`Basic ${V.toString("base64")}`}return{headers:I}}const mt="bitbucket.org",rn="https://api.bitbucket.org/2.0";function Kt(D){const I=mt,V=rn,ie=D.getString("username"),Me=D.getString("appPassword");return{host:I,apiBaseUrl:V,username:ie,appPassword:Me}}function $e(D){const I=D.map(Kt);return I.length===0&&I.push({host:mt,apiBaseUrl:rn}),I}const _t=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(D.lineNumber){const V=new URL(I);return V.hash=`lines-${D.lineNumber}`,V.toString()}return I}resolveEditUrl(D){const I=l()(D),V=new URL(D);return V.searchParams.set("mode","edit"),V.searchParams.set("at",I.ref),V.toString()}};let ct=_t;ct.factory=({config:D})=>{var I;const V=$e((I=D.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?I:[]);return L(V.map(ie=>new _t(ie)),ie=>ie.config.host)};async function hn(D,I){const{name:V,owner:ie}=parseGitUrl(D),Me=`${I.apiBaseUrl}/repositories/${ie}/${V}`,rt=await fetch(Me,st(I));if(!rt.ok){const Oe=`Failed to retrieve default branch from ${Me}, ${rt.status} ${rt.statusText}`;throw new Error(Oe)}const H=(await rt.json()).mainbranch.name;if(!H)throw new Error(`Failed to read default branch from ${Me}. Response ${rt.status} ${rt.json()}`);return H}async function un(D,I){const{name:V,owner:ie,ref:Me,protocol:rt,resource:B}=parseGitUrl(D);let H=Me;return H||(H=await hn(D,I)),`${rt}://${B}/${ie}/${V}/get/${H}.tar.gz`}function vn(D,I){try{const{owner:V,name:ie,ref:Me,filepathtype:rt,filepath:B}=parseGitUrl(D);if(!V||!ie||rt!=="src"&&rt!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const H=B.replace(/^\//,"");if(!Me)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${I.apiBaseUrl}/repositories/${V}/${ie}/src/${Me}/${H}`}catch(V){throw new Error(`Incorrect URL: ${D}, ${V}`)}}function st(D){const I={};if(D.username&&D.appPassword){const V=v.from(`${D.username}:${D.appPassword}`,"utf8");I.Authorization=`Basic ${V.toString("base64")}`}return{headers:I}}function Pt(D){const I=D.getString("host");let V=D.getOptionalString("apiBaseUrl");const ie=D.getOptionalString("token"),Me=D.getOptionalString("username"),rt=D.getOptionalString("password");if(!h(I))throw new Error(`Invalid Bitbucket Server integration config, '${I}' is not a valid host`);return V?V=(0,u.trimEnd)(V,"/"):V=`https://${I}/rest/api/1.0`,{host:I,apiBaseUrl:V,token:ie,username:Me,password:rt}}function fn(D){return D.map(Pt)}const pn=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(D.lineNumber){const V=new URL(I);return V.hash=D.lineNumber.toString(),V.toString()}return I}resolveEditUrl(D){return D.includes("?")?D.substring(0,D.indexOf("?")):D}};let fe=pn;fe.factory=({config:D})=>{var I;const V=fn((I=D.getOptionalConfigArray("integrations.bitbucketServer"))!=null?I:[]);return L(V.map(ie=>new pn(ie)),ie=>ie.config.host)};async function j(D,I){const{name:V,owner:ie}=parseGitUrl(D);let Me=`${I.apiBaseUrl}/projects/${ie}/repos/${V}/default-branch`,rt=await fetch(Me,he(I));if(rt.status===404&&(Me=`${I.apiBaseUrl}/projects/${ie}/repos/${V}/branches/default`,rt=await fetch(Me,he(I))),!rt.ok){const Oe=`Failed to retrieve default branch from ${Me}, ${rt.status} ${rt.statusText}`;throw new Error(Oe)}const{displayId:B}=await rt.json(),H=B;if(!H)throw new Error(`Failed to read default branch from ${Me}. Response ${rt.status} ${rt.json()}`);return H}async function X(D,I){const{name:V,owner:ie,ref:Me,filepath:rt}=parseGitUrl(D);let B=Me;B||(B=await j(D,I));const H=rt?`&path=${encodeURIComponent(decodeURIComponent(rt))}`:"";return`${I.apiBaseUrl}/projects/${ie}/repos/${V}/archive?format=tgz&at=${B}&prefix=${ie}-${V}${H}`}function ue(D,I){try{const{owner:V,name:ie,ref:Me,filepathtype:rt,filepath:B}=parseGitUrl(D);if(!V||!ie||rt!=="browse"&&rt!=="raw"&&rt!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const H=B.replace(/^\//,"");return`${I.apiBaseUrl}/projects/${V}/repos/${ie}/raw/${H}?at=${Me}`}catch(V){throw new Error(`Incorrect URL: ${D}, ${V}`)}}function he(D){const I={};if(D.token)I.Authorization=`Bearer ${D.token}`;else if(D.username&&D.password){const V=v.from(`${D.username}:${D.password}`,"utf8");I.Authorization=`Basic ${V.toString("base64")}`}return{headers:I}}function De(D){const I=D.getString("host");let V=D.getOptionalString("baseUrl"),ie=D.getOptionalString("cloneUrl"),Me=D.getOptionalString("gitilesBaseUrl");const rt=D.getOptionalString("username"),B=D.getOptionalString("password");if(h(I)){if(V&&!$(V))throw new Error(`Invalid Gerrit integration config, '${V}' is not a valid baseUrl`);if(ie&&!$(ie))throw new Error(`Invalid Gerrit integration config, '${ie}' is not a valid cloneUrl`);if(Me&&!$(Me))throw new Error(`Invalid Gerrit integration config, '${Me}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${I}' is not a valid host`);return V?V=(0,u.trimEnd)(V,"/"):V=`https://${I}`,Me?Me=(0,u.trimEnd)(Me,"/"):Me=`https://${I}`,ie?ie=(0,u.trimEnd)(ie,"/"):ie=V,{host:I,baseUrl:V,cloneUrl:ie,gitilesBaseUrl:Me,username:rt,password:B}}function at(D){return D.map(De)}const tt=")]}'";function ut(D,I){const ie=I.replace(D.gitilesBaseUrl,"").split("/").filter(ze=>!!ze),Me=ie.indexOf("+");if(Me<=0)throw new Error(`Unable to parse project from url: ${I}`);const rt=(0,u.trimStart)(ie.slice(0,Me).join("/"),"/"),B=ie.indexOf("heads");if(B<=0)throw new Error(`Unable to parse branch from url: ${I}`);const H=ie[B+1],Oe=ie.slice(B+2).join("/");return{branch:H,filePath:Oe===""?"/":Oe,project:rt}}function Lt(D,I,V,ie){return`${D.gitilesBaseUrl}/${I}/+/refs/heads/${V}/${(0,u.trimStart)(ie,"/")}`}function de(D){return D.password?"/a/":"/"}function ne(D,I){const{branch:V,project:ie}=ut(D,I);return`${D.baseUrl}${de(D)}projects/${encodeURIComponent(ie)}/branches/${V}`}function S(D,I){const{project:V}=ut(D,I);return`${D.cloneUrl}${de(D)}${V}`}function z(D,I){const{branch:V,filePath:ie,project:Me}=ut(D,I);return`${D.baseUrl}${de(D)}projects/${encodeURIComponent(Me)}/branches/${V}/files/${encodeURIComponent(ie)}/content`}function Q(D){return`${D.baseUrl}${de(D)}projects/`}function me(D){const I={};if(!D.password)return I;const V=v.from(`${D.username}:${D.password}`,"utf8");return I.Authorization=`Basic ${V.toString("base64")}`,{headers:I}}async function xe(D){const I=await D.text();if(I.startsWith(tt))try{return JSON.parse(I.slice(tt.length))}catch(V){throw new Error(`Invalid response from Gerrit: ${I.slice(0,10)} - ${V}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${I.slice(0,10)}`)}const Fe=class{constructor(D){this.integrationConfig=D}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const{url:I,base:V,lineNumber:ie}=D;let Me;if(I.startsWith("/")){const{branch:rt,project:B}=ut(this.config,V);return Lt(this.config,B,rt,I)}return I?Me=new URL(I,V):Me=new URL(V),ie&&(Me.hash=ie.toString()),Me.toString()}resolveEditUrl(D){return D}};let He=Fe;He.factory=({config:D})=>{var I;const V=at((I=D.getOptionalConfigArray("integrations.gerrit"))!=null?I:[]);return L(V.map(ie=>new Fe(ie)),ie=>ie.config.host)};function dt(D){const I=D.getString("host");let V=D.getOptionalString("baseUrl");const ie=D.getOptionalString("username"),Me=D.getOptionalString("password");if(!h(I))throw new Error(`Invalid Gitea integration config, '${I}' is not a valid host`);return V?V=(0,u.trimEnd)(V,"/"):V=`https://${I}`,{host:I,baseUrl:V,username:ie,password:Me}}function ae(D,I){var V;try{const ie=(V=D.baseUrl)!=null?V:`https://${D.host}`,[Me,rt,B,H,Oe,ze,...Mt]=I.replace(ie,"").split("/"),Ft=Mt.join("/").replace(/^\//,"");return`${ie}/${rt}/${B}/_edit/${ze}/${Ft}`}catch(ie){throw new Error(`Incorrect URL: ${I}, ${ie}`)}}function pe(D,I){var V;try{const ie=(V=D.baseUrl)!=null?V:`https://${D.host}`,[Me,rt,B,H,Oe,ze,...Mt]=I.replace(ie,"").split("/"),Ft=Mt.join("/").replace(/^\//,"");return`${ie}/api/v1/repos/${rt}/${B}/contents/${Ft}?ref=${ze}`}catch(ie){throw new Error(`Incorrect URL: ${I}, ${ie}`)}}function ve(D){const I={},{username:V,password:ie}=D;return ie?(V?I.Authorization=`basic ${v.from(`${V}:${ie}`).toString("base64")}`:I.Authorization=`token ${ie}`,{headers:I}):I}const Te=class{constructor(D){this.config=D}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(D){return k(D)}resolveEditUrl(D){return ae(this.config,D)}};let nt=Te;nt.factory=({config:D})=>{var I;const ie=((I=D.getOptionalConfigArray("integrations.gitea"))!=null?I:[]).map(Me=>dt(Me));return L(ie.map(Me=>new Te(Me)),Me=>Me.config.host)};const Bt="github.com",Ut="https://api.github.com",Dt="https://raw.githubusercontent.com";function Ce(D){var I,V;const ie=(I=D.getOptionalString("host"))!=null?I:Bt;let Me=D.getOptionalString("apiBaseUrl"),rt=D.getOptionalString("rawBaseUrl");const B=D.getOptionalString("token"),H=(V=D.getOptionalConfigArray("apps"))==null?void 0:V.map(Oe=>({appId:Oe.getNumber("appId"),clientId:Oe.getString("clientId"),clientSecret:Oe.getString("clientSecret"),webhookSecret:Oe.getString("webhookSecret"),privateKey:Oe.getString("privateKey"),allowedInstallationOwners:Oe.getOptionalStringArray("allowedInstallationOwners")}));if(!h(ie))throw new Error(`Invalid GitHub integration config, '${ie}' is not a valid host`);return Me?Me=(0,u.trimEnd)(Me,"/"):ie===Bt&&(Me=Ut),rt?rt=(0,u.trimEnd)(rt,"/"):ie===Bt&&(rt=Dt),{host:ie,apiBaseUrl:Me,rawBaseUrl:rt,token:B,apps:H}}function we(D){const I=D.map(Ce);return I.some(V=>V.host===Bt)||I.push({host:Bt,apiBaseUrl:Ut,rawBaseUrl:Dt}),I}function Ke(D,I,V){try{const{owner:ie,name:Me,ref:rt,filepathtype:B,filepath:H}=parseGitUrl(D);if(!ie||!Me||!rt||B!=="blob"&&B!=="raw"&&B!=="tree")throw new Error("Invalid GitHub URL or file path");const Oe=H.replace(/^\//,"");return We(I,V)==="api"?`${I.apiBaseUrl}/repos/${ie}/${Me}/contents/${Oe}?ref=${rt}`:`${I.rawBaseUrl}/${ie}/${Me}/${rt}/${Oe}`}catch(ie){throw new Error(`Incorrect URL: ${D}, ${ie}`)}}function Ye(D,I){const V={};return We(D,I)==="api"&&(V.Accept="application/vnd.github.v3.raw"),I.token&&(V.Authorization=`token ${I.token}`),{headers:V}}function We(D,I){return D.apiBaseUrl&&(I.token||!D.rawBaseUrl)?"api":"raw"}class Ct{constructor(){this.tokenCache=new Map,this.isExpired=I=>t.ou.local()>I}async getOrCreateToken(I,V,ie){let Me=this.tokenCache.get(I);if((!Me||this.isExpired(Me.expiresAt))&&(Me=await ie(),Me.expiresAt=Me.expiresAt.minus({minutes:10}),this.tokenCache.set(I,Me)),!this.appliesToRepo(Me,V))throw new Error(`The Backstage GitHub application used in the ${I} organization does not have access to a repository with the name ${V}`);return{accessToken:Me.token}}appliesToRepo(I,V){return V===void 0?!0:I.repositories!==void 0?I.repositories.includes(V):!0}}const It={Accept:"application/vnd.github.machine-man-preview+json"};class jt{constructor(I,V){this.cache=new Ct,this.allowedInstallationOwners=I.allowedInstallationOwners,this.baseUrl=V,this.baseAuthConfig={appId:I.appId,privateKey:I.privateKey.replace(/\\n/gm,`
`)},this.appClient=new b.v({baseUrl:V,headers:It,authStrategy:P.i,auth:this.baseAuthConfig})}async getInstallationCredentials(I,V){var ie;return this.allowedInstallationOwners&&!((ie=this.allowedInstallationOwners)!=null&&ie.includes(I))?{accessToken:void 0}:this.cache.getOrCreateToken(I,V,async()=>{var Me;const{installationId:rt,suspended:B}=await this.getInstallationData(I);if(B)throw new Error(`The GitHub application for ${I} is suspended`);const H=await this.appClient.apps.createInstallationAccessToken({installation_id:rt,headers:It});let Oe;if(H.data.repository_selection==="selected"){const ze=new b.v({baseUrl:this.baseUrl,auth:H.data.token}),Mt=await ze.paginate(ze.apps.listReposAccessibleToInstallation);Oe=((Me=Mt.repositories)!=null?Me:Mt).map(Ht=>Ht.name)}return{token:H.data.token,expiresAt:t.ou.fromISO(H.data.expires_at),repositories:Oe}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(I){const ie=(await this.getInstallations()).find(rt=>{var B,H;return((H=(B=rt.account)==null?void 0:B.login)==null?void 0:H.toLocaleLowerCase("en-US"))===I.toLocaleLowerCase("en-US")});if(ie)return{installationId:ie.id,suspended:Boolean(ie.suspended_by)};const Me=new Error(`No app installation found for ${I} in ${this.baseAuthConfig.appId}`);throw Me.name="NotFoundError",Me}}class Gt{constructor(I){var V,ie;this.apps=(ie=(V=I.apps)==null?void 0:V.map(Me=>new jt(Me,I.apiBaseUrl)))!=null?ie:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(V=>V.getInstallations()))).flat():[]}async getAppToken(I,V){if(this.apps.length===0)return;const ie=await Promise.all(this.apps.map(H=>H.getInstallationCredentials(I,V).then(Oe=>({credentials:Oe,error:void 0}),Oe=>({credentials:void 0,error:Oe})))),Me=ie.find(H=>{var Oe;return(Oe=H.credentials)==null?void 0:Oe.accessToken});if(Me)return Me.credentials.accessToken;const B=ie.map(H=>H.error).find(H=>(H==null?void 0:H.name)!=="NotFoundError");if(B)throw B}}const _n=class{constructor(D,I){this.githubAppCredentialsMux=D,this.token=I}async getCredentials(D){const I=l()(D.url),V=I.owner||I.name,ie=I.owner?I.name:void 0;let Me="app",rt=await this.githubAppCredentialsMux.getAppToken(V,ie);return rt||(Me="token",rt=this.token),{headers:rt?{Authorization:`Bearer ${rt}`}:void 0,token:rt,type:Me}}};let wn=_n;wn.create=D=>new _n(new Gt(D),D.token);class xn{constructor(I){this.providers=I}static fromIntegrations(I){const V=new Map;return I.github.list().forEach(ie=>{const Me=wn.create(ie.config);V.set(ie.config.host,Me)}),new xn(V)}async getCredentials(I){const V=new URL(I.url),ie=this.providers.get(V.host);if(!ie)throw new Error(`There is no GitHub integration that matches ${I.url}. Please add a configuration for an integration.`);return ie.getCredentials(I)}}const Tn=class{constructor(D){this.integrationConfig=D}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return Mn(k(D),"tree")}resolveEditUrl(D){return Mn(D,"edit")}};let kn=Tn;kn.factory=({config:D})=>{var I;const V=we((I=D.getOptionalConfigArray("integrations.github"))!=null?I:[]);return L(V.map(ie=>new Tn(ie)),ie=>ie.config.host)};function Mn(D,I){return D.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(V,ie,Me,rt)=>`//${ie}/${Me}/${rt}/${I}/`)}const yn=null;class zn extends kn{constructor(I){super(I)}get config(){return super.config}}zn.factory=kn.factory;const lt=null,ye=null,Ze=null,Ue="gitlab.com",vt="https://gitlab.com/api/v4";function it(D){const I=D.getString("host");let V=D.getOptionalString("apiBaseUrl");const ie=D.getOptionalString("token");let Me=D.getOptionalString("baseUrl");if(V?V=(0,u.trimEnd)(V,"/"):I===Ue&&(V=vt),Me?Me=(0,u.trimEnd)(Me,"/"):Me=`https://${I}`,h(I)){if(!V||!$(V))throw new Error(`Invalid GitLab integration config, '${V}' is not a valid apiBaseUrl`);if(!$(Me))throw new Error(`Invalid GitLab integration config, '${Me}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${I}' is not a valid host`);return{host:I,token:ie,apiBaseUrl:V,baseUrl:Me}}function yt(D){const I=D.map(it);return I.some(V=>V.host===Ue)||I.push({host:Ue,apiBaseUrl:vt,baseUrl:`https://${Ue}`}),I}function ft(D){let I="";return D.host!==Ue&&(I=new URL(D.baseUrl).pathname),trimEnd(I,"/")}async function Zt(D,I){const V=await Zn(D,I);return gn(D,V,I).toString()}function tn(D){const{token:I=""}=D;return{headers:{"PRIVATE-TOKEN":I}}}function gn(D,I,V){try{const ie=new URL(D),Me=ie.pathname.split("/blob/").slice(1).join("/blob/"),[rt,...B]=Me.split("/"),H=ft(V);return ie.pathname=[...H?[H]:[],"api/v4/projects",I,"repository/files",encodeURIComponent(decodeURIComponent(B.join("/"))),"raw"].join("/"),ie.search=`?ref=${rt}`,ie}catch(ie){throw new Error(`Incorrect url: ${D}, ${ie}`)}}async function Zn(D,I){const V=new URL(D);if(!V.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let ie=V.pathname.split("/-/blob/")[0].split("/blob/")[0];const Me=ft(I);Me&&(ie=ie.replace(Me,""));const rt=new URL(`${V.origin}${Me}/api/v4/projects/${encodeURIComponent(ie.replace(/^\//,""))}`),B=await fetch(rt.toString(),tn(I)),H=await B.json();if(!B.ok)throw new Error(`GitLab Error '${H.error}', ${H.error_description}`);return Number(H.id)}catch(ie){throw new Error(`Could not get GitLab project ID for: ${D}, ${ie}`)}}const er=class{constructor(D){this.integrationConfig=D}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return k(D)}resolveEditUrl(D){return Wn(D,"edit")}};let tr=er;tr.factory=({config:D})=>{var I;const V=yt((I=D.getOptionalConfigArray("integrations.gitlab"))!=null?I:[]);return L(V.map(ie=>new er(ie)),ie=>ie.config.host)};function Wn(D,I){return D.replace(/\/\-\/(blob|tree|edit)\//,`/-/${I}/`)}function jn(D){if(!D)return{};if(!D.has("clientEmail")&&!D.has("privateKey"))return{};const I=D.getString("privateKey").split("\\n").join(`
`);return{clientEmail:D.getString("clientEmail"),privateKey:I}}class rr{static fromConfig(I){return new rr({awsS3:f.factory({config:I}),azure:Le.factory({config:I}),bitbucket:q.factory({config:I}),bitbucketCloud:ct.factory({config:I}),bitbucketServer:fe.factory({config:I}),gerrit:He.factory({config:I}),github:kn.factory({config:I}),gitlab:tr.factory({config:I}),gitea:nt.factory({config:I})})}constructor(I){this.byType=I}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(I=>I.list())}byUrl(I){let V=Object.values(this.byType).map(ie=>ie.byUrl(I)).filter(Boolean);if(V.length>1){const ie=V.filter(Me=>!(Me instanceof q));ie.length!==0&&(V=ie)}return V[0]}byHost(I){return Object.values(this.byType).map(V=>V.byHost(I)).find(Boolean)}resolveUrl(I){const V=this.byUrl(I.base);return V?V.resolveUrl(I):k(I)}resolveEditUrl(I){const V=this.byUrl(I);return V?V.resolveEditUrl(I):I}}},63115:function(Rt,d,e){e.d(d,{Cy:function(){return $t},DC:function(){return $e},OO:function(){return hn},RE:function(){return Ie},XQ:function(){return ct},Yq:function(){return Le},ap:function(){return vn},bM:function(){return q},cm:function(){return Ae},d1:function(){return rn},fP:function(){return K},fe:function(){return Je},gC:function(){return un},hK:function(){return Kt},hs:function(){return St},nE:function(){return ce},x1:function(){return _t},zJ:function(){return mt}});var n=e(2784),l=e(73557),u=e(80236),m=e(30705),a=e(16673),c=e(73495),P=e(99688),b=e(13737),t=e(60364),v=e(90436),h=e(79692),$=e(95544),L=e(8629),k=e(79249),G=e(38724),E=e(99152),A=e(6487),x=e(49429),f=e(77277),T=e(34520),C=e(15933);const _=(0,m.NT)({id:"api-docs"}),p=(0,m.x8)({id:"register-component",optional:!0}),W=[a.Es.columns.createTitleColumn({hidden:!0}),a.Es.columns.createNameColumn({defaultKind:"API"}),a.Es.columns.createSystemColumn(),a.Es.columns.createOwnerColumn(),a.Es.columns.createSpecTypeColumn(),a.Es.columns.createSpecLifecycleColumn(),a.Es.columns.createMetadataDescriptionColumn(),a.Es.columns.createTagsColumn()],K=st=>{var Pt;const{initiallySelectedFilter:fn="all",columns:pn,actions:fe}=st,X=`${(Pt=(0,m.h_)(m.Ds).getOptionalString("organization.name"))!=null?Pt:"Backstage"} API Explorer`,ue=(0,m.tg)(p);return n.createElement(u.g9,{themeId:"apis",title:"APIs",subtitle:X,pageTitleOverride:"APIs"},n.createElement(u.VY,null,n.createElement(u.yW,{title:""},n.createElement(u.XF,{title:"Register Existing API",to:ue==null?void 0:ue()}),n.createElement(u.qt,null,"All your APIs")),n.createElement(c.UO,null,n.createElement(c._i,null,n.createElement(c._i.Filters,null,n.createElement(c.tW,{initialFilter:"api",hidden:!0}),n.createElement(c.sL,null),n.createElement(c.EW,{initialFilter:fn}),n.createElement(c.dq,null),n.createElement(c.df,null),n.createElement(c.xE,null)),n.createElement(c._i.Content,null,n.createElement(a.Es,{columns:pn||W,actions:fe}))))))},Ie=st=>(0,l.pC)()||n.createElement(K,{...st}),ge=(0,m.T0)({id:"plugin.api-docs.config"}),Xe=st=>n.createElement(u.Oi,{text:st.definition,language:st.language,showCopyCodeButton:!0}),$t=()=>{var st;const{entity:Pt}=(0,c.X2)(),fn=(0,m.h_)(ge),{getApiDefinitionWidget:pn}=fn;if(!Pt)return n.createElement(P.Z,{severity:"error"},"Could not fetch the API");const fe=pn(Pt),j=(st=Pt.metadata.title)!=null?st:Pt.metadata.name;return fe?n.createElement(u.oZ,{title:j},n.createElement(u.hB,{label:fe.title,key:"widget"},fe.component(Pt.spec.definition)),n.createElement(u.hB,{label:"Raw",key:"raw"},n.createElement(Xe,{definition:Pt.spec.definition,language:fe.rawLanguage||Pt.spec.type}))):n.createElement(u.oZ,{title:j,children:[n.createElement(u.hB,{label:Pt.spec.type,key:"raw"},n.createElement(Xe,{definition:Pt.spec.definition,language:Pt.spec.type}))]})},ot=n.lazy(()=>Promise.all([e.e(4778),e.e(1978),e.e(7700),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(st=>({default:st.AsyncApiDefinition}))),Vt=st=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(ot,{...st})),kt=n.lazy(()=>e.e(4774).then(e.bind(e,14774)).then(st=>({default:st.GraphQlDefinition}))),J=st=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(kt,{...st})),sn=n.lazy(()=>Promise.all([e.e(1978),e.e(9361),e.e(7700),e.e(2788)]).then(e.bind(e,42788)).then(st=>({default:st.OpenApiDefinition}))),Se=st=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(sn,{...st})),Ne=st=>{const Pt=(0,t.Z)();return n.createElement(u.Oi,{customStyle:{backgroundColor:Pt.palette.background.default},text:st.definition,language:"protobuf",showCopyCodeButton:!0})},O=st=>{const{definition:Pt}=st,fn=(0,t.Z)();return n.createElement(u.Oi,{customStyle:{backgroundColor:fn.palette.background.default},text:Pt,language:"typescript",showCopyCodeButton:!0})};function Le(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:st=>n.createElement(Se,{definition:st})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:st=>n.createElement(Vt,{definition:st})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:st=>n.createElement(J,{definition:st})},{type:"grpc",title:"gRPC",component:st=>n.createElement(Ne,{definition:st})},{type:"trpc",title:"tRPC",component:st=>n.createElement(O,{definition:st})}]}const ce=st=>{const{apiEntity:Pt}=st,pn=(0,m.h_)(ge).getApiDefinitionWidget(Pt),fe=pn?pn.title:Pt.spec.type;return n.createElement(v.Z,{component:"span"},fe)},R=(0,h.Z)(st=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${st.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:st.palette.text.primary,wordBreak:"break-word",fontSize:st.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:st.spacing(1),color:st.palette.text.primary}}));function N(st){const{children:Pt,value:fn,index:pn,...fe}=st,j=R();return n.createElement("div",{role:"tabpanel",hidden:fn!==pn,id:`vertical-tabpanel-${pn}`,"aria-labelledby":`vertical-tab-${pn}`,className:j.tabContents,...fe},fn===pn&&n.createElement($.Z,{pl:3,pr:3},Pt))}function te(st){return{id:`vertical-tab-${st}`,"aria-controls":`vertical-tabpanel-${st}`}}function _e(st){var Pt,fn,pn;const{open:fe,entity:j,onClose:X}=st,[ue,he]=n.useState(0),De=R();(0,n.useEffect)(()=>{he(0)},[fe]);const tt=(0,m.h_)(ge).getApiDefinitionWidget(j);let ut=0,Lt=0;return n.createElement(L.Z,{fullWidth:!0,maxWidth:"xl",open:fe,onClose:X,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:De.fullHeightDialog}},n.createElement(k.Z,{id:"api-definition-dialog-title",disableTypography:!0},n.createElement(v.Z,{className:De.type},"API - ",(Pt=tt==null?void 0:tt.title)!=null?Pt:"Raw"),n.createElement(v.Z,{className:De.title,variant:"h1"},(fn=j.metadata.title)!=null?fn:j.metadata.name)),n.createElement(G.Z,{dividers:!0,className:De.root},n.createElement(E.Z,{orientation:"vertical",variant:"scrollable",value:ue,onChange:(de,ne)=>he(ne),"aria-label":"API definition options",className:De.tabs},tt?n.createElement(A.Z,{label:tt.title,...te(ut++)}):null,n.createElement(A.Z,{label:"Raw",...te(ut++)})),tt?n.createElement(N,{value:ue,index:Lt++},tt.component(j.spec.definition)):null,n.createElement(N,{value:ue,index:Lt++},n.createElement(Xe,{definition:j.spec.definition,language:(pn=tt==null?void 0:tt.rawLanguage)!=null?pn:j.spec.type}))),n.createElement(x.Z,null,n.createElement(f.Z,{onClick:X,color:"primary"},"Close")))}function Ge(){return{title:"Type",field:"spec.type",render:st=>n.createElement(ce,{apiEntity:st})}}const wt=({apiEntity:st})=>{const[Pt,fn]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement(b.Z,{onClick:()=>fn(!Pt)},n.createElement(C.Z,null)),n.createElement(_e,{entity:st,open:Pt,onClose:()=>fn(!1)}))};function pt(){return{title:"API Definition",render:st=>n.createElement(wt,{apiEntity:st})}}const Tt=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createSystemColumn(),c.u3.columns.createOwnerColumn(),Ge(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn(),pt()],q=st=>{const{variant:Pt="gridItem",columns:fn=Tt}=st,{entity:pn}=(0,c.X2)(),{entities:fe,loading:j,error:X}=(0,c.eK)(pn,{type:T.Dg});return j?n.createElement(u.rJ,{variant:Pt,title:"Consumed APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:Pt,title:"Consumed APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"Consumed APIs",variant:Pt,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(v.Z,{variant:"body1"},"This ",pn.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),n.createElement(v.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:fn,entities:fe})},oe=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createOwnerColumn(),Ge(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn()],Ae=st=>{const{variant:Pt="gridItem",columns:fn=oe}=st,{entity:pn}=(0,c.X2)(),{entities:fe,loading:j,error:X}=(0,c.eK)(pn,{type:T.aS,kind:"API"});return j?n.createElement(u.rJ,{variant:Pt,title:"APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:Pt,title:"APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"APIs",variant:Pt,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(v.Z,{variant:"body1"},"This ",pn.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),n.createElement(v.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:fn,entities:fe})},Je=st=>{const{variant:Pt="gridItem",columns:fn=Tt}=st,{entity:pn}=(0,c.X2)(),{entities:fe,loading:j,error:X}=(0,c.eK)(pn,{type:T.M_});return j?n.createElement(u.rJ,{variant:Pt,title:"Provided APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:Pt,title:"Provided APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"Provided APIs",variant:Pt,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(v.Z,{variant:"body1"},"This ",pn.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),n.createElement(v.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:fn,entities:fe})},St=st=>{const{variant:Pt="gridItem"}=st,{entity:fn}=(0,c.X2)(),{entities:pn,loading:fe,error:j}=(0,c.eK)(fn,{type:T.X9});return fe?n.createElement(u.rJ,{variant:Pt,title:"Consumers"},n.createElement(u.Ex,null)):j||!pn?n.createElement(u.rJ,{variant:Pt,title:"Consumers"},n.createElement(u.GB,{severity:"error",title:"Could not load components",message:n.createElement(u.Oi,{text:`${j}`,language:"text"})})):n.createElement(c.u3,{title:"Consumers",variant:Pt,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(v.Z,{variant:"body1"},"No component consumes this API."),n.createElement(v.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:pn})},mt=st=>{const{variant:Pt="gridItem"}=st,{entity:fn}=(0,c.X2)(),{entities:pn,loading:fe,error:j}=(0,c.eK)(fn,{type:T.Zj});return fe?n.createElement(u.rJ,{variant:Pt,title:"Providers"},n.createElement(u.Ex,null)):j||!pn?n.createElement(u.rJ,{variant:Pt,title:"Providers"},n.createElement(u.GB,{severity:"error",title:"Could not load components",message:n.createElement(u.Oi,{text:`${j}`,language:"text"})})):n.createElement(c.u3,{title:"Providers",variant:Pt,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(v.Z,{variant:"body1"},"No component provides this API."),n.createElement(v.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:pn})},rn=(0,m.rx)({id:"api-docs",routes:{root:_},apis:[(0,m.ni)({api:ge,deps:{},factory:()=>{const st=Le();return{getApiDefinitionWidget:Pt=>st.find(fn=>fn.type===Pt.spec.type)}}})],externalRoutes:{registerApi:p}}),Kt=rn.provide((0,m.P4)({name:"ApiExplorerPage",component:()=>e.e(4814).then(e.bind(e,24814)).then(st=>st.ApiExplorerIndexPage),mountPoint:_})),$e=rn.provide((0,m.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(9049).then(e.bind(e,19049)).then(st=>st.ApiDefinitionCard)}})),_t=rn.provide((0,m.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(st=>st.ConsumedApisCard)}})),ct=rn.provide((0,m.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(7187).then(e.bind(e,17187)).then(st=>st.ConsumingComponentsCard)}})),hn=rn.provide((0,m.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(st=>st.ProvidedApisCard)}})),un=rn.provide((0,m.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(7187).then(e.bind(e,17187)).then(st=>st.ProvidingComponentsCard)}})),vn=rn.provide((0,m.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(st=>st.HasApisCard)}}))},75650:function(Rt,d,e){e.d(d,{j8:function(){return a},x7:function(){return m}});var n=e(5083);const l="catalog-entity",u=(0,n.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),m=(0,n.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),a=(0,n.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),c=(0,n.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),P=(0,n.J$)({name:"catalog.location.read",attributes:{action:"read"}}),b=(0,n.J$)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,n.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),v=[u,m,a,c,P,b,t]},98487:function(Rt,d,e){e.d(d,{Az:function(){return J},Ho:function(){return ot},Nm:function(){return p},_U:function(){return $t},t0:function(){return sn},vw:function(){return _}});var n=e(34520),l=e(80236),u=e(30705),m=e(79692),a=e(60364),c=e(4614),P=e(72779),b=e.n(P),t=e(2784),v=e(10368),h=e(73495),$=e(39412),L=e(48760),k=e(14162),G=e.n(k),E=e(69294);const A=(0,v.Z)(Se=>({text:{fill:Se.palette.textContrast},secondary:{fill:Se.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function x({edge:{relations:Se}}){const Ne=A();return t.createElement("text",{className:Ne.text,textAnchor:"middle"},Se.map((O,Le)=>t.createElement("tspan",{key:O,className:b()(Le>0&&Ne.secondary)},Le>0&&t.createElement("tspan",null," / "),O)))}function f({kind:Se,...Ne}){var O;const ce=(O=(0,u.qD)().getSystemIcon(`kind:${Se.toLocaleLowerCase("en-US")}`))!=null?O:$.Z;return t.createElement(ce,{...Ne})}const T=(0,m.Z)(Se=>({node:{fill:Se.palette.grey[300],stroke:Se.palette.grey[300],"&.primary":{fill:Se.palette.primary.light,stroke:Se.palette.primary.light},"&.secondary":{fill:Se.palette.secondary.light,stroke:Se.palette.secondary.light}},text:{fill:Se.palette.getContrastText(Se.palette.grey[300]),"&.primary":{fill:Se.palette.primary.contrastText},"&.secondary":{fill:Se.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function C({node:{id:Se,kind:Ne,namespace:O,name:Le,color:ce="default",focused:R,title:N,onClick:te}}){const _e=T(),[Ge,wt]=(0,t.useState)(0),[pt,Tt]=(0,t.useState)(0),q=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(q.current){let{height:Kt,width:$e}=q.current.getBBox();Kt=Math.round(Kt),$e=Math.round($e),(Kt!==pt||$e!==Ge)&&(wt($e),Tt(Kt))}},[Ge,pt]);const oe=10,Ae=pt,Je=Ne?Ae+oe:0,St=Je+Ge+oe*2,mt=pt+oe*2,rn=N!=null?N:Ne&&Le&&O?(0,h.$3)({kind:Ne,name:Le,namespace:O}):Se;return t.createElement("g",{onClick:te,className:b()(te&&_e.clickable)},t.createElement("rect",{className:b()(_e.node,ce==="primary"&&"primary",ce==="secondary"&&"secondary"),width:St,height:mt,rx:10}),Ne&&t.createElement(f,{kind:Ne,y:oe,x:oe,width:Ae,height:Ae,className:b()(_e.text,R&&"focused",ce==="primary"&&"primary",ce==="secondary"&&"secondary")}),t.createElement("text",{ref:q,className:b()(_e.text,R&&"focused",ce==="primary"&&"primary",ce==="secondary"&&"secondary"),y:mt/2,x:Je+(Ge+oe*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},rn))}const _=[[n.$1,n.S4],[n.Dg,n.X9],[n.Zj,n.M_],[n.aS,n.cz],[n._b,n.wP],[n.KS,n.hr],[n.nP,n.w$]];var p=(Se=>(Se.TOP_BOTTOM="TB",Se.BOTTOM_TOP="BT",Se.LEFT_RIGHT="LR",Se.RIGHT_LEFT="RL",Se))(p||{});const W=G()(10);function K(){const Se=(0,u.h_)(h.Ah),Ne=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[O,Le]=(0,t.useState)({}),ce=(0,t.useCallback)(()=>{const{cachedEntities:wt,requestedEntities:pt}=Ne.current,Tt={};pt.forEach(q=>{const oe=wt.get(q);oe&&(Tt[q]=oe)}),Le(Tt)},[Ne,Le]),[R,N]=(0,E.default)(async()=>{const{requestedEntities:wt,outstandingEntities:pt,cachedEntities:Tt}=Ne.current;await Promise.all(Array.from(wt).map(q=>W(async()=>{if(Tt.has(q))return;if(pt.has(q)){await pt.get(q);return}const oe=Se.getEntityByRef(q);pt.set(q,oe);try{const Ae=await oe;Ae&&(Tt.set(q,Ae),ce())}finally{pt.delete(q)}})))},[Ne,ce]),{loading:te,error:_e}=R,Ge=(0,t.useCallback)(wt=>{const pt=new Set(wt),{requestedEntities:Tt}=Ne.current;(pt.size!==Tt.size||Array.from(pt).some(q=>!Tt.has(q)))&&(Ne.current.requestedEntities=pt,N(),ce())},[Ne,N,ce]);return{entities:O,loading:te,error:_e,requestEntities:Ge}}function Ie({rootEntityRefs:Se,filter:{maxDepth:Ne=Number.POSITIVE_INFINITY,relations:O,kinds:Le}={}}){const{entities:ce,loading:R,error:N,requestEntities:te}=K();return(0,t.useEffect)(()=>{const _e=new Set([...Se]),Ge=new Set;let wt=[...Se],pt=0;for(;wt.length>0&&(!isFinite(Ne)||pt<Ne);){const Tt=wt;for(wt=[];Tt.length>0;){const q=Tt.shift(),oe=ce[q];if(Ge.add(q),oe&&oe.relations)for(const Ae of oe.relations)(!O||O.includes(Ae.type))&&(!Le||Le.some(Je=>Ae.targetRef.startsWith(`${Je.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(Ae.targetRef)||(wt.push(Ae.targetRef),_e.add(Ae.targetRef)))}++pt}te([..._e])},[ce,Se,Ne,O,Le,te]),{entities:ce,loading:R,error:N}}function ge({rootEntityRefs:Se,maxDepth:Ne=Number.POSITIVE_INFINITY,unidirectional:O=!0,mergeRelations:Le=!0,kinds:ce,relations:R,onNodeClick:N,relationPairs:te=_}){const[_e,Ge]=(0,t.useState)({}),{entities:wt,loading:pt,error:Tt}=Ie({rootEntityRefs:Se,filter:{maxDepth:Ne,kinds:ce,relations:R}});return(0,L.Z)(()=>{var q;if(!wt||Object.keys(wt).length===0){Ge({});return}const oe=Object.entries(wt).map(([mt,rn])=>{var Kt,$e,_t;const ct=Se.includes(mt),hn={id:mt,title:($e=(Kt=rn.metadata)==null?void 0:Kt.title)!=null?$e:void 0,kind:rn.kind,name:rn.metadata.name,namespace:(_t=rn.metadata.namespace)!=null?_t:n.zG,focused:ct,color:ct?"secondary":"primary"};return N&&(hn.onClick=un=>N(hn,un)),hn}),Ae=[],Je=new Set,St=[...Se];for(;St.length>0;){const mt=St.pop(),rn=wt[mt];Je.add(mt),rn&&((q=rn==null?void 0:rn.relations)==null||q.forEach(Kt=>{var $e;if(wt[Kt.targetRef]&&!(R&&!R.includes(Kt.type))&&!(ce&&!ce.some(_t=>Kt.targetRef.startsWith(`${_t.toLocaleLowerCase("en-US")}:`)))){if(!O||!Je.has(Kt.targetRef))if(Le){const _t=($e=te.find(([hn,un])=>hn===Kt.type||un===Kt.type))!=null?$e:[Kt.type],[ct]=_t;Ae.push({from:ct===Kt.type?mt:Kt.targetRef,to:ct===Kt.type?Kt.targetRef:mt,relations:_t,label:"visible"})}else Ae.push({from:mt,to:Kt.targetRef,relations:[Kt.type],label:"visible"});Je.has(Kt.targetRef)||(St.push(Kt.targetRef),Je.add(Kt.targetRef))}}))}Ge({nodes:oe,edges:Ae})},100,[wt,Se,ce,R,O,Le,N,te]),{loading:pt,error:Tt,..._e}}const Xe=(0,m.Z)(Se=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${Se.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),$t=Se=>{const{rootEntityNames:Ne,maxDepth:O=2,unidirectional:Le=!0,mergeRelations:ce=!0,kinds:R,relations:N,direction:te=p.LEFT_RIGHT,onNodeClick:_e,relationPairs:Ge=_,className:wt,zoom:pt="enabled",renderNode:Tt,renderLabel:q,curve:oe}=Se,Ae=(0,a.Z)(),Je=Xe(),St=(0,t.useMemo)(()=>(Array.isArray(Ne)?Ne:[Ne]).map(ct=>(0,n.eE)(ct)),[Ne]),mt=(0,u.h_)(u.VE),{loading:rn,error:Kt,nodes:$e,edges:_t}=ge({rootEntityRefs:St,maxDepth:O,unidirectional:Le,mergeRelations:ce,kinds:R,relations:N,onNodeClick:_e,relationPairs:Ge});return(0,t.useEffect)(()=>{Kt&&mt.post(Kt)},[mt,Kt]),t.createElement("div",{className:b()(Je.container,wt)},rn&&t.createElement(c.Z,{className:Je.progress}),$e&&_t&&t.createElement(l.mn,{nodes:$e,edges:_t,renderNode:Tt||C,renderLabel:q||x,direction:te,className:Je.graph,paddingX:Ae.spacing(4),paddingY:Ae.spacing(4),labelPosition:l.NX.LabelPosition.RIGHT,labelOffset:Ae.spacing(1),zoom:pt,curve:oe}))},ot=(0,u.NT)({id:"catalog-graph"}),Vt=(0,u.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),kt=(0,u.rx)({id:"catalog-graph",routes:{catalogGraph:ot},externalRoutes:{catalogEntity:Vt}}),J=kt.provide((0,u.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(4463).then(e.bind(e,4463)).then(Se=>Se.CatalogGraphCard)}})),sn=kt.provide((0,u.P4)({name:"CatalogGraphPage",component:()=>e.e(3683).then(e.bind(e,43683)).then(Se=>Se.CatalogGraphPage),mountPoint:ot}))},93316:function(Rt,d,e){e.d(d,{gA:function(){return dt},vr:function(){return ct},wS:function(){return _t}});var n=e(30705),l=e(49462),u=e(73495),m=e(89393),a=e(49431),c=e(82717),P=e.n(c),b=e(80236),t=e(90436),v=e(7089),h=e(77277),$=e(4614),L=e(11776),k=e(38402),G=e(86136),E=e(49378),A=e(9520),x=e(61837),f=e(82113),T=e(60905),C=e(86619),_=e(74828),p=e(94339),W=e(32552),K=e(24579),Ie=e(95544),ge=e(21324),Xe=e(34546),$t=e(5806),ot=e(31377),Vt=e(67471),kt=e(31625),J=e(2784),sn=e(79692),Se=e(4989),Ne=e(84905),O=e(38016),Le=e(39412),ce=e(96795),R=e.n(ce),N=e(63955),te=e(88013),_e=e(10921),Ge=e(76635),wt=e.n(Ge),pt=e(32272),Tt=e(64279),q=e(34520);const oe=(0,n.T0)({id:"plugin.catalog-import.service"}),Ae=(ae,pe)=>{const ve=ae.github.byUrl(pe);if(!ve)return;const{name:Te,owner:nt}=P()(pe);return{repo:Te,owner:nt,githubIntegrationConfig:ve.config}};function Je(ae){const{ref:pe,...ve}=ae;return{inputRef:pe,...ve}}function St(ae){var pe;return(pe=ae.getOptionalString("catalog.import.entityFilename"))!=null?pe:"catalog-info.yaml"}function mt(ae){var pe;return(pe=ae.getOptionalString("catalog.import.pullRequestBranchName"))!=null?pe:"backstage-integration"}class rn{constructor(pe){this.discoveryApi=pe.discoveryApi,this.scmAuthApi=pe.scmAuthApi,this.identityApi=pe.identityApi,this.scmIntegrationsApi=pe.scmIntegrationsApi,this.catalogApi=pe.catalogApi,this.configApi=pe.configApi}async analyzeUrl(pe){var ve;if(new URL(pe).pathname.match(/\.ya?ml$/)||(ve=new URL(pe).searchParams.get("path"))!=null&&ve.match(/.ya?ml$/)){const Bt=await this.catalogApi.addLocation({type:"url",target:pe,dryRun:!0});return{type:"locations",locations:[{exists:Bt.exists,target:Bt.location.target,entities:Bt.entities.map(Ut=>{var Dt;return{kind:Ut.kind,namespace:(Dt=Ut.metadata.namespace)!=null?Dt:"default",name:Ut.metadata.name}})}]}}if(!Ae(this.scmIntegrationsApi,pe)){const Bt=this.scmIntegrationsApi.byUrl(pe),Ut=St(this.configApi);throw Bt?new Error(`The ${Bt.title} integration only supports full URLs to ${Ut} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ut} file instead.`)}const nt=await this.analyzeLocation({repo:pe});if(nt.existingEntityFiles.length>0){const Bt=nt.existingEntityFiles.reduce((Ut,Dt)=>{var Ce;return Ut[Dt.location.target]={target:Dt.location.target,exists:Dt.isRegistered,entities:[...Dt.location.target in Ut?Ut[Dt.location.target].entities:[],{name:Dt.entity.metadata.name,namespace:(Ce=Dt.entity.metadata.namespace)!=null?Ce:"default",kind:Dt.entity.kind}]},Ut},{});return{type:"locations",locations:Object.values(Bt)}}return{type:"repository",integrationType:"github",url:pe,generatedEntities:nt.generateEntities.map(Bt=>Bt.entity)}}async preparePullRequest(){var pe;const ve=(pe=this.configApi.getOptionalString("app.title"))!=null?pe:"Backstage",Te=this.configApi.getString("app.baseUrl");return{title:`Add ${St(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${ve} software catalog](${Te}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(pe){const{repositoryUrl:ve,fileContent:Te,title:nt,body:Bt}=pe,Ut=Ae(this.scmIntegrationsApi,ve);if(Ut)return await this.submitGitHubPrToRepo({...Ut,repositoryUrl:ve,fileContent:Te,title:nt,body:Bt});throw new Error("unimplemented!")}async analyzeLocation(pe){const{token:ve}=await this.identityApi.getCredentials(),Te=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...ve&&{Authorization:`Bearer ${ve}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:pe.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(Bt=>{throw new Error(`Failed to generate entity definitions, ${Bt.message}`)});if(!Te.ok)throw new Error(`Failed to generate entity definitions. Received http response ${Te.status}: ${Te.statusText}`);return await Te.json()}async submitGitHubPrToRepo(pe){const{owner:ve,repo:Te,title:nt,body:Bt,fileContent:Ut,repositoryUrl:Dt,githubIntegrationConfig:Ce}=pe,{token:we}=await this.scmAuthApi.getCredentials({url:Dt,additionalScope:{repoWrite:!0}}),Ke=new m.v({auth:we,baseUrl:Ce.apiBaseUrl}),Ye=mt(this.configApi),We=St(this.configApi),Ct=await Ke.repos.get({owner:ve,repo:Te}).catch(Gt=>{throw new Error(Kt("Couldn't fetch repo data",Gt))}),It=await Ke.git.getRef({owner:ve,repo:Te,ref:`heads/${Ct.data.default_branch}`}).catch(Gt=>{throw new Error(Kt("Couldn't fetch default branch data",Gt))});return await Ke.git.createRef({owner:ve,repo:Te,ref:`refs/heads/${Ye}`,sha:It.data.object.sha}).catch(Gt=>{throw new Error(Kt(`Couldn't create a new branch with name '${Ye}'`,Gt))}),await Ke.repos.createOrUpdateFileContents({owner:ve,repo:Te,path:We,message:nt,content:a.DS.encode(Ut),branch:Ye}).catch(Gt=>{throw new Error(Kt(`Couldn't create a commit with ${We} file added`,Gt))}),{link:(await Ke.pulls.create({owner:ve,repo:Te,title:nt,head:Ye,body:Bt,base:Ct.data.default_branch}).catch(Gt=>{throw new Error(Kt(`Couldn't create a pull request for ${Ye} branch`,Gt))})).data.html_url,location:`https://${Ce.host}/${ve}/${Te}/blob/${Ct.data.default_branch}/${We}`}}}function Kt(ae,pe){return`${ae}, received http response status code ${pe.status}: ${pe.message}`}const $e=(0,n.NT)({id:"catalog-import"}),_t=(0,n.rx)({id:"catalog-import",apis:[(0,n.ni)({api:oe,deps:{discoveryApi:n.NW,scmAuthApi:l.Om,identityApi:n.$4,scmIntegrationsApi:l.q3,catalogApi:u.Ah,configApi:n.Ds},factory:({discoveryApi:ae,scmAuthApi:pe,identityApi:ve,scmIntegrationsApi:Te,catalogApi:nt,configApi:Bt})=>new rn({discoveryApi:ae,scmAuthApi:pe,scmIntegrationsApi:Te,identityApi:ve,catalogApi:nt,configApi:Bt})})],routes:{importPage:$e}}),ct=_t.provide((0,n.P4)({name:"CatalogImportPage",component:()=>e.e(6207).then(e.bind(e,76207)).then(ae=>ae.ImportPage),mountPoint:$e}));function hn(){const ae=(0,n.h_)(n.Ds);return St(ae)}const un=ae=>{const{exampleLocationUrl:pe="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:ve="https://github.com/backstage/backstage"}=ae,Te=(0,n.h_)(n.Ds),nt=Te.getOptional("app.title")||"Backstage",Bt=(0,n.h_)(oe),Ut=Te.has("integrations.github"),Dt=hn();return J.createElement(b.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},J.createElement(t.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",nt,"."),J.createElement(t.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),J.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",J.createElement("code",null,pe)),J.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",nt," catalog."),Ut&&J.createElement(J.Fragment,null,J.createElement(t.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",J.createElement(v.Z,{label:"GitHub only",variant:"outlined",size:"small"})),J.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",J.createElement("code",null,ve)),J.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",J.createElement("code",null,Dt)," files in the repository, previews the entities, and adds them to the ",nt," ","catalog."),Bt.preparePullRequest&&J.createElement(t.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",J.createElement("code",null,Dt)," and prepares the ",nt," catalog to load all entities as soon as the Pull Request is merged.")))};function vn(ae){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:ae,previousStates:[]}}function st(ae,pe){switch(pe.type){case"onAnalysis":{if(ae.activeState!=="analyze")return ae;const{activeState:ve,previousStates:Te}=ae,[nt,Bt,Ut,Dt]=pe.args;return{...ae,analysisUrl:Bt,activeFlow:nt,analyzeResult:Ut,prepareResult:Dt==null?void 0:Dt.prepareResult,activeState:(Dt==null?void 0:Dt.prepareResult)===void 0?"prepare":"review",previousStates:Te.concat(ve)}}case"onPrepare":{if(ae.activeState!=="prepare")return ae;const{activeState:ve,previousStates:Te}=ae,[nt,Bt]=pe.args;return{...ae,prepareResult:nt,activeState:"review",previousStates:Bt!=null&&Bt.notRepeatable?[]:Te.concat(ve)}}case"onReview":{if(ae.activeState!=="review")return ae;const{activeState:ve,previousStates:Te}=ae,[nt]=pe.args;return{...ae,reviewResult:nt,activeState:"finish",previousStates:Te.concat(ve)}}case"onGoBack":{const{activeState:ve,previousStates:Te}=ae;return{...ae,activeState:Te.length>0?Te[Te.length-1]:ve,previousStates:Te.slice(0,Te.length-1)}}case"onReset":return{...vn(pe.initialUrl),prepareResult:ae.prepareResult};default:throw new Error}}const Pt=ae=>{const[pe,ve]=(0,J.useReducer)(st,ae==null?void 0:ae.initialUrl,vn),{activeFlow:Te,activeState:nt,analysisUrl:Bt,previousStates:Ut}=pe;return{activeFlow:Te,activeState:nt,activeStepNumber:["analyze","prepare","review","finish"].indexOf(nt),analysisUrl:Bt,analyzeResult:pe.analyzeResult,prepareResult:pe.prepareResult,reviewResult:pe.reviewResult,onAnalysis:(Dt,Ce,we,Ke)=>ve({type:"onAnalysis",args:[Dt,Ce,we,Ke]}),onPrepare:(Dt,Ce)=>ve({type:"onPrepare",args:[Dt,Ce]}),onReview:Dt=>ve({type:"onReview",args:[Dt]}),onGoBack:Ut.length>0?()=>ve({type:"onGoBack"}):void 0,onReset:()=>ve({type:"onReset",initialUrl:ae==null?void 0:ae.initialUrl})}},fn=(0,sn.Z)(ae=>({wrapper:{marginTop:ae.spacing(1),marginRight:ae.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:ae.spacing(1),marginRight:ae.spacing(1)}})),pn=ae=>{const{loading:pe,...ve}=ae,Te=fn();return J.createElement("div",{className:Te.wrapper},J.createElement(h.Z,{color:"primary",variant:"contained",...ve,disabled:ae.disabled||ae.loading}),ae.loading&&J.createElement($.Z,{size:"1.5rem",className:Te.buttonProgress}),ae.loading)},fe=ae=>{const pe=fn();return J.createElement(h.Z,{variant:"outlined",className:pe.button,...ae},ae.children||"Back")},j=(0,sn.Z)(ae=>({nested:{paddingLeft:ae.spacing(4)}}));function X(ae){return ae.sort((pe,ve)=>(0,u.$3)(pe).localeCompare((0,u.$3)(ve)))}const ue=ae=>{const{locations:pe,collapsed:ve=!1,locationListItemIcon:Te,onItemClick:nt,firstListItem:Bt,withLinks:Ut=!1}=ae,Dt=(0,n.qD)(),Ce=j(),[we,Ke]=(0,J.useState)([]),Ye=We=>{Ke(Ct=>Ct.includes(We)?Ct.filter(It=>It!==We):Ct.concat(We))};return J.createElement(L.Z,null,Bt,pe.map(We=>J.createElement(J.Fragment,{key:We.target},J.createElement(k.Z,{dense:!0,button:Boolean(nt),onClick:()=>nt==null?void 0:nt(We.target)},J.createElement(G.Z,null,Te(We.target)),J.createElement(E.Z,{primary:We.target,secondary:`Entities: ${We.entities.length}`}),ve&&J.createElement(A.Z,null,J.createElement(x.Z,{edge:"end",onClick:()=>Ye(We.target)},we.includes(We.target)?J.createElement(Ne.Z,null):J.createElement(O.Z,null)))),J.createElement(f.Z,{in:!ve||we.includes(We.target),timeout:"auto",unmountOnExit:!0},J.createElement(L.Z,{component:"div",disablePadding:!0,dense:!0},X(We.entities).map(Ct=>{var It;const jt=(It=Dt.getSystemIcon(`kind:${Ct.kind.toLocaleLowerCase("en-US")}`))!=null?It:Le.Z;return J.createElement(k.Z,{key:(0,u.$3)(Ct),className:Ce.nested,...Ut?{component:u.dx,entityRef:Ct,button:Ut}:{}},J.createElement(G.Z,null,J.createElement(jt,null)),J.createElement(E.Z,{primary:(0,u.$3)(Ct)}))}))))))},he=({prepareResult:ae,onReset:pe})=>{const ve=J.createElement(T.Z,{container:!0,spacing:0},J.createElement(fe,{onClick:pe},"Register another"));if(ae.type==="repository")return J.createElement(J.Fragment,null,J.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",J.createElement(b.rU,{to:ae.pullRequest.url,target:"_blank",rel:"noreferrer"},ae.pullRequest.url)),J.createElement(t.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),ve);const[Te,nt]=R()(ae.locations,Bt=>Bt.exists);return J.createElement(J.Fragment,null,nt.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"The following entities have been added to the catalog:"),J.createElement(ue,{locations:nt,locationListItemIcon:()=>J.createElement(Se.Z,null),withLinks:!0})),Te.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"A refresh was triggered for the following locations:"),J.createElement(ue,{locations:Te,locationListItemIcon:()=>J.createElement(Se.Z,null),withLinks:!0})),ve)},De=ae=>{const{onAnalysis:pe,analysisUrl:ve="",disablePullRequest:Te=!1,exampleLocationUrl:nt="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=ae,Bt=(0,n.h_)(n.VE),Ut=(0,n.h_)(oe),{register:Dt,handleSubmit:Ce,formState:{errors:we},watch:Ke}=(0,N.cI)({mode:"onTouched",defaultValues:{url:ve}}),[Ye,We]=(0,J.useState)(!1),[Ct,It]=(0,J.useState)(void 0),jt=(0,J.useCallback)(async({url:Gt})=>{var _n,wn,xn;We(!0);try{const Tn=await Ut.analyzeUrl(Gt);switch(Tn.type){case"repository":!Te&&Tn.generatedEntities.length>0?pe("no-location",Gt,Tn):(It("Couldn't generate entities for your repository"),We(!1));break;case"locations":{Tn.locations.length===1?pe("single-location",Gt,Tn,{prepareResult:Tn}):Tn.locations.length>1?pe("multiple-locations",Gt,Tn):(It("There are no entities at this location"),We(!1));break}default:{const kn=`Received unknown analysis result of type ${Tn.type}. Please contact the support team.`;It(kn),We(!1),Bt.post(new Error(kn));break}}}catch(Tn){It((xn=(wn=(_n=Tn==null?void 0:Tn.data)==null?void 0:_n.error)==null?void 0:wn.message)!=null?xn:Tn.message),We(!1)}},[Ut,Te,Bt,pe]);return J.createElement("form",{onSubmit:Ce(jt)},J.createElement(C.Z,{...Je(Dt("url",{required:!0,validate:{httpsValidator:Gt=>typeof Gt=="string"&&Gt.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:nt,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(we.url),required:!0}),we.url&&J.createElement(_.Z,{error:!0},we.url.message),Ct&&J.createElement(_.Z,{error:!0},Ct),J.createElement(T.Z,{container:!0,spacing:0},J.createElement(pn,{disabled:Boolean(we.url)||!Ke("url"),loading:Ye,type:"submit"},"Analyze")))},at=ae=>{const{name:pe,options:ve,required:Te,errors:nt,rules:Bt,loading:Ut=!1,loadingText:Dt,helperText:Ce,errorHelperText:we,textFieldProps:Ke={}}=ae;return J.createElement(N.Qr,{name:pe,rules:Bt,render:({field:{onChange:Ye}})=>J.createElement(te.ZP,{loading:Ut,loadingText:Dt,options:ve||[],autoSelect:!0,freeSolo:!0,onChange:(We,Ct)=>Ye(Ct),renderInput:We=>J.createElement(C.Z,{...We,helperText:(nt==null?void 0:nt[pe])&&we||Ce,error:Boolean(nt==null?void 0:nt[pe]),margin:"normal",variant:"outlined",required:Te,InputProps:{...We.InputProps,endAdornment:J.createElement(J.Fragment,null,Ut?J.createElement($.Z,{color:"inherit",size:"1em"}):null,We.InputProps.endAdornment)},...Ke})})})},tt=ae=>{const{defaultValues:pe,onSubmit:ve,render:Te}=ae,nt=(0,N.cI)({mode:"onTouched",defaultValues:pe}),{handleSubmit:Bt,watch:Ut,control:Dt,register:Ce,formState:we,setValue:Ke}=nt;return J.createElement(N.RV,{...nt},J.createElement("form",{onSubmit:Bt(ve)},Te({values:Ut(),formState:we,register:Ce,control:Dt,setValue:Ke})))},ut=ae=>{const{repositoryUrl:pe,entities:ve,classes:Te}=ae,nt=hn();return J.createElement(p.Z,{variant:"outlined",className:Te==null?void 0:Te.card},J.createElement(W.Z,{title:J.createElement("code",null,`${(0,Ge.trimEnd)(pe,"/")}/${nt}`)}),J.createElement(K.Z,{className:Te==null?void 0:Te.cardContent},J.createElement(b.Oi,{text:ve.map(Bt=>_e.ZP.stringify(Bt)).join(`---
`).trim(),language:"yaml"})))},Lt=ae=>{const{title:pe,description:ve,classes:Te}=ae;return J.createElement(p.Z,{variant:"outlined",className:Te==null?void 0:Te.card},J.createElement(W.Z,{title:pe,subheader:"Create a new Pull Request"}),J.createElement(K.Z,{className:Te==null?void 0:Te.cardContent},J.createElement(b.SA,{content:ve})))},de=(0,sn.Z)(ae=>({previewCard:{marginTop:ae.spacing(1)},previewCardContent:{paddingTop:0}}));function ne(ae,pe,ve){return ae.map(Te=>({...Te,apiVersion:Te.apiVersion,kind:Te.kind,metadata:{...Te.metadata,name:pe},spec:{...Te.spec,...ve?{owner:ve}:{}}}))}const S=ae=>{var pe,ve,Te,nt,Bt,Ut;const{analyzeResult:Dt,onPrepare:Ce,onGoBack:we,renderFormFields:Ke}=ae,Ye=de(),We=(0,n.h_)(u.Ah),Ct=(0,n.h_)(oe),It=(0,n.h_)(n.VE),[jt,Gt]=(0,J.useState)(!1),[_n,wn]=(0,J.useState)(),xn=hn(),{loading:Tn,value:kn,error:Mn}=(0,Tt.default)(()=>Ct.preparePullRequest(),[Ct.preparePullRequest]);(0,J.useEffect)(()=>{Mn&&It.post(Mn)},[Mn,It]);const{loading:yn,value:zn}=(0,Tt.default)(async()=>(await We.getEntities({filter:{kind:"group"}})).items.map(Ze=>(0,u.$3)(Ze,{defaultKind:"group"})).sort()),lt=(0,J.useCallback)(async ye=>{Gt(!0);try{const Ze=await Ct.submitPullRequest({repositoryUrl:Dt.url,title:ye.title,body:ye.body,fileContent:ne(Dt.generatedEntities,ye.componentName,ye.owner).map(Ue=>_e.ZP.stringify(Ue)).join(`---
`)});Ce({type:"repository",url:Dt.url,integrationType:Dt.integrationType,pullRequest:{url:Ze.link},locations:[{target:Ze.location,entities:ne(Dt.generatedEntities,ye.componentName,ye.owner).map(Ue=>({kind:Ue.kind,namespace:Ue.metadata.namespace,name:Ue.metadata.name}))}]},{notRepeatable:!0})}catch(Ze){(0,pt.BD)(Ze),wn(Ze.message),Gt(!1)}},[Dt.generatedEntities,Dt.integrationType,Dt.url,Ct,Ce]);return J.createElement(J.Fragment,null,J.createElement(t.Z,null,"You entered a link to a ",Dt.integrationType," repository but a"," ",J.createElement("code",null,xn)," could not be found. Use this form to open a Pull Request that creates one."),!Tn&&J.createElement(tt,{onSubmit:lt,defaultValues:{title:(pe=kn==null?void 0:kn.title)!=null?pe:"",body:(ve=kn==null?void 0:kn.body)!=null?ve:"",owner:((nt=(Te=Dt.generatedEntities[0])==null?void 0:Te.spec)==null?void 0:nt.owner)||"",componentName:((Ut=(Bt=Dt.generatedEntities[0])==null?void 0:Bt.metadata)==null?void 0:Ut.name)||"",useCodeowners:!1},render:({values:ye,formState:Ze,register:Ue,setValue:vt})=>J.createElement(J.Fragment,null,Ke({values:ye,formState:Ze,register:Ue,setValue:vt,groups:zn!=null?zn:[],groupsLoading:yn}),J.createElement(Ie.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Preview Pull Request")),J.createElement(Lt,{title:ye.title,description:ye.body,classes:{card:Ye.previewCard,cardContent:Ye.previewCardContent}}),J.createElement(Ie.Z,{marginTop:2,marginBottom:1},J.createElement(t.Z,{variant:"h6"},"Preview Entities")),J.createElement(ut,{entities:ne(Dt.generatedEntities,ye.componentName,ye.owner),repositoryUrl:Dt.url,classes:{card:Ye.previewCard,cardContent:Ye.previewCardContent}}),_n&&J.createElement(_.Z,{error:!0},_n),J.createElement(T.Z,{container:!0,spacing:0},we&&J.createElement(fe,{onClick:we,disabled:jt}),J.createElement(pn,{type:"submit",disabled:Boolean(Ze.errors.title||Ze.errors.body||Ze.errors.owner),loading:jt},"Create PR")))}))},z=({analyzeResult:ae,prepareResult:pe,onPrepare:ve,onGoBack:Te})=>{const[nt,Bt]=(0,J.useState)((pe==null?void 0:pe.locations.map(Ye=>Ye.target))||[]),[Ut,Dt]=R()(ae==null?void 0:ae.locations,Ye=>Ye.exists),Ce=(0,J.useCallback)(async()=>{ve({type:"locations",locations:Dt.filter(Ye=>nt.includes(Ye.target))})},[Dt,ve,nt]),we=Ye=>{Bt(We=>We.includes(Ye)?We.filter(Ct=>Ct!==Ye):We.concat(Ye))},Ke=()=>{Bt(Ye=>Ye.length<Dt.length?Dt.map(We=>We.target):[])};return J.createElement(J.Fragment,null,Dt.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"Select one or more locations that are present in your git repository:"),J.createElement(ue,{firstListItem:J.createElement(k.Z,{dense:!0,button:!0,onClick:Ke},J.createElement(G.Z,null,J.createElement(ge.Z,{edge:"start",checked:nt.length===Dt.length,indeterminate:nt.length>0&&nt.length<Dt.length,tabIndex:-1,disableRipple:!0})),J.createElement(E.Z,{primary:"Select All"})),onItemClick:we,locations:Dt,locationListItemIcon:Ye=>J.createElement(ge.Z,{edge:"start",checked:nt.includes(Ye),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ut.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"These locations already exist in the catalog:"),J.createElement(ue,{locations:Ut,locationListItemIcon:()=>J.createElement(Se.Z,null),withLinks:!0,collapsed:!0})),J.createElement(T.Z,{container:!0,spacing:0},Te&&J.createElement(fe,{onClick:Te}),J.createElement(pn,{disabled:nt.length===0,onClick:Ce},"Review")))},Q=({prepareResult:ae,onReview:pe,onGoBack:ve})=>{const Te=(0,n.h_)(u.Ah),Bt=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage",[Ut,Dt]=(0,J.useState)(!1),[Ce,we]=(0,J.useState)(),Ke=!!(ae.type==="locations"&&ae.locations.some(We=>We.exists)),Ye=(0,J.useCallback)(async()=>{Dt(!0);try{let We=new Array;ae.type==="locations"&&(We=await Promise.all(ae.locations.filter(It=>It.exists).map(async It=>{var jt;const Gt=(0,q.eE)((jt=It.entities[0])!=null?jt:It);return await Te.refreshEntity(Gt),{target:It.target}})));const Ct=await Promise.all(ae.locations.filter(It=>!It.exists).map(async It=>{const jt=await Te.addLocation({type:"url",target:It.target});return{target:jt.location.target,entities:jt.entities}}));pe({...ae,refreshed:We,locations:Ct})}catch(We){(0,pt.BD)(We),ae.type==="repository"&&We.message.startsWith("Location was added but has no entities specified yet")?pe({...ae,locations:ae.locations.map(Ct=>({target:Ct.target,entities:[]}))}):(we(We.message),Dt(!1))}},[ae,pe,Te]);return J.createElement(J.Fragment,null,ae.type==="repository"&&J.createElement(J.Fragment,null,J.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",J.createElement(b.rU,{to:ae.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},ae.pullRequest.url)),J.createElement(t.Z,{paragraph:!0},"You can already import the location and ",Bt," will fetch the entities as soon as the Pull Request is merged.")),J.createElement(t.Z,null,Ke?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),J.createElement(ue,{locations:ae.locations,locationListItemIcon:()=>J.createElement(Se.Z,null)}),Ce&&J.createElement(_.Z,{error:!0},Ce),J.createElement(T.Z,{container:!0,spacing:0},ve&&J.createElement(fe,{onClick:ve,disabled:Ut}),J.createElement(pn,{disabled:Ut,loading:Ut,onClick:()=>Ye()},Ke?"Refresh":"Import")))};function me(ae,pe){switch(ae){case"single-location":return{...pe,prepare:()=>({stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:J.createElement(J.Fragment,null)})};case"multiple-locations":return{...pe,prepare:(ve,Te)=>ve.analyzeResult.type!=="locations"?pe.prepare(ve,Te):{stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Discovered Locations: ",ve.analyzeResult.locations.length)},"Select Locations"),content:J.createElement(z,{analyzeResult:ve.analyzeResult,prepareResult:ve.prepareResult,onPrepare:ve.onPrepare,onGoBack:ve.onGoBack})}};case"no-location":return{...pe,prepare:(ve,Te)=>ve.analyzeResult.type!=="repository"?pe.prepare(ve,Te):{stepLabel:J.createElement(Xe.Z,null,"Create Pull Request"),content:J.createElement(S,{analyzeResult:ve.analyzeResult,onPrepare:ve.onPrepare,onGoBack:ve.onGoBack,renderFormFields:({values:nt,setValue:Bt,formState:Ut,groupsLoading:Dt,groups:Ce,register:we})=>J.createElement(J.Fragment,null,J.createElement(Ie.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Pull Request Details")),J.createElement(C.Z,{...Je(we("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.title),required:!0}),J.createElement(C.Z,{...Je(we("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.body),multiline:!0,required:!0}),J.createElement(Ie.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Entity Configuration")),J.createElement(C.Z,{...Je(we("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.componentName),required:!0}),!nt.useCodeowners&&J.createElement(at,{name:"owner",errors:Ut.errors,options:Ce||[],loading:Dt,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),J.createElement($t.Z,{control:J.createElement(ge.Z,{...Je(we("useCodeowners")),onChange:(Ke,Ye)=>{Ye&&Bt("owner","")}}),label:J.createElement(J.Fragment,null,"Use ",J.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),J.createElement(_.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return pe}}const xe={analyze:(ae,{apis:pe})=>({stepLabel:J.createElement(Xe.Z,null,"Select URL"),content:J.createElement(De,{key:"analyze",analysisUrl:ae.analysisUrl,onAnalysis:ae.onAnalysis,disablePullRequest:!pe.catalogImportApi.preparePullRequest})}),prepare:ae=>({stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Optional")},"Import Actions"),content:J.createElement(fe,{onClick:ae.onGoBack})}),review:ae=>({stepLabel:J.createElement(Xe.Z,null,"Review"),content:J.createElement(Q,{prepareResult:ae.prepareResult,onReview:ae.onReview,onGoBack:ae.onGoBack})}),finish:ae=>({stepLabel:J.createElement(Xe.Z,null,"Finish"),content:J.createElement(he,{prepareResult:ae.prepareResult,onReset:ae.onReset})})},Fe=(0,sn.Z)(()=>({stepperRoot:{padding:0}})),He=ae=>{const{initialUrl:pe,generateStepper:ve=me,variant:Te}=ae,nt=(0,n.h_)(oe),Bt=Fe(),Ut=Pt({initialUrl:pe}),Dt=(0,J.useMemo)(()=>ve(Ut.activeFlow,xe),[ve,Ut.activeFlow]),Ce=we=>J.createElement(ot.Z,null,we.stepLabel,J.createElement(Vt.Z,null,we.content));return J.createElement(b.rJ,{variant:Te},J.createElement(kt.Z,{classes:{root:Bt.stepperRoot},activeStep:Ut.activeStepNumber,orientation:"vertical"},Ce(Dt.analyze(Ut,{apis:{catalogImportApi:nt}})),Ce(Dt.prepare(Ut,{apis:{catalogImportApi:nt}})),Ce(Dt.review(Ut,{apis:{catalogImportApi:nt}})),Ce(Dt.finish(Ut,{apis:{catalogImportApi:nt}}))))},dt=()=>{const pe=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage";return J.createElement(b.T3,{themeId:"home"},J.createElement(b.h4,{title:"Register an existing component"}),J.createElement(b.VY,null,J.createElement(b.yW,{title:`Start tracking your component in ${pe}`},J.createElement(b.qt,null,"Start tracking your component in ",pe," by adding it to the software catalog.")),J.createElement(T.Z,{container:!0,spacing:2,direction:"row-reverse"},J.createElement(T.Z,{item:!0,xs:12,md:4,lg:6,xl:8},J.createElement(un,null)),J.createElement(T.Z,{item:!0,xs:12,md:8,lg:6,xl:4},J.createElement(He,null)))))}},52963:function(Rt,d,e){e.d(d,{N:function(){return b}});var n=e(34520),l=e(78373),u=e(56563),m=e(30705),a=e(18473),c=e(2784);function P(t,v){const h=new Set([...getEntityRelations(t,RELATION_MEMBER_OF,{kind:"group"}),...t?[getCompoundEntityRef(t)]:[]].map(stringifyEntityRef)),$=getEntityRelations(v,RELATION_OWNED_BY).map(stringifyEntityRef);for(const L of $)if(h.has(L))return!0;return!1}function b(t){const{entity:v,loading:h,error:$}=(0,l.a)(),{allowed:L,loading:k,error:G}=(0,u.gI)({permission:t,resourceRef:v?(0,n.eE)(v):void 0});return h||k?{loading:!0,allowed:!1}:$?{loading:!1,allowed:!1,error:$}:{loading:!1,allowed:L,error:G}}},78373:function(Rt,d,e){e.d(d,{A:function(){return P},a:function(){return v},g:function(){return a},u:function(){return t}});var n=e(34520),l=e(30705),u=e(18473),m=e(2784);function a(h,$,L){var k;let G=((k=h==null?void 0:h.relations)==null?void 0:k.filter(E=>E.type===$).map(E=>(0,n.of)(E.targetRef)))||[];return L!=null&&L.kind&&(G=G.filter(E=>E.kind.toLocaleLowerCase("en-US")===L.kind.toLocaleLowerCase("en-US"))),G}const c=(0,u.CT)("entity-context"),P=h=>{const{children:$,entity:L,loading:k,error:G,refresh:E}=h,A={entity:L,loading:k,error:G,refresh:E};return m.createElement(c.Provider,{value:(0,u.EI)({1:A})},m.createElement(l.fC,{attributes:{...L?{entityRef:(0,n.eE)(L)}:void 0}},$))},b=h=>React.createElement(P,{entity:h.entity,loading:!Boolean(h.entity),error:void 0,refresh:void 0,children:h.children});function t(){const h=(0,u.Vt)("entity-context");if(!h)throw new Error("Entity context is not available");const $=h.atVersion(1);if(!$)throw new Error("EntityContext v1 not available");if(!$.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:$.entity}}function v(){const h=(0,u.Vt)("entity-context");if(!h)throw new Error("Entity context is not available");const $=h.atVersion(1);if(!$)throw new Error("EntityContext v1 not available");const{entity:L,loading:k,error:G,refresh:E}=$;return{entity:L,loading:k,error:G,refresh:E}}},73495:function(Rt,d,e){e.d(d,{$3:function(){return ft},Ah:function(){return Q},CR:function(){return Tn},CV:function(){return ve},EW:function(){return Cr},LH:function(){return nr},UO:function(){return It},U_:function(){return Dn},Uh:function(){return Gt},X2:function(){return Ge.u},ZW:function(){return yn},_i:function(){return dt},ce:function(){return Ge.a},df:function(){return yt},dq:function(){return er},dx:function(){return jn},eK:function(){return wn},h$:function(){return Ge.A},hF:function(){return Ge.g},hd:function(){return Wn},n3:function(){return n.n3},nN:function(){return ze},nl:function(){return yr},p3:function(){return me},ph:function(){return Vr},pp:function(){return br},rI:function(){return D},sL:function(){return cr},tW:function(){return Ze},u3:function(){return Cn},wi:function(){return tr},wp:function(){return jt},xE:function(){return pr}});var n=e(88285),l=e(30705),u=e(82394),m=e.n(u),a=e(2784),c=e(41156),P=e(60364),b=e(77277),t=e(4190),v=e(95544),h=e(90436),$=e(60905),L=e(79692),k=e(5806),G=e(21324),E=e(86619),A=e(80030),x=e(15223),f=e(42494),T=e(29611),C=e(50581),_=e(61837),p=e(15459),W=e(55999),K=e(49378),Ie=e(54506),ge=e(94339),Xe=e(24579),$t=e(38402),ot=e(86136),Vt=e(11776),kt=e(8629),J=e(79249),sn=e(38724),Se=e(99152),Ne=e(6487),O=e(49429),Le=e(85256),ce=e(12231),R=e(9520),N=e(36444),te=e(80236),_e=e(34520),Ge=e(78373),wt=e(76635),pt=e.n(wt),Tt=e(19126),q=e.n(Tt),oe=e(73557),Ae=e(69294),Je=e(48760),St=e(90736),mt=e(64279),rn=e(18149),Kt=e.n(rn),$e=e(829),_t=e.n($e),ct=e(72164),hn=e(19996),un=e(25505),vn=e(38016),st=e(88013),Pt=e(99688),fn=e(72579),pn=e.n(fn),fe=e(18473),j=e(33375),X=e(21853),ue=e(72779),he=e.n(ue),De=e(11640),at=e(28347),tt=e(39412),ut=e(27685),Lt=e(3440),de=e.n(Lt),ne=e(10921),S=e(32272),z=e(47603);const Q=(0,l.T0)({id:"plugin.catalog.service"}),me=(0,l.T0)({id:"catalog-react.starred-entities"});class xe{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(se=>(se.next(new Set(this.starredEntities)),this.subscribers.add(se),()=>{this.subscribers.delete(se)}))}async toggleStarred(se){this.starredEntities.delete(se)||this.starredEntities.add(se);for(const Re of this.subscribers)Re.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Fe=Y=>{const se=(0,c.Z)(bt=>bt.breakpoints.down("md")),Re=(0,P.Z)(),[be,Qe]=(0,a.useState)(!1);return se?a.createElement(a.Fragment,null,a.createElement(b.Z,{style:{marginTop:Re.spacing(1),marginLeft:Re.spacing(1)},onClick:()=>Qe(!0),startIcon:a.createElement(N.Z,null)},"Filters"),a.createElement(t.ZP,{open:be,onClose:()=>Qe(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},a.createElement(v.Z,{m:2},a.createElement(h.Z,{variant:"h6",component:"h2",style:{marginBottom:Re.spacing(1)}},"Filters"),Y.children))):a.createElement($.Z,{item:!0,lg:2},Y.children)},He=Y=>a.createElement($.Z,{item:!0,xs:12,lg:10},Y.children),dt=Y=>a.createElement($.Z,{container:!0,style:{position:"relative"}},Y.children);dt.Filters=Fe,dt.Content=He;function ae(Y){return Y.reduce((se,Re)=>({...se,...Re.getCatalogFilters?Re.getCatalogFilters():{}}),{})}function pe(Y){return se=>Y.every(Re=>!Re.filterEntity||Re.filterEntity(se))}function ve(Y,se){var Re;const be=(Re=Y.metadata.annotations)==null?void 0:Re[_e.M6];if(be)try{const Qe=(0,_e.Ou)(be),bt=se.byUrl(Qe.target);return{locationTargetUrl:Qe.target,integrationType:bt==null?void 0:bt.type}}catch{return}}class Te{constructor(se){this.value=se}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class nt{constructor(se){this.value=se}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Bt{constructor(se){this.values=se}filterEntity(se){return this.values.every(Re=>{var be;return((be=se.metadata.tags)!=null?be:[]).includes(Re)})}toQueryValue(){return this.values}}class Ut{constructor(se){this.value=se}filterEntity(se){const Re=this.toUpperArray(this.value.split(/\s/)),be=this.toUpperArray([se.metadata.tags]),Qe=this.toUpperArray([se.metadata.name,se.metadata.title]);for(const bt of Re)if(be.every(Ot=>Ot!==bt)&&Qe.every(Ot=>!Ot.includes(bt)))return!1;return!0}toUpperArray(se){return se.flat().filter(Re=>Boolean(Re)).map(Re=>Re.toLocaleUpperCase("en-US"))}}class Dt{constructor(se){this.values=se.reduce((Re,be)=>{try{return Re.push((0,_e.eE)((0,_e.of)(be,{defaultKind:"Group"}))),Re}catch{return Re}},[])}filterEntity(se){return this.values.some(Re=>(0,Ge.g)(se,_e.S4).some(be=>(0,_e.eE)(be)===Re))}toQueryValue(){return this.values}}class Ce{constructor(se){this.values=se}filterEntity(se){return this.values.some(Re=>{var be;return((be=se.spec)==null?void 0:be.lifecycle)===Re})}toQueryValue(){return this.values}}class we{constructor(se){this.values=se}filterEntity(se){return this.values.some(Re=>se.metadata.namespace===Re)}toQueryValue(){return this.values}}class Ke{constructor(se,Re,be){this.value=se,this.isOwnedEntity=Re,this.isStarredEntity=be}filterEntity(se){switch(this.value){case"owned":return this.isOwnedEntity(se);case"starred":return this.isStarredEntity(se);default:return!0}}toQueryValue(){return this.value}}class Ye{constructor(se){this.value=se}filterEntity(se){var Re;const be=(Re=se.metadata.annotations)==null?void 0:Re["backstage.io/orphan"];return be!==void 0&&this.value.toString()===be}}class We{constructor(se){this.value=se}filterEntity(se){var Re,be;const Qe=((be=(Re=se==null?void 0:se.status)==null?void 0:Re.items)==null?void 0:be.length)>0;return Qe!==void 0&&this.value===Qe}}const Ct=(0,a.createContext)(void 0),It=Y=>{const se=(0,St.default)(),Re=(0,l.h_)(Q),[be,Qe]=(0,a.useState)({}),bt=(0,oe.TH)(),Ot=(0,a.useMemo)(()=>{var En;return(En=q().parse(bt.search,{ignoreQueryPrefix:!0}).filters)!=null?En:{}},[bt]),[gt,on]=(0,a.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:qt,error:Xt},Yt]=(0,Ae.default)(async()=>{var En;const Qt=(0,wt.compact)(Object.values(be)),An=pe(Qt),Kn=ae(Qt),gr=ae((0,wt.compact)(Object.values(gt.appliedFilters))),ir=Object.keys(be).reduce((lr,Or)=>{const Dr=be[Or];return Dr!=null&&Dr.toQueryValue&&(lr[Or]=Dr.toQueryValue()),lr},{});if((0,wt.isEqual)(gr,Kn))on({appliedFilters:be,backendEntities:gt.backendEntities,entities:gt.backendEntities.filter(An)});else{const lr=await Re.getEntities({filter:Kn});on({appliedFilters:be,backendEntities:lr.items,entities:lr.items.filter(An)})}if(se()){const lr=q().parse(bt.search,{ignoreQueryPrefix:!0}),Or=q().stringify({...lr,filters:ir},{addQueryPrefix:!0,arrayFormat:"repeat"}),Dr=`${window.location.pathname}${Or}`;(En=window.history)==null||En.replaceState(null,document.title,Dr)}},[Re,Ot,be,gt],{loading:!0});(0,Je.Z)(Yt,10,[be]);const $n=(0,a.useCallback)(En=>{Qe(Qt=>{const An=typeof En=="function"?En(Qt):En;return{...Qt,...An}})},[]),Bn=(0,a.useMemo)(()=>({filters:gt.appliedFilters,entities:gt.entities,backendEntities:gt.backendEntities,updateFilters:$n,queryParameters:Ot,loading:qt,error:Xt}),[gt,$n,Ot,qt,Xt]);return a.createElement(Ct.Provider,{value:Bn},Y.children)};function jt(){const Y=(0,a.useContext)(Ct);if(!Y)throw new Error("useEntityList must be used within EntityListProvider");return Y}function Gt(){var Y;const se=(0,l.h_)(Q),{filters:{kind:Re,type:be},queryParameters:{type:Qe},updateFilters:bt}=jt(),Ot=(0,a.useMemo)(()=>[Qe].flat().filter(Boolean),[Qe]),[gt,on]=(0,a.useState)(Ot.length?Ot:(Y=be==null?void 0:be.getTypes())!=null?Y:[]);(0,a.useEffect)(()=>{Ot.length&&on(Ot)},[Ot]);const[qt,Xt]=(0,a.useState)([]),Yt=(0,a.useMemo)(()=>Re==null?void 0:Re.value,[Re]),{error:$n,loading:Bn,value:En}=(0,mt.default)(async()=>Yt?await se.getEntityFacets({filter:{kind:Yt},facets:["spec.type"]}).then(Kn=>Kn.facets["spec.type"]||[]):[],[Yt,se]),Qt=(0,a.useRef)(En);return(0,a.useEffect)(()=>{const An=Qt.current;if(Qt.current=En,Bn||!Yt||An===En||!En)return;const Kn=[...new Set(_t()(En,ir=>-ir.count).map(ir=>ir.value.toLocaleLowerCase("en-US")))];Xt(Kn);const gr=gt.filter(ir=>Kn.includes(ir));Kt()(gt,gr)||on(gr)},[Bn,Yt,gt,on,En]),(0,a.useEffect)(()=>{bt({type:gt.length?new nt(gt):void 0})},[gt,bt]),{loading:Bn,error:$n,availableTypes:qt,selectedTypes:gt,setSelectedTypes:on}}const _n=20;function wn(Y,se){var Re,be;const Qe=(Re=se==null?void 0:se.type)==null?void 0:Re.toLocaleLowerCase("en-US"),bt=(be=se==null?void 0:se.kind)==null?void 0:be.toLocaleLowerCase("en-US"),Ot=(0,l.h_)(Q),{loading:gt,value:on,error:qt}=(0,mt.default)(async()=>{var Xt;const Yt=(Xt=Y.relations)==null?void 0:Xt.map(Qt=>({type:Qt.type,target:(0,_e.of)(Qt.targetRef)})).filter(Qt=>(!Qe||Qt.type.toLocaleLowerCase("en-US")===Qe)&&(!bt||Qt.target.kind===bt));if(!Yt)return[];const $n=Object.values((0,wt.groupBy)(Yt,({target:Qt})=>`${Qt.kind}:${Qt.namespace}`.toLocaleLowerCase("en-US"))),Bn=[];for(const Qt of $n)Bn.push({kind:Qt[0].target.kind,namespace:Qt[0].target.namespace,nameBatches:(0,wt.chunk)(Qt.map(An=>An.target.name),_n)});return(await Promise.all(Bn.flatMap(Qt=>Qt.nameBatches.map(An=>Ot.getEntities({filter:{kind:Qt.kind,"metadata.namespace":Qt.namespace,"metadata.name":An}}))))).flatMap(Qt=>Qt.items)},[Y,Qe,bt]);return{entities:on,loading:gt,error:qt}}function xn(Y){return typeof Y=="string"?Y:(0,_e.eE)(Y)}function Tn(){const Y=(0,l.h_)(me),se=(0,ct.Z)(Y.starredEntitie$(),new Set),Re=(0,a.useCallback)(Qe=>se.has(xn(Qe)),[se]),be=(0,a.useCallback)(Qe=>Y.toggleStarred(xn(Qe)).then(),[Y]);return{starredEntities:se,toggleStarredEntity:be,isStarredEntity:Re}}function kn(Y){return typeof Y=="string"?Y:(0,_e.eE)(Y)}function Mn(Y){const se=(0,l.h_)(me),[Re,be]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const bt=se.starredEntitie$().subscribe({next(Ot){be(Ot.has(kn(Y)))}});return()=>{bt.unsubscribe()}},[Y,se]),{toggleStarredEntity:(0,a.useCallback)(()=>se.toggleStarred(kn(Y)).then(),[Y,se]),isStarredEntity:Re}}function yn(){const Y=(0,l.h_)(l.$4),{loading:se,value:Re}=(0,mt.default)(async()=>{const{ownershipEntityRefs:Qe}=await Y.getBackstageIdentity();return Qe},[]),be=(0,a.useMemo)(()=>{const Qe=new Set(Re!=null?Re:[]);return bt=>{const Ot=(0,Ge.g)(bt,_e.S4).map(_e.eE);for(const gt of Ot)if(Qe.has(gt))return!0;return!1}},[Re]);return(0,a.useMemo)(()=>({loading:se,isOwnedEntity:be}),[se,be])}function zn(){const Y=(0,l.h_)(Q),{error:se,loading:Re,value:be}=(0,mt.default)(async()=>await Y.getEntityFacets({facets:["kind"]}).then(bt=>{var Ot;return((Ot=bt.facets.kind)==null?void 0:Ot.map(gt=>gt.value).sort())||[]}),[Y]);return{loading:Re,error:se,allKinds:be!=null?be:[]}}function lt(Y,se,Re){let be=Y;return se&&(be=be.filter(bt=>se.some(Ot=>Ot.toLocaleLowerCase("en-US")===bt.toLocaleLowerCase("en-US")))),Re&&!Y.some(bt=>bt.toLocaleLowerCase("en-US")===Re.toLocaleLowerCase("en-US"))&&(be=be.concat([Re])),be.sort().reduce((bt,Ot)=>(bt[Ot.toLocaleLowerCase("en-US")]=Ot,bt),{})}function ye(Y){var se,Re;const{filters:be,queryParameters:{kind:Qe},updateFilters:bt}=jt(),Ot=(0,a.useMemo)(()=>[Qe].flat()[0],[Qe]),[gt,on]=(0,a.useState)((Re=Ot!=null?Ot:(se=be.kind)==null?void 0:se.value)!=null?Re:Y.initialFilter);(0,a.useEffect)(()=>{Ot&&on(Ot)},[Ot]),(0,a.useEffect)(()=>{var $n,Bn;($n=be.kind)!=null&&$n.value&&on((Bn=be.kind)==null?void 0:Bn.value)},[be.kind]),(0,a.useEffect)(()=>{bt({kind:gt?new Te(gt):void 0})},[gt,bt]);const{allKinds:qt,loading:Xt,error:Yt}=zn();return{loading:Xt,error:Yt,allKinds:qt!=null?qt:[],selectedKind:gt,setSelectedKind:on}}const Ze=Y=>{const{allowedKinds:se,hidden:Re,initialFilter:be="component"}=Y,Qe=(0,l.h_)(l.$v),{error:bt,allKinds:Ot,selectedKind:gt,setSelectedKind:on}=ye({initialFilter:be});if((0,a.useEffect)(()=>{bt&&Qe.post({message:"Failed to load entity kinds",severity:"error"})},[bt,Qe]),bt)return null;const qt=lt(Ot,se,gt),Xt=Object.keys(qt).map(Yt=>({value:Yt,label:qt[Yt]}));return Re?null:a.createElement(v.Z,{pb:1,pt:1},a.createElement(te.Ph,{label:"Kind",items:Xt,selected:gt.toLocaleLowerCase("en-US"),onChange:Yt=>on(String(Yt))}))},Ue=(0,L.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),vt=a.createElement(un.Z,{fontSize:"small"}),it=a.createElement(hn.Z,{fontSize:"small"}),yt=Y=>{var se,Re;const{initialFilter:be=[]}=Y,Qe=Ue(),{updateFilters:bt,backendEntities:Ot,filters:gt,queryParameters:{lifecycles:on}}=jt(),qt=(0,a.useMemo)(()=>[on].flat().filter(Boolean),[on]),[Xt,Yt]=(0,a.useState)(qt.length?qt:(Re=(se=gt.lifecycles)==null?void 0:se.values)!=null?Re:be);(0,a.useEffect)(()=>{qt.length&&Yt(qt)},[qt]);const $n=(0,a.useMemo)(()=>[...new Set(Ot.map(Bn=>{var En;return(En=Bn.spec)==null?void 0:En.lifecycle}).filter(Boolean))].sort(),[Ot]);return(0,a.useEffect)(()=>{bt({lifecycles:Xt.length&&$n.length?new Ce(Xt):void 0})},[Xt,bt,$n]),$n.length?a.createElement(v.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Lifecycle",a.createElement(st.ZP,{multiple:!0,disableCloseOnSelect:!0,options:$n,value:Xt,onChange:(Bn,En)=>Yt(En),renderOption:(Bn,{selected:En})=>a.createElement(k.Z,{control:a.createElement(G.Z,{icon:vt,checkedIcon:it,checked:En}),onClick:Qt=>Qt.preventDefault(),label:Bn}),size:"small",popupIcon:a.createElement(vn.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:Bn=>a.createElement(E.Z,{...Bn,className:Qe.input,variant:"outlined"})}))):null};function ft(Y,se){const Re=se==null?void 0:se.defaultKind;let be,Qe,bt;return"metadata"in Y?(be=Y.kind,Qe=Y.metadata.namespace,bt=Y.metadata.name):(be=Y.kind,Qe=Y.namespace,bt=Y.name),(Qe===void 0||Qe==="")&&(Qe=_e.zG),(se==null?void 0:se.defaultNamespace)!==void 0?(se==null?void 0:se.defaultNamespace)===Qe&&(Qe=void 0):Qe===_e.zG&&(Qe=void 0),be=be.toLocaleLowerCase("en-US"),be=Re&&Re.toLocaleLowerCase("en-US")===be?void 0:be,`${be?`${be}:`:""}${Qe?`${Qe}/`:""}${bt}`}function Zt(Y,se){for(const Re of["spec.profile.displayName","metadata.title"]){const be=pn()(Y,Re);if(be&&typeof be=="string")return be}return ft(Y,se)}const tn=(0,L.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),gn=a.createElement(un.Z,{fontSize:"small"}),Zn=a.createElement(hn.Z,{fontSize:"small"}),er=()=>{var Y,se,Re;const be=tn(),{updateFilters:Qe,backendEntities:bt,filters:Ot,queryParameters:{owners:gt}}=jt(),on=(0,l.h_)(Q),qt=(0,l.h_)(l.VE),Xt=(0,a.useMemo)(()=>[gt].flat().filter(Boolean),[gt]),[Yt,$n]=(0,a.useState)(Xt.length?new Dt(Xt).values:(se=(Y=Ot.owners)==null?void 0:Y.values)!=null?se:[]),{loading:Bn,error:En,value:Qt}=(0,mt.default)(async()=>{const An=[...new Set(bt.flatMap(ir=>(0,Ge.g)(ir,_e.S4).map(lr=>(0,_e.eE)(lr))).filter(Boolean))],{items:Kn}=await on.getEntitiesByRefs({entityRefs:An,fields:["kind","metadata.name","metadata.title","metadata.namespace","spec.profile.displayName"]});return Kn.map((ir,lr)=>ir?{label:Zt(ir,{defaultKind:"Group"}),entityRef:(0,_e.eE)(ir)}:{label:ft((0,_e.of)(An[lr]),{defaultKind:"group"}),entityRef:An[lr]}).sort((ir,lr)=>ir.label.localeCompare(lr.label,"en-US",{ignorePunctuation:!0,caseFirst:"upper"}))},[bt]);return(0,a.useEffect)(()=>{En&&qt.post({...En,message:`EntityOwnerPicker failed to initialize: ${En.message}`},{})},[En,qt]),(0,a.useEffect)(()=>{if(Xt.length){const An=new Dt(Xt);$n(An.values)}},[Xt]),(0,a.useEffect)(()=>{!Bn&&Qt&&Qe({owners:Yt.length&&Qt.length?new Dt(Yt):void 0})},[Yt,Qe,Qt,Bn]),!Bn&&!(Qt!=null&&Qt.length)?null:a.createElement(v.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Owner",a.createElement(st.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Bn,options:Qt||[],value:(Re=Qt==null?void 0:Qt.filter(An=>Yt.some(Kn=>Kn===An.entityRef)))!=null?Re:[],onChange:(An,Kn)=>$n(Kn.map(gr=>gr.entityRef)),getOptionLabel:An=>An.label,renderOption:(An,{selected:Kn})=>a.createElement(k.Z,{control:a.createElement(G.Z,{icon:gn,checkedIcon:Zn,checked:Kn}),onClick:gr=>gr.preventDefault(),label:An.label}),size:"small",popupIcon:a.createElement(vn.Z,{"data-testid":"owner-picker-expand"}),renderInput:An=>a.createElement(E.Z,{...An,className:be.input,variant:"outlined"})})))},tr=(0,fe.uW)("catalog:entity-route-ref",()=>(0,l.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Wn(Y){var se,Re;return{kind:Y.kind.toLocaleLowerCase("en-US"),namespace:(Re=(se=Y.metadata.namespace)==null?void 0:se.toLocaleLowerCase("en-US"))!=null?Re:_e.zG,name:Y.metadata.name}}const jn=(0,a.forwardRef)((Y,se)=>{var Re;const{entityRef:be,defaultKind:Qe,title:bt,children:Ot,...gt}=Y,on=(0,l.tg)(tr);let qt,Xt,Yt;if(typeof be=="string"){const Qt=(0,_e.of)(be);qt=Qt.kind,Xt=Qt.namespace,Yt=Qt.name}else"metadata"in be?(qt=be.kind,Xt=be.metadata.namespace,Yt=be.metadata.name):(qt=be.kind,Xt=be.namespace,Yt=be.name);qt=qt.toLocaleLowerCase("en-US"),Xt=(Re=Xt==null?void 0:Xt.toLocaleLowerCase("en-US"))!=null?Re:_e.zG;const $n={kind:qt,namespace:Xt,name:Yt},Bn=ft({kind:qt,namespace:Xt,name:Yt},{defaultKind:Qe}),En=a.createElement(te.rU,{...gt,ref:se,to:on($n)},Ot,!Ot&&(bt!=null?bt:Bn));return bt?a.createElement(A.ZP,{title:Bn},En):En});function rr(Y){const{entityRefs:se,defaultKind:Re,getTitle:be,...Qe}=Y,bt=(0,l.h_)(Q),{value:Ot=new Array,loading:gt,error:on}=(0,mt.default)(async()=>{const qt=se.reduce((Yt,$n)=>typeof $n=="object"&&"metadata"in $n?Yt:[...Yt,(0,_e.of)($n)],new Array),Xt=se.filter(Yt=>typeof Yt=="object"&&"metadata"in Yt);return qt.length>0?[...(await bt.getEntities({filter:qt.map(Yt=>({kind:Yt.kind,"metadata.namespace":Yt.namespace,"metadata.name":Yt.name}))})).items,...Xt]:Xt},[se]);return gt?a.createElement(te.Ex,null):on?a.createElement(te.yu,{error:on}):a.createElement(a.Fragment,null,Ot.map((qt,Xt)=>a.createElement(a.Fragment,{key:Xt},Xt>0&&", ",a.createElement(jn,{...Qe,defaultKind:Re,entityRef:qt,title:be(qt)}))))}function D(Y){const{entityRefs:se,defaultKind:Re,fetchEntities:be,getTitle:Qe,...bt}=Y;return be?a.createElement(rr,{...bt,defaultKind:Re,entityRefs:se,getTitle:Qe}):a.createElement(a.Fragment,null,se.map((Ot,gt)=>a.createElement(a.Fragment,{key:gt},gt>0&&", ",a.createElement(jn,{...bt,defaultKind:Re,entityRef:Ot,title:Qe?Qe(Ot):void 0}))))}const I=Y=>{const se=useRouteRef(tr);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:se(getCompoundEntityRef(Y.entity))},React.createElement(InfoIcon,null))},V=Y=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${Y.email}`,to:`mailto:${Y.email}`},React.createElement(EmailIcon,null)),ie=Y=>{var se;const Re=(se=Y.entity.spec.profile)==null?void 0:se.email;return Re?React.createElement(V,{email:Re}):null},Me=Y=>{var se;const Re=(se=Y.entity.spec.profile)==null?void 0:se.email;return Re?React.createElement(V,{email:Re}):null},rt=(0,L.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),B=4,H=Y=>{var se,Re,be;const{entityRef:Qe,children:bt,delayTime:Ot=500}=Y,gt=rt(),on=useApiHolder(),qt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[Xt,Yt]=useState(!1),$n=useMemo(()=>debounce(()=>Yt(!0),Ot),[Ot]),[{loading:Bn,error:En,value:Qt},An]=useAsyncFn(async()=>{const gr=on.get(Q);if(gr){const ir=await gr.getEntityByRef(Qe);if(!ir)throw new Error(`${Qe} not found`);return ir}},[on,Qe]),Kn=()=>{Yt(!1),$n.cancel()};return useEffect(()=>{qt.isOpen&&!Qt&&!En&&!Bn&&An()},[qt.isOpen,An,Qt,En,Bn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:$n},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(qt)},bt)),Xt&&React.createElement(HoverPopover,{PaperProps:{className:gt.popoverPaper},...bindPopover(qt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:Kn},React.createElement(Card,null,React.createElement(CardContent,null,En&&React.createElement(ResponseErrorPanel,{error:En}),Bn&&React.createElement(Progress,null),Qt&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Qt.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Qt.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Qt.kind),Qt.metadata.description&&React.createElement(Typography,{className:gt.descriptionTypography,paragraph:!0},Qt.metadata.description),React.createElement(Typography,null,(se=Qt.spec)==null?void 0:se.type),React.createElement(Box,{marginTop:"0.5em"},(Qt.metadata.tags||[]).slice(0,B).map(gr=>React.createElement(Chip,{key:gr,size:"small",label:gr})),((Re=Qt.metadata.tags)==null?void 0:Re.length)&&((be=Qt.metadata.tags)==null?void 0:be.length)>B&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!En&&Qt&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Qt)&&React.createElement(Me,{entity:Qt}),isGroupEntity(Qt)&&React.createElement(ie,{entity:Qt}),React.createElement(I,{entity:Qt}))))))},Oe=(0,L.Z)(Y=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),ze=()=>{var Y,se;const Re=Oe(),{filters:be,updateFilters:Qe}=jt(),[bt,Ot]=(0,a.useState)((se=(Y=be.text)==null?void 0:Y.value)!=null?se:"");return(0,Je.Z)(()=>{Qe({text:bt.length?new Ut(bt):void 0})},250,[bt,Qe]),a.createElement(x.Z,{className:Re.searchToolbar},a.createElement(f.Z,null,a.createElement(T.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:Re.input,placeholder:"Search",autoComplete:"off",onChange:gt=>Ot(gt.target.value),value:bt,startAdornment:a.createElement(C.Z,{position:"start"},a.createElement(X.Z,null)),endAdornment:a.createElement(C.Z,{position:"end"},a.createElement(_.Z,{"aria-label":"clear search",onClick:()=>Ot(""),edge:"end",disabled:bt.length===0},a.createElement(j.Z,null)))})))},Mt=Object.freeze({createEntityRefColumn(Y){const{defaultKind:se}=Y;function Re(be){var Qe;return((Qe=be.metadata)==null?void 0:Qe.title)||ft(be,{defaultKind:se})}return{title:"Name",highlight:!0,customFilterAndSearch(be,Qe){return Re(Qe).includes(be)},customSort(be,Qe){return Re(be).localeCompare(Re(Qe))},render:be=>{var Qe;return a.createElement(jn,{entityRef:be,defaultKind:se,title:(Qe=be.metadata)==null?void 0:Qe.title})}}},createEntityRelationColumn(Y){const{title:se,relation:Re,defaultKind:be,filter:Qe}=Y;function bt(gt){return(0,Ge.g)(gt,Re,Qe)}function Ot(gt){return bt(gt).map(on=>ft(on,{defaultKind:be})).join(", ")}return{title:se,customFilterAndSearch(gt,on){return Ot(on).includes(gt)},customSort(gt,on){return Ot(gt).localeCompare(Ot(on))},render:gt=>a.createElement(D,{entityRefs:bt(gt),defaultKind:be})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:_e.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:_e.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:_e.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:Y=>a.createElement(te.Or,{text:Y.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Ft=[Mt.createEntityRefColumn({defaultKind:"system"}),Mt.createDomainColumn(),Mt.createOwnerColumn(),Mt.createMetadataDescriptionColumn()],Ht=[Mt.createEntityRefColumn({defaultKind:"component"}),Mt.createSystemColumn(),Mt.createOwnerColumn(),Mt.createSpecTypeColumn(),Mt.createSpecLifecycleColumn(),Mt.createMetadataDescriptionColumn()],bn=(0,L.Z)(Y=>({empty:{padding:Y.spacing(2),display:"flex",justifyContent:"center"}})),Cn=Y=>{const{entities:se,title:Re,emptyContent:be,variant:Qe="gridItem",columns:bt}=Y,Ot=bn(),gt={minWidth:"0",width:"100%"};return Qe==="gridItem"&&(gt.height="calc(100% - 10px)"),a.createElement(te.iA,{columns:bt,title:Re,style:gt,emptyContent:be&&a.createElement("div",{className:Ot.empty},be),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1},data:se})};Cn.columns=Mt,Cn.systemEntityColumns=Ft,Cn.componentEntityColumns=Ht;const an=a.createElement(un.Z,{fontSize:"small"}),Fn=a.createElement(hn.Z,{fontSize:"small"});function Un({selected:Y}){return a.createElement(G.Z,{icon:an,checkedIcon:Fn,checked:Y})}const Jn=(0,a.memo)(Y=>{const{selected:se,value:Re,availableOptions:be,showCounts:Qe}=Y,bt=Qe?`${Re} (${be==null?void 0:be[Re]})`:Re;return a.createElement(k.Z,{control:a.createElement(Un,{selected:se}),label:bt,onClick:Ot=>Ot.preventDefault()})}),Yn=(0,L.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Xn(Y){const se=Yn();return a.createElement(E.Z,{variant:"outlined",...Y,className:he()(se.input,Y.className)})}function Hn(Y){var se,Re;const{label:be,name:Qe,path:bt,showCounts:Ot,Filter:gt,InputProps:on}=Y,{updateFilters:qt,filters:Xt,queryParameters:{[Qe]:Yt}}=jt(),$n=(0,l.h_)(Q),{value:Bn}=(0,mt.default)(async()=>{var lr;const Or=bt,{facets:Dr}=await $n.getEntityFacets({facets:[Or],filter:(lr=Xt.kind)==null?void 0:lr.getCatalogFilters()});return Object.fromEntries(Dr[Or].map(({value:Gr,count:Qr})=>[Gr,Qr]))},[Xt.kind]),En=(0,a.useMemo)(()=>[Yt].flat().filter(Boolean),[Yt]),[Qt,An]=(0,a.useState)(En.length?En:(Re=(se=Xt[Qe])==null?void 0:se.values)!=null?Re:[]);(0,a.useEffect)(()=>{En.length&&An(En)},[En]);const Kn=Object.keys(Bn!=null?Bn:{}),gr=Qt.length&&Kn.length;(0,a.useEffect)(()=>{qt({[Qe]:gr?new gt(Qt):void 0})},[Qe,gr,Qt,gt,qt]);const ir=Xt[Qe];return ir&&typeof ir=="object"&&!("values"in ir)||!Kn.length||Kn.length<=1?null:a.createElement(v.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},be,a.createElement(st.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Kn,value:Qt,onChange:(lr,Or)=>An(Or),renderOption:(lr,{selected:Or})=>a.createElement(Jn,{selected:Or,value:lr,availableOptions:Bn,showCounts:!!Ot}),size:"small",popupIcon:a.createElement(vn.Z,{"data-testid":`${String(Qe)}-picker-expand`}),renderInput:lr=>a.createElement(Xn,{...lr,...on})})))}const vr=(0,L.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),pr=Y=>{const se=vr();return a.createElement(Hn,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Bt,showCounts:Y.showCounts,InputProps:{className:se.input}})},cr=Y=>{var se;const{hidden:Re,initialFilter:be}=Y,Qe=(0,l.h_)(l.$v),{error:bt,availableTypes:Ot,selectedTypes:gt,setSelectedTypes:on}=Gt();if((0,a.useEffect)(()=>{bt&&Qe.post({message:"Failed to load entity types",severity:"error"}),be&&on([be])},[bt,Qe,be,on]),Ot.length===0||bt)return null;const qt=[{value:"all",label:"all"},...Ot.map(Xt=>({value:Xt,label:Xt}))];return Re?null:a.createElement(v.Z,{pb:1,pt:1},a.createElement(te.Ph,{label:"Type",items:qt,selected:(se=qt.length>1?gt[0]:void 0)!=null?se:"all",onChange:Xt=>on(Xt==="all"?[]:[String(Xt)])}))},or=(0,p.Z)({root:{color:"#f3ba37"}})(De.Z),nr=Y=>{const{toggleStarredEntity:se,isStarredEntity:Re}=Mn(Y.entity);return a.createElement(_.Z,{"aria-label":"favorite",color:"inherit",...Y,onClick:()=>se()},a.createElement(A.ZP,{title:Re?"Remove from favorites":"Add to favorites"},Re?a.createElement(or,null):a.createElement(at.Z,null)))},Z=tt.Z;function o(Y,se){if(Y)return Y.toLocaleLowerCase("en-US");if(se)try{return(0,_e.of)(se).kind.toLocaleLowerCase("en-US")}catch{return}}function i(Y,se){const Re=(0,l.qD)(),be=o(Y,se);return be&&Re.getSystemIcon(`kind:${be}`)||Z}function g(Y){const{kind:se,entityRef:Re,...be}=Y,Qe=i(se,Re);return a.createElement(Qe,{...be})}const M=(0,L.Z)(Y=>({node:{fill:Y.palette.grey[300],stroke:Y.palette.grey[300],"&.primary":{fill:Y.palette.primary.light,stroke:Y.palette.primary.light},"&.secondary":{fill:Y.palette.secondary.light,stroke:Y.palette.secondary.light}},text:{fill:Y.palette.getContrastText(Y.palette.grey[300]),"&.primary":{fill:Y.palette.primary.contrastText},"&.secondary":{fill:Y.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Ee(Y){const se=(0,l.h_)(Q),Re=(0,_e.eE)(Y),{loading:be,error:Qe,value:bt}=(0,mt.default)(async()=>{const Ot=await se.getEntityAncestors({entityRef:Re}),gt=new Array,on=new Array;for(const qt of Ot.items){const Xt=(0,_e.eE)(qt.entity),Yt=Xt===Ot.rootEntityRef;gt.push({id:Xt,root:Yt,...qt.entity});for(const $n of qt.parentEntityRefs)on.push({from:Xt,to:$n})}return{nodes:gt,edges:on}},[Re]);return{loading:be,error:Qe,nodes:(bt==null?void 0:bt.nodes)||[],edges:(bt==null?void 0:bt.edges)||[]}}function je({node:Y}){const se=M(),Re=(0,oe.s0)(),be=(0,l.tg)(tr),[Qe,bt]=(0,a.useState)(0),[Ot,gt]=(0,a.useState)(0),on=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(on.current){let{height:An,width:Kn}=on.current.getBBox();An=Math.round(An),Kn=Math.round(Kn),(An!==Ot||Kn!==Qe)&&(bt(Kn),gt(An))}},[Qe,Ot]);const qt=10,Xt=Ot,Yt=Xt+qt,$n=Yt+Qe+qt*2,Bn=Ot+qt*2,En=Y.metadata.title||(Y.kind&&Y.metadata.name&&Y.metadata.namespace?ft({kind:Y.kind,name:Y.metadata.name,namespace:Y.metadata.namespace||""}):Y.id),Qt=()=>{Re(be({kind:Y.kind,namespace:Y.metadata.namespace||_e.zG,name:Y.metadata.name}))};return a.createElement("g",{onClick:Qt,className:se.clickable},a.createElement("rect",{className:he()(se.node,Y.root?"secondary":"primary"),width:$n,height:Bn,rx:10}),a.createElement(g,{kind:Y.kind,y:qt,x:qt,width:Xt,height:Xt,className:he()(se.text,Y.root?"secondary":"primary")}),a.createElement("text",{ref:on,className:he()(se.text,Y.root?"secondary":"primary"),y:Bn/2,x:Yt+(Qe+qt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},En))}function et(Y){const{loading:se,error:Re,nodes:be,edges:Qe}=Ee(Y.entity);return se?a.createElement(te.Ex,null):Re?a.createElement(te.Gk,{error:Re}):a.createElement(a.Fragment,null,a.createElement(W.Z,{variant:"h2"},"Ancestry"),a.createElement(W.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",a.createElement(te.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),a.createElement(v.Z,{mt:4},a.createElement(te.mn,{nodes:be,edges:Qe,renderNode:je,direction:te.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const xt=(0,L.Z)(Y=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:Y.spacing(2)},helpIcon:{marginLeft:Y.spacing(1),color:Y.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Wt(Y){const se=xt();return a.createElement(K.Z,{...Y,primaryTypographyProps:{className:se.monospace},secondaryTypographyProps:{className:se.monospace}})}function cn(Y){const se=xt();return a.createElement(Ie.Z,{className:se.monospace},Y.children)}function mn(Y){return a.createElement(v.Z,{mt:2},a.createElement(ge.Z,{variant:"outlined"},a.createElement(Xe.Z,null,a.createElement(h.Z,{variant:"h6",gutterBottom:!0},Y.title,Y.helpLink&&a.createElement(On,{to:Y.helpLink})),Y.children)))}function Sn(Y){if(Y.match(/^url:https?:\/\//))return Y.slice(4);if(Y.match(/^https?:\/\//))return Y}function Ln(Y){const[se,Re]=Y.entry,be=Sn(Re);return a.createElement($t.Z,null,Y.indent&&a.createElement(ot.Z,null),a.createElement(Wt,{primary:se,secondary:be?a.createElement(te.rU,{to:be},Re):Re}))}function On(Y){const se=xt();return a.createElement(te.rU,{to:Y.to,className:se.helpIcon},a.createElement(ut.Z,{fontSize:"inherit"}))}const Gn=(0,L.Z)({root:{display:"flex",flexDirection:"column"}});function ar(Y){var se,Re;const be=(0,l.h_)(Q),Qe=(0,_e.eE)(Y),bt=(se=Y.metadata.annotations)==null?void 0:se[_e.P1],Ot=(Re=Y.metadata.annotations)==null?void 0:Re[_e.q1],{loading:gt,error:on,value:qt}=(0,mt.default)(async()=>!bt&&!Ot?[]:(await be.getEntities({filter:[...bt?[{[`metadata.annotations.${_e.P1}`]:bt}]:[],...Ot?[{[`metadata.annotations.${_e.q1}`]:Ot}]:[]]})).items,[bt,Ot]);return{loading:gt,error:on,location:bt,originLocation:Ot,colocatedEntities:qt==null?void 0:qt.filter(Xt=>(0,_e.eE)(Xt)!==Qe)}}function Qn(Y){return a.createElement(Vt.Z,{dense:!0},Y.header&&a.createElement(Ln,{key:"header",entry:Y.header}),Y.entities.map(se=>a.createElement($t.Z,{key:(0,_e.eE)(se)},a.createElement(ot.Z,null,a.createElement(g,{kind:se.kind})),a.createElement(Wt,{primary:a.createElement(jn,{entityRef:se})}))))}function F(Y){const{entity:se}=Y,{loading:Re,error:be,location:Qe,originLocation:bt,colocatedEntities:Ot}=ar(se);if(Re)return a.createElement(te.Ex,null);if(be)return a.createElement(te.Gk,{error:be});if(!Qe&&!bt)return a.createElement(Pt.Z,{severity:"warning"},"Entity had no location information.");if(!(Ot!=null&&Ot.length))return a.createElement(Pt.Z,{severity:"info"},"There were no other entities on this location.");if(Qe===bt)return a.createElement(Qn,{entities:Ot});const gt=Ot.filter(qt=>{var Xt;return((Xt=qt.metadata.annotations)==null?void 0:Xt[_e.P1])===Qe}),on=Ot.filter(qt=>{var Xt;return((Xt=qt.metadata.annotations)==null?void 0:Xt[_e.q1])===bt});return a.createElement(a.Fragment,null,gt.length>0&&a.createElement(Qn,{entities:gt,header:["At the same location",Qe]}),on.length>0&&a.createElement(Qn,{entities:on,header:["At the same origin",bt]}))}function le(Y){const se=Gn();return a.createElement(a.Fragment,null,a.createElement(W.Z,{variant:"h2"},"Colocated"),a.createElement(W.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),a.createElement("div",{className:se.root},a.createElement(F,{entity:Y.entity})))}function Pe(Y){return Object.fromEntries([...Object.entries(Y)].sort((se,Re)=>se[0]<Re[0]?-1:1))}function qe(Y){return a.createElement(a.Fragment,null,a.createElement(W.Z,{variant:"h2"},"Entity as JSON"),a.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),a.createElement(W.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(te.Oi,{text:JSON.stringify(Pe(Y.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const At=(0,L.Z)({root:{display:"flex",flexDirection:"column"}});function Nt(Y){var se,Re;const be=At(),{apiVersion:Qe,kind:bt,metadata:Ot,spec:gt,relations:on=[],status:qt={}}=Y.entity,Xt=de()(_t()(on,Yt=>Yt.targetRef),"type");return a.createElement(a.Fragment,null,a.createElement(W.Z,{variant:"h2"},"Overview"),a.createElement("div",{className:be.root},a.createElement(mn,{title:"Identity"},a.createElement(Vt.Z,{dense:!0},a.createElement($t.Z,null,a.createElement(Wt,{primary:"apiVersion",secondary:Qe})),a.createElement($t.Z,null,a.createElement(Wt,{primary:"kind",secondary:bt})),(gt==null?void 0:gt.type)&&a.createElement($t.Z,null,a.createElement(Wt,{primary:"spec.type",secondary:gt.type})),Ot.uid&&a.createElement($t.Z,null,a.createElement(Wt,{primary:"uid",secondary:Ot.uid})),Ot.etag&&a.createElement($t.Z,null,a.createElement(Wt,{primary:"etag",secondary:Ot.etag})))),a.createElement(mn,{title:"Metadata"},!!Object.keys(Ot.annotations||{}).length&&a.createElement(Vt.Z,{dense:!0,subheader:a.createElement(cn,null,"Annotations",a.createElement(On,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Ot.annotations).map(Yt=>a.createElement(Ln,{key:Yt[0],indent:!0,entry:Yt}))),!!Object.keys(Ot.labels||{}).length&&a.createElement(Vt.Z,{dense:!0,subheader:a.createElement(cn,null,"Labels")},Object.entries(Ot.labels).map(Yt=>a.createElement(Ln,{key:Yt[0],indent:!0,entry:Yt}))),!!((se=Ot.tags)!=null&&se.length)&&a.createElement(Vt.Z,{dense:!0,subheader:a.createElement(cn,null,"Tags")},Ot.tags.map((Yt,$n)=>a.createElement($t.Z,{key:`${Yt}-${$n}`},a.createElement(ot.Z,null),a.createElement(Wt,{primary:Yt}))))),!!on.length&&a.createElement(mn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(Xt).map(([Yt,$n],Bn)=>a.createElement("div",{key:Bn},a.createElement(Vt.Z,{dense:!0,subheader:a.createElement(cn,null,Yt)},$n.map(En=>a.createElement($t.Z,{key:En.targetRef},a.createElement(ot.Z,null,a.createElement(g,{entityRef:En.targetRef})),a.createElement(Wt,{primary:a.createElement(jn,{entityRef:En.targetRef})}))))))),!!((Re=qt.items)!=null&&Re.length)&&a.createElement(mn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},qt.items.map((Yt,$n)=>a.createElement("div",{key:$n},a.createElement(h.Z,null,Yt.level,": ",Yt.type),a.createElement(v.Z,{ml:2},Yt.message))))))}function en(Y){return a.createElement(a.Fragment,null,a.createElement(W.Z,{variant:"h2"},"Entity as YAML"),a.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),a.createElement(W.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(te.Oi,{text:ne.ZP.stringify(Pe(Y.entity)),language:"yaml",showCopyCodeButton:!0}))))}const nn=(0,L.Z)(Y=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:Y.palette.background.paper},tabs:{borderRight:`1px solid ${Y.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Rn(Y){const{children:se,value:Re,index:be,...Qe}=Y,bt=nn();return a.createElement("div",{role:"tabpanel",hidden:Re!==be,id:`vertical-tabpanel-${be}`,"aria-labelledby":`vertical-tab-${be}`,className:bt.tabContents,...Qe},Re===be&&a.createElement(v.Z,{pl:3,pr:3},se))}function In(Y){return{id:`vertical-tab-${Y}`,"aria-controls":`vertical-tabpanel-${Y}`}}function Dn(Y){const se=nn(),[Re,be]=a.useState(0);return(0,a.useEffect)(()=>{be(0)},[Y.open]),Y.entity?a.createElement(kt.Z,{fullWidth:!0,maxWidth:"xl",open:Y.open,onClose:Y.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:se.fullHeightDialog}},a.createElement(J.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),a.createElement(sn.Z,{dividers:!0},a.createElement("div",{className:se.root},a.createElement(Se.Z,{orientation:"vertical",variant:"scrollable",value:Re,onChange:(Qe,bt)=>be(bt),"aria-label":"Inspector options",className:se.tabs},a.createElement(Ne.Z,{label:"Overview",...In(0)}),a.createElement(Ne.Z,{label:"Ancestry",...In(1)}),a.createElement(Ne.Z,{label:"Colocated",...In(2)}),a.createElement(Ne.Z,{label:"Raw JSON",...In(3)}),a.createElement(Ne.Z,{label:"Raw YAML",...In(4)})),a.createElement(Rn,{value:Re,index:0},a.createElement(Nt,{entity:Y.entity})),a.createElement(Rn,{value:Re,index:1},a.createElement(et,{entity:Y.entity})),a.createElement(Rn,{value:Re,index:2},a.createElement(le,{entity:Y.entity})),a.createElement(Rn,{value:Re,index:3},a.createElement(qe,{entity:Y.entity})),a.createElement(Rn,{value:Re,index:4},a.createElement(en,{entity:Y.entity})))),a.createElement(O.Z,null,a.createElement(b.Z,{onClick:Y.onClose,color:"primary"},"Close"))):null}function Nn(Y){var se;const Re=(0,l.h_)(Q),be=(se=Y.metadata.annotations)==null?void 0:se[_e.q1],Qe=Y.metadata.uid,bt=be==="bootstrap:bootstrap",Ot=(0,mt.default)(async()=>{const En=Re.getLocationByRef(be);let Qt;if(!be)Qt=Promise.resolve([]);else{const An=`metadata.annotations.${_e.q1}`;Qt=Re.getEntities({filter:{[An]:be},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Kn=>Kn.items)}return Promise.all([En,Qt]).then(([An,Kn])=>({location:An,colocatedEntities:Kn}))},[Re,Y]),gt=(0,a.useCallback)(async function(){const{location:Qt}=Ot.value;await Re.removeLocationById(Qt.id)},[Re,Ot]),on=(0,a.useCallback)(async function(){await Re.removeEntityByUid(Qe)},[Re,Qe]);if(bt)return{type:"bootstrap",location:be,deleteEntity:on};const{loading:qt,error:Xt,value:Yt}=Ot;if(qt)return{type:"loading"};if(Xt)return{type:"error",error:Xt};const{location:$n,colocatedEntities:Bn}=Yt;return $n?{type:"unregister",location:be,colocatedEntities:Bn.map(_e.iB),unregisterLocation:gt,deleteEntity:on}:{type:"only-delete",deleteEntity:on}}const ln=(0,L.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),sr=({entity:Y,onConfirm:se,onClose:Re})=>{var be;const Qe=(0,l.h_)(l.$v),bt=(0,l.h_)(l.Ds),Ot=ln(),gt=Nn(Y),[on,qt]=(0,a.useState)(!1),[Xt,Yt]=(0,a.useState)(!1),$n=(be=bt.getOptionalString("app.title"))!=null?be:"Backstage",Bn=(0,a.useCallback)(async function(){if("unregisterLocation"in gt){Yt(!0);try{await gt.unregisterLocation(),se()}catch(Kn){(0,S.BD)(Kn),Qe.post({message:Kn.message})}finally{Yt(!1)}}},[Qe,se,gt]),En=(0,a.useCallback)(async function(){if("deleteEntity"in gt){Yt(!0);try{await gt.deleteEntity(),se()}catch(Kn){(0,S.BD)(Kn),Qe.post({message:Kn.message})}finally{Yt(!1)}}},[Qe,se,gt]),Qt=()=>a.createElement(O.Z,{className:Ot.dialogActions},a.createElement(b.Z,{onClick:Re,color:"primary"},"Cancel"));return gt.type==="loading"?a.createElement(te.Ex,null):gt.type==="error"?a.createElement(te.Gk,{error:gt.error}):gt.type==="bootstrap"?a.createElement(a.Fragment,null,a.createElement(Pt.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',gt.location,'"). If you believe this is in error, please contact the ',$n," ","integrator."),a.createElement(v.Z,{marginTop:2},!on&&a.createElement(a.Fragment,null,a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:Ot.advancedButton,onClick:()=>qt(!0)},"Advanced Options"),a.createElement(Qt,null)),on&&a.createElement(a.Fragment,null,a.createElement(W.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Xt,onClick:En},"Delete Entity"),a.createElement(Qt,null)))):gt.type==="only-delete"?a.createElement(a.Fragment,null,a.createElement(W.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Xt,onClick:En},"Delete Entity"),a.createElement(Qt,null)):gt.type==="unregister"?a.createElement(a.Fragment,null,a.createElement(W.Z,null,"This action will unregister the following entities:"),a.createElement(W.Z,{component:"ul"},gt.colocatedEntities.map(An=>a.createElement("li",{key:`${An.kind}:${An.namespace}/${An.name}`},a.createElement(jn,{entityRef:An})))),a.createElement(W.Z,null,"Located at the following location:"),a.createElement(W.Z,{component:"ul"},a.createElement("li",null,gt.location)),a.createElement(W.Z,null,"To undo, just re-register the entity in ",$n,"."),a.createElement(v.Z,{marginTop:2},a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Xt,onClick:Bn},"Unregister Location"),!on&&a.createElement(v.Z,{component:"span",marginLeft:2},a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:Ot.advancedButton,onClick:()=>qt(!0)},"Advanced Options"))),on&&a.createElement(a.Fragment,null,a.createElement(v.Z,{paddingTop:4,paddingBottom:4},a.createElement(Le.Z,null)),a.createElement(W.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Xt,onClick:En},"Delete Entity"))):a.createElement(Pt.Z,{severity:"error"},"Internal error: Unknown state")},br=Y=>{const{open:se,onConfirm:Re,onClose:be,entity:Qe}=Y;return a.createElement(kt.Z,{open:se,onClose:be},a.createElement(J.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),a.createElement(sn.Z,null,a.createElement(sr,{entity:Qe,onConfirm:Re,onClose:be})))},Sr=(0,L.Z)(Y=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:Y.spacing(1,0,1,0)},title:{margin:Y.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:Y.palette.text.primary},menuItem:{minHeight:Y.spacing(6)},groupWrapper:{margin:Y.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function wr(Y){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:z.Z},{id:"starred",label:"Starred",icon:De.Z}]},{name:Y!=null?Y:"Company",items:[{id:"all",label:"All"}]}]}const Cr=Y=>{var se;const{initialFilter:Re,availableFilters:be}=Y,Qe=Sr(),Ot=(se=(0,l.h_)(l.Ds).getOptionalString("organization.name"))!=null?se:"Company",{filters:gt,updateFilters:on,backendEntities:qt,queryParameters:{kind:Xt,user:Yt},loading:$n}=jt(),Bn=["starred","all"],En=wr(Ot).map($r=>({...$r,items:$r.items.filter(({id:Ur})=>["group","user"].some(oa=>oa===Xt)?Bn.includes(Ur):!be||be.includes(Ur))})).filter(({items:$r})=>!!$r.length),{isStarredEntity:Qt}=Tn(),{isOwnedEntity:An,loading:Kn}=yn(),gr=$n||Kn,ir=(0,a.useMemo)(()=>new Ke("owned",An,Qt),[An,Qt]),lr=(0,a.useMemo)(()=>new Ke("starred",An,Qt),[An,Qt]),Or=(0,a.useMemo)(()=>[Yt].flat()[0],[Yt]),[Dr,Gr]=(0,a.useState)(Or!=null?Or:Re),Qr=(0,a.useMemo)(()=>qt.filter(pe((0,wt.compact)(Object.values({...gt,user:void 0})))),[gt,qt]),aa=(0,a.useMemo)(()=>({all:Qr.length,starred:Qr.filter($r=>lr.filterEntity($r)).length,owned:Qr.filter($r=>ir.filterEntity($r)).length}),[Qr,lr,ir]);return(0,a.useEffect)(()=>{Or&&Gr(Or)},[Or]),(0,a.useEffect)(()=>{!gr&&Dr&&Dr!=="all"&&aa[Dr]===0&&Gr("all")},[gr,aa,Dr,Gr]),(0,a.useEffect)(()=>{on({user:Dr?new Ke(Dr,An,Qt):void 0})},[Dr,An,Qt,on]),a.createElement(ge.Z,{className:Qe.root},En.map($r=>a.createElement(a.Fragment,{key:$r.name},a.createElement(h.Z,{variant:"subtitle2",component:"span",className:Qe.title},$r.name),a.createElement(ge.Z,{className:Qe.groupWrapper},a.createElement(Vt.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":$r.name},$r.items.map(Ur=>{var oa,Ea;return a.createElement(ce.Z,{role:"none presentation",key:Ur.id,button:!0,divider:!0,onClick:()=>Gr(Ur.id),selected:Ur.id===((oa=gt.user)==null?void 0:oa.value),className:Qe.menuItem,disabled:aa[Ur.id]===0,"data-testid":`user-picker-${Ur.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Ur.icon&&a.createElement(ot.Z,{className:Qe.listIcon},a.createElement(Ur.icon,{fontSize:"small"})),a.createElement(K.Z,null,a.createElement(h.Z,{variant:"body1"},Ur.label," ")),a.createElement(R.Z,null,(Ea=aa[Ur.id])!=null?Ea:"-"))}))))))},Tr=(0,L.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),hr=a.createElement(un.Z,{fontSize:"small"}),ur=a.createElement(hn.Z,{fontSize:"small"}),yr=()=>{const Y=Tr(),{updateFilters:se}=jt(),[Re,be]=(0,a.useState)([]);function Qe(gt){se({orphan:gt?new Ye(gt):void 0})}function bt(gt){se({error:gt?new We(gt):void 0})}const Ot=["Is Orphan","Has Error"];return a.createElement(v.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Processing Status",a.createElement(st.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Ot,value:Re,onChange:(gt,on)=>{be(on),Qe(on.includes("Is Orphan")),bt(on.includes("Has Error"))},renderOption:(gt,{selected:on})=>a.createElement(k.Z,{control:a.createElement(G.Z,{icon:hr,checkedIcon:ur,checked:on}),onClick:qt=>qt.preventDefault(),label:gt}),size:"small",popupIcon:a.createElement(vn.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:gt=>a.createElement(E.Z,{...gt,className:Y.input,variant:"outlined"})})))},Zr=(0,L.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Vr=()=>{const Y=Zr();return a.createElement(Hn,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:we,InputProps:{className:Y.input}})};function Br(Y){var se;const{children:Re,value:be}=Y,[Qe,bt]=useState((se=be==null?void 0:be.filters)!=null?se:{}),Ot=useCallback(qt=>{bt(Xt=>{const Yt=typeof qt=="function"?qt(Xt):qt;return{...Xt,...Yt}})},[]),gt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),on=useMemo(()=>{var qt,Xt,Yt,$n,Bn;return{entities:(qt=be==null?void 0:be.entities)!=null?qt:gt.entities,backendEntities:(Xt=be==null?void 0:be.backendEntities)!=null?Xt:gt.backendEntities,updateFilters:(Yt=be==null?void 0:be.updateFilters)!=null?Yt:Ot,filters:Qe,loading:($n=be==null?void 0:be.loading)!=null?$n:!1,queryParameters:(Bn=be==null?void 0:be.queryParameters)!=null?Bn:gt.queryParameters,error:be==null?void 0:be.error}},[be,gt,Qe,Ot]);return React.createElement(Ct.Provider,{value:on},Re)}},92449:function(Rt,d,e){e.d(d,{A:function(){return tt},C:function(){return me},E:function(){return yt},F:function(){return Tn},L:function(){return X},a:function(){return De},b:function(){return Pt},c:function(){return hn},d:function(){return gn},e:function(){return tn},f:function(){return Zt},g:function(){return Zn},h:function(){return ft},j:function(){return I},k:function(){return ie},l:function(){return jn},m:function(){return D},n:function(){return rr},o:function(){return Wn},p:function(){return er},r:function(){return rt},t:function(){return nt},u:function(){return Dt},v:function(){return Ut},w:function(){return Ye},x:function(){return Ke},y:function(){return It},z:function(){return xn}});var n=e(82394),l=e.n(n),u=e(34520),m=e(76635),a=e.n(m),c=e(80236),P=e(30705),b=e(49462),t=e(73495),v=e(79692),h=e(90436),$=e(60905),L=e(95544),k=e(41156),G=e(90348),E=e(11861),A=e(7089),x=e(94339),f=e(32552),T=e(61837),C=e(85256),_=e(24579),p=e(12420),W=e(12231),K=e(86136),Ie=e(49378),ge=e(80030),Xe=e(79784),$t=e(50758),ot=e(8629),Vt=e(79249),kt=e(49429),J=e(77277),sn=e(52866),Se=e(30254),Ne=e(27604),O=e(2784),Le=e(52160),ce=e(19928),R=e.n(ce),N=e(64279),te=e(15459),_e=e(2997),Ge=e(11640),wt=e(28347),pt=e(99688),Tt=e(73557),q=e(31654),oe=e(43054),Ae=e(65759),Je=e(52963),St=e(75650),mt=e(49166),rn=e(32272),Kt=e(88285),$e=e(92573);async function _t({storageApi:B}){var H;const Oe=B.forBucket("settings"),ze=B.forBucket("starredEntities"),Mt=Oe.snapshot("starredEntities").value;if(!(0,m.isArray)(Mt))return;const Ft=new Set((H=ze.snapshot("entityRefs").value)!=null?H:[]);Mt.filter(m.isString).map(Ht=>Ht.split(":")).filter(Ht=>Ht.length===4&&Ht[0]==="entity").map(([Ht,bn,Cn,an])=>(0,u.eE)({kind:bn,namespace:Cn,name:an})).forEach(Ht=>Ft.add(Ht)),await ze.set("entityRefs",Array.from(Ft)),await Oe.remove("starredEntities")}class ct{constructor(H){this.subscribers=new Set,this.observable=new(l())(ze=>(ze.next(new Set(this.starredEntities)),this.subscribers.add(ze),()=>{this.subscribers.delete(ze)}));var Oe;_t(H).then(),this.settingsStore=H.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((Oe=this.settingsStore.snapshot("entityRefs").value)!=null?Oe:[]),this.settingsStore.observe$("entityRefs").subscribe({next:ze=>{var Mt;this.starredEntities=new Set((Mt=ze.value)!=null?Mt:[]),this.notifyChanges()}})}async toggleStarred(H){this.starredEntities.has(H)?this.starredEntities.delete(H):this.starredEntities.add(H),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const H of this.subscribers)H.next(new Set(this.starredEntities))}}const hn=(0,P.x8)({id:"create-component",optional:!0}),un=(0,P.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),vn=(0,P.NT)({id:"catalog"}),st=(0,v.Z)(B=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:B.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function Pt(B){const{label:H,value:Oe,gridSizes:ze,children:Mt}=B,Ft=st(),Ht=(0,P.vJ)(Mt,Cn=>Cn.getElements()),bn=Ht.length>0?Ht:O.createElement(h.Z,{variant:"body2",className:Ft.value},Oe||"unknown");return O.createElement($.Z,{item:!0,...ze},O.createElement(h.Z,{variant:"h2",className:Ft.label},H),bn)}const fn=(0,v.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function pn(B){const{href:H,text:Oe,Icon:ze}=B,Mt=fn();return O.createElement(L.Z,{display:"flex"},O.createElement(L.Z,{mr:1,className:Mt.svgIcon},O.createElement(h.Z,{component:"div"},ze?O.createElement(ze,null):O.createElement(Le.Z,null))),O.createElement(L.Z,{flexGrow:"1"},O.createElement(c.rU,{to:H,target:"_blank",rel:"noopener"},Oe||H)))}const fe={xs:1,sm:1,md:1,lg:2,xl:3};function j(B){var H,Oe;const ze=[(0,k.Z)(Ft=>Ft.breakpoints.up("xl"))?"xl":null,(0,k.Z)(Ft=>Ft.breakpoints.up("lg"))?"lg":null,(0,k.Z)(Ft=>Ft.breakpoints.up("md"))?"md":null,(0,k.Z)(Ft=>Ft.breakpoints.up("sm"))?"sm":null,(0,k.Z)(Ft=>Ft.breakpoints.up("xs"))?"xs":null];let Mt=1;if(typeof B=="number")Mt=B;else{const Ft=(H=ze.find(Ht=>Ht!==null))!=null?H:"xs";Mt=(Oe=B==null?void 0:B[Ft])!=null?Oe:fe[Ft]}return Mt}function X(B){const{items:H,cols:Oe=void 0}=B,ze=j(Oe);return O.createElement(G.Z,{rowHeight:"auto",cols:ze},H.map(({text:Mt,href:Ft,Icon:Ht},bn)=>O.createElement(E.Z,{key:bn},O.createElement(pn,{href:Ft,text:Mt!=null?Mt:Ft,Icon:Ht}))))}const ue=(0,v.Z)({description:{wordBreak:"break-word"}});function he(B,H,Oe){if(H==="url"||B.includes("://"))return B;const ze=Oe.type==="file"?`file://${Oe.target}`:Oe.target;return H==="file"||Oe.type==="file"?new URL(B,ze).href:ze}function De(B){var H,Oe,ze,Mt,Ft,Ht,bn,Cn;const{entity:an}=B,Fn=ue(),Un=an.kind.toLocaleLowerCase("en-US")==="system",Jn=an.kind.toLocaleLowerCase("en-US")==="resource",Yn=an.kind.toLocaleLowerCase("en-US")==="component",Xn=an.kind.toLocaleLowerCase("en-US")==="api",Hn=an.kind.toLocaleLowerCase("en-US")==="template",vr=an.kind.toLocaleLowerCase("en-US")==="location",pr=an.kind.toLocaleLowerCase("en-US")==="group",cr=(0,t.hF)(an,u.cz,{kind:"system"}),or=(0,t.hF)(an,u.cz,{kind:"component"}),nr=(0,t.hF)(an,u.cz,{kind:"domain"}),Z=(0,t.hF)(an,u.S4);let o;try{o=(0,u.CV)(an)}catch{o=void 0}return O.createElement($.Z,{container:!0},O.createElement(Pt,{label:"Description",gridSizes:{xs:12}},O.createElement(c.SA,{className:Fn.description,content:((H=an==null?void 0:an.metadata)==null?void 0:H.description)||"No description"})),O.createElement(Pt,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},Z.length>0&&O.createElement(t.rI,{entityRefs:Z,defaultKind:"group"})),(Un||nr.length>0)&&O.createElement(Pt,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},nr.length>0&&O.createElement(t.rI,{entityRefs:nr,defaultKind:"domain"})),(Xn||Yn||Jn||cr.length>0)&&O.createElement(Pt,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},cr.length>0&&O.createElement(t.rI,{entityRefs:cr,defaultKind:"system"})),Yn&&or.length>0&&O.createElement(Pt,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},O.createElement(t.rI,{entityRefs:or,defaultKind:"component"})),(Xn||Yn||Jn||Hn||pr||vr||typeof((Oe=an==null?void 0:an.spec)==null?void 0:Oe.type)=="string")&&O.createElement(Pt,{label:"Type",value:(ze=an==null?void 0:an.spec)==null?void 0:ze.type,gridSizes:{xs:12,sm:6,lg:4}}),(Xn||Yn||typeof((Mt=an==null?void 0:an.spec)==null?void 0:Mt.lifecycle)=="string")&&O.createElement(Pt,{label:"Lifecycle",value:(Ft=an==null?void 0:an.spec)==null?void 0:Ft.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),O.createElement(Pt,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((Ht=an==null?void 0:an.metadata)==null?void 0:Ht.tags)||[]).map(i=>O.createElement(A.Z,{key:i,size:"small",label:i}))),vr&&(((bn=an==null?void 0:an.spec)==null?void 0:bn.targets)||((Cn=an==null?void 0:an.spec)==null?void 0:Cn.target))&&O.createElement(Pt,{label:"Targets",gridSizes:{xs:12}},O.createElement(X,{cols:1,items:(an.spec.targets||[an.spec.target]).map(i=>i).map(i=>{var g;return{text:i,href:he(i,((g=an==null?void 0:an.spec)==null?void 0:g.type)||"unknown",o)}})})))}const at=(0,v.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function tt(B){var H,Oe,ze;const{variant:Mt}=B,Ft=at(),{entity:Ht}=(0,t.X2)(),bn=(0,P.h_)(b.q3),Cn=(0,P.h_)(t.Ah),an=(0,P.h_)(P.$v),Fn=(0,P.h_)(P.VE),Un=(0,P.tg)(un),Jn=(0,t.CV)(Ht,bn),Yn=(H=Ht.metadata.annotations)==null?void 0:H[u.Tf],Xn={label:"View Source",disabled:!Jn,icon:O.createElement(b.nW,{type:Jn==null?void 0:Jn.integrationType}),href:Jn==null?void 0:Jn.locationTargetUrl},Hn={label:"View TechDocs",disabled:!((Oe=Ht.metadata.annotations)!=null&&Oe["backstage.io/techdocs-ref"])||!Un,icon:O.createElement(Se.Z,null),href:Un&&Un({namespace:Ht.metadata.namespace||u.zG,kind:Ht.kind,name:Ht.metadata.name})};let vr="";Mt==="gridItem"?vr=Ft.gridItemCard:Mt==="fullHeight"&&(vr=Ft.fullHeightCard);let pr="";Mt==="gridItem"?pr=Ft.gridItemCardContent:Mt==="fullHeight"&&(pr=Ft.fullHeightCardContent);const cr=(ze=Ht.metadata.annotations)==null?void 0:ze[u.P1],or=(cr==null?void 0:cr.startsWith("url:"))||(cr==null?void 0:cr.startsWith("file:")),nr=(0,O.useCallback)(async()=>{try{await Cn.refreshEntity((0,u.eE)(Ht)),an.post({message:"Refresh scheduled",severity:"info"})}catch(Z){Fn.post(Z)}},[Cn,an,Fn,Ht]);return O.createElement(x.Z,{className:vr},O.createElement(f.Z,{title:"About",action:O.createElement(O.Fragment,null,or&&O.createElement(T.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:nr},O.createElement(sn.Z,null)),O.createElement(T.Z,{component:c.rU,"aria-label":"Edit",disabled:!Yn,title:"Edit Metadata",to:Yn!=null?Yn:"#"},O.createElement(Ne.Z,null))),subheader:O.createElement(c.M6,{links:[Xn,Hn]})}),O.createElement(C.Z,null),O.createElement(_.Z,{className:pr},O.createElement(De,{entity:Ht})))}function ut(){const B=useApi(catalogApiRef),{error:H,loading:Oe,value:ze}=useAsync(async()=>await B.getEntityFacets({facets:["kind"]}).then(Ft=>{var Ht;return((Ht=Ft.facets.kind)==null?void 0:Ht.map(bn=>bn.value).sort())||[]}),[B]);return{loading:Oe,error:H,allKinds:ze!=null?ze:[]}}function Lt(B,H,Oe){let ze=B;return H&&(ze=ze.filter(Ft=>H.some(Ht=>Ht.toLocaleLowerCase("en-US")===Ft.toLocaleLowerCase("en-US")))),Oe&&!B.some(Ft=>Ft.toLocaleLowerCase("en-US")===Oe.toLocaleLowerCase("en-US"))&&(ze=ze.concat([Oe])),ze.sort().reduce((Ft,Ht)=>(Ft[Ht.toLocaleLowerCase("en-US")]=Ht,Ft),{})}const de=(0,v.Z)(B=>(0,p.Z)({root:{...B.typography.h4}}));function ne(B){var H,Oe;const{initialFilter:ze="component",allowedKinds:Mt}=B,Ft=de(),{allKinds:Ht}=ut(),{filters:bn,updateFilters:Cn,queryParameters:{kind:an}}=useEntityList(),Fn=useMemo(()=>[an].flat()[0],[an]),[Un,Jn]=useState((Oe=Fn!=null?Fn:(H=bn.kind)==null?void 0:H.value)!=null?Oe:ze);useEffect(()=>{Fn&&Jn(Fn)},[Fn]),useEffect(()=>{var Xn,Hn;(Xn=bn.kind)!=null&&Xn.value&&Jn((Hn=bn.kind)==null?void 0:Hn.value)},[bn.kind]),useEffect(()=>{Cn({kind:Un?new EntityKindFilter(Un):void 0})},[Un,Cn]);const Yn=Lt(Ht,Mt,Un);return React.createElement(Select,{input:React.createElement(InputBase,null),value:Un.toLocaleLowerCase("en-US"),onChange:Xn=>Jn(Xn.target.value),classes:Ft},Object.keys(Yn).map(Xn=>React.createElement(MenuItem,{value:Xn,key:Xn},`${pluralize(Yn[Xn])}`)))}const S=Object.freeze({createNameColumn(B){function H(Oe){var ze;return((ze=Oe.metadata)==null?void 0:ze.title)||(0,t.$3)(Oe,{defaultKind:B==null?void 0:B.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:Oe},{entity:ze}){return H(Oe).localeCompare(H(ze))},render:({entity:Oe})=>{var ze;return O.createElement(t.dx,{entityRef:Oe,defaultKind:(B==null?void 0:B.defaultKind)||"Component",title:(ze=Oe.metadata)==null?void 0:ze.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:B})=>O.createElement(t.rI,{entityRefs:B.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:B})=>O.createElement(t.rI,{entityRefs:B.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:B})=>{var H,Oe;return O.createElement(O.Fragment,null,(((H=B==null?void 0:B.spec)==null?void 0:H.targets)||((Oe=B==null?void 0:B.spec)==null?void 0:Oe.target))&&O.createElement(c.Or,{text:(B.spec.targets||[B.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:B})=>O.createElement(c.Or,{text:B.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:B})=>O.createElement(O.Fragment,null,B.metadata.tags&&B.metadata.tags.map(H=>O.createElement(A.Z,{key:H,label:H,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(B){return{title:"Title",field:"entity.metadata.title",hidden:B==null?void 0:B.hidden,searchable:!0}},createLabelColumn(B,H){return{title:(H==null?void 0:H.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:Oe})=>{var ze;const Mt=(ze=Oe.metadata)==null?void 0:ze.labels,Ft=Mt&&Mt[B]||(H==null?void 0:H.defaultValue);return O.createElement(O.Fragment,null,Ft&&O.createElement(A.Z,{key:Ft,label:Ft,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),z=(0,te.Z)({root:{color:"#f3ba37"}})(Ge.Z),Q=(B,H)=>{const Oe=ze=>ze.metadata.title||(0,t.$3)(ze,{defaultKind:"Component"});return Oe(B).localeCompare(Oe(H))},me=B=>{var H,Oe,ze;const{columns:Mt,actions:Ft,tableOptions:Ht,subtitle:bn,emptyContent:Cn}=B,{isStarredEntity:an,toggleStarredEntity:Fn}=(0,t.CR)(),{loading:Un,error:Jn,entities:Yn,filters:Xn}=(0,t.wp)(),Hn=(0,O.useMemo)(()=>{var o;return[S.createTitleColumn({hidden:!0}),S.createNameColumn({defaultKind:(o=Xn.kind)==null?void 0:o.value}),...i(),S.createMetadataDescriptionColumn(),S.createTagsColumn()];function i(){var g;const M=[S.createSystemColumn(),S.createOwnerColumn(),S.createSpecTypeColumn(),S.createSpecLifecycleColumn()];switch((g=Xn.kind)==null?void 0:g.value){case"user":return[];case"domain":case"system":return[S.createOwnerColumn()];case"group":case"template":return[S.createSpecTypeColumn()];case"location":return[S.createSpecTypeColumn(),S.createSpecTargetsColumn()];default:return Yn.every(Ee=>Ee.metadata.namespace==="default")?M:[...M,S.createNamespaceColumn()]}}},[(H=Xn.kind)==null?void 0:H.value,Yn]),vr=Xn.type===void 0,pr=(0,m.capitalize)((ze=(Oe=Xn.user)==null?void 0:Oe.value)!=null?ze:"all");if(Jn)return O.createElement("div",null,O.createElement(c.GB,{severity:"error",title:"Could not fetch catalog entities."},O.createElement(c.Oi,{language:"text",text:Jn.toString()})));const cr=[({entity:o})=>{var i;const g=(i=o.metadata.annotations)==null?void 0:i[u.l2],M="View";return{icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},M),O.createElement(_e.Z,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:o})=>{var i;const g=(i=o.metadata.annotations)==null?void 0:i[u.Tf],M="Edit";return{icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},M),O.createElement(Ne.Z,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:o})=>{const i=an(o),g=i?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},g),i?O.createElement(z,null):O.createElement(wt.Z,null)),tooltip:g,onClick:()=>Fn(o)}}],or=Yn.sort(Q).map(o=>{const i=(0,t.hF)(o,u.cz,{kind:"system"}),g=(0,t.hF)(o,u.S4);return{entity:o,resolved:{name:(0,t.$3)(o,{defaultKind:"Component"}),ownedByRelationsTitle:g.map(M=>(0,t.$3)(M,{defaultKind:"group"})).join(", "),ownedByRelations:g,partOfSystemRelationTitle:i.map(M=>(0,t.$3)(M,{defaultKind:"system"})).join(", "),partOfSystemRelations:i}}}),nr=(Mt||Hn).find(o=>o.title==="Type");nr&&(nr.hidden=!vr);const Z=or.length>20;return O.createElement(c.iA,{isLoading:Un,columns:Mt||Hn,options:{paging:Z,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Un,padding:"dense",pageSizeOptions:[20,50,100],...Ht},title:`${pr} (${Yn.length})`,data:or,actions:Ft||cr,subtitle:bn,emptyContent:Cn})};me.columns=S;function xe(B){var H;const{unregisterEntityOptions:Oe,isUnregisterAllowed:ze,onUnregisterEntity:Mt,onClose:Ft}=B,Ht=typeof(Oe==null?void 0:Oe.disableUnregister)=="boolean",bn=(H=!ze||(Ht?!!(Oe!=null&&Oe.disableUnregister):(Oe==null?void 0:Oe.disableUnregister)==="disable"))!=null?H:!1;let Cn=O.createElement(O.Fragment,null);return(Oe==null?void 0:Oe.disableUnregister)!=="hidden"&&(Cn=O.createElement(W.Z,{onClick:()=>{Ft(),Mt()},disabled:bn},O.createElement(K.Z,null,O.createElement(mt.Z,{fontSize:"small"})),O.createElement(Ie.Z,{primary:"Unregister entity"}))),O.createElement(O.Fragment,null,Cn)}const Fe=(0,v.Z)(B=>({button:{color:B.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function He(B){const{UNSTABLE_extraContextMenuItems:H,UNSTABLE_contextMenuOptions:Oe,onUnregisterEntity:ze,onInspectEntity:Mt}=B,[Ft,Ht]=(0,O.useState)(),bn=Fe(),an=(0,Je.N)(St.j8).allowed,Fn=Hn=>{Ht(Hn.currentTarget)},Un=()=>{Ht(void 0)},Jn=(0,P.h_)(P.$v),Yn=(0,O.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>Jn.post({message:"Copied!",severity:"info",display:"transient"}))},[Jn]),Xn=H&&[...H.map(Hn=>O.createElement(W.Z,{key:Hn.title,onClick:()=>{Un(),Hn.onClick()}},O.createElement(K.Z,null,O.createElement(Hn.Icon,{fontSize:"small"})),O.createElement(Ie.Z,{primary:Hn.title}))),O.createElement(C.Z,{key:"the divider is here!"})];return O.createElement(O.Fragment,null,O.createElement(ge.ZP,{title:"More",arrow:!0},O.createElement(T.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Ft,role:"button",onClick:Fn,"data-testid":"menu-button",className:bn.button,id:"long-menu"},O.createElement(oe.Z,null))),O.createElement(Xe.ZP,{open:Boolean(Ft),onClose:Un,anchorEl:Ft,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},O.createElement($t.Z,null,Xn,O.createElement(xe,{unregisterEntityOptions:Oe,isUnregisterAllowed:an,onUnregisterEntity:ze,onClose:Un}),O.createElement(W.Z,{onClick:()=>{Un(),Mt()}},O.createElement(K.Z,null,O.createElement(q.Z,{fontSize:"small"})),O.createElement(Ie.Z,{primary:"Inspect entity"})),O.createElement(W.Z,{onClick:()=>{Un(),Yn()}},O.createElement(K.Z,null,O.createElement(Ae.Z,{fontSize:"small"})),O.createElement(Ie.Z,{primary:"Copy entity URL"})))))}const dt="plugin.catalog.entityLayoutRoute",ae=()=>null;(0,P.R5)(ae,dt,!0),(0,P.R5)(ae,"core.gatherMountPoints",!0);function pe(B){const{entity:H,title:Oe}=B;return O.createElement(L.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},O.createElement(L.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Oe),H&&O.createElement(t.LH,{entity:H}))}function ve(B,H,Oe,ze){var Mt,Ft,Ht,bn,Cn;const an=(Mt=B!=null?B:ze==null?void 0:ze.kind)!=null?Mt:"",Fn=(Ft=H!=null?H:ze==null?void 0:ze.metadata.namespace)!=null?Ft:"";return{headerTitle:`${(Cn=(bn=(Ht=ze==null?void 0:ze.metadata.title)!=null?Ht:Oe)!=null?bn:ze==null?void 0:ze.metadata.name)!=null?Cn:""}${Fn&&Fn!==u.zG?` in ${Fn}`:""}`,headerType:(()=>{let Jn=an.toLocaleLowerCase("en-US");return ze&&ze.spec&&"type"in ze.spec&&(Jn+=" \u2014 ",Jn+=ze.spec.type.toLocaleLowerCase("en-US")),Jn})()}}function Te(B){var H;const{entity:Oe}=B,ze=(0,t.hF)(Oe,u.S4);return O.createElement(O.Fragment,null,ze.length>0&&O.createElement(c.i9,{label:"Owner",value:O.createElement(t.rI,{entityRefs:ze,defaultKind:"Group",color:"inherit"})}),((H=Oe.spec)==null?void 0:H.lifecycle)&&O.createElement(c.i9,{label:"Lifecycle",value:Oe.spec.lifecycle}))}const nt=B=>{var H,Oe,ze;const{UNSTABLE_extraContextMenuItems:Mt,UNSTABLE_contextMenuOptions:Ft,children:Ht,NotFoundComponent:bn}=B,{kind:Cn,namespace:an,name:Fn}=(0,P.Oi)(t.wi),{entity:Un,loading:Jn,error:Yn}=(0,t.ce)(),Xn=(0,Tt.TH)(),Hn=(0,P.vJ)(Ht,g=>g.selectByComponentData({key:dt,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:M})=>{if(Un){if(M.if&&!M.if(Un))return[]}else return[];return[{path:M.path,title:M.title,children:M.children,tabProps:M.tabProps}]}),[Un]),{headerTitle:vr,headerType:pr}=ve(Cn,an,Fn,Un),[cr,or]=(0,O.useState)(!1),[nr,Z]=(0,O.useState)(!1),o=(0,Tt.s0)(),i=async()=>{or(!1),Z(!1),o("/")};return(0,O.useEffect)(()=>{or(!1),Z(!1)},[Xn.pathname]),O.createElement(c.T3,{themeId:(ze=(Oe=(H=Un==null?void 0:Un.spec)==null?void 0:H.type)==null?void 0:Oe.toString())!=null?ze:"home"},O.createElement(c.h4,{title:O.createElement(pe,{title:vr,entity:Un}),pageTitleOverride:vr,type:pr},Un&&O.createElement(O.Fragment,null,O.createElement(Te,{entity:Un}),O.createElement(He,{UNSTABLE_extraContextMenuItems:Mt,UNSTABLE_contextMenuOptions:Ft,onUnregisterEntity:()=>or(!0),onInspectEntity:()=>Z(!0)}))),Jn&&O.createElement(c.Ex,null),Un&&O.createElement(c.tn,{routes:Hn}),Yn&&O.createElement(c.VY,null,O.createElement(pt.Z,{severity:"error"},Yn.toString())),!Jn&&!Yn&&!Un&&O.createElement(c.VY,null,bn||O.createElement(c.GB,{title:"Entity not found"},"There is no ",Cn," with the requested"," ",O.createElement(c.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),O.createElement(t.pp,{open:cr,entity:Un,onConfirm:i,onClose:()=>or(!1)}),O.createElement(t.U_,{open:nr,entity:Un,onClose:()=>Z(!1)}))};nt.Route=ae;function Bt(B){const{open:H,onClose:Oe,onConfirm:ze,entity:Mt}=B,[Ft,Ht]=(0,O.useState)(!1),bn=(0,P.h_)(t.Ah),Cn=(0,P.h_)(P.$v),an=async()=>{Ht(!0);try{const Fn=Mt.metadata.uid;await bn.removeEntityByUid(Fn),ze()}catch(Fn){(0,rn.BD)(Fn),Cn.post({message:Fn.message})}finally{Ht(!1)}};return O.createElement(ot.Z,{open:H,onClose:Oe},O.createElement(Vt.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),O.createElement(kt.Z,null,O.createElement(J.Z,{variant:"contained",color:"secondary",disabled:Ft,onClick:an},"Delete"),O.createElement(J.Z,{onClick:Oe,color:"primary"},"Cancel")))}function Ut(B){var H,Oe;return((Oe=(H=B==null?void 0:B.metadata)==null?void 0:H.annotations)==null?void 0:Oe["backstage.io/orphan"])==="true"}function Dt(){const B=(0,Tt.s0)(),H=(0,P.tg)(vn),[Oe,ze]=(0,O.useState)(!1),{entity:Mt}=(0,t.X2)(),Ft=async()=>{ze(!1),B(H())};return O.createElement(O.Fragment,null,O.createElement(pt.Z,{severity:"warning",onClick:()=>ze(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),O.createElement(Bt,{open:Oe,entity:Mt,onConfirm:Ft,onClose:()=>ze(!1)}))}const Ce=B=>B.error&&B.level==="error"&&B.type===Kt.mk;async function we(B,H){return{items:(await H.getEntityAncestors({entityRef:B})).items.map(Mt=>{var Ft,Ht;return{errors:((Ht=(Ft=Mt.entity.status)==null?void 0:Ft.items)!=null?Ht:[]).filter(Ce).map(an=>an.error).filter(an=>Boolean(an)),entity:Mt.entity}}).filter(Mt=>Mt.errors.length>0)}}async function Ke(B,H){const Oe=H.apis.get(t.Ah);if(!Oe)throw new Error(`No implementation available for ${t.Ah}`);return(await we((0,u.eE)(B),Oe)).items.length>0}function Ye(){const{entity:B}=(0,t.X2)(),H=(0,u.eE)(B),Oe=(0,P.h_)(t.Ah),{loading:ze,error:Mt,value:Ft}=(0,N.default)(async()=>we(H,Oe),[H,Oe]);return Mt?O.createElement(L.Z,{mb:1},O.createElement(c.Gk,{error:Mt})):ze||!Ft?null:O.createElement(O.Fragment,null,Ft.items.map((Ht,bn)=>O.createElement(L.Z,{key:bn,mb:1},(0,u.eE)(B)!==(0,u.eE)(Ht.entity)&&O.createElement(L.Z,{p:1},"The error below originates from"," ",O.createElement(t.dx,{entityRef:Ht.entity})),Ht.errors.map((Cn,an)=>O.createElement(c.Gk,{key:an,error:Cn})))))}const We="core.backstage.entitySwitch",Ct=B=>null;(0,P.R5)(Ct,We,!0);const It=B=>{var H,Oe;const{entity:ze,loading:Mt}=(0,t.ce)(),Ft=(0,P.I_)(),Ht=(0,P.vJ)(B.children,Cn=>Cn.selectByComponentData({key:We,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(an=>{if(Mt)return[];const{if:Fn,children:Un}=an.props;return ze?[{if:Fn==null?void 0:Fn(ze,{apis:Ft}),children:Un}]:[{if:Fn===void 0,children:Un}]}),[Ft,ze,Mt]);if(Ht.some(Cn=>typeof Cn.if=="object"&&"then"in Cn.if))return O.createElement(jt,{results:Ht,renderMultipleMatches:B.renderMultipleMatches});if(B.renderMultipleMatches==="all"){const Cn=Ht.filter(an=>an.if).map(an=>an.children);return Cn.length===0?Gt(Ht):O.createElement(O.Fragment,null,Cn)}return(Oe=(H=Ht.find(Cn=>Cn.if))==null?void 0:H.children)!=null?Oe:Gt(Ht)};function jt({results:B,renderMultipleMatches:H}){const{loading:Oe,value:ze}=(0,N.default)(async()=>{var Mt;const Ft=B.map(async({if:Ht,children:bn})=>{try{if(await Ht)return bn}catch{}return null});if(H==="all"){const Ht=(await Promise.all(Ft)).filter(Boolean);return Ht.length===0?Gt(B):O.createElement(O.Fragment,null,Ht)}return(Mt=(await Promise.all(Ft)).find(Boolean))!=null?Mt:Gt(B)},[B]);return Oe||!ze?null:ze}function Gt(B){var H,Oe;return(Oe=(H=B.filter(ze=>ze.if===void 0)[0])==null?void 0:H.children)!=null?Oe:null}It.Case=Ct;function _n(B,H){return Boolean(B&&typeof B=="string"&&(B==null?void 0:B.toLocaleLowerCase("en-US"))===(H==null?void 0:H.toLocaleLowerCase("en-US")))}function wn(B,H){return typeof H=="string"?_n(B,H):H.length===0||H.some(Oe=>_n(B,Oe))}function xn(B){return Mn({kind:B})}function Tn(B){return Mn({kind:"component",type:B})}function kn(B){return Mn({kind:"resource",type:B})}function Mn(B){return H=>{var Oe;return!(B.kind&&!wn(H.kind,B.kind)||B.type&&!wn((Oe=H.spec)==null?void 0:Oe.type,B.type))}}function yn(B){return H=>{var Oe;return wn((Oe=H.metadata)==null?void 0:Oe.namespace,B)}}const zn=null,lt=t._i.Filters,ye=t._i.Content,Ze=`metadata:
  name: example
  labels:
    javaVersion: 1.2.3`,Ue=(0,v.Z)(B=>({code:{borderRadius:6,margin:`${B.spacing(2)}px 0px`,background:B.palette.type==="dark"?"#444":B.palette.common.white}}),{name:"PluginCatalogEntityLabelsEmptyState"});function vt(){const B=Ue();return O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"body1"},"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:"),O.createElement("div",{className:B.code},O.createElement(c.Oi,{text:Ze,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6],customStyle:{background:"inherit",fontSize:"115%"}})),O.createElement(J.Z,{variant:"contained",color:"primary",target:"_blank",href:"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional"},"Read more"))}const it=(0,v.Z)(B=>({key:{fontWeight:"bold"}})),yt=B=>{var H;const{variant:Oe,title:ze}=B,{entity:Mt}=(0,t.X2)(),Ft=it(),Ht=[{render:Cn=>O.createElement(h.Z,{className:Ft.key,variant:"body2"},Cn.key)},{field:"value"}],bn=(H=Mt==null?void 0:Mt.metadata)==null?void 0:H.labels;return O.createElement(c.rJ,{title:ze||"Labels",variant:Oe},!bn||Object.keys(bn).length===0?O.createElement(vt,null):O.createElement(c.iA,{columns:Ht,data:Object.keys(bn).map(Cn=>({key:Cn,value:bn[Cn]})),options:{search:!1,showTitle:!0,loadingType:"linear",header:!1,padding:"dense",pageSize:5,toolbar:!1,paging:Object.keys(bn).length>5}}))};function ft(B){var H,Oe;return(H=B==null?void 0:B.metadata)!=null&&H.labels?Object.keys((Oe=B==null?void 0:B.metadata)==null?void 0:Oe.labels).some(Boolean):!1}const Zt=(0,P.rx)({id:"catalog",apis:[(0,P.ni)({api:t.Ah,deps:{discoveryApi:P.NW,fetchApi:P.gP},factory:({discoveryApi:B,fetchApi:H})=>new Kt.MS({discoveryApi:B,fetchApi:H})}),(0,P.ni)({api:t.p3,deps:{storageApi:P.E6},factory:({storageApi:B})=>new ct({storageApi:B})})],routes:{catalogIndex:vn,catalogEntity:t.wi},externalRoutes:{createComponent:hn,viewTechDoc:un},__experimentalConfigure(B){return{...{createButtonTitle:"Create"},...B}}}),tn=Zt.provide((0,P.P4)({name:"CatalogIndexPage",component:()=>e.e(4107).then(e.bind(e,64107)).then(B=>B.CatalogPage),mountPoint:vn})),gn=Zt.provide((0,P.P4)({name:"CatalogEntityPage",component:()=>e.e(9958).then(e.bind(e,39958)).then(B=>B.CatalogEntityPage),mountPoint:t.wi})),Zn=Zt.provide((0,P.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(642).then(e.bind(e,90642)).then(B=>B.AboutCard)}})),er=Zt.provide((0,P.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(3202).then(e.bind(e,73202)).then(B=>B.EntityLinksCard)}})),tr=Zt.provide((0,P.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1972).then(e.bind(e,41972)).then(B=>B.EntityLabelsCard)}})),Wn=Zt.provide((0,P.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(8737).then(e.bind(e,78737)).then(B=>B.HasSystemsCard)}})),jn=Zt.provide((0,P.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(3355).then(e.bind(e,23355)).then(B=>B.HasComponentsCard)}})),rr=Zt.provide((0,P.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(9507).then(e.bind(e,9507)).then(B=>B.HasSubcomponentsCard)}})),D=Zt.provide((0,P.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(1215).then(e.bind(e,71215)).then(B=>B.HasResourcesCard)}})),I=Zt.provide((0,P.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(4170).then(e.bind(e,34170)).then(B=>B.DependsOnComponentsCard)}})),V=Zt.provide((0,P.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(9371).then(e.bind(e,79371)).then(B=>B.DependencyOfComponentsCard)}})),ie=Zt.provide((0,P.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(1602).then(e.bind(e,11602)).then(B=>B.DependsOnResourcesCard)}})),Me=Zt.provide((0,P.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(7867).then(e.bind(e,47867)).then(B=>B.RelatedEntitiesCard)}})),rt=Zt.provide((0,$e.E5)({name:"CatalogSearchResultListItem",component:()=>e.e(638).then(e.bind(e,40638)).then(B=>B.CatalogSearchResultListItem),predicate:B=>B.type==="software-catalog"}))},16673:function(Rt,d,e){e.d(d,{BL:function(){return n.o},Cy:function(){return n.m},Eq:function(){return n.u},Es:function(){return n.C},FZ:function(){return n.r},Hz:function(){return n.t},Kf:function(){return n.F},PA:function(){return n.v},Tu:function(){return n.e},_l:function(){return n.z},bM:function(){return n.g},dN:function(){return n.d},f2:function(){return n.p},im:function(){return n.x},jF:function(){return n.j},mr:function(){return n.w},o6:function(){return n.k},oU:function(){return n.n},p$:function(){return n.y},rR:function(){return n.f},yf:function(){return n.l}});var n=e(92449),l=e(82394),u=e.n(l),m=e(34520),a=e(76635),c=e.n(a),P=e(80236),b=e(30705),t=e(49462),v=e(73495),h=e(2784),$=e(19928),L=e.n($),k=e(52963),G=e(75650),E=e(32272),A=e(88285),x=e(92573)},42214:function(Rt,d,e){e.d(d,{IJ:function(){return tt},Oz:function(){return Lt},Q3:function(){return j},fX:function(){return wt},i4:function(){return at}});var n=e(30705),l=e(1854),u=e(89393),m=e(2784),a=e(73495),c=e(39857),P=e(73557),b=e(79692),t=e(27616),v=e(8284),h=e(90436),$=e(4614),L=e(80030),k=e(69087),G=e(35111),E=e(14498),A=e(89571),x=e(15584),f=e(49378),T=e(70660),C=e(91256),_=e(37390),p=e(95544),W=e(67358),K=e(27556),Ie=e(97485),ge=e(61837),Xe=e(77277),$t=e(38016),ot=e(69001),Vt=e(26228),kt=e(80236),J=e(64279),sn=e(30254),Se=e(43266),Ne=e(58838),O=e(77446),Le=e(26883);const ce=(0,n.T0)({id:"plugin.githubactions.service"});class R{constructor(ne){this.configApi=ne.configApi,this.githubAuthApi=ne.githubAuthApi}async getOctokit(ne){var S;const z=await this.githubAuthApi.getAccessToken(["repo"]),me=(0,l.MY)((S=this.configApi.getOptionalConfigArray("integrations.github"))!=null?S:[]).find(Fe=>Fe.host===ne),xe=me==null?void 0:me.apiBaseUrl;return new u.v({auth:z,baseUrl:xe})}async reRunWorkflow(ne){const{hostname:S,owner:z,repo:Q,runId:me}=ne;return(await this.getOctokit(S)).actions.reRunWorkflow({owner:z,repo:Q,run_id:me})}async listWorkflowRuns(ne){const{hostname:S,owner:z,repo:Q,pageSize:me=100,page:xe=0,branch:Fe}=ne;return(await(await this.getOctokit(S)).actions.listWorkflowRunsForRepo({owner:z,repo:Q,per_page:me,page:xe,...Fe?{branch:Fe}:{}})).data}async getWorkflow(ne){const{hostname:S,owner:z,repo:Q,id:me}=ne;return(await(await this.getOctokit(S)).actions.getWorkflow({owner:z,repo:Q,workflow_id:me})).data}async getWorkflowRun(ne){const{hostname:S,owner:z,repo:Q,id:me}=ne;return(await(await this.getOctokit(S)).actions.getWorkflowRun({owner:z,repo:Q,run_id:me})).data}async listJobsForWorkflowRun(ne){const{hostname:S,owner:z,repo:Q,id:me,pageSize:xe=100,page:Fe=0}=ne;return(await(await this.getOctokit(S)).actions.listJobsForWorkflowRun({owner:z,repo:Q,run_id:me,per_page:xe,page:Fe})).data}async downloadJobLogsForWorkflowRun(ne){const{hostname:S,owner:z,repo:Q,runId:me}=ne;return(await(await this.getOctokit(S)).actions.downloadJobLogsForWorkflowRun({owner:z,repo:Q,job_id:me})).data}}var N=(de=>(de[de.success=0]="success",de[de.failure=1]="failure",de[de.pending=2]="pending",de[de.running=3]="running",de))(N||{});const te=(0,n.NT)({id:"github-actions"}),_e=(0,n.Rz)({id:"github-actions/build",path:"/:id",parent:te}),Ge=(0,n.rx)({id:"github-actions",apis:[(0,n.ni)({api:ce,deps:{configApi:n.Ds,githubAuthApi:n.F4},factory:({configApi:de,githubAuthApi:ne})=>new R({configApi:de,githubAuthApi:ne})})],routes:{entityContent:te}}),wt=Ge.provide((0,n.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return ue}).then(de=>de.Router),mountPoint:te})),pt=Ge.provide((0,n.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.LatestWorkflowRunCard)}})),Tt=Ge.provide((0,n.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.LatestWorkflowsForBranchCard)}})),q=Ge.provide((0,n.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.RecentWorkflowRunsCard)}})),oe="github.com/project-slug",Ae=de=>{var ne,S;return(S=(ne=de==null?void 0:de.metadata.annotations)==null?void 0:ne[oe])!=null?S:""},Je=({status:de,conclusion:ne})=>{if(de===void 0)return null;switch(de.toLocaleLowerCase("en-US")){case"queued":return m.createElement(m.Fragment,null,m.createElement(kt.wA,null)," Queued");case"in_progress":return m.createElement(m.Fragment,null,m.createElement(kt.VC,null)," In progress");case"completed":switch(ne==null?void 0:ne.toLocaleLowerCase("en-US")){case"skipped":return m.createElement(m.Fragment,null,m.createElement(kt.dh,null)," Aborted");case"timed_out":return m.createElement(m.Fragment,null,m.createElement(kt.Pd,null)," Timed out");case"failure":return m.createElement(m.Fragment,null,m.createElement(kt.vK,null)," Error");default:return m.createElement(m.Fragment,null,m.createElement(kt.Kq,null)," Completed")}default:return m.createElement(m.Fragment,null,m.createElement(kt.wA,null)," Pending")}},St=({hostname:de,owner:ne,repo:S})=>{const z=(0,n.h_)(ce),{id:Q}=(0,n.Oi)(_e);return(0,J.default)(async()=>{if(!S||!ne)throw new Error("No repo/owner provided");const me=await z.listJobsForWorkflowRun({hostname:de,owner:ne,repo:S,id:parseInt(Q,10)});return{total_count:me.total_count,jobs:me.jobs.map(xe=>{var Fe,He,dt,ae;return{html_url:(Fe=xe.html_url)!=null?Fe:void 0,status:xe.status,conclusion:(He=xe.conclusion)!=null?He:void 0,started_at:xe.started_at,completed_at:(dt=xe.completed_at)!=null?dt:void 0,id:xe.id,name:xe.name,steps:(ae=xe.steps)==null?void 0:ae.map(pe=>{var ve,Te,nt;return{name:pe.name,status:pe.status,conclusion:(ve=pe.conclusion)!=null?ve:void 0,number:pe.number,started_at:(Te=pe.started_at)!=null?Te:void 0,completed_at:(nt=pe.completed_at)!=null?nt:void 0}})}})}},[S,ne,Q])},mt=({hostname:de,owner:ne,repo:S})=>{const z=(0,n.h_)(ce),{id:Q}=(0,n.Oi)(_e);return(0,J.default)(async()=>S&&ne?z.getWorkflowRun({hostname:de,owner:ne,repo:S,id:parseInt(Q,10)}):Promise.reject(new Error("No repo/owner provided")),[S,ne,Q])},rn=({hostname:de,owner:ne,repo:S,id:z})=>{const Q=(0,n.h_)(ce);return(0,J.default)(async()=>S&&ne?Q.downloadJobLogsForWorkflowRun({hostname:de,owner:ne,repo:S,runId:z}):Promise.reject("No repo/owner provided"),[S,ne,z])},Kt=(0,b.Z)(de=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:de.palette.background.default}})),$e=({entity:de,runId:ne,inProgress:S})=>{var z;const Q=(0,n.h_)(n.Ds),me=Kt(),xe=Ae(de),Fe=(0,l.MY)((z=Q.getOptionalConfigArray("integrations.github"))!=null?z:[])[0].host,[He,dt]=xe&&xe.split("/")||[],ae=rn({hostname:Fe,owner:He,repo:dt,id:ne}),pe=ae.value?String(ae.value):void 0,[ve,Te]=m.useState(!1),nt=()=>{Te(!0)},Bt=()=>{Te(!1)};return m.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},disabled:S},m.createElement(v.Z,{expandIcon:m.createElement($t.Z,null),IconButtonProps:{className:me.button}},m.createElement(h.Z,{variant:"button"},ae.loading?m.createElement($.Z,null):"Job Log"),m.createElement(L.ZP,{title:"Open Log",TransitionComponent:k.Z,arrow:!0},m.createElement(sn.Z,{onClick:Ut=>{Ut.stopPropagation(),nt()},style:{marginLeft:"auto"}})),m.createElement(G.Z,{className:me.modal,onClick:Ut=>Ut.stopPropagation(),open:ve,onClose:Bt},m.createElement(E.Z,{in:ve},m.createElement("div",{className:me.modalLogContainer},m.createElement(kt.nU,{text:pe!=null?pe:"No Values Found",classes:{root:me.log}}))))),pe&&m.createElement("div",{className:me.normalLogContainer},m.createElement(kt.nU,{text:pe,classes:{root:me.log}})))},_t=(0,b.Z)(de=>({root:{maxWidth:720,margin:de.spacing(2)},title:{padding:de.spacing(1,0,2,0)},table:{padding:de.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),ct=(de,ne)=>{if(!de||!ne)return"";const S=Vt.ou.fromISO(de);return(ne?Vt.ou.fromISO(ne):Vt.ou.now()).diff(S).toFormat("m 'minutes' s 'seconds'")},hn=({step:de})=>{var ne;return m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(f.Z,{primary:de.name,secondary:ct(de.started_at,de.completed_at)})),m.createElement(x.Z,null,m.createElement(Je,{status:de.status.toLocaleUpperCase("en-US"),conclusion:(ne=de.conclusion)==null?void 0:ne.toLocaleUpperCase("en-US")})))},un=({job:de,className:ne,entity:S})=>{var z;const Q=_t();return m.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},className:ne},m.createElement(v.Z,{expandIcon:m.createElement($t.Z,null),IconButtonProps:{className:Q.button}},m.createElement(h.Z,{variant:"button"},de.name," (",ct(de.started_at,de.completed_at),")")),m.createElement(T.Z,{className:Q.accordionDetails},m.createElement(C.Z,null,m.createElement(_.Z,null,(z=de.steps)==null?void 0:z.map(me=>m.createElement(hn,{key:me.number,step:me}))))),de.status==="queued"||de.status==="in_progress"?m.createElement($e,{runId:de.id,inProgress:!0,entity:S}):m.createElement($e,{runId:de.id,inProgress:!1,entity:S}))},vn=({jobs:de,entity:ne})=>{const S=_t();return m.createElement(p.Z,null,de&&de.total_count>0&&de.jobs.map(z=>m.createElement(un,{key:z.id,job:z,className:z.status!=="success"?S.failed:S.success,entity:ne})))},st=({entity:de})=>{var ne,S,z,Q,me,xe,Fe,He,dt,ae,pe,ve,Te,nt,Bt,Ut;const Dt=(0,n.h_)(n.Ds),Ce=Ae(de),we=(0,l.MY)((ne=Dt.getOptionalConfigArray("integrations.github"))!=null?ne:[])[0].host,[Ke,Ye]=Ce&&Ce.split("/")||[],We=mt({hostname:we,owner:Ke,repo:Ye}),Ct=St({hostname:we,owner:Ke,repo:Ye}),It=_t();return We.error&&We.error.message?m.createElement(h.Z,{variant:"h6",color:"error"},"Failed to load build, ",We.error.message):We.loading?m.createElement(W.Z,null):m.createElement("div",{className:It.root},m.createElement(p.Z,{mb:3},m.createElement(kt.Oo,{"aria-label":"breadcrumb"},m.createElement(kt.rU,{to:".."},"Workflow runs"),m.createElement(h.Z,null,"Workflow run details"))),m.createElement(C.Z,{component:K.Z,className:It.table},m.createElement(_.Z,null,m.createElement(Ie.Z,null,m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Branch")),m.createElement(x.Z,null,(S=We.value)==null?void 0:S.head_branch)),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Message")),m.createElement(x.Z,null,(Q=(z=We.value)==null?void 0:z.head_commit)==null?void 0:Q.message)),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Commit ID")),m.createElement(x.Z,null,(xe=(me=We.value)==null?void 0:me.head_commit)==null?void 0:xe.id)),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Workflow")),m.createElement(x.Z,null,(Fe=We.value)==null?void 0:Fe.name)),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Status")),m.createElement(x.Z,null,m.createElement(Je,{status:((He=We.value)==null?void 0:He.status)||void 0,conclusion:((dt=We.value)==null?void 0:dt.conclusion)||void 0}))),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Author")),m.createElement(x.Z,null,`${(ve=(pe=(ae=We.value)==null?void 0:ae.head_commit)==null?void 0:pe.author)==null?void 0:ve.name} (${(Bt=(nt=(Te=We.value)==null?void 0:Te.head_commit)==null?void 0:nt.author)==null?void 0:Bt.email})`)),m.createElement(A.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Links")),m.createElement(x.Z,null,((Ut=We.value)==null?void 0:Ut.html_url)&&m.createElement(kt.rU,{to:We.value.html_url},"Workflow runs on GitHub"," ",m.createElement(ot.Z,{className:It.externalLinkIcon})))),m.createElement(A.Z,null,m.createElement(x.Z,{colSpan:2},m.createElement(h.Z,{noWrap:!0},"Jobs"),Ct.loading?m.createElement($.Z,null):m.createElement(vn,{jobs:Ct.value,entity:de})))))))};function Pt({hostname:de,owner:ne,repo:S,branch:z,initialPageSize:Q=5}){const me=(0,n.h_)(ce),xe=(0,n.h_)(n.VE),[Fe,He]=(0,m.useState)(0),[dt,ae]=(0,m.useState)(0),[pe,ve]=(0,m.useState)(Q),{loading:Te,value:nt,retry:Bt,error:Ut}=(0,O.Z)(async()=>{const Dt=await me.listWorkflowRuns({hostname:de,owner:ne,repo:S,pageSize:pe,page:dt+1,branch:z});return He(Dt.total_count),Dt.workflow_runs.map(Ce=>{var we,Ke,Ye,We,Ct,It,jt,Gt,_n;return{workflowName:(we=Ce.name)!=null?we:void 0,message:(Ke=Ce.head_commit)==null?void 0:Ke.message,id:`${Ce.id}`,onReRunClick:async()=>{try{await me.reRunWorkflow({hostname:de,owner:ne,repo:S,runId:Ce.id})}catch(wn){xe.post(new Error(`Failed to rerun the workflow: ${wn.message}`))}},source:{branchName:(Ye=Ce.head_branch)!=null?Ye:void 0,commit:{hash:(We=Ce.head_commit)==null?void 0:We.id,url:(jt=(Ct=Ce.head_repository)==null?void 0:Ct.branches_url)==null?void 0:jt.replace("{/branch}",(It=Ce.head_branch)!=null?It:"")}},status:(Gt=Ce.status)!=null?Gt:void 0,conclusion:(_n=Ce.conclusion)!=null?_n:void 0,url:Ce.url,githubUrl:Ce.html_url}})},[dt,pe,S,ne]);return[{page:dt,pageSize:pe,loading:Te,runs:nt,projectName:`${ne}/${S}`,total:Fe,error:Ut},{runs:nt,setPage:ae,setPageSize:ve,retry:Bt}]}const fn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:de=>{const ne=()=>{const S=(0,n.tg)(_e);return m.createElement(kt.rU,{component:c.rU,to:S({id:de.id})},de.message)};return m.createElement(ne,null)}},{title:"Source",render:de=>{var ne,S;return m.createElement(h.Z,{variant:"body2",noWrap:!0},m.createElement(h.Z,{paragraph:!0,variant:"body2"},(ne=de.source)==null?void 0:ne.branchName),m.createElement(h.Z,{paragraph:!0,variant:"body2"},(S=de.source)==null?void 0:S.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:de=>m.createElement(p.Z,{display:"flex",alignItems:"center"},m.createElement(Je,{status:de.status,conclusion:de.conclusion}))},{title:"Actions",render:de=>m.createElement(L.ZP,{title:"Rerun workflow"},m.createElement(ge.Z,{onClick:de.onReRunClick},m.createElement(Se.Z,null))),width:"10%"}],pn=({projectName:de,loading:ne,pageSize:S,page:z,retry:Q,runs:me,onChangePage:xe,onChangePageSize:Fe,total:He})=>m.createElement(kt.iA,{isLoading:ne,options:{paging:!0,pageSize:S,padding:"dense"},totalCount:He,page:z,actions:[{icon:()=>m.createElement(Le.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Q()}],data:me!=null?me:[],onPageChange:xe,onRowsPerPageChange:Fe,style:{width:"100%"},title:m.createElement(p.Z,{display:"flex",alignItems:"center"},m.createElement(Ne.Z,null),m.createElement(p.Z,{mr:1}),m.createElement(h.Z,{variant:"h6"},de)),columns:fn}),fe=({entity:de,branch:ne})=>{var S;const z=(0,n.h_)(n.Ds),Q=Ae(de),me=(0,l.MY)((S=z.getOptionalConfigArray("integrations.github"))!=null?S:[])[0].host,[xe,Fe]=(Q!=null?Q:"/").split("/"),[{runs:He,...dt},{retry:ae,setPage:pe,setPageSize:ve}]=Pt({hostname:me,owner:xe,repo:Fe,branch:ne}),Te=me||"github.com";return!dt.loading&&!He?m.createElement(kt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:m.createElement(Xe.Z,{variant:"contained",color:"primary",href:`https://${Te}/${Q}/actions/new`},"Create new Workflow")}):m.createElement(pn,{...dt,runs:He,loading:dt.loading,retry:ae,onChangePageSize:ve,onChangePage:pe})},j=de=>{var ne;return Boolean((ne=de.metadata.annotations)==null?void 0:ne[oe])};var ue=Object.freeze({__proto__:null,isGithubActionsAvailable:j,Router:()=>{const{entity:de}=(0,a.X2)();return j(de)?m.createElement(P.Z5,null,m.createElement(P.AW,{path:"/",element:m.createElement(fe,{entity:de})}),m.createElement(P.AW,{path:`${_e.path}`,element:m.createElement(st,{entity:de})}),")"):m.createElement(kt.sk,{annotation:oe})}});const he=(0,b.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),De=de=>{var ne;const{error:S,loading:z,lastRun:Q,branch:me}=de,xe=he();return S?m.createElement(h.Z,null,"Couldn't fetch latest ",me," run"):z?m.createElement(W.Z,null):m.createElement(kt.xT,{metadata:{status:m.createElement(m.Fragment,null,m.createElement(Je,{status:Q.status,conclusion:Q.conclusion})),message:Q.message,url:m.createElement(kt.rU,{to:(ne=Q.githubUrl)!=null?ne:""},"See more on GitHub"," ",m.createElement(ot.Z,{className:xe.externalLinkIcon}))}})},at=de=>{var ne,S,z,Q;const{branch:me="master",variant:xe}=de,{entity:Fe}=(0,a.X2)(),He=(0,n.h_)(n.Ds),dt=(0,n.h_)(n.VE),ae=(0,l.MY)((ne=He.getOptionalConfigArray("integrations.github"))!=null?ne:[])[0].host,[pe,ve]=((z=(S=Fe==null?void 0:Fe.metadata.annotations)==null?void 0:S[oe])!=null?z:"/").split("/"),[{runs:Te,loading:nt,error:Bt}]=Pt({hostname:ae,owner:pe,repo:ve,branch:me}),Ut=(Q=Te==null?void 0:Te[0])!=null?Q:{};return(0,m.useEffect)(()=>{Bt&&dt.post(Bt)},[Bt,dt]),m.createElement(kt.rJ,{title:`Last ${me} build`,variant:xe},m.createElement(De,{error:Bt,loading:nt,branch:me,lastRun:Ut}))},tt=de=>{const{branch:ne="master",variant:S}=de,{entity:z}=(0,a.X2)();return m.createElement(kt.rJ,{title:`Last ${ne} build`,variant:S},m.createElement(fe,{branch:ne,entity:z}))},ut=de=>de.split(`
`)[0],Lt=de=>{var ne,S,z;const{branch:Q,dense:me=!1,limit:xe=5,variant:Fe}=de,{entity:He}=(0,a.X2)(),dt=(0,n.h_)(n.Ds),ae=(0,n.h_)(n.VE),pe=(0,l.MY)((ne=dt.getOptionalConfigArray("integrations.github"))!=null?ne:[])[0].host,[ve,Te]=((z=(S=He==null?void 0:He.metadata.annotations)==null?void 0:S[oe])!=null?z:"/").split("/"),[{runs:nt=[],loading:Bt,error:Ut}]=Pt({hostname:pe,owner:ve,repo:Te,branch:Q,initialPageSize:xe});(0,m.useEffect)(()=>{Ut&&ae.post(Ut)},[Ut,ae]);const Dt=pe||"github.com",Ce=(0,n.tg)(_e);return Ut?m.createElement(kt.yu,{title:Ut.message,error:Ut}):m.createElement(kt.rJ,{title:"Recent Workflow Runs",subheader:Q?`Branch: ${Q}`:"All Branches",noPadding:!0,variant:Fe},nt.length?m.createElement(kt.iA,{isLoading:Bt,options:{search:!1,paging:!1,padding:me?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:we=>{var Ke;return m.createElement(kt.rU,{component:c.rU,to:Ce({id:we.id})},ut((Ke=we.message)!=null?Ke:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Je}],data:nt}):m.createElement("div",{style:{textAlign:"center"}},m.createElement(h.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),m.createElement(h.Z,{variant:"body2"},m.createElement(kt.rU,{to:`https://${Dt}/${ve}/${Te}/actions/new`},"Create a new workflow"))))}},59235:function(Rt,d,e){e.d(d,{$M:function(){return ce},Eg:function(){return N},Jh:function(){return Kt},Yq:function(){return pn},jJ:function(){return fe},jQ:function(){return te},oy:function(){return mt},qJ:function(){return oe},rw:function(){return R},w1:function(){return Le}});var n=e(30705),l=e(34520),u=e(73495),m=e(79692),a=e(12420),c=e(60905),P=e(95544),b=e(90436),t=e(82938),v=e(38402),h=e(86136),$=e(49378),L=e(85256),k=e(61837),G=e(11776),E=e(80030),A=e(9520),x=e(76637),f=e(2784),T=e(16060),C=e(64279),_=e(80236),p=e(73655),W=e(99688),K=e(52866),Ie=e(27604),ge=e(13384),Xe=e(62367),$t=e(52160),ot=e(98685),Vt=e(19928),kt=e.n(Vt),J=e(14162),sn=e.n(J),Se=e(19126),Ne=e.n(Se);const O=(0,n.x8)({id:"catalog-index"}),Le=(0,n.rx)({id:"org",externalRoutes:{catalogIndex:O}}),ce=Le.provide((0,n.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(j=>j.GroupProfileCard)}})),R=Le.provide((0,n.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(j=>j.MembersListCard)}})),N=Le.provide((0,n.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(j=>j.OwnershipCard)}})),te=Le.provide((0,n.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(j=>j.UserProfileCard)}})),_e=async(j,X)=>(j.length===0?{items:[]}:await X.getEntities({filter:{kind:"User","relations.memberof":j.map(he=>(0,l.eE)({kind:"group",namespace:he.namespace.toLocaleLowerCase("en-US"),name:he.name.toLocaleLowerCase("en-US")}))}})).items,Ge=async(j,X)=>{var ue;const he=new Map,at=[{kind:j.kind,namespace:(ue=j.metadata.namespace)!=null?ue:l.zG,name:j.metadata.name}],tt=[];for(;at.length>0;){const ut=at.shift(),Lt=await X.getEntityByRef(ut);he.set((0,l.eE)(ut),!0);const de=(0,u.hF)(Lt,l._b,{kind:"Group"}).filter(ne=>!he.has((0,l.eE)(ne)));de.forEach(ne=>he.set((0,l.eE)(ne),!0)),at.push(...de),tt.push(...de)}return tt},wt=async(j,X)=>_e(await Ge(j,X),X),pt=j=>{const X=new Map;return j.filter(ue=>{const he=(0,l.eE)(ue),De=X.has(he);return X.set(he,!0),!De})},Tt=(0,m.Z)(j=>(0,a.Z)({card:{border:`1px solid ${j.palette.divider}`,boxShadow:j.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:j.spacing(4,1,1),flex:"1",minWidth:"0px"}})),q=j=>{var X;const ue=Tt(),{metadata:{name:he,description:De},spec:{profile:at}}=j.member,tt=(X=at==null?void 0:at.displayName)!=null?X:he;return f.createElement(c.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},f.createElement(P.Z,{className:ue.card},f.createElement(P.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},f.createElement(_.qE,{displayName:tt,picture:at==null?void 0:at.picture,customStyles:{position:"absolute",top:"-2rem"}}),f.createElement(P.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},f.createElement(b.Z,{variant:"h6"},f.createElement(_.rU,{"data-testid":"user-link",to:(0,T.Gn)(`/catalog/:namespace/user/${he}`,(0,u.hd)(j.member))},f.createElement(_.Or,{text:tt}))),(at==null?void 0:at.email)&&f.createElement(_.rU,{to:`mailto:${at.email}`},f.createElement(_.Or,{text:at.email})),De&&f.createElement(b.Z,{variant:"subtitle2"},De)))))},oe=j=>{var X;const{memberDisplayTitle:ue="Members",pageSize:he=50,showAggregateMembersToggle:De}=j,{entity:at}=(0,u.X2)(),{metadata:{name:tt,namespace:ut},spec:{profile:Lt}}=at,de=(0,n.h_)(u.Ah),ne=(X=Lt==null?void 0:Lt.displayName)!=null?X:tt,S=ut||l.zG,[z,Q]=f.useState(1),me=(Dt,Ce)=>{Q(Ce)},[xe,Fe]=(0,f.useState)(!1),{loading:He,value:dt}=(0,C.default)(async()=>De?await wt(at,de):[],[de,at,De]),{loading:ae,error:pe,value:ve}=(0,C.default)(async()=>(await de.getEntities({filter:{kind:"User","relations.memberof":[(0,l.eE)({kind:"group",namespace:S.toLocaleLowerCase("en-US"),name:tt.toLocaleLowerCase("en-US")})]}})).items,[de,at]),Te=pt([...ve!=null?ve:[],...dt&&xe?dt:[]].sort((Dt,Ce)=>(0,l.eE)(Dt).localeCompare((0,l.eE)(Ce))));if(ae)return f.createElement(_.Ex,null);if(pe)return f.createElement(_.Gk,{error:pe});const nt=Math.ceil(((Te==null?void 0:Te.length)||0)/he),Bt=nt<2?"":`, page ${z} of ${nt}`,Ut=f.createElement(x.Z,{count:nt,page:z,onChange:me,showFirstButton:!0,showLastButton:!0});return f.createElement(c.Z,{item:!0},f.createElement(_.rJ,{title:`${ue} (${(Te==null?void 0:Te.length)||0}${Bt})`,subheader:`of ${ne}`,...nt<=1?{}:{actions:Ut}},De&&f.createElement(f.Fragment,null,"Direct Members",f.createElement(t.Z,{color:"primary",checked:xe,onChange:()=>{Fe(!xe)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),xe&&He?f.createElement(_.Ex,null):f.createElement(c.Z,{container:!0,spacing:3},Te&&Te.length>0?Te.slice(he*(z-1),he*z).map(Dt=>f.createElement(q,{member:Dt,key:Dt.metadata.uid})):f.createElement(P.Z,{p:2},f.createElement(b.Z,null,"This group has no ",ue.toLocaleLowerCase(),".")))))},Ae=({href:j,Icon:X,text:ue})=>f.createElement(v.Z,{key:j},f.createElement(h.Z,null,X?f.createElement(X,null):f.createElement($t.Z,null)),f.createElement($.Z,null,f.createElement(_.rU,{to:j},ue))),Je=({links:j})=>{const X=(0,n.qD)(),ue=he=>{var De;return he&&(De=X.getSystemIcon(he))!=null?De:$t.Z};return j===void 0?null:f.createElement(f.Fragment,null,f.createElement(L.Z,null),j.map(he=>f.createElement(Ae,{key:he.url,href:he.url,text:he.title,Icon:ue(he.icon)})))},St=j=>f.createElement(P.Z,{display:"flex",alignItems:"center"},f.createElement(Xe.Z,{fontSize:"inherit"}),f.createElement(P.Z,{ml:1},j.title)),mt=j=>{var X,ue,he;const De=(0,n.h_)(u.Ah),at=(0,n.h_)(n.$v),{entity:tt}=(0,u.X2)(),ut=(0,f.useCallback)(async()=>{await De.refreshEntity((0,l.eE)(tt)),at.post({message:"Refresh scheduled",severity:"info"})},[De,at,tt]);if(!tt)return f.createElement(W.Z,{severity:"error"},"Group not found");const{metadata:{name:Lt,description:de,title:ne,annotations:S,links:z},spec:{profile:Q}}=tt,me=(0,u.hF)(tt,l._b,{kind:"Group"}),xe=(0,u.hF)(tt,l.wP,{kind:"group"}),Fe=S==null?void 0:S[l.P1],He=(Fe==null?void 0:Fe.startsWith("url:"))||(Fe==null?void 0:Fe.startsWith("file:")),dt=(X=tt.metadata.annotations)==null?void 0:X[l.Tf],ae=(he=(ue=Q==null?void 0:Q.displayName)!=null?ue:ne)!=null?he:Lt,pe=Q!=null&&Q.email?`mailto:${Q.email}`:"#",ve=dt?f.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:dt},f.createElement(Ie.Z,null)):f.createElement(k.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},f.createElement(Ie.Z,null));return f.createElement(_.rJ,{title:f.createElement(St,{title:ae}),subheader:de,variant:j.variant,action:f.createElement(f.Fragment,null,He&&f.createElement(k.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:ut},f.createElement(K.Z,null)),ve)},f.createElement(c.Z,{container:!0,spacing:3},f.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(_.qE,{displayName:ae,picture:Q==null?void 0:Q.picture})),f.createElement(c.Z,{item:!0,md:10,xl:11},f.createElement(G.Z,null,(Q==null?void 0:Q.email)&&f.createElement(v.Z,null,f.createElement(h.Z,null,f.createElement(E.ZP,{title:"Email"},f.createElement(ge.Z,null))),f.createElement($.Z,{primary:f.createElement(_.rU,{to:pe},Q.email),secondary:"Email"})),f.createElement(v.Z,null,f.createElement(h.Z,null,f.createElement(E.ZP,{title:"Parent Group"},f.createElement(p.Z,null))),f.createElement($.Z,{primary:xe.length?f.createElement(u.rI,{entityRefs:xe,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),f.createElement(v.Z,null,f.createElement(h.Z,null,f.createElement(E.ZP,{title:"Child Groups"},f.createElement(Xe.Z,null))),f.createElement($.Z,{primary:me.length?f.createElement(u.rI,{entityRefs:me,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(j==null?void 0:j.showLinks)&&f.createElement(Je,{links:z})))))},rn=j=>j.title?f.createElement(P.Z,{display:"flex",alignItems:"center"},f.createElement(ot.Z,{fontSize:"inherit"}),f.createElement(P.Z,{ml:1},j.title)):null,Kt=j=>{var X,ue;const{entity:he}=(0,u.X2)();if(!he)return f.createElement(W.Z,{severity:"error"},"User not found");const De=(X=he.metadata.annotations)==null?void 0:X[l.Tf],{metadata:{name:at,description:tt,links:ut},spec:{profile:Lt}}=he,de=(ue=Lt==null?void 0:Lt.displayName)!=null?ue:at,ne=Lt!=null&&Lt.email?`mailto:${Lt.email}`:void 0,S=(0,u.hF)(he,l.hr,{kind:"Group"});return f.createElement(_.rJ,{title:f.createElement(rn,{title:de}),subheader:tt,variant:j.variant,action:f.createElement(f.Fragment,null,De&&f.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:De},f.createElement(Ie.Z,null)))},f.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-start"},f.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(_.qE,{displayName:de,picture:Lt==null?void 0:Lt.picture})),f.createElement(c.Z,{item:!0,md:10,xl:11},f.createElement(G.Z,null,(Lt==null?void 0:Lt.email)&&f.createElement(v.Z,null,f.createElement(h.Z,null,f.createElement(E.ZP,{title:"Email"},f.createElement(ge.Z,null))),f.createElement($.Z,null,f.createElement(_.rU,{to:ne!=null?ne:""},Lt.email))),f.createElement(v.Z,null,f.createElement(h.Z,null,f.createElement(E.ZP,{title:"Member of"},f.createElement(Xe.Z,null))),f.createElement($.Z,null,f.createElement(u.rI,{entityRefs:S,defaultKind:"Group"}))),(j==null?void 0:j.showLinks)&&f.createElement(Je,{links:ut})))))},$e=sn()(10),_t=(j,X)=>{const{kind:ue,type:he}=X,De=j.map(tt=>(0,u.$3)((0,l.of)(tt),{defaultKind:"group"})),at={kind:ue.toLocaleLowerCase("en-US"),type:he,owners:De,user:"all"};return Ne().stringify({filters:at},{arrayFormat:"repeat"})},ct=j=>{let X=[(0,l.eE)(j)];if(j.kind==="User"){const he=(0,u.hF)(j,l.hr,{kind:"Group"}).map(De=>(0,l.eE)({kind:De.kind,namespace:De.namespace,name:De.name}));X=[...X,...he]}return X},hn=async(j,X)=>{const ue=[],he=new Map,De=new Set;ue.push(j);let at=j;for(;ue.length>0;){const tt=(0,u.hF)(at,l._b,{kind:"Group"});await Promise.all(tt.map(ut=>$e(async()=>{const Lt=X.getEntityByRef(ut);he.set(ut.name,Lt);try{const de=await Lt;de&&ue.push(de)}finally{he.delete(ut.name)}}))),ue.shift(),De.add((0,l.eE)({kind:at.kind,namespace:at.metadata.namespace,name:at.metadata.name})),at=ue[0]}return Array.from(De)};function un(j,X,ue,he,De=6){const at=(0,n.h_)(u.Ah),tt=he!=null?he:["Component","API","System"],{loading:ut,error:Lt,value:de}=(0,C.default)(async()=>{const ne=X==="aggregated"&&ue?await hn(j,at):ct(j);return(await at.getEntities({filter:[{kind:tt,"relations.ownedBy":ne}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((me,xe)=>{var Fe,He;const dt=me.find(ae=>{var pe;return ae.kind===xe.kind&&ae.type===((pe=xe.spec)==null?void 0:pe.type)});return dt?dt.count+=1:me.push({kind:xe.kind,type:(He=(Fe=xe.spec)==null?void 0:Fe.type)==null?void 0:He.toString(),count:1}),me},[]).sort((me,xe)=>xe.count-me.count).slice(0,De).map(me=>({counter:me.count,type:me.type,kind:me.kind,queryParams:_t(ne,me)}))},[at,j,X]);return{componentsWithCounters:de,loading:ut,error:Lt}}const vn=(0,m.Z)(j=>(0,a.Z)({card:{border:`1px solid ${j.palette.divider}`,boxShadow:j.shadows[2],borderRadius:"4px",padding:j.spacing(2),color:j.palette.common.white,transition:`${j.transitions.duration.standard}ms`,"&:hover":{boxShadow:j.shadows[4]},height:"100%"},bold:{fontWeight:j.typography.fontWeightBold},smallFont:{fontSize:j.typography.body2.fontSize},entityTypeBox:{background:X=>j.getPageTheme({themeId:X.type}).backgroundImage}})),st=({counter:j,type:X,kind:ue,url:he})=>{const De=vn({type:X!=null?X:ue}),at=X!=null?X:ue,tt=at.length>10;return f.createElement(_.rU,{to:he,variant:"body2"},f.createElement(P.Z,{className:`${De.card} ${De.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},f.createElement(b.Z,{className:De.bold,variant:"h6"},j),f.createElement(P.Z,{sx:{width:"100%",textAlign:"center"}},f.createElement(b.Z,{className:`${De.bold} ${tt&&De.smallFont}`,variant:"h6"},f.createElement(_.Or,{text:kt()(at.toLocaleUpperCase("en-US"),j)}))),X&&f.createElement(b.Z,{variant:"subtitle1"},ue)))},Pt=({entity:j,relationsType:X,isGroup:ue,entityFilterKind:he,entityLimit:De=6})=>{const at=(0,n.tg)(O),{componentsWithCounters:tt,loading:ut,error:Lt}=un(j,X,ue,he,De);return ut?f.createElement(_.Ex,null):Lt?f.createElement(_.Gk,{error:Lt}):f.createElement(c.Z,{container:!0},tt==null?void 0:tt.map(de=>{var ne;return f.createElement(c.Z,{item:!0,xs:6,md:6,lg:4,key:(ne=de.type)!=null?ne:de.kind},f.createElement(st,{counter:de.counter,kind:de.kind,type:de.type,url:`${at()}/?${de.queryParams}`}))}))},fn=(0,m.Z)(j=>({list:{[j.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[j.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[j.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),pn=j=>{const{variant:X,entityFilterKind:ue,hideRelationsToggle:he,relationsType:De,entityLimit:at=6}=j,tt=he===void 0?!1:he,ut=fn(),{entity:Lt}=(0,u.X2)(),de=Lt.kind==="Group",[ne,S]=(0,f.useState)(De||"direct");return f.createElement(_.rJ,{title:"Ownership",variant:X},!tt&&f.createElement(G.Z,{dense:!0},f.createElement(v.Z,{className:ut.list},f.createElement($.Z,{className:ut.listItemText}),f.createElement(A.Z,{className:ut.listItemSecondaryAction},"Direct Relations",f.createElement(E.ZP,{placement:"top",arrow:!0,title:`${ne==="direct"?"Direct":"Aggregated"} Relations`},f.createElement(t.Z,{color:"primary",checked:ne!=="direct",onChange:()=>S(ne==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!de})),"Aggregated Relations"))),f.createElement(Pt,{entity:Lt,entityLimit:at,relationsType:ne,isGroup:de,entityFilterKind:ue}))},fe=j=>{const{singularTitle:X,pluralTitle:ue,icon:he,filter:De}=j,at=(0,n.h_)(n.$4),tt=(0,n.h_)(u.Ah),ut=(0,n.tg)(u.wi),{value:Lt}=(0,C.default)(async()=>{const de=await at.getBackstageIdentity();return(await tt.getEntities({filter:[{kind:"group","relations.hasMember":de.userEntityRef,...De!=null?De:{}}],fields:["metadata","kind"]})).items},[]);if(!(Lt!=null&&Lt.length))return null;if(Lt.length===1){const de=Lt[0];return f.createElement(_.R6,{text:X,to:ut((0,l.iB)(de)),icon:he})}return f.createElement(_.R6,{icon:he,text:ue},f.createElement(_.k2,{title:ue},Lt==null?void 0:Lt.map(function(ne){return f.createElement(_.BT,{title:ne.metadata.title||ne.metadata.name,subtitle:ne.metadata.namespace!==l.zG?ne.metadata.namespace:void 0,to:ut((0,l.iB)(ne)),icon:he,key:(0,l.eE)(ne)})})))}},5083:function(Rt,d,e){e.d(d,{J$:function(){return k},Y2:function(){return f},g2:function(){return b},rG:function(){return c}});var n=e(32272),l=e(96279),u=e.n(l),m=e(9571),a=e(30195),c=(T=>(T.DENY="DENY",T.ALLOW="ALLOW",T.CONDITIONAL="CONDITIONAL",T))(c||{});function P(T,C){return T.name===C.name}function b(T,C){return"resourceType"in T?!C||T.resourceType===C:!1}function t(T){return T.attributes.action==="create"}function v(T){return T.attributes.action==="read"}function h(T){return T.attributes.action==="update"}function $(T){return T.attributes.action==="delete"}function L(T){return{authorize:async(C,_)=>await T.authorize(C,_),authorizeConditional(C,_){const p=C;return T.authorize(p,_)}}}function k({name:T,attributes:C,resourceType:_}){return _?{type:"resource",name:T,attributes:C,resourceType:_}:{type:"basic",name:T,attributes:C}}const G=a.z.lazy(()=>a.z.object({rule:a.z.string(),resourceType:a.z.string(),params:a.z.record(a.z.any()).optional()}).or(a.z.object({anyOf:a.z.array(G).nonempty()})).or(a.z.object({allOf:a.z.array(G).nonempty()})).or(a.z.object({not:G}))),E=a.z.object({result:a.z.literal(c.ALLOW).or(a.z.literal(c.DENY))}),A=a.z.union([a.z.object({result:a.z.literal(c.ALLOW).or(a.z.literal(c.DENY))}),a.z.object({result:a.z.literal(c.CONDITIONAL),pluginId:a.z.string(),resourceType:a.z.string(),conditions:G})]),x=(T,C)=>a.z.object({items:a.z.array(a.z.intersection(a.z.object({id:a.z.string()}),T)).refine(_=>_.length===C.size&&_.every(({id:p})=>C.has(p)),{message:"Items in response do not match request"})});class f{constructor(C){var _;this.discovery=C.discovery,this.enabled=(_=C.config.getOptionalBoolean("permission.enabled"))!=null?_:!1}async authorize(C,_){return this.makeRequest(C,E,_)}async authorizeConditional(C,_){return this.makeRequest(C,A,_)}async makeRequest(C,_,p){if(!this.enabled)return C.map(ot=>({result:c.ALLOW}));const W={items:C.map(ot=>({id:m.Z(),...ot}))},K=await this.discovery.getBaseUrl("permission"),Ie=await u()(`${K}/authorize`,{method:"POST",body:JSON.stringify(W),headers:{...this.getAuthorizationHeader(p==null?void 0:p.token),"content-type":"application/json"}});if(!Ie.ok)throw await n.VL.fromResponse(Ie);const ge=await Ie.json(),$t=x(_,new Set(W.items.map(({id:ot})=>ot))).parse(ge).items.reduce((ot,Vt)=>(ot[Vt.id]=Vt,ot),{});return W.items.map(ot=>$t[ot.id])}getAuthorizationHeader(C){return C?{Authorization:`Bearer ${C}`}:{}}}},56563:function(Rt,d,e){e.d(d,{RV:function(){return a},gI:function(){return P},iM:function(){return c},un:function(){return t}});var n=e(2784),l=e(30705),u=e(5083),m=e(69984);const a=(0,l.T0)({id:"plugin.permission.api"});class c{constructor(h,$){this.permissionClient=h,this.identityApi=$}static create(h){const{config:$,discovery:L,identity:k}=h,G=new u.Y2({discovery:L,config:$});return new c(G,k)}async authorize(h){return(await this.permissionClient.authorize([h],await this.identityApi.getCredentials()))[0]}}function P(v){const h=(0,l.h_)(a),{data:$,error:L}=(0,m.ZP)(v,async k=>{if((0,u.g2)(k.permission)&&!k.resourceRef)return u.rG.DENY;const{result:G}=await h.authorize(k);return G});return L?{error:L,loading:!1,allowed:!1}:$===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:$===u.rG.ALLOW}}const b=v=>{const{permission:h,resourceRef:$,errorComponent:L,...k}=v,G=P(isResourcePermission(h)?{permission:h,resourceRef:$}:{permission:h}),E=useApp(),{NotFoundErrorPage:A}=E.getComponents();let x=L===void 0?React.createElement(A,null):L;return G.loading?x=null:G.allowed&&(x=v.element),React.createElement(Route,{...k,element:x})};function t(v){const{permission:h,resourceRef:$}=v,L=P((0,u.g2)(h)?{permission:h,resourceRef:$}:{permission:h}),k=(0,l.qD)();if(L.loading)return null;if(L.allowed)return n.createElement(n.Fragment,null,v.children);if(v.errorPage)return n.createElement(n.Fragment,null,v.errorPage);const{NotFoundErrorPage:G}=k.getComponents();return n.createElement(G,null)}},60885:function(Rt,d,e){e.d(d,{F:function(){return m},S:function(){return P},a:function(){return a},s:function(){return t},u:function(){return b}});var n=e(18473),l=e(2784),u=e(30705);const m="scaffolder.extensions.wrapper.v1",a="scaffolder.extensions.field.v1",c=(0,n.CT)("secrets-context"),P=v=>{const[h,$]=(0,l.useState)({});return l.createElement(c.Provider,{value:(0,n.EI)({1:{secrets:h,setSecrets:$}})},v.children)},b=()=>{var v;const h=(v=(0,l.useContext)(c))==null?void 0:v.atVersion(1);if(!h)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:$,secrets:L={}}=h;return{setSecrets:(0,l.useCallback)(G=>{$(E=>({...E,...G}))},[$]),secrets:L}},t=(0,n.uW)("scaffolder:scaffolder-api-ref",()=>(0,u.T0)({id:"plugin.scaffolder.service"}))},12053:function(Rt,d,e){e.d(d,{A3:function(){return l.S},PT:function(){return b},TD:function(){return l.u},WQ:function(){return L},eP:function(){return c},lc:function(){return l.s},zS:function(){return h}});var n=e(30705),l=e(60885),u=e(92233),m=e(2784),a=e(18473);function c(E){return{expose(){const A=()=>null;return(0,n.R5)(A,l.a,E),A}}}const P=()=>null;(0,n.R5)(P,l.F,!0);const b=E=>(0,n.vJ)(E,A=>A.selectByComponentData({key:l.F}).findComponentData({key:l.a})),t="scaffolder.layout.v1",v="scaffolder.layouts.wrapper.v1",h=E=>(0,n.vJ)(E,A=>A.selectByComponentData({key:v}).findComponentData({key:t}));function $(E,A){var x,f,T;switch(A.type){case"INIT":{E.steps=A.data.spec.steps.reduce((C,_)=>(C[_.id]={status:"open",id:_.id},C),{}),E.stepLogs=A.data.spec.steps.reduce((C,_)=>(C[_.id]=[],C),{}),E.loading=!1,E.error=void 0,E.completed=!1,E.task=A.data;return}case"LOGS":{const C=A.data;for(const _ of C){const p=`${_.createdAt} ${_.body.message}`;if(!_.body.stepId||!((x=E.steps)!=null&&x[_.body.stepId]))continue;const W=(f=E.stepLogs)==null?void 0:f[_.body.stepId],K=(T=E.steps)==null?void 0:T[_.body.stepId];_.body.status&&_.body.status!==K.status&&(K.status=_.body.status,K.status==="processing"&&(K.startedAt=_.createdAt),["cancelled","completed","failed"].includes(K.status)&&(K.endedAt=_.createdAt)),W==null||W.push(p)}return}case"COMPLETED":{E.completed=!0,E.output=A.data.body.output,E.error=A.data.body.error;return}case"CANCELLED":{E.cancelled=!0;return}case"ERROR":{E.error=A.data,E.loading=!1,E.completed=!0;return}default:return}}const L=E=>{const A=(0,n.h_)(l.s),[x,f]=(0,u.C)($,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,m.useEffect)(()=>{let T=!1,C,_;return A.getTask(E).then(p=>{if(T)return;f({type:"INIT",data:p});const W=A.streamLogs({taskId:E}),K=new Array;function Ie(){if(K.length){const ge=K.splice(0,K.length);f({type:"LOGS",data:ge})}}_=setInterval(Ie,500),C=W.subscribe({next:ge=>{switch(ge.type){case"log":return K.push(ge);case"cancelled":f({type:"CANCELLED"});return;case"completion":Ie(),f({type:"COMPLETED",data:ge});return;default:throw new Error(`Unhandled event type ${ge.type} in observer`)}},error:ge=>{Ie(),f({type:"ERROR",data:ge})}})},p=>{T||f({type:"ERROR",data:p})}),()=>{T=!0,C&&C.unsubscribe(),_&&clearInterval(_)}},[A,f,E]),x};function k(E){return{expose(){const A=()=>null;return attachComponentData(A,t,E),A}}}const G=()=>null;(0,n.R5)(G,v,!0)},23054:function(Rt,d,e){e.d(d,{A:function(){return Kt},B:function(){return _t},C:function(){return Q},D:function(){return z},F:function(){return ut},G:function(){return Pt},H:function(){return vn},I:function(){return un},J:function(){return ne},K:function(){return de},T:function(){return zn},d:function(){return we},h:function(){return fn},k:function(){return dt},l:function(){return Mn},n:function(){return Gt},o:function(){return Te},p:function(){return ve},q:function(){return pe},r:function(){return Fe},s:function(){return nt},t:function(){return me},u:function(){return ae},v:function(){return xe},w:function(){return He},x:function(){return Je},y:function(){return Ae},z:function(){return ct}});var n=e(49462),l=e(12053),u=e(34520),m=e(32272),a=e(19126),c=e.n(a),P=e(82394),b=e.n(P),t=e(88285),v=e(30705),h=e(73495),$=e(86619),L=e(42494),k=e(95544),G=e(79692),E=e(60905),A=e(90436),x=e(4614),f=e(97136),T=e(27556),C=e(77277),_=e(88013),p=e(2784),W=e(64279),K=e(30195),Ie=e(68111),ge=e(74828),Xe=e(29611),$t=e(56939),ot=e(80236),Vt=e(48760),kt=e(62155),J=e(31377),sn=e(34546),Se=e(31625),Ne=e(12420),O=e(49166),Le=e(98281),ce=e(16874),R=e(72779),N=e.n(R),te=e(26228),_e=e(73557),Ge=e(70218),wt=e(52160);class pt{constructor(ye){var Ze,Ue;this.discoveryApi=ye.discoveryApi,this.fetchApi=(Ze=ye.fetchApi)!=null?Ze:{fetch},this.scmIntegrationsApi=ye.scmIntegrationsApi,this.useLongPollingLogs=(Ue=ye.useLongPollingLogs)!=null?Ue:!1,this.identityApi=ye.identityApi}async listTasks(ye){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ze=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:Ue}=await this.identityApi.getBackstageIdentity(),vt=c().stringify(ye.filterByOwnership==="owned"?{createdBy:Ue}:{}),it=await this.fetchApi.fetch(`${Ze}/v2/tasks?${vt}`);if(!it.ok)throw await m.VL.fromResponse(it);return await it.json()}async getIntegrationsList(ye){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(Ue=>!this.scmIntegrationsApi.bitbucketCloud.byHost(Ue.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(Ue.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(Ue=>({type:Ue.type,title:Ue.title,host:Ue.config.host})).filter(Ue=>ye.allowedHosts.includes(Ue.host))}}async getTemplateParameterSchema(ye){const{namespace:Ze,kind:Ue,name:vt}=(0,u.of)(ye,{defaultKind:"template"}),it=await this.discoveryApi.getBaseUrl("scaffolder"),yt=[Ze,Ue,vt].map(gn=>encodeURIComponent(gn)).join("/"),ft=`${it}/v2/templates/${yt}/parameter-schema`,Zt=await this.fetchApi.fetch(ft);if(!Zt.ok)throw await m.VL.fromResponse(Zt);return await Zt.json()}async scaffold(ye){const{templateRef:Ze,values:Ue,secrets:vt={}}=ye,it=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,yt=await this.fetchApi.fetch(it,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ze,values:{...Ue},secrets:vt})});if(yt.status!==201){const Zt=`${yt.status} ${yt.statusText}`,tn=await yt.text();throw new Error(`Backend request failed, ${Zt} ${tn.trim()}`)}const{id:ft}=await yt.json();return{taskId:ft}}async getTask(ye){const Ue=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(ye)}`,vt=await this.fetchApi.fetch(Ue);if(!vt.ok)throw await m.VL.fromResponse(vt);return await vt.json()}streamLogs(ye){return this.useLongPollingLogs?this.streamLogsPolling(ye):this.streamLogsEventStream(ye)}async dryRun(ye){const Ze=await this.discoveryApi.getBaseUrl("scaffolder"),Ue=await this.fetchApi.fetch(`${Ze}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:ye.template,values:ye.values,secrets:ye.secrets,directoryContents:ye.directoryContents})});if(!Ue.ok)throw await m.VL.fromResponse(Ue);return Ue.json()}streamLogsEventStream({taskId:ye,after:Ze}){return new(b())(Ue=>{const vt=new URLSearchParams;Ze!==void 0&&vt.set("after",String(Number(Ze))),this.discoveryApi.getBaseUrl("scaffolder").then(it=>{const yt=`${it}/v2/tasks/${encodeURIComponent(ye)}/eventstream`,ft=tn=>{if(tn.data)try{Ue.next(JSON.parse(tn.data))}catch(gn){Ue.error(gn)}},Zt=new EventSource(yt,{withCredentials:!0});Zt.addEventListener("log",ft),Zt.addEventListener("cancelled",ft),Zt.addEventListener("completion",tn=>{ft(tn),Zt.close(),Ue.complete()}),Zt.addEventListener("error",tn=>{Ue.error(tn)})},it=>{Ue.error(it)})})}streamLogsPolling({taskId:ye,after:Ze}){let Ue=Ze;return new(b())(vt=>{this.discoveryApi.getBaseUrl("scaffolder").then(async it=>{for(;!vt.closed;){const yt=`${it}/v2/tasks/${encodeURIComponent(ye)}/events?${c().stringify({after:Ue})}`,ft=await this.fetchApi.fetch(yt);if(!ft.ok){await new Promise(tn=>setTimeout(tn,1e3));continue}const Zt=await ft.json();for(const tn of Zt)if(Ue=Number(tn.id),vt.next(tn),tn.type==="completion"){vt.complete();return}}})})}async listActions(){const ye=await this.discoveryApi.getBaseUrl("scaffolder"),Ze=await this.fetchApi.fetch(`${ye}/v2/actions`);if(!Ze.ok)throw await m.VL.fromResponse(Ze);return await Ze.json()}async cancelTask(ye){const Ue=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(ye)}/cancel`,vt=await this.fetchApi.fetch(Ue,{method:"POST"});if(!vt.ok)throw await m.VL.fromResponse(vt);return await vt.json()}}function Tt(lt,ye){return{schema:{returnValue:(0,Ie.ZP)(lt),uiOptions:ye?(0,Ie.ZP)(ye):void 0},type:null,uiOptionsType:null}}const q=K.z.record(K.z.string().or(K.z.object({exists:K.z.boolean().optional()})).or(K.z.array(K.z.string()))),Ae=Tt(K.z.string(),K.z.object({allowedKinds:K.z.array(K.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:K.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:K.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:K.z.union([K.z.string(),K.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:K.z.array(q).or(q).optional().describe("List of key-value filter expression for entities")})).schema,Je=lt=>{var ye,Ze,Ue,vt,it;const{onChange:yt,schema:{title:ft="Entity",description:Zt="An entity from the catalog"},required:tn,uiSchema:gn,rawErrors:Zn,formData:er,idSchema:tr}=lt,Wn=rn(gn),jn=(ye=gn["ui:options"])==null?void 0:ye.defaultKind,rr=((Ze=gn["ui:options"])==null?void 0:Ze.defaultNamespace)||void 0,D=(0,v.h_)(h.Ah),{value:I,loading:V}=(0,W.default)(async()=>{const{items:B}=await D.getEntities(Wn?{filter:Wn}:void 0);return B}),ie=(vt=(Ue=gn["ui:options"])==null?void 0:Ue.allowArbitraryValues)!=null?vt:!0,Me=(0,p.useCallback)(B=>{try{return(0,h.$3)((0,u.of)(B,{defaultKind:jn,defaultNamespace:rr}),{defaultKind:jn,defaultNamespace:rr})}catch{return B}},[jn,rr]),rt=(0,p.useCallback)((B,H,Oe)=>{if(typeof H!="string")yt(H?(0,u.eE)(H):void 0);else if(Oe==="blur"||Oe==="create-option"){let ze=H;try{ze=(0,u.eE)((0,u.of)(H,{defaultKind:jn,defaultNamespace:rr}))}catch{}(er!==H||ie)&&yt(ze)}},[yt,er,jn,rr,ie]);return(0,p.useEffect)(()=>{(I==null?void 0:I.length)===1&&yt((0,u.eE)(I[0]))},[I,yt]),p.createElement(L.Z,{margin:"normal",required:tn,error:(Zn==null?void 0:Zn.length)>0&&!er},p.createElement(_.ZP,{disabled:(I==null?void 0:I.length)===1,id:tr==null?void 0:tr.$id,value:(it=I==null?void 0:I.find(B=>(0,u.eE)(B)===er))!=null?it:ie&&er?Me(er):"",loading:V,onChange:rt,options:I||[],getOptionLabel:B=>typeof B=="string"?B:(0,h.$3)(B,{defaultKind:jn,defaultNamespace:rr}),autoSelect:!0,freeSolo:ie,renderInput:B=>p.createElement($.Z,{...B,label:ft,margin:"dense",helperText:Zt,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:tn,InputProps:B.InputProps})}))};function St(lt){return typeof lt=="object"&&lt.exists?t.n3:lt==null?void 0:lt.toString()}function mt(lt){const ye={};for(const[Ze,Ue]of Object.entries(lt))Array.isArray(Ue)?ye[Ze]=Ue:ye[Ze]=St(Ue);return ye}function rn(lt){var ye,Ze;const Ue=(ye=lt["ui:options"])==null?void 0:ye.allowedKinds,vt=((Ze=lt["ui:options"])==null?void 0:Ze.catalogFilter)||Ue&&{kind:Ue};if(vt)return Array.isArray(vt)?vt.map(mt):mt(vt)}const Kt=(lt,ye)=>{u.y$.isValidObjectName(lt)||ye.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},_t=Tt(K.z.string()).schema,ct=lt=>{const{onChange:ye,required:Ze,schema:{title:Ue="Name",description:vt="Unique name of the component"},rawErrors:it,formData:yt,uiSchema:{"ui:autofocus":ft},idSchema:Zt,placeholder:tn}=lt;return p.createElement($.Z,{id:Zt==null?void 0:Zt.$id,label:Ue,placeholder:tn,helperText:vt,required:Ze,value:yt!=null?yt:"",onChange:({target:{value:gn}})=>ye(gn),margin:"normal",error:(it==null?void 0:it.length)>0&&!yt,inputProps:{autoFocus:ft}})},un=Tt(K.z.string(),K.z.object({allowedKinds:K.z.array(K.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:K.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:K.z.union([K.z.string(),K.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:K.z.array(q).or(q).optional().describe("List of key-value filter expression for entities")})).schema,vn=lt=>{var ye,Ze,Ue,vt,it;const{schema:{title:yt="Owner",description:ft="The owner of the component"},uiSchema:Zt,...tn}=lt,gn=(ye=Zt["ui:options"])==null?void 0:ye.defaultNamespace,Zn=(Ze=Zt["ui:options"])==null?void 0:Ze.allowedKinds,er=((Ue=Zt["ui:options"])==null?void 0:Ue.catalogFilter)||{kind:Zn||["Group","User"]},tr={...Zt,"ui:options":{catalogFilter:er,defaultKind:"Group",allowArbitraryValues:(it=(vt=Zt["ui:options"])==null?void 0:vt.allowArbitraryValues)!=null?it:!0,...gn!==void 0?{defaultNamespace:gn}:{}}};return p.createElement(Je,{...tn,schema:{title:yt,description:ft},uiSchema:tr})},Pt=Tt(K.z.string(),K.z.object({allowedHosts:K.z.array(K.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:K.z.array(K.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:K.z.array(K.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:K.z.array(K.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:K.z.array(K.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:K.z.object({secretsKey:K.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:K.z.object({gerrit:K.z.array(K.z.string()).optional().describe("Additional Gerrit scopes to request"),github:K.z.array(K.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:K.z.array(K.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:K.z.array(K.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:K.z.array(K.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,fn=(lt,ye,Ze)=>{var Ue,vt;try{const{host:it,searchParams:yt}=new URL(`https://${lt}`),ft=Ze.apiHolder.get(n.q3);it?(((Ue=ft==null?void 0:ft.byHost(it))==null?void 0:Ue.type)==="bitbucket"?(it==="bitbucket.org"&&!yt.get("workspace")&&ye.addError("Incomplete repository location provided, workspace not provided"),yt.get("project")||ye.addError("Incomplete repository location provided, project not provided")):((vt=ft==null?void 0:ft.byHost(it))==null?void 0:vt.type)!=="gerrit"&&(yt.get("owner")||ye.addError("Incomplete repository location provided, owner not provided")),yt.get("repo")||ye.addError("Incomplete repository location provided, repo not provided")):ye.addError("Incomplete repository location provided, host not provided")}catch{ye.addError("Unable to parse the Repository URL")}},pn=lt=>{const{allowedOwners:ye=[],rawErrors:Ze,state:Ue,onChange:vt}=lt,it=ye?ye.map(ft=>({label:ft,value:ft})):[{label:"Loading...",value:"loading"}],{owner:yt}=Ue;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(Ze==null?void 0:Ze.length)>0&&!yt},ye!=null&&ye.length?p.createElement(ot.Ph,{native:!0,label:"Owner Available",onChange:ft=>vt({owner:String(Array.isArray(ft)?ft[0]:ft)}),disabled:ye.length===1,selected:yt,items:it}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:ft=>vt({owner:ft.target.value}),value:yt})),p.createElement(ge.Z,null,"The organization, user or project that this repo will belong to")))},fe=lt=>{const{allowedOwners:ye=[],state:Ze,onChange:Ue,rawErrors:vt}=lt,it=ye?ye.map(ft=>({label:ft,value:ft})):[{label:"Loading...",value:"loading"}],{owner:yt}=Ze;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(vt==null?void 0:vt.length)>0&&!yt},ye!=null&&ye.length?p.createElement(ot.Ph,{native:!0,label:"Owner Available",onChange:ft=>Ue({owner:String(Array.isArray(ft)?ft[0]:ft)}),disabled:ye.length===1,selected:yt,items:it}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:ft=>Ue({owner:ft.target.value}),value:yt})),p.createElement(ge.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},j=lt=>{const{allowedOrganizations:ye=[],allowedOwners:Ze=[],rawErrors:Ue,state:vt,onChange:it}=lt,yt=ye?ye.map(gn=>({label:gn,value:gn})):[{label:"Loading...",value:"loading"}],ft=Ze?Ze.map(gn=>({label:gn,value:gn})):[{label:"Loading...",value:"loading"}],{organization:Zt,owner:tn}=vt;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!Zt},ye!=null&&ye.length?p.createElement(ot.Ph,{native:!0,label:"Organization",onChange:gn=>it({organization:String(Array.isArray(gn)?gn[0]:gn)}),disabled:ye.length===1,selected:Zt,items:yt}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"orgInput"},"Organization"),p.createElement(Xe.Z,{id:"orgInput",onChange:gn=>it({organization:gn.target.value}),value:Zt})),p.createElement(ge.Z,null,"The Organization that this repo will belong to")),p.createElement(L.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!tn},Ze!=null&&Ze.length?p.createElement(ot.Ph,{native:!0,label:"Owner",onChange:gn=>it({owner:String(Array.isArray(gn)?gn[0]:gn)}),disabled:Ze.length===1,selected:tn,items:ft}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"ownerInput"},"Project"),p.createElement(Xe.Z,{id:"ownerInput",onChange:gn=>it({owner:gn.target.value}),value:tn})),p.createElement(ge.Z,null,"The Project that this repo will belong to")))},X=lt=>{const{allowedOwners:ye=[],allowedProjects:Ze=[],onChange:Ue,rawErrors:vt,state:it}=lt,{host:yt,workspace:ft,project:Zt}=it,tn=ye?ye==null?void 0:ye.map(Zn=>({label:Zn,value:Zn})):[],gn=Ze?Ze==null?void 0:Ze.map(Zn=>({label:Zn,value:Zn})):[];return(0,p.useEffect)(()=>{yt==="bitbucket.org"&&ye.length&&Ue({workspace:ye[0]})},[ye,yt,Ue]),p.createElement(p.Fragment,null,yt==="bitbucket.org"&&p.createElement(L.Z,{margin:"normal",required:!0,error:(vt==null?void 0:vt.length)>0&&!ft},ye!=null&&ye.length?p.createElement(ot.Ph,{native:!0,label:"Allowed Workspaces",onChange:Zn=>Ue({workspace:String(Array.isArray(Zn)?Zn[0]:Zn)}),disabled:ye.length===1,selected:ft,items:tn}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"workspaceInput"},"Workspace"),p.createElement(Xe.Z,{id:"workspaceInput",onChange:Zn=>Ue({workspace:Zn.target.value}),value:ft})),p.createElement(ge.Z,null,"The Workspace that this repo will belong to")),p.createElement(L.Z,{margin:"normal",required:!0,error:(vt==null?void 0:vt.length)>0&&!Zt},Ze!=null&&Ze.length?p.createElement(ot.Ph,{native:!0,label:"Allowed Projects",onChange:Zn=>Ue({project:String(Array.isArray(Zn)?Zn[0]:Zn)}),disabled:Ze.length===1,selected:Zt,items:gn}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"projectInput"},"Project"),p.createElement(Xe.Z,{id:"projectInput",onChange:Zn=>Ue({project:Zn.target.value}),value:Zt})),p.createElement(ge.Z,null,"The Project that this repo will belong to")))},ue=lt=>{const{onChange:ye,rawErrors:Ze,state:Ue}=lt,{workspace:vt,owner:it}=Ue;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",error:(Ze==null?void 0:Ze.length)>0&&!vt},p.createElement($t.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:yt=>ye({owner:yt.target.value}),value:it}),p.createElement(ge.Z,null,"The owner of the project (optional)")),p.createElement(L.Z,{margin:"normal",required:!0,error:(Ze==null?void 0:Ze.length)>0&&!vt},p.createElement($t.Z,{htmlFor:"parentInput"},"Parent"),p.createElement(Xe.Z,{id:"parentInput",onChange:yt=>ye({workspace:yt.target.value}),value:vt}),p.createElement(ge.Z,null,"The project parent that the repo will belong to")))},he=lt=>{const{host:ye,hosts:Ze,onChange:Ue,rawErrors:vt}=lt,it=(0,v.h_)(l.lc),{value:{integrations:yt}={integrations:[]},loading:ft}=(0,W.default)(async()=>await it.getIntegrationsList({allowedHosts:Ze!=null?Ze:[]}));(0,p.useEffect)(()=>{ye||(Ze!=null&&Ze.length?Ue(Ze[0]):yt!=null&&yt.length&&Ue(yt[0].host))},[Ze,ye,Ue,yt]);const Zt=yt?yt.filter(tn=>Ze!=null&&Ze.length?Ze==null?void 0:Ze.includes(tn.host):!0).map(tn=>({label:tn.title,value:tn.host})):[{label:"Loading...",value:"loading"}];return ft?p.createElement(ot.Ex,null):p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(vt==null?void 0:vt.length)>0&&!ye},p.createElement(ot.Ph,{native:!0,disabled:(Ze==null?void 0:Ze.length)===1,label:"Host",onChange:tn=>Ue(String(Array.isArray(tn)?tn[0]:tn)),selected:ye,items:Zt,"data-testid":"host-select"}),p.createElement(ge.Z,null,"The host where the repository will be created")))},De=lt=>{const{repoName:ye,allowedRepos:Ze,onChange:Ue,rawErrors:vt}=lt;(0,p.useEffect)(()=>{ye||Ze!=null&&Ze.length&&Ue(Ze[0])},[Ze,ye,Ue]);const it=Ze?Ze.map(yt=>({label:yt,value:yt})):[{label:"Loading...",value:"loading"}];return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(vt==null?void 0:vt.length)>0&&!ye},Ze!=null&&Ze.length?p.createElement(ot.Ph,{native:!0,label:"Repositories Available",onChange:yt=>String(Array.isArray(yt)?yt[0]:yt),disabled:Ze.length===1,selected:ye,items:it}):p.createElement(p.Fragment,null,p.createElement($t.Z,{htmlFor:"repoNameInput"},"Repository"),p.createElement(Xe.Z,{id:"repoNameInput",onChange:yt=>Ue(String(yt.target.value)),value:ye})),p.createElement(ge.Z,null,"The name of the repository")))};function at(lt){if(!lt.host)return;const ye=new URLSearchParams;return lt.owner&&ye.set("owner",lt.owner),lt.repoName&&ye.set("repo",lt.repoName),lt.organization&&ye.set("organization",lt.organization),lt.workspace&&ye.set("workspace",lt.workspace),lt.project&&ye.set("project",lt.project),`${lt.host}?${ye.toString()}`}function tt(lt){let ye="",Ze="",Ue="",vt="",it="",yt="";try{if(lt){const ft=new URL(`https://${lt}`);ye=ft.host,Ze=ft.searchParams.get("owner")||"",Ue=ft.searchParams.get("repo")||"",vt=ft.searchParams.get("organization")||"",it=ft.searchParams.get("workspace")||"",yt=ft.searchParams.get("project")||""}}catch{}return{host:ye,owner:Ze,repoName:Ue,organization:vt,workspace:it,project:yt}}const ut=lt=>{var ye,Ze;const{uiSchema:Ue,onChange:vt,rawErrors:it,formData:yt}=lt,[ft,Zt]=(0,p.useState)(tt(yt)),tn=(0,v.h_)(n.q3),gn=(0,v.h_)(n.Om),{setSecrets:Zn}=(0,l.TD)(),er=(0,p.useMemo)(()=>{var B,H;return(H=(B=Ue==null?void 0:Ue["ui:options"])==null?void 0:B.allowedHosts)!=null?H:[]},[Ue]),tr=(0,p.useMemo)(()=>{var B,H;return(H=(B=Ue==null?void 0:Ue["ui:options"])==null?void 0:B.allowedOrganizations)!=null?H:[]},[Ue]),Wn=(0,p.useMemo)(()=>{var B,H;return(H=(B=Ue==null?void 0:Ue["ui:options"])==null?void 0:B.allowedOwners)!=null?H:[]},[Ue]),jn=(0,p.useMemo)(()=>{var B,H;return(H=(B=Ue==null?void 0:Ue["ui:options"])==null?void 0:B.allowedProjects)!=null?H:[]},[Ue]),rr=(0,p.useMemo)(()=>{var B,H;return(H=(B=Ue==null?void 0:Ue["ui:options"])==null?void 0:B.allowedRepos)!=null?H:[]},[Ue]),{owner:D,organization:I,project:V,repoName:ie}=ft;(0,p.useEffect)(()=>{vt(at(ft))},[ft,vt]),(0,p.useEffect)(()=>{tr.length>0&&!I&&Zt(B=>({...B,organization:tr[0]}))},[Zt,tr,I]),(0,p.useEffect)(()=>{Wn.length>0&&!D&&Zt(B=>({...B,owner:Wn[0]}))},[Zt,Wn,D]),(0,p.useEffect)(()=>{jn.length>0&&!V&&Zt(B=>({...B,project:jn[0]}))},[Zt,jn,V]),(0,p.useEffect)(()=>{rr.length>0&&!ie&&Zt(B=>({...B,repoName:rr[0]}))},[Zt,rr,ie]);const Me=(0,p.useCallback)(B=>{Zt(H=>({...H,...B}))},[Zt]);(0,Vt.Z)(async()=>{var B;const{requestUserCredentials:H}=(B=Ue==null?void 0:Ue["ui:options"])!=null?B:{},Oe=ft.owner?ft.owner:ft.project;if(!H||!(ft.host&&Oe&&ft.repoName))return;const[ze,Mt]=[ft.host,ft.repoName].map(encodeURIComponent),{token:Ft}=await gn.getCredentials({url:`https://${ze}/${Oe}/${Mt}`,additionalScope:{repoWrite:!0,customScopes:H.additionalScopes}});Zn({[H.secretsKey]:Ft})},500,[ft,Ue]);const rt=(Ze=ft.host&&((ye=tn.byHost(ft.host))==null?void 0:ye.type))!=null?Ze:null;return p.createElement(p.Fragment,null,p.createElement(he,{host:ft.host,hosts:er,onChange:B=>Zt(H=>({...H,host:B})),rawErrors:it}),rt==="github"&&p.createElement(pn,{allowedOwners:Wn,onChange:Me,rawErrors:it,state:ft}),rt==="gitlab"&&p.createElement(fe,{allowedOwners:Wn,rawErrors:it,state:ft,onChange:Me}),rt==="bitbucket"&&p.createElement(X,{allowedOwners:Wn,allowedProjects:jn,rawErrors:it,state:ft,onChange:Me}),rt==="azure"&&p.createElement(j,{allowedOrganizations:tr,allowedOwners:Wn,rawErrors:it,state:ft,onChange:Me}),rt==="gerrit"&&p.createElement(ue,{rawErrors:it,state:ft,onChange:Me}),p.createElement(De,{repoName:ft.repoName,allowedRepos:rr,onChange:B=>Zt(H=>({...H,repoName:B})),rawErrors:it}))},de=Tt(K.z.string(),K.z.object({allowedKinds:K.z.array(K.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:K.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:K.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:K.z.union([K.z.string(),K.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,ne=lt=>{var ye;const{schema:{title:Ze="Entity",description:Ue="An entity from the catalog"},uiSchema:vt,required:it}=lt,yt=(0,v.h_)(v.$4),{loading:ft,value:Zt}=(0,W.default)(async()=>(await yt.getBackstageIdentity()).ownershipEntityRefs),tn=(ye=vt["ui:options"])==null?void 0:ye.allowedKinds;return ft?p.createElement(_.ZP,{loading:ft,renderInput:gn=>p.createElement($.Z,{...gn,label:Ze,margin:"dense",helperText:Ue,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:it,InputProps:gn.InputProps}),options:[]}):p.createElement(Je,{...lt,schema:{title:Ze,description:Ue},allowedKinds:tn,catalogFilter:tn?{filter:{kind:tn,[`relations.${u.S4}`]:Zt||[]}}:{filter:{[`relations.${u.S4}`]:Zt||[]}}})},z=Tt(K.z.array(K.z.string()),K.z.object({kinds:K.z.array(K.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:K.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:K.z.string().optional().describe("Helper text to display")})).schema,Q=lt=>{var ye,Ze,Ue;const{formData:vt,onChange:it,uiSchema:yt}=lt,ft=(0,v.h_)(h.Ah),[Zt,tn]=(0,p.useState)([]),[gn,Zn]=(0,p.useState)(""),[er,tr]=(0,p.useState)(!1),Wn=(0,u.In)().isValidTag,jn=(ye=yt["ui:options"])==null?void 0:ye.kinds,rr=(Ze=yt["ui:options"])==null?void 0:Ze.showCounts,D=(Ue=yt["ui:options"])==null?void 0:Ue.helperText,{loading:I,value:V}=(0,W.default)(async()=>{const Me="metadata.tags",rt={facets:[Me]};jn&&(rt.filter={kind:jn});const{facets:B}=await ft.getEntityFacets(rt),H=Object.fromEntries(B[Me].map(({value:Oe,count:ze})=>[Oe,ze]));return tn(Object.keys(H).sort((Oe,ze)=>rr?H[ze]-H[Oe]:Oe.localeCompare(ze))),H}),ie=(Me,rt)=>{let B=!1,H=!1;const Oe=vt||[];if(rt!=null&&rt.length&&Oe.length<rt.length){const ze=rt[rt.length-1]=rt[rt.length-1].toLocaleLowerCase("en-US").trim();B=!Wn(ze),H=Oe.indexOf(ze)!==-1}tr(B),Zn(B?gn:""),!B&&!H&&it(rt||[])};return(0,kt.Z)(()=>it(vt||[])),p.createElement(L.Z,{margin:"normal"},p.createElement(_.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:ie,value:vt||[],inputValue:gn,loading:I,options:Zt,ChipProps:{size:"small"},renderOption:Me=>rr?`${Me} (${V==null?void 0:V[Me]})`:Me,renderInput:Me=>p.createElement($.Z,{...Me,label:"Tags",onChange:rt=>Zn(rt.target.value),error:er,helperText:D!=null?D:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},me=(0,v.x8)({id:"register-component",optional:!0}),xe=(0,v.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Fe=(0,v.NT)({id:"scaffolder"}),He=(0,v.Rz)({id:"scaffolder/legacy/selected-template",parent:Fe,path:"/templates/:templateName"}),dt=(0,v.Rz)({id:"scaffolder/selected-template",parent:Fe,path:"/templates/:namespace/:templateName"}),ae=(0,v.Rz)({id:"scaffolder/task",parent:Fe,path:"/tasks/:taskId"}),pe=(0,v.Rz)({id:"scaffolder/list-tasks",parent:Fe,path:"/tasks"}),ve=(0,v.Rz)({id:"scaffolder/actions",parent:Fe,path:"/actions"}),Te=(0,v.Rz)({id:"scaffolder/edit",parent:Fe,path:"/edit"}),nt=(0,v.rx)({id:"scaffolder",apis:[(0,v.ni)({api:l.lc,deps:{discoveryApi:v.NW,scmIntegrationsApi:n.q3,fetchApi:v.gP,identityApi:v.$4},factory:({discoveryApi:lt,scmIntegrationsApi:ye,fetchApi:Ze,identityApi:Ue})=>new pt({discoveryApi:lt,scmIntegrationsApi:ye,fetchApi:Ze,identityApi:Ue})})],routes:{root:Fe,selectedTemplate:dt,ongoingTask:ae,actions:ve,listTasks:pe,edit:Te},externalRoutes:{registerComponent:me,viewTechDoc:xe}}),Bt=nt.provide((0,l.eP)({component:Je,name:"EntityPicker",schema:Ae})),Ut=nt.provide((0,l.eP)({component:ct,name:"EntityNamePicker",validation:Kt,schema:_t})),Dt=nt.provide((0,l.eP)({component:ut,name:"RepoUrlPicker",validation:fn,schema:Pt})),Ce=nt.provide((0,l.eP)({component:vn,name:"OwnerPicker",schema:un})),we=nt.provide((0,v.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(9361),e.e(4288),e.e(7380)]).then(e.bind(e,87380)).then(lt=>lt.Router),mountPoint:Fe})),Ke=nt.provide((0,l.eP)({component:ne,name:"OwnedEntityPicker",schema:de})),Ye=nt.provide((0,l.eP)({component:Q,name:"EntityTagsPicker",schema:z})),We=nt.provide((0,v.P4)({name:"NextScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(9361),e.e(4288),e.e(5540)]).then(e.bind(e,5540)).then(lt=>lt.Router),mountPoint:Fe})),Ct=({error:lt})=>{const ye=(0,p.useRef)("");return(0,p.useEffect)(()=>{ye.current=String(Math.random())},[lt]),lt?p.createElement(k.Z,null,p.createElement(ot.SX,{id:ye.current,variant:"warning",message:lt.message})):null},It=(0,G.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),jt=lt=>{const{href:ye,text:Ze,Icon:Ue,...vt}=lt,it=It();return p.createElement(E.Z,{container:!0,direction:"row",spacing:1},p.createElement(E.Z,{item:!0},p.createElement(A.Z,{component:"div",className:it.svgIcon},Ue?p.createElement(Ue,null):p.createElement(wt.Z,null))),p.createElement(E.Z,{item:!0},p.createElement(ot.rU,{to:ye,...vt},Ze||ye)))},Gt=({output:lt})=>{const{links:ye=[]}=lt,Ze=(0,v.qD)(),Ue=(0,v.tg)(h.wi),vt=it=>{var yt;return it&&(yt=Ze.getSystemIcon(it))!=null?yt:wt.Z};return p.createElement(k.Z,{px:3,pb:3},ye.filter(({url:it,entityRef:yt})=>it||yt).map(({url:it,entityRef:yt,title:ft,icon:Zt})=>{if(yt){const tn=(0,u.of)(yt,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),gn=Ue(tn);return{title:ft,icon:Zt,url:gn}}return{title:ft,icon:Zt,url:it}}).map(({url:it,title:yt,icon:ft},Zt)=>p.createElement(jt,{key:`output-link-${Zt}`,href:it,text:yt!=null?yt:it,Icon:vt(ft),target:"_blank"})))},_n=e(75951),wn=(0,G.Z)(lt=>(0,Ne.Z)({root:{width:"100%"},button:{marginBottom:lt.spacing(2),marginLeft:lt.spacing(2)},actionsContainer:{marginBottom:lt.spacing(2)},resetContainer:{padding:lt.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),xn=({step:lt})=>{const[ye,Ze]=(0,p.useState)("");return(0,Ge.Z)(()=>{if(!lt.startedAt){Ze("");return}const Ue=lt.endedAt?te.ou.fromISO(lt.endedAt):te.ou.local(),vt=te.ou.fromISO(lt.startedAt),it=te.Xp.fromDateTimes(vt,Ue).toDuration().valueOf();Ze(_n(it,{round:!0}))},1e3),p.createElement(A.Z,{variant:"caption"},ye)},Tn=(0,G.Z)(lt=>(0,Ne.Z)({root:{color:lt.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:lt.palette.status.ok},error:{color:lt.palette.status.error}}));function kn(lt){const ye=Tn(),{active:Ze,completed:Ue,error:vt}=lt,it=()=>Ze?p.createElement(x.Z,{size:"24px"}):Ue?p.createElement(Le.Z,null):vt?p.createElement(O.Z,null):p.createElement(ce.Z,null);return p.createElement("div",{className:N()(ye.root,{[ye.completed]:Ue,[ye.error]:vt})},it())}const Mn=(0,p.memo)(lt=>{const{steps:ye,currentStepId:Ze,onUserStepChange:Ue}=lt,vt=wn(lt);return p.createElement("div",{className:vt.root},p.createElement(Se.Z,{activeStep:ye.findIndex(it=>it.id===Ze),orientation:"vertical",nonLinear:!0},ye.map((it,yt)=>{const ft=it.status==="cancelled",Zt=it.status==="processing",tn=it.status==="completed",gn=it.status==="failed",Zn=it.status==="skipped";return p.createElement(J.Z,{key:String(yt),expanded:!0},p.createElement(f.Z,{onClick:()=>Ue(it.id)},p.createElement(sn.Z,{StepIconProps:{completed:tn,error:gn||ft,active:Zt},StepIconComponent:kn,className:vt.stepWrapper},p.createElement("div",{className:vt.labelWrapper},p.createElement(A.Z,{variant:"subtitle2"},it.name),Zn?p.createElement(A.Z,{variant:"caption"},"Skipped"):p.createElement(xn,{step:it})))))})))}),yn=({links:lt=[]})=>lt.length>0,zn=lt=>{const{loadingText:ye}=lt,Ze=wn(),Ue=(0,_e.s0)(),vt=(0,v.tg)(Fe),it=(0,v.h_)(l.lc),yt=(0,v.tg)(dt),[ft,Zt]=(0,p.useState)(void 0),[tn,gn]=(0,p.useState)(!1),[Zn,er]=(0,p.useState)(void 0),{taskId:tr}=(0,v.Oi)(ae),Wn=(0,l.WQ)(tr),jn=Wn.completed,rr=Wn.cancelled,D=(0,p.useMemo)(()=>{var H,Oe;return(Oe=(H=Wn.task)==null?void 0:H.spec.steps.map(ze=>{var Mt;return{...ze,...(Mt=Wn==null?void 0:Wn.steps)==null?void 0:Mt[ze.id]}}))!=null?Oe:[]},[Wn]);(0,p.useEffect)(()=>{var H;const Oe=D.find(ze=>["failed","processing"].includes(ze.status));if(jn&&!Oe){er((H=D[D.length-1])==null?void 0:H.id);return}er(Oe==null?void 0:Oe.id)},[D,jn]);const I=ft!=null?ft:Zn,V=(0,p.useMemo)(()=>{if(!I)return ye||"Loading...";const H=Wn.stepLogs[I];return H!=null&&H.length?H.join(`
`):"Waiting for logs..."},[Wn.stepLogs,I,ye]),ie=Wn.completed&&!Wn.loading&&!Wn.task,{output:Me}=Wn,rt=()=>{var H,Oe,ze;if(!Wn.task||!((Oe=(H=Wn.task)==null?void 0:H.spec.templateInfo)!=null&&Oe.entityRef)){Ue(vt());return}const Mt=Wn.task.spec.parameters,{name:Ft,namespace:Ht}=(0,u.of)((ze=Wn.task.spec.templateInfo)==null?void 0:ze.entityRef);Ue(`${yt({templateName:Ft,namespace:Ht})}?${c().stringify({formData:JSON.stringify(Mt)})}`)},B=async()=>{gn(!0),await it.cancelTask(tr)};return p.createElement(ot.T3,{themeId:"home"},p.createElement(ot.h4,{pageTitleOverride:`Task ${tr}`,title:"Task Activity",subtitle:`Activity for task: ${tr}`}),p.createElement(ot.VY,null,ie?p.createElement(ot.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):p.createElement("div",null,p.createElement(E.Z,{container:!0},p.createElement(E.Z,{item:!0,xs:3},p.createElement(T.Z,null,p.createElement(Mn,{steps:D,currentStepId:I,onUserStepChange:Zt}),Me&&yn(Me)&&p.createElement(Gt,{output:Me}),p.createElement(C.Z,{className:Ze.button,onClick:rt,disabled:!jn,variant:"contained",color:"primary"},"Start Over"),p.createElement(C.Z,{className:Ze.button,onClick:B,disabled:jn||rr||tn,variant:"outlined",color:"secondary"},(rr||tn)&&!jn?"Cancelling...":"Cancel"))),p.createElement(E.Z,{item:!0,xs:9},!I&&p.createElement(ot.Ex,null),p.createElement("div",{style:{height:"80vh"}},p.createElement(Ct,{error:Wn.error}),p.createElement(ot.nU,{text:V})))))))}},15170:function(Rt,d,e){e.d(d,{T:function(){return x}});var n=e(2784),l=e(82108),u=e.n(l),m=e(80236),a=e(95544),c=e(90436),P=e(5806),b=e(21324),t=e(86619),v=e(19996),h=e(25505),$=e(38016),L=e(88013),k=e(73495),G=e(30705);const E=n.createElement(h.Z,{fontSize:"small"}),A=n.createElement(v.Z,{fontSize:"small"}),x=()=>{const f=(0,G.h_)(G.$v),{error:T,loading:C,availableTypes:_,selectedTypes:p,setSelectedTypes:W}=(0,k.Uh)();return C?n.createElement(m.Ex,null):_?T?(f.post({message:"Failed to load entity types",severity:"error"}),null):n.createElement(a.Z,{pb:1,pt:1},n.createElement(c.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),n.createElement(L.ZP,{id:"categories-picker",multiple:!0,options:_,value:p,onChange:(K,Ie)=>W(Ie),renderOption:(K,{selected:Ie})=>n.createElement(P.Z,{control:n.createElement(b.Z,{icon:E,checkedIcon:A,checked:Ie}),label:u()(K)}),size:"small",popupIcon:n.createElement($.Z,{"data-testid":"categories-picker-expand"}),renderInput:K=>n.createElement(t.Z,{...K,variant:"outlined"})})):null}},78990:function(Rt,d,e){e.d(d,{Ho:function(){return n.s},sG:function(){return n.d}});var n=e(23054),l=e(15170),u=e(12053),m=e(49462),a=e(34520),c=e(32272),P=e(19126),b=e.n(P),t=e(82394),v=e.n(t),h=e(88285),$=e(30705),L=e(73495),k=e(2784),G=e(68111),E=e(80236),A=e(72779),x=e.n(A),f=e(26228),T=e(82108),C=e.n(T);const _=null,p=null,W=null,K=null,Ie=null,ge=null,Xe=null},92573:function(Rt,d,e){e.d(d,{E1:function(){return mt},E5:function(){return Bt},FA:function(){return te},GQ:function(){return pe},Nd:function(){return oe},Rx:function(){return Ge},US:function(){return St},ay:function(){return Pt},gK:function(){return ce},lt:function(){return at},qO:function(){return Kt},wy:function(){return j}});var n=e(30705),l=e(2784),u=e(79692),m=e(50581),a=e(61837),c=e(86619),P=e(4614),b=e(7089),t=e(42494),v=e(84899),h=e(5806),$=e(21324),L=e(56939),k=e(73698),G=e(12231),E=e(90436),A=e(28899),x=e(86136),f=e(49378),T=e(95544),C=e(77277),_=e(38402),p=e(11776),W=e(21853),K=e(48760),Ie=e(76635),ge=e.n(Ie),Xe=e(64279),$t=e(25557),ot=e(18473),Vt=e(88013),kt=e(69294),J=e(80236),sn=e(19126),Se=e.n(sn),Ne=e(27742),O=e(35352),Le=e(48834).Buffer;const ce=(0,n.T0)({id:"plugin.search.queryservice"});class R{constructor(we){this.mockedResults=we}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const N=(0,u.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),te=Ce=>{const{text:we,preTag:Ke,postTag:Ye}=Ce,We=N(),Ct=(0,l.useMemo)(()=>we.split(new RegExp(`(${Ke}.+?${Ye})`)),[Ye,Ke,we]);return l.createElement(l.Fragment,null,Ct.map((It,jt)=>It.includes(Ke)?l.createElement("mark",{className:We.highlight,key:jt},It.replace(new RegExp(`${Ke}|${Ye}`,"g"),"")):It))},_e=(0,ot.CT)("search-context"),Ge=()=>{const Ce=(0,l.useContext)(_e);if(!Ce)throw new Error("useSearch must be used within a SearchContextProvider");const we=Ce.atVersion(1);if(!we)throw new Error("No SearchContext v1 found");return we},wt=()=>(0,l.useContext)(_e)!==void 0,pt={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Tt=(Ce=pt)=>{var we,Ke,Ye,We;const Ct=(0,n.h_)(ce),[It,jt]=(0,l.useState)(Ce.term),[Gt,_n]=(0,l.useState)(Ce.types),[wn,xn]=(0,l.useState)(Ce.filters),[Tn,kn]=(0,l.useState)(Ce.pageLimit),[Mn,yn]=(0,l.useState)(Ce.pageCursor),zn=(0,$t.Z)(It),lt=(0,$t.Z)(wn),ye=(0,Xe.default)(()=>Ct.query({term:It,types:Gt,filters:wn,pageLimit:Tn,pageCursor:Mn}),[It,Gt,wn,Tn,Mn]),Ze=!ye.loading&&!ye.error&&((we=ye.value)==null?void 0:we.nextPageCursor),Ue=!ye.loading&&!ye.error&&((Ke=ye.value)==null?void 0:Ke.previousPageCursor),vt=(0,l.useCallback)(()=>{var ft;yn((ft=ye.value)==null?void 0:ft.nextPageCursor)},[(Ye=ye.value)==null?void 0:Ye.nextPageCursor]),it=(0,l.useCallback)(()=>{var ft;yn((ft=ye.value)==null?void 0:ft.previousPageCursor)},[(We=ye.value)==null?void 0:We.previousPageCursor]);return(0,l.useEffect)(()=>{zn!==void 0&&It!==zn&&yn(void 0)},[It,zn,yn]),(0,l.useEffect)(()=>{lt!==void 0&&!(0,Ie.isEqual)(wn,lt)&&yn(void 0)},[wn,lt,yn]),{result:ye,term:It,setTerm:jt,types:Gt,setTypes:_n,filters:wn,setFilters:xn,pageLimit:Tn,setPageLimit:kn,pageCursor:Mn,setPageCursor:yn,fetchNextPage:Ze?vt:void 0,fetchPreviousPage:Ue?it:void 0}},q=Ce=>{const{initialState:we,children:Ke}=Ce,Ye=Tt(we);return l.createElement(n.fC,{attributes:{searchTypes:Ye.types.sort().join(",")}},l.createElement(_e.Provider,{value:(0,ot.EI)({1:Ye})},Ke))},oe=Ce=>{const{initialState:we,inheritParentContextIfAvailable:Ke,children:Ye}=Ce;return wt()&&Ke?l.createElement(l.Fragment,null,Ye):l.createElement(q,{initialState:we},Ye)},Ae=({children:Ce})=>{var we,Ke;const Ye=wn=>(0,$t.Z)(wn)!==wn,We=(0,n.z$)(),{term:Ct,result:It}=Ge(),jt=(Ke=(we=It.value)==null?void 0:we.numberOfResults)!=null?Ke:void 0,_n=Ye(It.loading)&&!It.loading;return(0,l.useEffect)(()=>{Ct&&_n&&We.captureEvent("search",Ct,{value:jt})},[We,Ct,jt,_n]),l.createElement(l.Fragment,null,Ce)};function Je(Ce){return(0,l.forwardRef)((we,Ke)=>l.createElement(oe,{inheritParentContextIfAvailable:!0},l.createElement(Ce,{...we,ref:Ke})))}const St=Je((0,l.forwardRef)((Ce,we)=>{const{onChange:Ke,onKeyDown:Ye=()=>{},onClear:We=()=>{},onSubmit:Ct=()=>{},debounceTime:It=200,clearButton:jt=!0,fullWidth:Gt=!0,value:_n,label:wn,placeholder:xn,inputProps:Tn={},InputProps:kn={},endAdornment:Mn,...yn}=Ce,zn=(0,n.h_)(n.Ds),[lt,ye]=(0,l.useState)("");(0,l.useEffect)(()=>{ye(tn=>tn!==_n?String(_n):tn)},[_n]),(0,K.Z)(()=>Ke(lt),It,[lt]);const Ze=(0,l.useCallback)(tn=>{ye(tn.target.value)},[ye]),Ue=(0,l.useCallback)(tn=>{Ye&&Ye(tn),Ct&&tn.key==="Enter"&&Ct()},[Ye,Ct]),vt=(0,l.useCallback)(()=>{Ke(""),We&&We()},[Ke,We]),it=wn?void 0:"Search",yt=xn!=null?xn:`Search in ${zn.getOptionalString("app.title")||"Backstage"}`,ft=l.createElement(m.Z,{position:"start"},l.createElement(a.Z,{"aria-label":"Query",size:"small",disabled:!0},l.createElement(W.Z,null))),Zt=l.createElement(m.Z,{position:"end"},l.createElement(C.Z,{"aria-label":"Clear",size:"small",onClick:vt,onKeyDown:tn=>{tn.key==="Enter"&&tn.stopPropagation()}},"Clear"));return l.createElement(Ae,null,l.createElement(c.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:we,value:lt,label:wn,placeholder:yt,InputProps:{startAdornment:ft,endAdornment:jt?Zt:Mn,...kn},inputProps:{"aria-label":it,...Tn},fullWidth:Gt,onChange:Ze,onKeyDown:Ue,...yn}))})),mt=Je((0,l.forwardRef)((Ce,we)=>{const{value:Ke="",onChange:Ye,...We}=Ce,{term:Ct,setTerm:It}=Ge();(0,l.useEffect)(()=>{Ke&&It(String(Ke))},[Ke,It]);const jt=(0,l.useCallback)(Gt=>{Ye?Ye(Gt):It(Gt)},[Ye,It]);return l.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},l.createElement(St,{...We,ref:we,value:Ct,onChange:jt}))})),Kt=(Ce=>we=>l.createElement(oe,{inheritParentContextIfAvailable:!0},l.createElement(Ce,{...we})))(function(we){const{loading:Ke,value:Ye,onChange:We=()=>{},options:Ct=[],getOptionLabel:It=Ze=>String(Ze),inputPlaceholder:jt,inputDebounceTime:Gt,freeSolo:_n=!0,fullWidth:wn=!0,clearOnBlur:xn=!1,"data-testid":Tn="search-autocomplete",...kn}=we,{setTerm:Mn}=Ge(),yn=(0,l.useCallback)(Ze=>Ze?typeof Ze=="string"?Ze:It(Ze):"",[It]),zn=(0,l.useMemo)(()=>yn(Ye),[Ye,yn]),lt=(0,l.useCallback)((Ze,Ue,vt,it)=>{Mn(yn(Ue)),We(Ze,Ue,vt,it)},[yn,Mn,We]),ye=(0,l.useCallback)(({InputProps:{ref:Ze,endAdornment:Ue},InputLabelProps:vt,...it})=>l.createElement(mt,{...it,ref:Ze,clearButton:!1,value:zn,placeholder:jt,debounceTime:Gt,endAdornment:Ke?l.createElement(P.Z,{"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20}):Ue}),[Ke,zn,jt,Gt]);return l.createElement(Vt.ZP,{...kn,"data-testid":Tn,value:Ye,onChange:lt,options:Ct,getOptionLabel:It,renderInput:ye,freeSolo:_n,fullWidth:wn,clearOnBlur:xn})}),$e=Ce=>{const{icon:we,primaryText:Ke,primaryTextTypographyProps:Ye,secondaryText:We,secondaryTextTypographyProps:Ct,disableTextTypography:It}=Ce;return React.createElement(React.Fragment,null,we?React.createElement(ListItemIcon,null,we):null,React.createElement(ListItemText,{primary:Ke,primaryTypographyProps:Ye,secondary:We,secondaryTypographyProps:Ct,disableTypography:It}))},_t=(Ce,we,Ke=[],Ye=250)=>{const We=(0,l.useRef)({}),Ct=Ce||(()=>Promise.resolve([])),[It,jt]=(0,kt.default)(Ct,[we],{loading:!0});if((0,K.Z)(()=>{We.current[we]===void 0&&(We.current[we]=jt(we).then(_n=>(We.current[we]=_n,_n)))},Ye,[jt,we]),Ke.length)return{loading:!1,value:Ke};const Gt=We.current[we];return Array.isArray(Gt)?{loading:!1,value:Gt}:It},ct=(Ce,we)=>{const{setFilters:Ke}=Ge();(0,l.useEffect)(()=>{we&&[we].flat().length>0&&Ke(Ye=>({...Ye,[Ce]:we}))},[])},hn=Ce=>{const{className:we,defaultValue:Ke,name:Ye,values:We,valuesDebounceMs:Ct,label:It,filterSelectedOptions:jt,limitTags:Gt,multiple:_n}=Ce,[wn,xn]=(0,l.useState)("");ct(Ye,Ke);const Tn=typeof We=="function"?We:void 0,kn=typeof We=="function"?void 0:We,{value:Mn,loading:yn}=_t(Tn,wn,kn,Ct),{filters:zn,setFilters:lt}=Ge(),ye=zn[Ye]||(_n?[]:null),Ze=(it,yt)=>{lt(ft=>{const{[Ye]:Zt,...tn}=ft;return yt?{...tn,[Ye]:yt}:{...tn}})},Ue=it=>l.createElement(c.Z,{...it,name:"search",variant:"outlined",label:It,fullWidth:!0}),vt=(it,yt)=>it.map((ft,Zt)=>l.createElement(b.Z,{label:ft,color:"primary",...yt({index:Zt})}));return l.createElement(Vt.ZP,{filterSelectedOptions:jt,limitTags:Gt,multiple:_n,className:we,id:`${_n?"multi-":""}select-filter-${Ye}--select`,options:Mn||[],loading:yn,value:ye,onChange:Ze,onInputChange:(it,yt)=>xn(yt),renderInput:Ue,renderTags:vt})},un=(0,u.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),vn=Ce=>{const{className:we,defaultValue:Ke,label:Ye,name:We,values:Ct=[],valuesDebounceMs:It}=Ce,jt=un(),{filters:Gt,setFilters:_n}=Ge();ct(We,Ke);const wn=typeof Ct=="function"?Ct:void 0,xn=typeof Ct=="function"?void 0:Ct,{value:Tn=[],loading:kn}=_t(wn,"",xn,It),Mn=yn=>{const{target:{value:zn,checked:lt}}=yn;_n(ye=>{const{[We]:Ze,...Ue}=ye,vt=(Ze||[]).filter(yt=>yt!==zn),it=lt?[...vt,zn]:vt;return it.length?{...Ue,[We]:it}:Ue})};return l.createElement(t.Z,{className:we,disabled:kn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Ye?l.createElement(v.Z,{className:jt.label},Ye):null,Tn.map(yn=>{var zn;return l.createElement(h.Z,{key:yn,classes:{root:jt.checkboxWrapper,label:jt.textWrapper},label:yn,control:l.createElement($.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":yn},value:yn,name:yn,onChange:Mn,checked:((zn=Gt[We])!=null?zn:[]).includes(yn)})})}))},st=Ce=>{const{className:we,defaultValue:Ke,label:Ye,name:We,values:Ct,valuesDebounceMs:It}=Ce,jt=un();ct(We,Ke);const Gt=typeof Ct=="function"?Ct:void 0,_n=typeof Ct=="function"?void 0:Ct,{value:wn=[],loading:xn}=_t(Gt,"",_n,It),{filters:Tn,setFilters:kn}=Ge(),Mn=yn=>{const{target:{value:zn}}=yn;kn(lt=>{const{[We]:ye,...Ze}=lt;return zn?{...Ze,[We]:zn}:Ze})};return l.createElement(t.Z,{disabled:xn,className:we,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Ye?l.createElement(L.Z,{className:jt.label,margin:"dense"},Ye):null,l.createElement(k.Z,{variant:"outlined",value:Tn[We]||"",onChange:Mn},l.createElement(G.Z,{value:""},l.createElement("em",null,"All")),wn.map(yn=>l.createElement(G.Z,{key:yn,value:yn},l.createElement(E.Z,{variant:"inherit",noWrap:!0},yn)))))},Pt=Ce=>{const{component:we,...Ke}=Ce;return l.createElement(we,{...Ke})};Pt.Checkbox=Ce=>l.createElement(Pt,{...Ce,component:vn}),Pt.Select=Ce=>l.createElement(Pt,{...Ce,component:st}),Pt.Autocomplete=Ce=>l.createElement(Pt,{...Ce,component:hn});const fn=Ce=>Le.from(Ce.toString(),"utf-8").toString("base64"),pn=Ce=>Ce?Number(Le.from(Ce,"base64").toString("utf-8")):0,fe=Ce=>{const{total:we=-1,cursor:Ke,hasNextPage:Ye,onCursorChange:We,limit:Ct=25,limitLabel:It="Results per page:",limitText:jt=({from:Mn,to:yn})=>we>0?`of ${we}`:`${Mn}-${yn}`,limitOptions:Gt,onLimitChange:_n,...wn}=Ce,xn=(0,l.useMemo)(()=>pn(Ke),[Ke]),Tn=(0,l.useCallback)((Mn,yn)=>{We==null||We(fn(yn))},[We]),kn=(0,l.useCallback)(Mn=>{const yn=Mn.target.value;_n==null||_n(parseInt(yn,10))},[_n]);return l.createElement(A.Z,{...wn,component:"div",count:we,page:xn,nextIconButtonProps:{...Ye!==void 0&&{disabled:!Ye}},onPageChange:Tn,rowsPerPage:Ct,labelRowsPerPage:It,labelDisplayedRows:jt,rowsPerPageOptions:Gt,onRowsPerPageChange:kn})},j=Ce=>{const{pageLimit:we,setPageLimit:Ke,pageCursor:Ye,setPageCursor:We,fetchNextPage:Ct}=Ge(),It=(0,l.useCallback)(jt=>{Ke(jt),We(void 0)},[Ke,We]);return l.createElement(fe,{...Ce,hasNextPage:!!Ct,limit:we,onLimitChange:It,cursor:Ye,onCursorChange:We})},X=Ce=>{const{children:we}=Ce,Ke=Ge(),{result:Ye,...We}=Ke;return we(Ye,We)},ue=Ce=>{const{query:we,children:Ke}=Ce,Ye=(0,n.h_)(ce),We=(0,Xe.default)(()=>{const{term:Ct="",types:It=[],filters:jt={},...Gt}=we;return Ye.query({...Gt,term:Ct,types:It,filters:jt})},[we]);return Ke(We,we)},he=Ce=>{const{query:we,children:Ke}=Ce;return we?l.createElement(ue,{query:we},Ke):l.createElement(X,null,Ke)},De=Ce=>{const{query:we,children:Ke,noResultsComponent:Ye=l.createElement(J.ub,{missing:"data",title:"Sorry, no results were found"}),...We}=Ce;return l.createElement(he,{query:we},({loading:Ct,error:It,value:jt})=>Ct?l.createElement(J.Ex,null):It?l.createElement(J.Gk,{title:"Error encountered while fetching search results",error:It}):jt!=null&&jt.results.length?(0,Ie.isFunction)(Ke)?Ke(jt):l.createElement(Dt,{...We,results:jt.results},Ke):Ye)},at=Ce=>l.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},l.createElement(De,{...Ce})),tt=({result:Ce,highlight:we,icon:Ke,secondaryAction:Ye,lineClamp:We=5})=>Ce?l.createElement(l.Fragment,null,Ke&&l.createElement(x.Z,null,Ke),l.createElement(f.Z,{primaryTypographyProps:{variant:"h6"},primary:l.createElement(J.rU,{noTrack:!0,to:Ce.location},we!=null&&we.fields.title?l.createElement(te,{text:(we==null?void 0:we.fields.title)||"",preTag:(we==null?void 0:we.preTag)||"",postTag:(we==null?void 0:we.postTag)||""}):Ce.title),secondary:l.createElement(E.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:We,overflow:"hidden"},color:"textSecondary",variant:"body2"},we!=null&&we.fields.text?l.createElement(te,{text:we.fields.text,preTag:we.preTag,postTag:we.postTag}):Ce.text)}),Ye&&l.createElement(T.Z,{alignItems:"flex-end"},Ye)):null,ut=Ce=>l.createElement(n.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},l.createElement(tt,{...Ce})),Lt=Ce=>{const{error:we,loading:Ke,resultItems:Ye,renderResultItem:We=Gt=>React.createElement(ut,{key:Gt.document.location,result:Gt.document}),disableRenderingWithNoResults:Ct,noResultsComponent:It=Ct?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...jt}=Ce;return Ke?React.createElement(Progress,null):we?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:we}):Ye!=null&&Ye.length?React.createElement(List,{...jt},Ye.map(We)):React.createElement(React.Fragment,null,It)},de=Ce=>{const{query:we,renderResultItem:Ke,children:Ye,...We}=Ce,Ct=Ut(Ye);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(he,{query:we},({loading:It,error:jt,value:Gt})=>React.createElement(Lt,{...We,error:jt,loading:It,resultItems:Gt==null?void 0:Gt.results,renderResultItem:Ke!=null?Ke:Ct})))},ne=(0,u.Z)(Ce=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ce.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ce.spacing(.5)}})),S=Ce=>{const we=ne(),{label:Ke,children:Ye,...We}=Ce;return React.createElement(Chip,{...We,className:we.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Ke,": ",Ye)})},z=()=>null,Q=(0,u.Z)(Ce=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ce.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),me=Ce=>{const we=Q(),{label:Ke,value:Ye="None",onChange:We,onDelete:Ct}=Ce,It=useCallback(jt=>{We(jt.target.value)},[We]);return React.createElement(S,{label:Ke,onDelete:Ct},React.createElement(Typography,{role:"textbox",component:"span",className:we.root,onChange:It,contentEditable:!0,suppressContentEditableWarning:!0},Ye))},xe=(0,u.Z)(Ce=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Fe=Ce=>{const we=xe(),{label:Ke,value:Ye="none",onChange:We,onDelete:Ct,children:It}=Ce,jt=useCallback(Gt=>{We(Gt.target.value)},[We]);return React.createElement(S,{label:Ke,onDelete:Ct},React.createElement(Select,{className:we.root,value:Ye,onChange:jt,input:React.createElement(InputBase,null),IconComponent:z},React.createElement(MenuItem,{value:"none"},"None"),It))};function He(Ce){const we=ne(),[Ke,Ye]=useState(null),{error:We,loading:Ct,icon:It,title:jt,titleProps:Gt={},link:_n=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:we.listSubheaderLinkIcon})),linkProps:wn={},filterOptions:xn,renderFilterOption:Tn=it=>React.createElement(MenuItem,{key:String(it),value:String(it)},it),filterFields:kn,renderFilterField:Mn,resultItems:yn,renderResultItem:zn=it=>React.createElement(ut,{key:it.document.location,result:it.document}),disableRenderingWithNoResults:lt,noResultsComponent:ye=lt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ze}=Ce,Ue=useCallback(it=>{Ye(it.currentTarget)},[]),vt=useCallback(()=>{Ye(null)},[]);return Ct?React.createElement(Progress,null):We?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:We}):yn!=null&&yn.length?React.createElement(List,{...Ze},React.createElement(ListSubheader,{className:we.listSubheader},It,React.createElement(Typography,{className:we.listSubheaderName,component:"strong",...Gt},jt),xn?React.createElement(Chip,{className:we.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Ue}):null,xn?React.createElement(Menu,{id:"filters-menu",anchorEl:Ke,open:Boolean(Ke),onClose:vt,onClick:vt,keepMounted:!0},xn.map(Tn)):null,kn==null?void 0:kn.map(it=>{var yt;return(yt=Mn==null?void 0:Mn(it))!=null?yt:null}),React.createElement(Link,{className:we.listSubheaderLink,to:"/search",...wn},_n)),yn.map(zn)):React.createElement(React.Fragment,null,ye)}function dt(Ce){const{query:we,children:Ke,renderResultItem:Ye,linkProps:We={},...Ct}=Ce,It=Ut(Ke);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(he,{query:we},({loading:jt,error:Gt,value:_n},{term:wn,types:xn,pageCursor:Tn,filters:kn={}})=>{const Mn=`/search?${qs.stringify({term:wn,types:xn,filters:kn,pageCursor:Tn,query:wn},{arrayFormat:"brackets"})}`;return React.createElement(He,{...Ct,error:Gt,loading:jt,linkProps:{to:Mn,...We},filterFields:Object.keys(kn),resultItems:_n==null?void 0:_n.results,renderResultItem:Ye!=null?Ye:It})}))}const ae=(0,u.Z)(Ce=>({root:{display:"flex",justifyContent:"space-between",gap:Ce.spacing(2),margin:Ce.spacing(2,0)}})),pe=()=>{const{fetchNextPage:Ce,fetchPreviousPage:we}=Ge(),Ke=ae();return!Ce&&!we?l.createElement(l.Fragment,null):l.createElement("nav",{"aria-label":"pagination navigation",className:Ke.root},l.createElement(C.Z,{"aria-label":"previous page",disabled:!we,onClick:we,startIcon:l.createElement(O.Z,null)},"Previous"),l.createElement(C.Z,{"aria-label":"next page",disabled:!Ce,onClick:Ce,endIcon:l.createElement(Ne.Z,null)},"Next"))},ve="search.results.list.items.extensions.v1",Te=(Ce,we)=>{for(const Ke of Ce){if(!(0,l.isValidElement)(Ke))continue;const Ye=(0,n.IY)(Ke,ve);if(Ye!=null&&Ye(we))return(0,l.cloneElement)(Ke,{rank:we.rank,highlight:we.highlight,result:we.document,...Ke.props})}return null},nt=Ce=>{const{rank:we,result:Ke,noTrack:Ye,children:We,alignItems:Ct="flex-start",...It}=Ce,jt=(0,n.z$)(),Gt=(0,l.useCallback)(()=>{Ye||Ke&&jt.captureEvent("discover",Ke.title,{attributes:{to:Ke.location},value:we})},[we,Ke,Ye,jt]);return l.createElement(_.Z,{divider:!0,alignItems:Ct,onClickCapture:Gt,...It},We)},Bt=Ce=>{const{name:we,component:Ke,predicate:Ye=()=>!0}=Ce;return(0,n.YO)({name:we,component:{lazy:()=>Ke().then(We=>Ct=>l.createElement(nt,{rank:Ct.rank,result:Ct.result,noTrack:Ct.noTrack},(0,l.createElement)(We,Ct)))},data:{[ve]:Ye}})},Ut=Ce=>{const we=(0,n.vJ)(Ce,Ke=>Ke.selectByComponentData({key:ve}).getElements(),[Ce]);return(0,l.useCallback)((Ke,Ye)=>{const We=Te(we,Ke);return l.createElement(l.Fragment,{key:Ye},We!=null?We:l.createElement(nt,{rank:Ke.rank,result:Ke.document},l.createElement(ut,{rank:Ke.rank,highlight:Ke.highlight,result:Ke.document})))},[we])},Dt=Ce=>{const{results:we,children:Ke,...Ye}=Ce,We=Ut(Ke);return l.createElement(p.Z,{...Ye},we.map(We))}},47517:function(Rt,d,e){e.d(d,{S:function(){return un},a:function(){return _t},b:function(){return Kt},c:function(){return fe},e:function(){return Ae},f:function(){return Je},r:function(){return q},u:function(){return ct}});var n=e(80236),l=e(30705),u=e(92573),m=e(60364),a=e(79249),c=e(38724),P=e(60905),b=e(85256),t=e(49429),v=e(8629),h=e(79692),$=e(94339),L=e(32552),k=e(24579),G=e(27616),E=e(8284),A=e(70660),x=e(11776),f=e(38402),T=e(86136),C=e(49378),_=e(99152),p=e(6487),W=e(42494),K=e(56939),Ie=e(73698),ge=e(7089),Xe=e(12231),$t=e(21324),ot=e(95544),Vt=e(77277),kt=e(61837),J=e(27597),sn=e(87685),Se=e(2784),Ne=e(73557),O=e(32272),Le=e(19126),ce=e.n(Le),R=e(18473),N=e(55649),te=e(25557),_e=e(62155),Ge=e(38016),wt=e(56881),pt=e(64279);class Tt{constructor(ue){this.discoveryApi=ue.discoveryApi,this.identityApi=ue.identityApi}async query(ue){const{token:he}=await this.identityApi.getCredentials(),De=ce().stringify(ue),at=`${await this.discoveryApi.getBaseUrl("search")}/query?${De}`,tt=await fetch(at,{headers:he?{Authorization:`Bearer ${he}`}:{}});if(!tt.ok)throw await O.VL.fromResponse(tt);return tt.json()}}const q=(0,l.NT)({id:"search"}),oe=(0,l.rx)({id:"search",apis:[(0,l.ni)({api:u.gK,deps:{discoveryApi:l.NW,identityApi:l.$4},factory:({discoveryApi:X,identityApi:ue})=>new Tt({discoveryApi:X,identityApi:ue})})],routes:{root:q}}),Ae=oe.provide((0,l.P4)({name:"SearchPage",component:()=>e.e(1999).then(e.bind(e,31999)).then(X=>X.SearchPage),mountPoint:q})),Je=oe.provide((0,l.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(2066).then(e.bind(e,32066)).then(X=>X.SidebarSearchModal)}})),St=oe.provide((0,l.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(3275).then(e.bind(e,33275)).then(X=>X.HomePageSearchBar)}})),mt=(0,h.Z)(X=>({dialogTitle:{gap:X.spacing(1),display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto","&> button":{marginTop:X.spacing(1)}},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:X.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),rn=({toggleModal:X})=>{const ue=mt(),he=(0,Ne.s0)(),{transitions:De}=(0,m.Z)(),{focusContent:at}=(0,n.r0)(),{term:tt}=(0,u.Rx)(),ut=(0,Se.useRef)(null),Lt=`${(0,l.tg)(q)()}?query=${tt}`;(0,Se.useEffect)(()=>{var S;(S=ut==null?void 0:ut.current)==null||S.focus()});const de=(0,Se.useCallback)(()=>{setTimeout(at,De.duration.leavingScreen)},[at,De]),ne=(0,Se.useCallback)(S=>{S.key==="Enter"&&(he(Lt),de())},[he,de,Lt]);return Se.createElement(Se.Fragment,null,Se.createElement(a.Z,null,Se.createElement(ot.Z,{className:ue.dialogTitle},Se.createElement(u.E1,{className:ue.input,inputProps:{ref:ut},onKeyDown:ne}),Se.createElement(kt.Z,{"aria-label":"close",onClick:X},Se.createElement(sn.Z,null)))),Se.createElement(c.Z,null,Se.createElement(P.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},Se.createElement(P.Z,{item:!0},Se.createElement(Vt.Z,{to:Lt,onClick:de,endIcon:Se.createElement(J.Z,null),component:n.rU,color:"primary"},"View Full Results"))),Se.createElement(b.Z,null),Se.createElement(u.lt,{onClick:de,onKeyDown:de})),Se.createElement(t.Z,{className:ue.dialogActionsContainer},Se.createElement(P.Z,{container:!0,direction:"row"},Se.createElement(P.Z,{item:!0,xs:12},Se.createElement(u.GQ,null)))))},Kt=X=>{var ue;const{open:he=!0,hidden:De,toggleModal:at,children:tt}=X,ut=mt();return Se.createElement(v.Z,{classes:{paperFullWidth:ut.paperFullWidth},onClose:at,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:he,hidden:De},he&&Se.createElement(u.Nd,{inheritParentContextIfAvailable:!0},(ue=tt&&tt({toggleModal:at}))!=null?ue:Se.createElement(rn,{toggleModal:at})))},$e=(0,R.CT)("search-modal-context"),_t=X=>{const ue=ct(X.showInitially),he=(0,R.EI)({1:ue});return Se.createElement($e.Provider,{value:he},X.children)};function ct(X=!1){const[ue,he]=(0,Se.useState)({hidden:!X,open:X}),De=(0,Se.useCallback)(()=>he(S=>({open:!0,hidden:!S.hidden})),[]),at=(0,Se.useCallback)(S=>he(z=>({open:z.open||S,hidden:!S})),[]),tt=(0,Se.useContext)($e),ut=tt==null?void 0:tt.atVersion(1),Lt=!!(ut!=null&&ut.state),de=(0,Ne.TH)(),ne=`${de.pathname}${de.search}${de.hash}`;return(0,N.Z)(()=>{he(S=>({open:S.open,hidden:!0}))},[ne]),Lt?ut:{state:ue,toggleModal:De,setOpen:at}}const hn=()=>{const X=(0,Ne.TH)(),{term:ue,setTerm:he,types:De,setTypes:at,pageCursor:tt,setPageCursor:ut,filters:Lt,setFilters:de}=(0,u.Rx)(),ne=(0,te.Z)(X.search);return(0,Se.useEffect)(()=>{if(X.search===ne)return;const S=ce().parse(X.search.substring(1),{arrayLimit:0})||{};S.filters&&de(S.filters),S.query&&he(S.query),S.pageCursor&&ut(S.pageCursor),S.types&&at(S.types)},[ne,X,he,at,ut,de]),(0,Se.useEffect)(()=>{const S=ce().stringify({query:ue,types:De,pageCursor:tt,filters:Lt},{arrayFormat:"brackets"}),z=`${window.location.pathname}?${S}`;window.history.replaceState(null,document.title,z)},[ue,De,tt,Lt]),null},un=()=>{const X=(0,Ne.pC)();return Se.createElement(u.Nd,null,Se.createElement(hn,null),X)},vn=(0,h.Z)(X=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:X.spacing(1)},icon:{color:X.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:X.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:X.spacing(2,0),"&.Mui-expanded":{margin:X.spacing(2,0)}},accordionDetails:{padding:X.spacing(0,0,1)}})),st=X=>{const ue=vn(),{filters:he,setPageCursor:De,setTypes:at,term:tt,types:ut}=(0,u.Rx)(),Lt=(0,l.h_)(u.gK),[de,ne]=(0,Se.useState)(!0),{defaultValue:S,name:z,showCounts:Q,types:me}=X,xe=()=>ne(pe=>!pe),Fe=pe=>()=>{at(pe!==""?[pe]:[]),De(void 0),ne(!1)};(0,Se.useEffect)(()=>{S&&at([S])},[]);const He=[{value:"",name:"All",icon:Se.createElement(wt.Z,null)},...me],dt=ut[0]||"",{value:ae}=(0,pt.default)(async()=>{if(!Q)return{};const pe=await Promise.all(He.map(ve=>ve.value).map(async ve=>{const{numberOfResults:Te}=await Lt.query({term:tt,types:ve?[ve]:[],filters:ut.includes(ve)||!ut.length&&!ve?he:{},pageLimit:0});return[ve,Te!==void 0?`${Te>=1e4?">10000":Te} results`:" -- "]}));return Object.fromEntries(pe)},[he,Q,tt,ut]);return Se.createElement($.Z,{className:ue.card},Se.createElement(L.Z,{title:z,titleTypographyProps:{variant:"overline"}}),Se.createElement(k.Z,{className:ue.cardContent},Se.createElement(G.Z,{className:ue.accordion,expanded:de,onChange:xe},Se.createElement(E.Z,{classes:{root:ue.accordionSummary,content:ue.accordionSummaryContent},expandIcon:Se.createElement(Ge.Z,{className:ue.icon}),IconButtonProps:{size:"small"}},de?"Collapse":He.filter(pe=>pe.value===dt)[0].name),Se.createElement(A.Z,{classes:{root:ue.accordionDetails}},Se.createElement(x.Z,{className:ue.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},He.map(pe=>Se.createElement(Se.Fragment,{key:pe.value},Se.createElement(b.Z,null),Se.createElement(f.Z,{selected:ut[0]===pe.value||ut.length===0&&pe.value==="",onClick:Fe(pe.value),button:!0},Se.createElement(T.Z,null,(0,Se.cloneElement)(pe.icon,{className:ue.listItemIcon})),Se.createElement(C.Z,{primary:pe.name,secondary:ae&&ae[pe.value]})))))))))},Pt=(0,h.Z)(X=>({tabs:{borderBottom:`1px solid ${X.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:X.typography.fontWeightBold,fontSize:X.typography.pxToRem(13),color:X.palette.text.primary,minWidth:"130px"}})),fn=X=>{const ue=Pt(),{setPageCursor:he,setTypes:De,types:at}=(0,u.Rx)(),{defaultValue:tt,types:ut}=X,Lt=(ne,S)=>{De(S!==""?[S]:[]),he(void 0)};(0,Se.useEffect)(()=>{tt&&De([tt])},[]);const de=[{value:"",name:"All"},...ut];return Se.createElement(_.Z,{"aria-label":"List of search types tabs",className:ue.tabs,indicatorColor:"primary",value:at.length===0?"":at[0],onChange:Lt},de.map((ne,S)=>Se.createElement(p.Z,{key:S,className:ue.tab,label:ne.name,value:ne.value})))},pn=(0,h.Z)(X=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:X.spacing(1)},chip:{margin:2}})),fe=X=>{const{className:ue,defaultValue:he,name:De,values:at=[]}=X,tt=pn(),{types:ut,setTypes:Lt}=(0,u.Rx)();(0,_e.Z)(()=>{ut.length||(he&&Array.isArray(he)?Lt(he):he&&Lt([he]))});const de=ne=>{const S=ne.target.value;Lt(S)};return Se.createElement(W.Z,{className:ue,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},Se.createElement(K.Z,{className:tt.label,margin:"dense"},De),Se.createElement(Ie.Z,{multiple:!0,variant:"outlined",value:ut,onChange:de,placeholder:"All Results",renderValue:ne=>Se.createElement("div",{className:tt.chips},ne.map(S=>Se.createElement(ge.Z,{key:S,label:S,className:tt.chip,size:"small"})))},at.map(ne=>Se.createElement(Xe.Z,{key:ne,value:ne},Se.createElement($t.Z,{checked:ut.indexOf(ne)>-1}),Se.createElement(C.Z,{primary:ne})))))};fe.Accordion=X=>Se.createElement(st,{...X}),fe.Tabs=X=>Se.createElement(fn,{...X});const j=X=>{const ue=useRouteRef(q),{focusContent:he}=useContent(),De=useNavigate(),at=useCallback(tt=>{const ut=qs.stringify({query:tt},{addQueryPrefix:!0});he(),De(`${ue()}${ut}`)},[he,De,ue]);return React.createElement(SidebarSearchField,{icon:X.icon,onSearch:at,to:"/search"})}},23778:function(Rt,d,e){e.d(d,{Sc:function(){return n.c},YC:function(){return n.f},Z9:function(){return n.e}});var n=e(47517),l=e(80236),u=e(30705),m=e(92573),a=e(2784),c=e(32272),P=e(19126),b=e.n(P),t=e(18473)},44741:function(Rt,d,e){e.d(d,{Wf:function(){return de}});var n=e(80236),l=e(30705),u=e(2784),m=e(64279),a=e(79692),c=e(38724),P=e(49429),b=e(77277),t=e(29611),v=e(60905),h=e(8629),$=e(79249),L=e(35292),k=e(37390),G=e(97485),E=e(15584),A=e(91256),x=e(58987),f=e(89571),T=e(27556),C=e(90436),_=e(90324),p=e(70595),W=e(43181),K=e(58238),Ie=e(71346),ge=e.n(Ie),Xe=e(62432),$t=e(26506);const ot=(0,l.T0)({id:"plugin.techradar.service"});var Vt=(S=>(S[S.Down=-1]="Down",S[S.NoChange=0]="NoChange",S[S.Up=1]="Up",S))(Vt||{});const kt=(0,a.Z)(S=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:S.palette.text.primary,fontSize:"25px",fontWeight:800,opacity:.7}}),{name:"PluginTechRadarGrid"}),J=S=>{const{radius:z,rings:Q}=S,me=kt(S),xe=(dt,ae)=>[u.createElement("circle",{key:`c${dt}`,cx:0,cy:0,r:ae,className:me.ring}),u.createElement("text",{key:`t${dt}`,y:ae!==void 0?-ae+42:void 0,textAnchor:"middle",className:me.text,style:{fill:Q[dt].color},"data-testid":"radar-ring-heading"},Q[dt].name)],Fe=[u.createElement("line",{key:"x",x1:0,y1:-z,x2:0,y2:z,className:me.axis,"data-testid":"radar-grid-x-line"}),u.createElement("line",{key:"y",x1:-z,y1:0,x2:z,y2:0,className:me.axis,"data-testid":"radar-grid-y-line"})],He=Q.map(dt=>dt.outerRadius).map((dt,ae)=>xe(ae,dt));return u.createElement(u.Fragment,null,Fe.concat(...He))};function sn(S){return Boolean(S&&S!=="#"&&S.length>0)}const Se=({url:S,className:z,children:Q})=>sn(S)?u.createElement(n.rU,{className:z,to:S},Q):u.createElement(u.Fragment,null,Q),Ne=S=>{const{timeline:z}=S;return u.createElement(u.Fragment,null,u.createElement(C.Z,{variant:"h6",gutterBottom:!0},"History"),u.createElement(A.Z,{component:T.Z},u.createElement(k.Z,{"aria-label":"simple table"},u.createElement(x.Z,null,u.createElement(f.Z,null,u.createElement(E.Z,{align:"left"},"Moved in direction"),u.createElement(E.Z,{align:"left"},"Moved to ring"),u.createElement(E.Z,{align:"left"},"Moved on date"),u.createElement(E.Z,{align:"left"},"Description"))),u.createElement(G.Z,null,(z==null?void 0:z.length)===0&&u.createElement(f.Z,{key:"no-timeline"},u.createElement(E.Z,{component:"th",scope:"row"},"No Timeline")),z==null?void 0:z.map(Q=>u.createElement(f.Z,{key:Q.description},u.createElement(E.Z,{component:"th",scope:"row"},Q.moved===Vt.Up?u.createElement(_.Z,null):"",Q.moved===Vt.Down?u.createElement(p.Z,null):"",Q.moved===Vt.NoChange?u.createElement(W.Z,null):""),u.createElement(E.Z,{align:"left"},Q.ring.name?Q.ring.name:""),u.createElement(E.Z,{align:"left"},Q.date.toLocaleDateString()?Q.date.toLocaleDateString():""),u.createElement(E.Z,{align:"left"},Q.description?Q.description:"")))))))},O=S=>{function z(pe,ve){return sn(pe)||Boolean(ve&&ve.length>0)}const{open:Q,onClose:me,title:xe,description:Fe,timeline:He,url:dt,links:ae}=S;return u.createElement(h.Z,{"data-testid":"radar-description",open:Q,onClose:me},u.createElement($.Z,{"data-testid":"radar-description-dialog-title"},xe),u.createElement(c.Z,{dividers:!0},u.createElement(n.SA,{content:Fe}),u.createElement(Ne,{timeline:He})),z(dt,ae)&&u.createElement(P.Z,null,ae==null?void 0:ae.map(pe=>u.createElement(b.Z,{component:n.rU,to:pe.url,onClick:me,color:"primary",startIcon:u.createElement(L.Z,null),key:pe.url},pe.title)),sn(dt)&&u.createElement(b.Z,{component:n.rU,to:dt,onClick:me,color:"primary",startIcon:u.createElement(L.Z,null),key:dt},"LEARN MORE")))},Le=(0,a.Z)(S=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:S.palette.common.white,textAnchor:"middle"},link:{cursor:"pointer"}})),ce=(S,z)=>{const Q={fill:S};let me=u.createElement("circle",{r:9,style:Q});return z&&z>0?me=u.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:Q}):z&&z<0&&(me=u.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:Q})),me},R=S=>{const z=Le(S),[Q,me]=u.useState(!1),{moved:xe,description:Fe,timeline:He,title:dt,color:ae,url:pe,links:ve,value:Te,x:nt,y:Bt,onMouseEnter:Ut,onMouseLeave:Dt,onClick:Ce}=S,we=ce(ae,xe),Ke=()=>{me(!0)},Ye=()=>{me(!1)},We=()=>{me(!Q)};return u.createElement("g",{transform:`translate(${nt}, ${Bt})`,onMouseEnter:Ut,onMouseLeave:Dt,onClick:Ce,"data-testid":"radar-entry"}," ",Q&&u.createElement(O,{open:Q,onClose:Ye,title:dt||"no title",description:Fe||"no description",timeline:He||[],url:pe,links:ve}),Fe?u.createElement("a",{className:z.link,onClick:Ke,role:"button",href:"#",tabIndex:0,onKeyPress:We},we):u.createElement(Se,{url:pe,className:z.link},we),u.createElement("text",{y:3,className:z.text},Te))},N=(0,a.Z)(S=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:S.palette.common.white}})),te=S=>{const z=N(S),{visible:Q,text:me}=S,xe=(0,u.useRef)(null),Fe=(0,u.useRef)(null),He=(0,u.useRef)(null),dt=(0,u.useRef)(null),ae=()=>{if(xe.current){const{x:pe,y:ve}=S,Te=xe.current.getBBox(),nt=5,Bt=4;Fe.current&&Fe.current.setAttribute("transform",`translate(${pe-Te.width/2}, ${ve-Te.height-Bt})`),He.current&&(He.current.setAttribute("x",String(-nt)),He.current.setAttribute("y",String(-Te.height)),He.current.setAttribute("width",String(Te.width+2*nt)),He.current.setAttribute("height",String(Te.height+Bt))),dt.current&&dt.current.setAttribute("transform",`translate(${Te.width/2-nt}, ${Bt-1})`)}};return(0,u.useLayoutEffect)(()=>{ae()}),u.createElement("g",{ref:Fe,x:0,y:0,className:Q?z.visibleBubble:z.bubble,"data-testid":"radar-bubble"},u.createElement("rect",{ref:He,rx:4,ry:4,className:z.background}),u.createElement("text",{ref:xe,className:z.text},me),u.createElement("path",{ref:dt,d:"M 0,0 10,0 5,8 z",className:z.background}))},_e=(0,a.Z)(S=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:S.palette.text.secondary}})),Ge=S=>{const{x:z,y:Q}=S,me=_e(S);return u.createElement("text",{"data-testid":"radar-footer",transform:`translate(${z}, ${Q})`,className:me.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},wt=({url:S,description:z,title:Q,classes:me,active:xe,links:Fe,timeline:He})=>{const[dt,ae]=u.useState(!1),pe=()=>{ae(!0)},ve=()=>{ae(!1)},Te=()=>{ae(!dt)};return z?u.createElement(u.Fragment,null,u.createElement(C.Z,{component:"span",className:me.entryLink,onClick:pe,role:"button",tabIndex:0,onKeyPress:Te},u.createElement(C.Z,{component:"span",className:xe?me.activeEntry:me.entry},Q)),dt&&u.createElement(O,{open:dt,onClose:ve,title:Q||"no title",url:S,description:z,timeline:He||[],links:Fe})):u.createElement(Se,{url:S,className:me.entryLink},u.createElement(C.Z,{component:"span",className:xe?me.activeEntry:me.entry},Q))},pt=({ring:S,entries:z,classes:Q,onEntryMouseEnter:me,onEntryMouseLeave:xe})=>u.createElement("div",{"data-testid":"radar-ring",key:S.id,className:Q.ring},u.createElement("h3",{className:Q.ringHeading,style:{color:S.color},"data-testid":"radar-legend-heading"},S.name),z.length===0?u.createElement(K.ZP,{paragraph:!0,className:Q.ringEmpty},"(empty)"):u.createElement("ol",{className:Q.ringList},z.map(Fe=>{var He,dt;return u.createElement("li",{key:Fe.id,value:(Fe.index||0)+1,onMouseEnter:me&&(()=>me(Fe)),onMouseLeave:xe&&(()=>xe(Fe))},u.createElement(wt,{classes:Q,url:Fe.url,title:Fe.title,description:Fe.description,active:Fe.active,links:(He=Fe.links)!=null?He:[],timeline:(dt=Fe.timeline)!=null?dt:[]}))}))),Tt=S=>{const z={};for(const Q of S){const me=Q.quadrant.index,xe=Q.ring.index;let Fe={};me!==void 0&&(z[me]===void 0&&(z[me]={}),Fe=z[me]);let He=[];xe!==void 0&&(Fe[xe]===void 0&&(Fe[xe]=[]),He=Fe[xe]),He.push(Q)}return z},q=(S,z,Q,me=0)=>{const xe=z.index,Fe=Q.index,He=xe===void 0?{}:S[xe]||{};return Fe===void 0?[]:He[Fe+me]||[]},oe=({segments:S,quadrant:z,rings:Q,classes:me,onEntryMouseEnter:xe,onEntryMouseLeave:Fe})=>u.createElement("foreignObject",{key:z.id,x:z.legendX,y:z.legendY,width:z.legendWidth,height:z.legendHeight,"data-testid":"radar-quadrant"},u.createElement("div",{className:me.quadrant},u.createElement("h2",{className:me.quadrantHeading},z.name),u.createElement("div",{className:me.rings},Q.map(He=>u.createElement(pt,{key:He.id,ring:He,classes:me,entries:q(S,z,He),onEntryMouseEnter:xe,onEntryMouseLeave:Fe}))))),Ae=(0,a.Z)(S=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:S.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:S.spacing(2)},ringEmpty:{color:S.palette.text.secondary,fontSize:"12px"},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:S.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},activeEntry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px",background:"#6f6f6f",color:S.palette.common.white},entryLink:{pointerEvents:"visiblePainted",cursor:"pointer"}})),Je=({quadrants:S,rings:z,entries:Q,onEntryMouseEnter:me,onEntryMouseLeave:xe,...Fe})=>{const He=Ae(Fe);return u.createElement("g",{"data-testid":"radar-legend"},S.map(dt=>u.createElement(oe,{key:dt.id,segments:Tt(Q),quadrant:dt,rings:z,classes:He,onEntryMouseEnter:me,onEntryMouseLeave:xe})))},St=S=>{const{width:z,height:Q,radius:me,quadrants:xe,rings:Fe,entries:He,activeEntry:dt,onEntryMouseEnter:ae,onEntryMouseLeave:pe}=S;return u.createElement("g",{"data-testid":"radar-plot"},u.createElement(Je,{quadrants:xe,rings:Fe,entries:He,onEntryMouseEnter:ae&&(ve=>ae(ve)),onEntryMouseLeave:pe&&(ve=>pe(ve))}),u.createElement("g",{transform:`translate(${z/2}, ${Q/2})`},u.createElement(J,{radius:me,rings:Fe}),u.createElement(Ge,{x:-.5*z,y:.5*Q}),He.map(ve=>u.createElement(R,{key:ve.id,x:ve.x||0,y:ve.y||0,color:ve.color||"",value:((ve==null?void 0:ve.index)||0)+1,url:ve.url,links:ve.links,description:ve.description,moved:ve.moved,title:ve.title,timeline:ve.timeline,onMouseEnter:ae&&(()=>ae(ve)),onMouseLeave:pe&&(()=>pe(ve))})),u.createElement(te,{visible:!!dt,text:(dt==null?void 0:dt.title)||"",x:(dt==null?void 0:dt.x)||0,y:(dt==null?void 0:dt.y)||0})))};class mt{constructor(z,Q,me,xe){this.nextSeed=xe,this.polarMin={t:z.radialMin,r:Q.innerRadius},this.polarMax={t:z.radialMax,r:Q.outerRadius},this.cartesianMin={x:15*z.offsetX,y:15*z.offsetY},this.cartesianMax={x:me*z.offsetX,y:me*z.offsetY}}clipx(z){const Q=ct(z,this.cartesianMin,this.cartesianMax),me=_t(rn(Q),this.polarMin.r+15,this.polarMax.r-15);return z.x=Kt(me).x,z.x}clipy(z){const Q=ct(z,this.cartesianMin,this.cartesianMax),me=_t(rn(Q),this.polarMin.r+15,this.polarMax.r-15);return z.y=Kt(me).y,z.y}random(){return Kt({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const z=Math.sin(this.nextSeed())*1e4;return z-Math.floor(z)}_randomBetween(z,Q){return z+this._random()*(Q-z)}_normalBetween(z,Q){return z+(this._random()+this._random())*.5*(Q-z)}}function rn({x:S,y:z}){return{t:Math.atan2(z,S),r:Math.sqrt(S*S+z*z)}}function Kt({r:S,t:z}){return{x:S*Math.cos(z),y:S*Math.sin(z)}}function $e(S,z,Q){const me=Math.min(z,Q),xe=Math.max(z,Q);return Math.min(Math.max(S,me),xe)}function _t(S,z,Q){return{t:S.t,r:$e(S.r,z,Q)}}function ct(S,z,Q){return{x:$e(S.x,z.x,Q.x),y:$e(S.y,z.y,Q.y)}}const hn=(S,z,Q,me)=>{const Fe=[16,Q/2-z-16,Q/2+z+16,Q-16],He=[16,me/2-16,me/2,me-16],dt=[{x:Fe[2],y:He[2],width:Fe[3]-Fe[2],height:He[3]-He[2]},{x:Fe[0],y:He[2],width:Fe[1]-Fe[0],height:He[3]-He[2]},{x:Fe[0],y:He[0],width:Fe[1]-Fe[0],height:He[1]-He[0]},{x:Fe[2],y:He[0],width:Fe[3]-Fe[2],height:He[1]-He[0]}];return S.map((ae,pe)=>{const ve=dt[pe%4];return{...ae,index:pe,radialMin:pe*Math.PI/2,radialMax:(pe+1)*Math.PI/2,offsetX:pe%4===0||pe%4===3?1:-1,offsetY:pe%4===0||pe%4===1?1:-1,legendX:ve.x,legendY:ve.y,legendWidth:ve.width,legendHeight:ve.height}})},un=(S,z,Q,me,xe)=>{let Fe=42;const He=S.map((ae,pe)=>{const ve=z.find(Ut=>{const Dt=typeof ae.quadrant=="object"?ae.quadrant.id:ae.quadrant;return Ut.id===Dt}),Te=Q.find(Ut=>{const Dt=typeof ae.ring=="object"?ae.ring.id:ae.ring;return Ut.id===Dt});if(!ve)throw new Error(`Unknown quadrant ${ae.quadrant} for entry ${ae.id}!`);if(!Te)throw new Error(`Unknown ring ${ae.ring} for entry ${ae.id}!`);const nt=new mt(ve,Te,me,()=>Fe++),Bt=nt==null?void 0:nt.random();return{...ae,index:pe,quadrant:ve,ring:Te,segment:nt,x:Bt.x,y:Bt.y,color:xe&&ae.id===(xe==null?void 0:xe.id)?ae.ring.color:ge()(ae.ring.color).desaturate(.5).lighten(.1).string(),active:!!(xe&&ae.id===(xe==null?void 0:xe.id))}}),dt=(0,Xe.Z)().nodes(He).velocityDecay(.19).force("collision",(0,$t.Z)().radius(12).strength(.85)).stop();for(let ae=0,pe=Math.ceil(Math.log(dt.alphaMin())/Math.log(1-dt.alphaDecay()));ae<pe;++ae){dt.tick();for(const ve of He)ve.segment&&(ve.x=ve.segment.clipx(ve),ve.y=ve.segment.clipy(ve))}return He},vn=(S,z)=>S.map((Q,me)=>({...Q,index:me,outerRadius:(me+2)/(S.length+1)*z,innerRadius:(me===0?0:me+1)/(S.length+1)*z})),st=({width:S,height:z,quadrants:Q,rings:me,entries:xe,...Fe})=>{const He=Math.min(S,z)/2,[dt,ae]=(0,u.useState)(),pe=(0,u.useRef)(null),ve=(0,u.useMemo)(()=>hn(Q,He,S,z),[Q,He,S,z]),Te=(0,u.useMemo)(()=>vn(me,He),[He,me]),nt=(0,u.useMemo)(()=>un(xe,ve,Te,He,dt),[xe,ve,Te,He,dt]);return u.createElement("svg",{ref:pe,width:S,height:z,...Fe.svgProps},u.createElement(St,{width:S,height:z,radius:He,entries:nt,quadrants:ve,rings:Te,activeEntry:dt,onEntryMouseEnter:Bt=>ae(Bt),onEntryMouseLeave:()=>ae(void 0)}))},Pt=S=>{const z=(0,l.h_)(l.VE),Q=(0,l.h_)(ot),{error:me,value:xe,loading:Fe}=(0,m.default)(async()=>Q.load(S),[Q,S]);return(0,u.useEffect)(()=>{me&&z.post(me)},[me,z]),{loading:Fe,value:xe,error:me}};function fn(S){const z=S==null?void 0:S.toLocaleLowerCase("en-US").split(/\s/).map(Q=>Q.trim()).filter(Boolean);return z!=null&&z.length?Q=>{var me;const xe=`${Q.title} ${((me=Q.timeline[0])==null?void 0:me.description)||""}`.toLocaleLowerCase("en-US");return z.every(Fe=>xe.includes(Fe))}:()=>!0}function pn(S){const{loading:z,error:Q,value:me}=Pt(S.id),xe=Fe=>Fe.entries.filter(fn(S.searchText)).map(He=>({id:He.key,quadrant:Fe.quadrants.find(dt=>dt.id===He.quadrant),title:He.title,ring:Fe.rings.find(dt=>dt.id===He.timeline[0].ringId),timeline:He.timeline.map(dt=>({date:dt.date,ring:Fe.rings.find(ae=>ae.id===dt.ringId),description:dt.description,moved:dt.moved})),moved:He.timeline[0].moved,description:He.description||He.timeline[0].description,url:He.url,links:He.links}));return u.createElement(u.Fragment,null,z&&u.createElement(n.Ex,null),!z&&!Q&&me&&u.createElement(st,{...S,rings:me.rings,quadrants:me.quadrants,entries:xe(me)}))}const fe=(0,a.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function j(S){const{title:z="Tech Radar",subtitle:Q="Pick the recommended technologies for your projects",pageTitle:me="Company Radar",...xe}=S,Fe=fe(),[He,dt]=u.useState("");return u.createElement(n.T3,{themeId:"tool"},u.createElement(n.h4,{title:z,subtitle:Q}),u.createElement(n.VY,{className:Fe.overflowXScroll},u.createElement(n.yW,{title:me},u.createElement(t.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:ae=>dt(ae.target.value)}),u.createElement(n.qt,null,u.createElement(C.Z,{paragraph:!0},"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",u.createElement(n.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),u.createElement(v.Z,{container:!0,spacing:3,direction:"row"},u.createElement(v.Z,{item:!0,xs:12,sm:6,md:4},u.createElement(pn,{searchText:He,...xe})))))}var X=Object.freeze({__proto__:null,RadarPage:j});const ue=new Array;ue.push({id:"adopt",name:"ADOPT",color:"#5BA300"}),ue.push({id:"trial",name:"TRIAL",color:"#009EB0"}),ue.push({id:"assess",name:"ASSESS",color:"#C7BA00"}),ue.push({id:"hold",name:"HOLD",color:"#E09B96"});const he=new Array;he.push({id:"infrastructure",name:"Infrastructure"}),he.push({id:"frameworks",name:"Frameworks"}),he.push({id:"languages",name:"Languages"}),he.push({id:"process",name:"Process"});const De=new Array;De.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),De.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),De.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),De.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),De.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),De.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),De.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),De.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),De.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const at={entries:De,quadrants:he,rings:ue};class tt{async load(){return at}}const ut=(0,l.NT)({id:"tech-radar"}),de=(0,l.rx)({id:"tech-radar",routes:{root:ut},apis:[(0,l.ni)(ot,new tt)]}).provide((0,l.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return X}).then(S=>S.RadarPage),mountPoint:ut})),ne=null},65609:function(Rt,d,e){e.d(d,{EU:function(){return Pt}});var n=e(30705),l=e(66565),u=e(2784),m=e(87370),a=e(15459),c=e(77277),P=e(79692),b=e(8560),t=e(27556),v=e(11433),h=e(60364),$=e(12231),L=e(49378),k=e(90436),G=e(95544),E=e(61837),A=e(51209),x=e(38016),f=e(82717),T=e.n(f),C=e(1854),_=e(49462),p=e(31654),W=e(80236),K=e(65549),Ie=e(17373),ge=e(85224),Xe=e(96103);const $t=".md-nav__item--nested .md-toggle",ot="@backstage/techdocs-addons/nav-expanded",Vt=(0,a.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(c.Z),kt=(0,a.Z)({root:{height:"20px",width:"20px"}})(A.Z),J=(0,a.Z)({root:{height:"20px",width:"20px"}})(x.Z),sn=()=>{const fe={expandAllNestedNavs:!1},{value:j,set:X}=(0,m.Z)(ot,{defaultValue:fe}),[ue,he]=(0,u.useState)(!1),[...De]=(0,l.pV)([$t]),at=(0,u.useCallback)(ut=>{const Lt=ut.checked,de=j==null?void 0:j.expandAllNestedNavs;return!!(de&&!Lt||!de&&Lt)},[j]);(0,u.useEffect)(()=>{De!=null&&De.length&&(he(!0),De.forEach(ut=>{at(ut)&&ut.click()}))},[j,at,De]);const tt=()=>{X(ut=>({expandAllNestedNavs:!(ut!=null&&ut.expandAllNestedNavs)}))};return u.createElement(u.Fragment,null,ue?u.createElement(Vt,{size:"small",onClick:tt,"aria-label":j!=null&&j.expandAllNestedNavs?"collapse-nav":"expand-nav"},j!=null&&j.expandAllNestedNavs?u.createElement(J,null):u.createElement(kt,null)):null)},Se="techdocs-report-issue",Ne=`#${Se}`,O='[title^="Edit this page"]',Le='[title^="Leave feedback for"]',ce='[data-md-component="main"] .md-content',R=(fe,j)=>j==="github"?(0,C.BT)(fe,"blob"):j==="gitlab"?(0,C.ah)(fe,"blob"):(console.error(`Invalid SCM type ${j} found in ReportIssue addon for URL ${fe}!`),fe),N=fe=>{const j=fe.toString().substring(0,70),X=j.length===70?"...":"";return`Documentation feedback: ${j}${X}`},te=(fe,j,X)=>{const ue="## Documentation Feedback \u{1F4DD}",he="#### The highlighted text:",De="#### The comment on the text:",at="_>replace this line with your comment<_",tt=fe.toString().trim().split(`
`).map(Lt=>`> ${Lt.trim()}`).join(`
`),ut=[`${X} URL: <${window.location.href}> 
Markdown URL: <${j}>`];return`${ue}

 ${he} 

 ${tt}

 ${De} 
 ${at}

 ___
${ut}`},_e=fe=>{var j,X;const ue={title:"",body:""},he=(0,l.oi)(fe),[De]=(0,l.pV)([O]),at=(j=De==null?void 0:De.href)!=null?j:"",tt=(0,n.h_)(_.q3),Lt=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage";if(!he||!at)return ue;const de=(X=tt.byUrl(at))==null?void 0:X.type;return de?{title:N(he),body:te(he,R(at,de),Lt)}:ue},Ge=()=>{var fe,j;const X=(0,n.h_)(_.q3),[ue]=(0,l.pV)([O]),he=(fe=ue==null?void 0:ue.href)!=null?fe:"";if(!he)return null;const De=(j=X.byUrl(he))==null?void 0:j.type;return De?{...T()(R(he,De)),type:De}:null},wt=(0,P.Z)(fe=>({root:{display:"grid",gridGap:fe.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:fe.palette.common.black,fontSize:fe.typography.button.fontSize}})),pt=({type:fe})=>fe==="github"?W.fy:p.Z,Tt=({type:fe})=>fe==="github"?"Github":"Gitlab",q=(fe,j)=>{const{title:X,body:ue}=j,he=encodeURIComponent(X),De=encodeURIComponent(ue),{protocol:at,resource:tt,owner:ut,name:Lt,type:de}=fe,ne=`${at}://${tt}/${ut}/${Lt}`,S=encodeURI(ne);return de==="github"?`${S}/issues/new?title=${he}&body=${De}`:`${S}/issues/new?issue[title]=${he}&issue[description]=${De}`},oe=({template:fe,repository:j})=>{const X=wt(),ue=pt(j),he=q(j,fe);return u.createElement(W.rU,{className:X.root,to:he,target:"_blank"},u.createElement(ue,null)," Open new ",Tt(j)," issue")},Ae=(0,P.Z)(fe=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:fe.spacing(1),zIndex:fe.zIndex.tooltip,background:fe.palette.common.white}})),Je=({debounceTime:fe=500,templateBuilder:j})=>{const X=Ae(),[ue,he]=(0,u.useState)(),De=Ge(),at=_e(fe),tt=(0,l.oi)(fe),[ut,Lt]=(0,l.pV)([ce,Le]);let[de]=(0,l.pV)([Ne]);return Lt&&(Lt.style.display="none"),(0,u.useEffect)(()=>{if(!De||!tt||!tt.containsNode(ut,!0)||tt!=null&&tt.containsNode(de,!0))return;const ne=ut.getBoundingClientRect(),S=tt.getRangeAt(0).getBoundingClientRect();he({top:`${S.top-ne.top-16}px`,left:`${S.left+S.width/2}px`})},[tt,ut,de]),!tt||!De||!["github","gitlab"].includes(De.type)?null:(de||(de=document.createElement("div"),de.setAttribute("id",Se),ut.prepend(de)),u.createElement(b.Z,{container:de},u.createElement(t.Z,{"data-testid":"report-issue-addon",className:X.root,style:ue},u.createElement(oe,{repository:De,template:j?j({selection:tt}):at}))))},St="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",mt=(0,a.Z)(fe=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:fe.palette.common.white,boxShadow:St,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:St}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:fe.palette.common.black,fontSize:fe.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(v.Z),rn={key:"techdocs.addons.settings.textsize",defaultValue:100},Kt=[{value:90},{value:100},{value:115},{value:130},{value:150}],$e=(0,P.Z)(fe=>({container:{color:fe.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:fe.spacing(1)},increaseButton:{marginLeft:fe.spacing(1)}})),_t=()=>{const fe=$e(),j=(0,h.Z)(),[X]=(0,l.pV)(["body"]),[ue,he]=(0,u.useState)(()=>{const z=localStorage==null?void 0:localStorage.getItem(rn.key);return z?parseInt(z,10):rn.defaultValue}),De=(0,u.useMemo)(()=>Kt.map(z=>z.value),[]),at=(0,u.useMemo)(()=>De.indexOf(ue),[De,ue]),tt=(0,u.useMemo)(()=>De[0],[De]),ut=(0,u.useMemo)(()=>De[De.length-1],[De]),Lt=(0,u.useCallback)(()=>`${ue}%`,[ue]),de=(0,u.useCallback)((z,Q)=>{Array.isArray(Q)||(he(Q),localStorage==null||localStorage.setItem(rn.key,String(Q)))},[he]),ne=(0,u.useCallback)(z=>{de(z,De[at-1])},[at,De,de]),S=(0,u.useCallback)(z=>{de(z,De[at+1])},[at,De,de]);return(0,u.useEffect)(()=>{var z,Q;if(!X)return;const me=(Q=(z=j.typography)==null?void 0:z.htmlFontSize)!=null?Q:16;X.style.setProperty("--md-typeset-font-size",`${me*(ue/100)}px`)},[X,ue,j]),u.createElement($.Z,{className:fe.menuItem,button:!0,disableRipple:!0},u.createElement(L.Z,{primary:u.createElement(k.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:u.createElement(G.Z,{className:fe.container},u.createElement(E.Z,{className:fe.decreaseButton,size:"small",edge:"start",disabled:ue===tt,onClick:ne,"aria-label":"Decrease text size"},u.createElement(Ie.Z,null)),u.createElement(mt,{value:ue,"aria-labelledby":"text-size-slider",getAriaValueText:Lt,valueLabelDisplay:"on",valueLabelFormat:Lt,marks:Kt,step:null,min:tt,max:ut,onChangeCommitted:de}),u.createElement(E.Z,{className:fe.increaseButton,size:"small",edge:"end",disabled:ue===ut,onClick:S,"aria-label":"Increase text size"},u.createElement(K.Z,null))),disableTypography:!0}))};function ct(fe,j){j===void 0&&(j={});var X=j.insertAt;if(!(!fe||typeof document=="undefined")){var ue=document.head||document.getElementsByTagName("head")[0],he=document.createElement("style");he.type="text/css",X==="top"&&ue.firstChild?ue.insertBefore(he,ue.firstChild):ue.appendChild(he),he.styleSheet?he.styleSheet.cssText=fe:he.appendChild(document.createTextNode(fe))}}var hn=`.pswp {
  --pswp-bg: #f8f8f8;
}
.pswp__counter {
  color: rgba(0, 0, 0, 0.87);
  text-shadow: none;
}

.pswp__img {
  cursor: pointer !important;
}
`;ct(hn);const un=()=>{const fe=(0,l.pV)(["img"]);return(0,u.useEffect)(()=>{let j=null,X=new ge.Z({pswpModule:Xe.Z,wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon" aria-label="fontSize large"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></svg>'});return fe.forEach((ue,he)=>{ue.onclick=()=>(j===null&&(j=fe.map(De=>({element:De,src:De.src,msrc:De.src,alt:De.alt,width:De.clientWidth,height:De.clientHeight}))),X.loadAndOpen(he,j),!1)}),X.init(),()=>{X.destroy(),X=null}},[fe]),null},vn=(0,n.rx)({id:"techdocsModuleAddonsContrib"}),st=vn.provide((0,l.KY)({name:"ExpandableNavigation",location:l.oZ.PrimarySidebar,component:sn})),Pt=vn.provide((0,l.KY)({name:"ReportIssue",location:l.oZ.Content,component:Je})),fn=vn.provide((0,l.KY)({name:"TextSize",location:l.oZ.Settings,component:_t})),pn=vn.provide((0,l.KY)({name:"LightBox",location:l.oZ.Content,component:un}))},66565:function(Rt,d,e){e.d(d,{$L:function(){return _},DR:function(){return E},Dl:function(){return W},KY:function(){return x},Ox:function(){return kt},VA:function(){return Se},ZS:function(){return $t},Zz:function(){return G},gT:function(){return p},jM:function(){return k},oZ:function(){return Vt},oi:function(){return ce},pV:function(){return O},ux:function(){return sn},x1:function(){return ot}});var n=e(2784),l=e(73557),u=e(30705),m=e(64279),a=e(77446),c=e(34520),P=e(18473),b=e(70882),t=e(50236),v=e(19219),h=e(80236),$=e(54073),L=e.n($);const k="techdocs.addons.addon.v1",G="techdocs.addons.wrapper.v1",E=()=>null;(0,u.R5)(E,G,!0);const A=R=>`${k}.${R.toLocaleLowerCase("en-US")}`;function x(R){const{name:N,component:te}=R;return(0,u.YO)({name:N,component:{sync:_e=>n.createElement(te,{..._e})},data:{[k]:R,[A(N)]:!0}})}const f=(R,N)=>R.selectByComponentData({key:N}).getElements()[0],T=R=>R.selectByComponentData({key:G}).selectByComponentData({key:k}),C=R=>R.selectByComponentData({key:G}).findComponentData({key:k}),_=()=>{const R=(0,l.pC)(),N=(0,u.vJ)(R,T),te=(0,u.vJ)(R,C),_e=(0,n.useCallback)(pt=>{var Tt;if(!N||!pt)return null;const q=A(pt.name);return(Tt=f(N,q))!=null?Tt:null},[N]),Ge=(0,n.useCallback)(pt=>{const Tt=te.find(q=>q.name===pt);return Tt?_e(Tt):null},[te,_e]),wt=(0,n.useCallback)(pt=>{const Tt=te.filter(q=>q.location===pt);return Tt.length?Tt.map(_e):null},[te,_e]);return{renderComponentByName:Ge,renderComponentsByLocation:wt}},p=(0,u.T0)({id:"plugin.techdocs.service"}),W=(0,u.T0)({id:"plugin.techdocs.storageservice"});function K(R,N){return N.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(R.kind=R.kind.toLocaleLowerCase(),R.name=R.name.toLocaleLowerCase(),R.namespace=R.namespace.toLocaleLowerCase()),R}const Ie=(R,N)=>(0,c.eE)(R)===(0,c.eE)(N),ge={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Xe=(0,P.CT)("techdocs-reader-page-context"),$t=(0,n.memo)(R=>{const{entityRef:N,children:te}=R,_e=(0,u.h_)(p),Ge=(0,u.h_)(u.Ds),wt=(0,m.default)(async()=>_e.getEntityMetadata(N),[N]),pt=(0,a.Z)(async()=>_e.getTechDocsMetadata(N),[N]),[Tt,q]=(0,n.useState)(ge.title),[oe,Ae]=(0,n.useState)(ge.subtitle),[Je,St]=(0,n.useState)(ge.shadowRoot);(0,n.useEffect)(()=>{Je&&!pt.value&&!pt.loading&&pt.retry()},[pt.value,pt.loading,Je,pt.retry,pt]);const mt={metadata:pt,entityRef:K(N,Ge),entityMetadata:wt,shadowRoot:Je,setShadowRoot:St,title:Tt,setTitle:q,subtitle:oe,setSubtitle:Ae},rn=(0,P.EI)({1:mt});return n.createElement(u.fC,{attributes:{entityRef:(0,c.eE)(N)}},n.createElement(Xe.Provider,{value:rn},te instanceof Function?te(mt):te))},(R,N)=>Ie(R.entityRef,N.entityRef)),ot=()=>{const R=(0,n.useContext)(Xe);if(R===void 0)return ge;const N=R.atVersion(1);if(N===void 0)throw new Error("No context found for version 1.");return N},Vt=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),kt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",J=R=>{(0,n.useEffect)(()=>{var N;if(!R)return()=>{};const te=R.querySelectorAll('head > link[rel="stylesheet"]');let _e=(N=te==null?void 0:te.length)!=null?N:0;const Ge=new CustomEvent(kt);if(!_e)return R.dispatchEvent(Ge),()=>{};const wt=()=>{--_e===0&&R.dispatchEvent(Ge)};return te==null||te.forEach(pt=>{pt.addEventListener("load",wt)}),()=>{te==null||te.forEach(pt=>{pt.removeEventListener("load",wt)})}},[R])},sn=R=>{const[N,te]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!R)return()=>{};te(!0);const _e=R.style;_e.setProperty("opacity","0");const Ge=()=>{te(!1),_e.setProperty("opacity","1")};return R.addEventListener(kt,Ge),()=>{R.removeEventListener(kt,Ge)}},[R]),N},Se=R=>{const{element:N,onAppend:te,children:_e}=R,[Ge,wt]=(0,n.useState)((0,b.Ue)({...(0,t.Z)(),insertionPoint:void 0}));J(N);const pt=sn(N),Tt=(0,n.useCallback)(q=>{if(!N||!q)return;wt((0,b.Ue)({...(0,t.Z)(),insertionPoint:N.querySelector("head")||void 0}));let oe=q.shadowRoot;oe||(oe=q.attachShadow({mode:"open"})),oe.replaceChildren(N),typeof te=="function"&&te(oe)},[N,te]);return n.createElement(n.Fragment,null,pt&&n.createElement(h.Ex,null),n.createElement(v.ZP,{jss:Ge,sheetsManager:new Map},n.createElement("div",{ref:Tt,"data-testid":"techdocs-native-shadowroot"}),_e))},Ne=()=>{const{shadowRoot:R}=ot();return R},O=R=>{const N=Ne();return N?R.map(te=>N==null?void 0:N.querySelectorAll(te)).filter(te=>te.length).map(te=>Array.from(te)).flat():[]},Le=R=>R.toString()&&R.rangeCount&&R.getRangeAt(0).getBoundingClientRect().top,ce=(R=0)=>{const N=Ne(),[te,_e]=(0,n.useState)(null),Ge=(0,n.useMemo)(()=>L()(()=>{const wt=N,pt=wt.getSelection?wt.getSelection():document.getSelection();pt&&Le(pt)?_e(pt):_e(null)},R),[N,_e,R]);return(0,n.useEffect)(()=>(window.document.addEventListener("selectionchange",Ge),()=>{Ge.cancel(),window.document.removeEventListener("selectionchange",Ge)}),[Ge]),te}},1383:function(Rt,d,e){e.d(d,{D:function(){return cr},E:function(){return Ee},T:function(){return nr},a:function(){return Fn},b:function(){return Cn},c:function(){return bn},e:function(){return et},g:function(){return xt},h:function(){return Wt},t:function(){return g}});var n=e(30705),l=e(32272),u=e(76372),m=e.n(u),a=e(2784),c=e(73557),P=e(66565),b=e(64279),t=e(77446),v=e(80236),h=e(79692),$=e(49378),L=e(86136),k=e(27556),G=e(12420),E=e(60905),A=e(90436),x=e(61837),f=e(77277),T=e(4190),C=e(4614),_=e(41128),p=e(60364),W=e(15459),K=e(80030),Ie=e(72379),ge=e(41547),Xe=e(41156),$t=e(8560),ot=e(15223),Vt=e(95544),kt=e(48348),J=e(94339),sn=e(16111),Se=e(24579),Ne=e(14503),O=e(92573),Le=e(99688),ce=e(98069),R=e(87685),N=e(49462),te=e(35368),_e=e.n(te),Ge=e(1854),wt=e(67097),pt=e(28316),Tt=e(82717),q=e.n(Tt),oe=e(44882),Ae=e(95074),Je=e(18671),St=e(73250),mt=e(73495),rn=e(34520),Kt=e(76635),$e=e.n(Kt),_t=e(47603),ct=e(39981),hn=e(2337),un=e(11640),vn=e(28347);const st=(0,n.T0)({id:"plugin.techdocs.storageservice"}),Pt=(0,n.T0)({id:"plugin.techdocs.service"});class fn{constructor(le){this.configApi=le.configApi,this.discoveryApi=le.discoveryApi,this.fetchApi=le.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(le){const{kind:Pe,namespace:qe,name:At}=le,en=`${await this.getApiOrigin()}/metadata/techdocs/${qe}/${Pe}/${At}`,nn=await this.fetchApi.fetch(`${en}`);if(!nn.ok)throw await l.VL.fromResponse(nn);return await nn.json()}async getEntityMetadata(le){const{kind:Pe,namespace:qe,name:At}=le,en=`${await this.getApiOrigin()}/metadata/entity/${qe}/${Pe}/${At}`,nn=await this.fetchApi.fetch(`${en}`);if(!nn.ok)throw await l.VL.fromResponse(nn);return await nn.json()}}class pn{constructor(le){this.configApi=le.configApi,this.discoveryApi=le.discoveryApi,this.identityApi=le.identityApi,this.fetchApi=le.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var le;return(le=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?le:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(le,Pe){const{kind:qe,namespace:At,name:Nt}=le,nn=`${await this.getStorageUrl()}/${At}/${qe}/${Nt}/${Pe}`,Rn=await this.fetchApi.fetch(`${nn.endsWith("/")?nn:`${nn}/`}index.html`);let In="";switch(Rn.status){case 404:throw In="Page not found. ",Pe||(In+="This could be because there is no index.md file in the root of the docs directory of this repository."),new l.dR(In);case 500:throw In="Could not generate documentation or an error in the TechDocs backend. ",new Error(In)}return Rn.text()}async syncEntityDocs(le,Pe=()=>{}){const{kind:qe,namespace:At,name:Nt}=le,nn=`${await this.getApiOrigin()}/sync/${At}/${qe}/${Nt}`,{token:Rn}=await this.identityApi.getCredentials();return new Promise((In,Dn)=>{const Nn=new u.EventSourcePolyfill(nn,{withCredentials:!0,headers:Rn?{Authorization:`Bearer ${Rn}`}:{}});Nn.addEventListener("log",ln=>{ln.data&&Pe(JSON.parse(ln.data))}),Nn.addEventListener("finish",ln=>{let sr=!1;ln.data&&({updated:sr}=JSON.parse(ln.data)),In(sr?"updated":"cached")}),Nn.onerror=ln=>{switch(Nn.close(),ln.status){case 404:Dn(new l.dR(ln.message));return;default:Dn(new Error(ln.data));return}}})}async getBaseUrl(le,Pe,qe){const{kind:At,namespace:Nt,name:en}=Pe,Rn=`${await this.getApiOrigin()}/static/docs/${Nt}/${At}/${en}/${qe}`;return new URL(le,Rn.endsWith("/")?Rn:`${Rn}/`).toString()}}function fe({contentLoading:F,content:le,activeSyncState:Pe}){return F||Pe==="BUILD_READY_RELOAD"||!le&&Pe==="CHECKING"?"CHECKING":!le&&Pe==="BUILDING"?"INITIAL_BUILD":le?Pe==="BUILDING"?"CONTENT_STALE_REFRESHING":Pe==="BUILD_READY"?"CONTENT_STALE_READY":Pe==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function j(F,le){const Pe={...F};switch(le.type){case"sync":le.state==="CHECKING"&&(Pe.buildLog=[]),Pe.activeSyncState=le.state,Pe.syncError=le.syncError;break;case"contentLoading":Pe.contentLoading=!0,Pe.contentError=void 0;break;case"content":typeof le.path=="string"&&(Pe.path=le.path),Pe.contentLoading=!1,Pe.content=le.content,Pe.contentError=le.contentError;break;case"buildLog":Pe.buildLog=Pe.buildLog.concat(le.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(Pe.activeSyncState)&&["contentLoading","content"].includes(le.type)&&(Pe.activeSyncState="UP_TO_DATE",Pe.buildLog=[]),Pe}function X(F,le,Pe,qe){var At,Nt;const[en,nn]=(0,a.useReducer)(j,{activeSyncState:"CHECKING",path:qe,contentLoading:!0,buildLog:[]}),Rn=(0,n.h_)(P.Dl),{retry:In}=(0,t.Z)(async()=>{nn({type:"contentLoading"});try{const ln=await Rn.getEntityDocs({kind:F,namespace:le,name:Pe},qe);return nn({type:"content",content:ln,path:qe}),ln}catch(ln){nn({type:"content",contentError:ln,path:qe})}},[Rn,F,le,Pe,qe]),Dn=(0,a.useRef)({content:void 0,reload:()=>{}});return Dn.current={content:en.content,reload:In},(0,b.default)(async()=>{nn({type:"sync",state:"CHECKING"});const ln=setTimeout(()=>{nn({type:"sync",state:"BUILDING"})},1e3);try{switch(await Rn.syncEntityDocs({kind:F,namespace:le,name:Pe},br=>{nn({type:"buildLog",log:br})})){case"updated":Dn.current.content?nn({type:"sync",state:"BUILD_READY"}):(Dn.current.reload(),nn({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":nn({type:"sync",state:"UP_TO_DATE"});break;default:nn({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(sr){nn({type:"sync",state:"ERROR",syncError:sr})}finally{clearTimeout(ln)}},[F,Pe,le,Rn,nn,Dn]),{state:(0,a.useMemo)(()=>fe({activeSyncState:en.activeSyncState,contentLoading:en.contentLoading,content:en.content}),[en.activeSyncState,en.content,en.contentLoading]),contentReload:In,path:en.path,content:en.content,contentErrorMessage:(At=en.contentError)==null?void 0:At.toString(),syncErrorMessage:(Nt=en.syncError)==null?void 0:Nt.toString(),buildLog:en.buildLog}}const ue=(0,a.createContext)({}),he=()=>(0,a.useContext)(ue),De=F=>{const{children:le}=F,{"*":Pe=""}=(0,c.UO)(),{entityRef:qe}=(0,P.x1)(),{kind:At,namespace:Nt,name:en}=qe,nn=X(At,Nt,en,Pe);return a.createElement(ue.Provider,{value:nn},le instanceof Function?le(nn):le)},at=F=>le=>a.createElement(De,null,a.createElement(F,{...le})),tt=(0,h.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),ut=F=>{const{result:le,highlight:Pe,lineClamp:qe=5,asListItem:At=!0,asLink:Nt=!0,title:en,icon:nn}=F,Rn=tt(),In=({children:ln})=>Nt?a.createElement(v.rU,{noTrack:!0,to:le.location},ln):a.createElement(a.Fragment,null,ln),Dn=()=>{const ln=Pe!=null&&Pe.fields.title?a.createElement(O.FA,{text:Pe.fields.title,preTag:Pe.preTag,postTag:Pe.postTag}):le.title,sr=Pe!=null&&Pe.fields.entityTitle?a.createElement(O.FA,{text:Pe.fields.entityTitle,preTag:Pe.preTag,postTag:Pe.postTag}):le.entityTitle,br=Pe!=null&&Pe.fields.name?a.createElement(O.FA,{text:Pe.fields.name,preTag:Pe.preTag,postTag:Pe.postTag}):le.name;return le?a.createElement($.Z,{className:Rn.itemText,primaryTypographyProps:{variant:"h6"},primary:a.createElement(In,null,en||a.createElement(a.Fragment,null,ln," | ",sr!=null?sr:br," docs")),secondary:a.createElement(A.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:qe,overflow:"hidden"},color:"textSecondary",variant:"body2"},Pe!=null&&Pe.fields.text?a.createElement(O.FA,{text:Pe.fields.text,preTag:Pe.preTag,postTag:Pe.postTag}):le.text)}):null},Nn=({children:ln})=>At?a.createElement(a.Fragment,null,nn&&a.createElement(L.Z,null,typeof nn=="function"?nn(le):nn),a.createElement("div",{className:Rn.flexContainer},ln)):a.createElement(a.Fragment,null,ln);return a.createElement(Nn,null,a.createElement(Dn,null))};var Lt=Object.freeze({__proto__:null,TechDocsSearchResultListItem:ut});const de=(0,h.Z)(F=>({root:{width:"100%"},bar:{padding:F.spacing(1)}})),ne=F=>F==null?void 0:F.document,S=F=>{const{entityId:le,entityTitle:Pe,debounceTime:qe=150}=F,[At,Nt]=(0,a.useState)(!1),en=(0,c.s0)(),{setFilters:nn,result:{loading:Rn,value:In}}=(0,O.Rx)(),Dn=de(),[Nn,ln]=(0,a.useState)([]);(0,a.useEffect)(()=>{let Cr=!0;if(Cr&&In){const Tr=In.results.slice(0,10);ln(Tr)}return()=>{Cr=!1}},[Rn,In]);const{kind:sr,name:br,namespace:Sr}=le;(0,a.useEffect)(()=>{nn(Cr=>({...Cr,kind:sr,namespace:Sr,name:br}))},[sr,Sr,br,nn]);const wr=(Cr,Tr)=>{if(ne(Tr)){const{location:hr}=Tr.document;en(hr)}};return a.createElement(k.Z,{className:Dn.bar,variant:"outlined"},a.createElement(O.qO,{classes:{root:Dn.root},"data-testid":"techdocs-search-bar",size:"small",open:At,getOptionLabel:()=>"",filterOptions:Cr=>Cr,onClose:()=>{Nt(!1)},onFocus:()=>{Nt(!0)},onChange:wr,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Nn,renderOption:({document:Cr,highlight:Tr})=>a.createElement(ut,{result:Cr,lineClamp:3,asListItem:!1,asLink:!1,title:Cr.title,highlight:Tr}),loading:Rn,inputDebounceTime:qe,inputPlaceholder:`Search ${Pe||le.name} docs`,freeSolo:!1}))},z=F=>{const le={term:"",types:["techdocs"],pageCursor:"",filters:F.entityId};return a.createElement(O.Nd,{initialState:le},a.createElement(S,{...F}))},Q=(0,h.Z)(F=>(0,G.Z)({paper:{width:"100%",[F.breakpoints.up("sm")]:{width:"75%"},[F.breakpoints.up("md")]:{width:"50%"},padding:F.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:F.palette.background.default}})),me=({buildLog:F,onClose:le})=>{const Pe=Q(),qe=F.length===0?"Waiting for logs...":F.join(`
`);return a.createElement(E.Z,{container:!0,direction:"column",className:Pe.root,spacing:0,wrap:"nowrap"},a.createElement(E.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},a.createElement(A.Z,{variant:"h5"},"Build Details"),a.createElement(x.Z,{key:"dismiss",title:"Close the drawer",onClick:le,color:"inherit"},a.createElement(R.Z,null))),a.createElement(E.Z,{item:!0,xs:!0},a.createElement(v.nU,{text:qe,classes:{root:Pe.logs}})))},xe=({buildLog:F})=>{const le=Q(),[Pe,qe]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(f.Z,{color:"inherit",onClick:()=>qe(!0)},"Show Build Logs"),a.createElement(T.ZP,{classes:{paper:le.paper},anchor:"right",open:Pe,onClose:()=>qe(!1)},a.createElement(me,{buildLog:F,onClose:()=>qe(!1)})))},Fe=({errorMessage:F})=>{const le=(0,n.h_)(n.Ds).getOptionalString("techdocs.builder");let Pe="";return le!=="local"&&(Pe="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),a.createElement(v.mf,{status:"404",statusMessage:F||"Documentation not found",additionalInfo:Pe})},He=(0,h.Z)(F=>({root:{marginBottom:F.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),dt=()=>{let F=null;const le=He(),{state:Pe,contentReload:qe,contentErrorMessage:At,syncErrorMessage:Nt,buildLog:en}=he();return Pe==="INITIAL_BUILD"&&(F=a.createElement(Le.Z,{classes:{root:le.root},variant:"outlined",severity:"info",icon:a.createElement(C.Z,{size:"24px"}),action:a.createElement(xe,{buildLog:en})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),Pe==="CONTENT_STALE_REFRESHING"&&(F=a.createElement(Le.Z,{variant:"outlined",severity:"info",icon:a.createElement(C.Z,{size:"24px"}),action:a.createElement(xe,{buildLog:en}),classes:{root:le.root}},"A newer version of this documentation is being prepared and will be available shortly.")),Pe==="CONTENT_STALE_READY"&&(F=a.createElement(Le.Z,{variant:"outlined",severity:"success",action:a.createElement(f.Z,{color:"inherit",onClick:()=>qe()},"Refresh"),classes:{root:le.root}},"A newer version of this documentation is now available, please refresh to view.")),Pe==="CONTENT_STALE_ERROR"&&(F=a.createElement(Le.Z,{variant:"outlined",severity:"error",action:a.createElement(xe,{buildLog:en}),classes:{root:le.root,message:le.message}},"Building a newer version of this documentation failed."," ",Nt)),Pe==="CONTENT_NOT_FOUND"&&(F=a.createElement(a.Fragment,null,Nt&&a.createElement(Le.Z,{variant:"outlined",severity:"error",action:a.createElement(xe,{buildLog:en}),classes:{root:le.root,message:le.message}},"Building a newer version of this documentation failed."," ",Nt),a.createElement(Fe,{errorMessage:At}))),F},ae=/main\.[A-Fa-f0-9]{8}\.min\.css$/,pe=/^https:\/\/fonts\.googleapis\.com/,ve=/^https:\/\/fonts\.gstatic\.com/,Te=F=>F.nodeName==="LINK",nt=F=>{const le=(F==null?void 0:F.getAttribute("href"))||"",Pe=le.match(ae),qe=le.match(pe),At=le.match(ve);return Pe||qe||At},Bt=F=>(Te(F)&&!nt(F)&&F.remove(),F),Ut=F=>F.nodeName==="IFRAME",Dt=(F,le)=>{const Pe=F.getAttribute("src")||"";try{const{host:qe}=new URL(Pe);return le.includes(qe)}catch{return!1}},Ce=F=>le=>(Ut(le)&&!Dt(le,F)&&le.remove(),le),we=()=>{const F=(0,n.h_)(n.Ds);return(0,a.useMemo)(()=>F.getOptionalConfig("techdocs.sanitizer"),[F])},Ke=()=>{const F=we();return(0,a.useCallback)(async le=>{const Pe=F==null?void 0:F.getOptionalStringArray("allowedIframeHosts");_e().addHook("beforeSanitizeElements",Bt);const qe=["link"];return Pe&&(qe.push("iframe"),_e().addHook("beforeSanitizeElements",Ce(Pe))),_e().sanitize(le.outerHTML,{ADD_TAGS:qe,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[F])};var Ye=({theme:F})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${F.palette.text.primary};
  --md-default-fg-color--light: ${F.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,_.$n)(F.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,_.$n)(F.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${F.palette.background.default};
  --md-default-bg-color--light: ${F.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,_.$n)(F.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,_.$n)(F.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${F.palette.primary.main};
  --md-primary-fg-color--light: ${F.palette.primary.light};
  --md-primary-fg-color--dark: ${F.palette.primary.dark};
  --md-primary-bg-color: ${F.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,_.$n)(F.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${F.shadows[1]};
  --md-shadow-z2: ${F.shadows[2]};
  --md-shadow-z3: ${F.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${F.palette.text.primary};
  --md-code-bg-color: ${F.palette.background.paper};
  --md-code-hl-color: ${(0,_.Fq)(F.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${F.palette.type==="dark"?F.palette.primary.light:F.palette.primary.dark};
  --md-code-hl-function-color: ${F.palette.type==="dark"?F.palette.secondary.light:F.palette.secondary.dark};
  --md-code-hl-string-color: ${F.palette.type==="dark"?F.palette.success.light:F.palette.success.dark};
  --md-code-hl-number-color: ${F.palette.type==="dark"?F.palette.error.light:F.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${F.palette.link};
  --md-typeset-table-color: ${F.palette.text.primary};
  --md-typeset-del-color: ${F.palette.type==="dark"?(0,_.Fq)(F.palette.error.dark,.5):(0,_.Fq)(F.palette.error.light,.5)};
  --md-typeset-ins-color: ${F.palette.type==="dark"?(0,_.Fq)(F.palette.success.dark,.5):(0,_.Fq)(F.palette.success.light,.5)};
  --md-typeset-mark-color: ${F.palette.type==="dark"?(0,_.Fq)(F.palette.warning.dark,.5):(0,_.Fq)(F.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,We=({theme:F})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${F.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Ct="224px";var It=({theme:F,sidebar:le})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${F.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${F.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${le.isPinned?`calc(-12.1rem + ${Ct})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}
`;const jt=["h1","h2","h3","h4","h5","h6"];var Gt=({theme:F})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${jt.reduce((le,Pe)=>{var qe;const At=(qe=F.typography.htmlFontSize)!=null?qe:16,Nt=F.typography[Pe],{lineHeight:en,fontFamily:nn,fontWeight:Rn,fontSize:In}=Nt,Dn=Nn=>{let ln=1;return typeof Nn=="number"&&(ln=Nn/At*.6),typeof Nn=="string"&&(ln=Nn.replace("rem","")),`calc(${ln} * var(--md-typeset-font-size))`};return le.concat(`
    .md-typeset ${Pe} {
      color: var(--md-default-fg-color);
      line-height: ${en};
      font-family: ${nn};
      font-weight: ${Rn};
      font-size: ${Dn(In)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${F.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,_n=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,wn=({theme:F})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${F.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${F.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${F.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${F.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${F.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const xn=[Ye,We,It,Gt,_n,wn],Tn=()=>(0,v.Pf)(),kn=()=>{const F=Tn(),le=(0,p.Z)();return(0,a.useMemo)(()=>{const Pe={theme:le,sidebar:F};return xn.reduce((qe,At)=>qe+At(Pe),"")},[le,F])},Mn=()=>{const F=kn();return(0,a.useCallback)(le=>(le.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${F}</style>`),le),[F])},yn=(F,le,Pe)=>{const qe=F==="src"&&le.endsWith(".svg"),At=!le.match(/^([a-z]*:)?\/\//i),Nt=le.startsWith(Pe);return qe&&(At||Nt)},zn=({techdocsStorageApi:F,entityId:le,path:Pe})=>async qe=>{const At=await F.getApiOrigin(),Nt=async(en,nn)=>{for(const Rn of en)if(Rn.hasAttribute(nn)){const In=Rn.getAttribute(nn);if(!In)return;const Dn=await F.getBaseUrl(In,le,Pe);if(yn(nn,In,At))try{const ln=await(await fetch(Dn,{credentials:"include"})).text();Rn.setAttribute(nn,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(ln)))}`)}catch{Rn.setAttribute("alt",`Error: ${In}`)}else Rn.setAttribute(nn,Dn)}};return await Promise.all([Nt(qe.querySelectorAll("img"),"src"),Nt(qe.querySelectorAll("script"),"src"),Nt(qe.querySelectorAll("source"),"src"),Nt(qe.querySelectorAll("link"),"href"),Nt(qe.querySelectorAll("a[download]"),"href")]),qe},lt=F=>le=>{var Pe;const qe=le.querySelector('[title="Edit this page"]');if(!qe||!qe.href)return le;const At=new URL(qe.href),Nt=F.byUrl(At);if((Nt==null?void 0:Nt.type)!=="github"&&(Nt==null?void 0:Nt.type)!=="gitlab")return le;const en=((Pe=le.querySelector("article>h1"))==null?void 0:Pe.childNodes[0].textContent)||"",nn=encodeURIComponent(`Documentation Feedback: ${en}`),Rn=encodeURIComponent(`Page source:
${qe.href}

Feedback:`),In=(Nt==null?void 0:Nt.type)==="github"?(0,Ge.BT)(At.href,"blob"):At.href,Dn=q()(In),Nn=`/${Dn.organization}/${Dn.name}`,ln=qe.cloneNode();switch(Nt==null?void 0:Nt.type){case"gitlab":ln.href=`${At.origin}${Nn}/issues/new?issue[title]=${nn}&issue[description]=${Rn}`;break;case"github":ln.href=`${At.origin}${Nn}/issues/new?title=${nn}&body=${Rn}`;break;default:return le}return pt.render(a.createElement(wt.Z),ln),ln.style.paddingLeft="5px",ln.title="Leave feedback for this page",ln.id="git-feedback-link",qe==null||qe.insertAdjacentElement("beforebegin",ln),le},ye=()=>F=>{const le=F.querySelector('.md-header label[for="__drawer"]'),Pe=F.querySelector("article");if(!le||!Pe)return F;const qe=le.cloneNode();return pt.render(a.createElement(oe.Z),qe),qe.id="toggle-sidebar",qe.title="Toggle Sidebar",qe.classList.add("md-content__button"),qe.style.setProperty("padding","0 0 0 5px"),qe.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),Pe==null||Pe.prepend(qe),F},Ze=()=>F=>(((Pe,qe)=>{Array.from(Pe).filter(At=>At.hasAttribute(qe)).forEach(At=>{const Nt=At.getAttribute(qe);if(Nt){Nt.match(/^https?:\/\//i)&&At.setAttribute("target","_blank");try{const en=Ue(window.location.href);At.setAttribute(qe,new URL(Nt,en).toString())}catch{At.replaceWith(At.textContent||Nt)}}})})(Array.from(F.getElementsByTagName("a")),"href"),F);function Ue(F){const le=new URL(F);return!le.pathname.endsWith("/")&&!le.pathname.endsWith(".html")&&(le.pathname+="/"),le.toString()}const vt=({baseUrl:F,onClick:le})=>Pe=>(Array.from(Pe.getElementsByTagName("a")).forEach(qe=>{qe.addEventListener("click",At=>{const en=qe.getAttribute("href");en&&en.startsWith(F)&&!qe.hasAttribute("download")&&(At.preventDefault(),le(At,en))})}),Pe),it=(0,W.Z)(F=>({tooltip:{fontSize:"inherit",color:F.palette.text.primary,margin:0,padding:F.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(K.ZP),yt=()=>a.createElement(Ie.Z,null,a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),ft=({text:F})=>{const[le,Pe]=(0,a.useState)(!1),[,qe]=(0,Ae.Z)(),At=(0,a.useCallback)(()=>{qe(F),Pe(!0)},[F,qe]),Nt=(0,a.useCallback)(()=>{Pe(!1)},[Pe]);return a.createElement(it,{title:"Copied to clipboard",placement:"left",open:le,onClose:Nt,leaveDelay:1e3},a.createElement(x.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:At},a.createElement(yt,null)))},Zt=F=>le=>{var Pe;const qe=le.querySelectorAll("pre > code");for(const At of qe){const Nt=At.textContent||"",en=document.createElement("div");(Pe=At==null?void 0:At.parentElement)==null||Pe.prepend(en),pt.render(a.createElement(ge.Z,{theme:F},a.createElement(ft,{text:Nt})),en)}return le},tn=()=>F=>{var le;return(le=F.querySelector(".md-header"))==null||le.remove(),F},gn=()=>F=>{var le,Pe;return(le=F.querySelector(".md-footer .md-copyright"))==null||le.remove(),(Pe=F.querySelector(".md-footer-copyright"))==null||Pe.remove(),F},Zn=({onLoading:F,onLoaded:le})=>Pe=>(F(),Pe.addEventListener(P.Ox,function qe(){le(),Pe.removeEventListener(P.Ox,qe)}),Pe),er=()=>F=>(F.addEventListener(P.Ox,function le(){var Pe;if(window.location.hash){const qe=window.location.hash.slice(1);(Pe=F==null?void 0:F.querySelector(`[id="${qe}"]`))==null||Pe.scrollIntoView()}F.removeEventListener(P.Ox,le)}),F),tr=()=>F=>(setTimeout(()=>{const le=F==null?void 0:F.querySelectorAll("li.md-nav__item--active");le.length!==0&&(le.forEach(qe=>{const At=qe==null?void 0:qe.querySelector("input");At!=null&&At.checked||At==null||At.click()}),le[le.length-1].scrollIntoView())},200),F),Wn=async(F,le)=>{let Pe;if(typeof F=="string")Pe=new DOMParser().parseFromString(F,"text/html").documentElement;else if(F instanceof Element)Pe=F;else throw new Error("dom is not a recognized type");for(const qe of le)Pe=await qe(Pe);return Pe};function jn(F,le){const Pe=new URL(le),qe=`${Pe.origin}${Pe.pathname.replace(/\/$/,"")}`,At=F.replace(qe,"").replace(/^\/+/,""),Nt=new URL(`http://localhost/${At}`);return`${Nt.pathname}${Nt.search}${Nt.hash}`}function rr(){const F=(0,c.s0)(),Pe=(0,n.h_)(n.Ds).getOptionalString("app.baseUrl");return(0,a.useCallback)(At=>{let Nt=At;if(Pe)try{Nt=jn(At,Pe)}catch{}F(Nt)},[F,Pe])}const D="screen and (max-width: 76.1875em)",I=F=>{const le=rr(),Pe=(0,p.Z)(),qe=(0,Xe.Z)(D),At=Ke(),Nt=Mn(),en=(0,n.z$)(),nn=(0,n.h_)(P.Dl),Rn=(0,n.h_)(N.q3),{state:In,path:Dn,content:Nn}=he(),[ln,sr]=(0,a.useState)(null),br=(0,P.ux)(ln),Sr=(0,a.useCallback)(()=>{if(!ln)return;ln.querySelectorAll(".md-sidebar").forEach(ur=>{var yr,Zr,Vr;if(qe)ur.style.top="0px";else{const Br=document==null?void 0:document.querySelector(".techdocs-reader-page"),Y=(yr=Br==null?void 0:Br.getBoundingClientRect().top)!=null?yr:0;let se=(Zr=ln.getBoundingClientRect().top)!=null?Zr:0;const Re=ln.querySelector(".md-container > .md-tabs"),be=(Vr=Re==null?void 0:Re.getBoundingClientRect().height)!=null?Vr:0;se<Y&&(se=Y),ur.style.top=`${Math.max(se,0)+be}px`}ur.style.setProperty("opacity","1")})},[ln,qe]);(0,a.useEffect)(()=>(window.addEventListener("resize",Sr),window.addEventListener("scroll",Sr,!0),()=>{window.removeEventListener("resize",Sr),window.removeEventListener("scroll",Sr,!0)}),[ln,Sr]);const wr=(0,a.useCallback)(()=>{if(!ln)return;const hr=ln.querySelector(".md-footer");hr&&(hr.style.width=`${ln.getBoundingClientRect().width}px`)},[ln]);(0,a.useEffect)(()=>(window.addEventListener("resize",wr),()=>{window.removeEventListener("resize",wr)}),[ln,wr]),(0,a.useEffect)(()=>{br||(wr(),Sr())},[In,br,wr,Sr]);const Cr=(0,a.useCallback)((hr,ur)=>Wn(hr,[At,zn({techdocsStorageApi:nn,entityId:F,path:ur}),Ze(),ye(),tn(),gn(),lt(Rn),Nt]),[F,Rn,nn,At,Nt]),Tr=(0,a.useCallback)(async hr=>Wn(hr,[er(),tr(),Zt(Pe),vt({baseUrl:window.location.origin,onClick:(ur,yr)=>{var Zr,Vr;const Br=ur.ctrlKey||ur.metaKey,Y=new URL(yr),se=((Zr=ur.target)==null?void 0:Zr.innerText)||yr,Re=yr.replace(window.location.origin,"");en.captureEvent("click",se,{attributes:{to:Re}}),Y.hash?Br?window.open(yr,"_blank"):(le(yr),(Vr=hr==null?void 0:hr.querySelector(`[id="${Y.hash.slice(1)}"]`))==null||Vr.scrollIntoView()):Br?window.open(yr,"_blank"):le(yr)}}),Zn({onLoading:()=>{},onLoaded:()=>{var ur;(ur=hr.querySelector(".md-nav__title"))==null||ur.removeAttribute("for")}}),Zn({onLoading:()=>{Array.from(hr.querySelectorAll(".md-sidebar")).forEach(yr=>{yr.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[Pe,le,en]);return(0,a.useEffect)(()=>{if(!Nn)return()=>{};let hr=!0;return Cr(Nn,Dn).then(async ur=>{if(!(ur!=null&&ur.innerHTML)||!hr)return;window.scroll({top:0});const yr=await Tr(ur);sr(yr)}),()=>{hr=!1}},[Nn,Dn,Cr,Tr]),ln},V=()=>{const F=(0,P.$L)(),{shadowRoot:le}=(0,P.x1)(),Pe=le==null?void 0:le.querySelector('[data-md-component="content"]'),qe=le==null?void 0:le.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let At=qe==null?void 0:qe.querySelector('[data-techdocs-addons-location="primary sidebar"]');At||(At=document.createElement("div"),At.setAttribute("data-techdocs-addons-location","primary sidebar"),qe==null||qe.prepend(At));const Nt=le==null?void 0:le.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let en=Nt==null?void 0:Nt.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return en||(en=document.createElement("div"),en.setAttribute("data-techdocs-addons-location","secondary sidebar"),Nt==null||Nt.prepend(en)),a.createElement(a.Fragment,null,a.createElement($t.Z,{container:At},F.renderComponentsByLocation(P.oZ.PrimarySidebar)),a.createElement($t.Z,{container:Pe},F.renderComponentsByLocation(P.oZ.Content)),a.createElement($t.Z,{container:en},F.renderComponentsByLocation(P.oZ.SecondarySidebar)))},ie=(0,h.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),Me=at(F=>{var le;const{withSearch:Pe=!0,onReady:qe}=F,At=ie(),{entityMetadata:{value:Nt,loading:en},entityRef:nn,setShadowRoot:Rn}=(0,P.x1)(),In=I(nn),Dn=(0,a.useCallback)(Nn=>{Rn(Nn),qe instanceof Function&&qe()},[Rn,qe]);return en===!1&&!Nt?a.createElement(v.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):In?a.createElement(v.VY,null,a.createElement(E.Z,{container:!0},a.createElement(E.Z,{xs:12,item:!0},a.createElement(dt,null)),Pe&&a.createElement(E.Z,{className:At.search,xs:"auto",item:!0},a.createElement(z,{entityId:nn,entityTitle:(le=Nt==null?void 0:Nt.metadata)==null?void 0:le.title})),a.createElement(E.Z,{xs:12,item:!0},a.createElement(P.VA,{element:In,onAppend:Dn},a.createElement(V,null))))):a.createElement(v.VY,null,a.createElement(E.Z,{container:!0},a.createElement(E.Z,{xs:12,item:!0},a.createElement(dt,null))))}),rt=null,B=(0,n.NT)({id:"techdocs:index-page"}),H=(0,n.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Oe=(0,n.NT)({id:"techdocs:catalog-reader-view"}),ze=a.createElement(ce.Z,{animation:"wave",variant:"text",height:40}),Mt=F=>{const{palette:{common:{white:le}}}=(0,p.Z)(),{children:Pe}=F,qe=(0,P.$L)(),At=(0,n.h_)(n.Ds),{title:Nt,setTitle:en,subtitle:nn,setSubtitle:Rn,entityRef:In,metadata:{value:Dn,loading:Nn},entityMetadata:{value:ln,loading:sr}}=(0,P.x1)();(0,a.useEffect)(()=>{Dn&&(en(Dn.site_name),Rn(()=>{let{site_description:Br}=Dn;return(!Br||Br==="None")&&(Br=""),Br}))},[Dn,en,Rn]);const br=At.getOptional("app.title")||"Backstage",Sr=[Nt,nn,br].filter(Boolean).join(" | "),{locationMetadata:wr,spec:Cr}=ln||{},Tr=Cr==null?void 0:Cr.lifecycle,hr=ln?(0,mt.hF)(ln,rn.S4):[],ur=(0,n.tg)(B)(),yr=a.createElement(a.Fragment,null,a.createElement(v.i9,{label:(0,Kt.capitalize)((ln==null?void 0:ln.kind)||"entity"),value:a.createElement(mt.dx,{color:"inherit",entityRef:In,title:ln==null?void 0:ln.metadata.title,defaultKind:"Component"})}),hr.length>0&&a.createElement(v.i9,{label:"Owner",value:a.createElement(mt.rI,{color:"inherit",entityRefs:hr,defaultKind:"group"})}),Tr?a.createElement(v.i9,{label:"Lifecycle",value:Tr}):null,wr&&wr.type!=="dir"&&wr.type!=="file"?a.createElement(v.i9,{label:"",value:a.createElement(E.Z,{container:!0,direction:"column",alignItems:"center",style:{color:le}},a.createElement(E.Z,{style:{padding:0},item:!0},a.createElement(St.Z,{style:{marginTop:"-25px"}})),a.createElement(E.Z,{style:{padding:0},item:!0},"Source")),url:wr.target}):null);return!sr&&ln===void 0||!Nn&&Dn===void 0?null:a.createElement(v.h4,{type:"Documentation",typeLink:ur,title:Nt||ze,subtitle:nn===""?void 0:nn||ze},a.createElement(Je.Z,{titleTemplate:"%s"},a.createElement("title",null,Sr)),yr,Pe,qe.renderComponentsByLocation(P.oZ.Header))},Ft=(0,h.Z)(F=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:F.spacing(3,3,0)}})),Ht=F=>{const le=Ft(),[Pe,qe]=(0,a.useState)(null),At=(0,a.useCallback)(Nn=>{qe(Nn.currentTarget)},[]),Nt=(0,a.useCallback)(()=>{qe(null)},[]),{entityMetadata:{value:en,loading:nn}}=(0,P.x1)(),Rn=(0,P.$L)(),In=Rn.renderComponentsByLocation(P.oZ.Subheader),Dn=Rn.renderComponentsByLocation(P.oZ.Settings);return!In&&!Dn||nn===!1&&!en?null:a.createElement(ot.Z,{classes:le,...F.toolbarProps},a.createElement(Vt.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},In,Dn?a.createElement(a.Fragment,null,a.createElement(K.ZP,{title:"Settings"},a.createElement(x.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:At},a.createElement(_t.Z,null))),a.createElement(kt.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:Pe,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(Pe),onClose:Nt,keepMounted:!0},a.createElement("div",null,Dn))):null))},bn=F=>{const{withSearch:le,withHeader:Pe=!0}=F;return a.createElement(v.T3,{themeId:"documentation"},Pe&&a.createElement(Mt,null),a.createElement(Ht,null),a.createElement(Me,{withSearch:le}))},Cn=F=>{const{kind:le,name:Pe,namespace:qe}=(0,n.Oi)(H),{children:At,entityRef:Nt={kind:le,name:Pe,namespace:qe}}=F,en=(0,c.pC)();if(!At){const In=(en?a.Children.toArray(en.props.children):[]).flatMap(Dn=>{var Nn,ln;return(ln=(Nn=Dn==null?void 0:Dn.props)==null?void 0:Nn.children)!=null?ln:[]}).find(Dn=>!(0,n.IY)(Dn,P.Zz)&&!(0,n.IY)(Dn,P.jM));return a.createElement(P.ZS,{entityRef:Nt},In||a.createElement(bn,null))}return a.createElement(P.ZS,{entityRef:Nt},({metadata:nn,entityMetadata:Rn,onReady:In})=>a.createElement("div",{className:"techdocs-reader-page"},a.createElement(v.T3,{themeId:"documentation"},At instanceof Function?At({entityRef:Nt,techdocsMetadataValue:nn.value,entityMetadataValue:Rn.value,onReady:In}):At)))};function an(F,le){return le.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?F:F.toLocaleLowerCase("en-US")}const Fn=F=>{const{entities:le}=F,Pe=(0,n.tg)(H),qe=(0,n.h_)(n.Ds);return le?a.createElement(v.Oh,{"data-testid":"docs-explore"},le!=null&&le.length?le.map((At,Nt)=>{var en,nn;return a.createElement(J.Z,{key:Nt},a.createElement(sn.Z,null,a.createElement(v.hu,{title:(en=At.metadata.title)!=null?en:At.metadata.name})),a.createElement(Se.Z,null,At.metadata.description),a.createElement(Ne.Z,null,a.createElement(v.Qj,{to:Pe({namespace:an((nn=At.metadata.namespace)!=null?nn:"default",qe),kind:an(At.kind,qe),name:an(At.metadata.name,qe)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},Un={title:"All Documentation",filterPredicate:()=>!0},Jn=F=>{const{entities:le,group:Pe}=F,{loading:qe,isOwnedEntity:At}=useEntityOwnership(),Nt=le.filter(nn=>Pe.filterPredicate==="ownedByUser"?qe?!1:At(nn):typeof Pe.filterPredicate=="function"&&Pe.filterPredicate(nn)),en=(()=>typeof Pe.title=="string"?React.createElement(ContentHeader,{title:Pe.title}):Pe.title)();return Nt.length===0?null:React.createElement(Content,null,en,React.createElement(Fn,{entities:Nt}))},Yn=F=>{const{loading:le,error:Pe,entities:qe}=useEntityList();return Pe?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:Pe.toString()})):le?React.createElement(Progress,null):qe.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography$1,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):(qe.sort((At,Nt)=>{var en,nn;return((en=At.metadata.title)!=null?en:At.metadata.name).localeCompare((nn=Nt.metadata.title)!=null?nn:Nt.metadata.name)}),React.createElement(Content,null,(F.groups||[Un]).map((At,Nt)=>React.createElement(Jn,{entities:qe,group:At,key:`${At.title}-${Nt}`}))))},Xn=(0,hn.Z)({root:{color:"#f3ba37"}})(un.Z),Hn={createCopyDocsUrlAction(F){return le=>({icon:()=>a.createElement(ct.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>F(`${window.location.origin}${le.resolved.docsUrl}`)})},createStarEntityAction(F,le){return Pe=>{const qe=Pe.entity,At=F(qe);return{cellStyle:{paddingLeft:"1em"},icon:()=>At?a.createElement(Xn,null):a.createElement(vn.Z,null),tooltip:At?"Remove from favorites":"Add to favorites",onClick:()=>le(qe)}}}};function vr(F){return F.metadata.title||F.metadata.name}const pr={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:F=>a.createElement(v.uw,{value:a.createElement(v.rU,{to:F.resolved.docsUrl},vr(F.entity)),subvalue:F.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:F})=>a.createElement(mt.rI,{entityRefs:F.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},cr=F=>{const{entities:le,title:Pe,loading:qe,columns:At,actions:Nt,options:en}=F,[,nn]=(0,Ae.Z)(),Rn=(0,n.tg)(H),In=(0,n.h_)(n.Ds);if(!le)return null;const Dn=le.map(sr=>{var br;const Sr=(0,mt.hF)(sr,rn.S4);return{entity:sr,resolved:{docsUrl:Rn({namespace:an((br=sr.metadata.namespace)!=null?br:"default",In),kind:an(sr.kind,In),name:an(sr.metadata.name,In)}),ownedByRelations:Sr,ownedByRelationsTitle:Sr.map(wr=>(0,mt.$3)(wr,{defaultKind:"group"})).join(", ")}}}),Nn=[pr.createNameColumn(),pr.createOwnerColumn(),pr.createTypeColumn()],ln=[Hn.createCopyDocsUrlAction(nn)];return a.createElement(a.Fragment,null,qe||Dn&&Dn.length>0?a.createElement(v.iA,{isLoading:qe,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1,...en},data:Dn,columns:At||Nn,actions:Nt||ln,title:Pe?`${Pe} (${Dn.length})`:`All (${Dn.length})`}):a.createElement(v.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:a.createElement(v.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};cr.columns=pr,cr.actions=Hn;const or=F=>{var le,Pe;const{columns:qe,actions:At,options:Nt}=F,{loading:en,error:nn,entities:Rn,filters:In}=(0,mt.wp)(),{isStarredEntity:Dn,toggleStarredEntity:Nn}=(0,mt.CR)(),[,ln]=(0,Ae.Z)(),sr=(0,Kt.capitalize)((Pe=(le=In.user)==null?void 0:le.value)!=null?Pe:"all"),br=[Hn.createCopyDocsUrlAction(ln),Hn.createStarEntityAction(Dn,Nn)];return nn?a.createElement(v.GB,{severity:"error",title:"Could not load available documentation."},a.createElement(v.Oi,{language:"text",text:nn.toString()})):a.createElement(cr,{title:sr,entities:Rn,loading:en,actions:At||br,columns:qe,options:Nt})};or.columns=pr,or.actions=Hn;const nr=F=>{var le;const{children:Pe}=F,At=`Documentation available in ${(le=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?le:"Backstage"}`;return a.createElement(v.g9,{title:"Documentation",subtitle:At,themeId:"documentation"},Pe)};class Z{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":mt.n3}}}const o=()=>{const{updateFilters:F}=(0,mt.wp)();return(0,a.useEffect)(()=>{F({techdocs:new Z})},[F]),null},i=F=>{const{initialFilter:le="owned",columns:Pe,actions:qe}=F;return a.createElement(nr,null,a.createElement(v.VY,null,a.createElement(v.yW,{title:""},a.createElement(v.qt,null,"Discover documentation in your ecosystem.")),a.createElement(mt.UO,null,a.createElement(mt._i,null,a.createElement(mt._i.Filters,null,a.createElement(o,null),a.createElement(mt.EW,{initialFilter:le}),a.createElement(mt.dq,null),a.createElement(mt.xE,null)),a.createElement(mt._i.Content,null,a.createElement(or,{actions:qe,columns:Pe}))))))},g=(0,n.rx)({id:"techdocs",apis:[(0,n.ni)({api:P.Dl,deps:{configApi:n.Ds,discoveryApi:n.NW,identityApi:n.$4,fetchApi:n.gP},factory:({configApi:F,discoveryApi:le,identityApi:Pe,fetchApi:qe})=>new pn({configApi:F,discoveryApi:le,identityApi:Pe,fetchApi:qe})}),(0,n.ni)({api:P.gT,deps:{configApi:n.Ds,discoveryApi:n.NW,fetchApi:n.gP},factory:({configApi:F,discoveryApi:le,fetchApi:Pe})=>new fn({configApi:F,discoveryApi:le,fetchApi:Pe})})],routes:{root:B,docRoot:H,entityContent:Oe}}),M=g.provide((0,n.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Qn}).then(F=>F.Router),mountPoint:B})),Ee=g.provide((0,n.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Qn}).then(F=>F.EmbeddedDocsRouter),mountPoint:Oe})),je=g.provide((0,n.P4)({name:"TechDocsCustomHome",component:()=>e.e(999).then(e.bind(e,90999)).then(F=>F.TechDocsCustomHome),mountPoint:B})),et=g.provide((0,n.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return Sn}).then(F=>F.TechDocsIndexPage),mountPoint:B})),xt=g.provide((0,n.P4)({name:"TechDocsReaderPage",component:()=>e.e(9368).then(e.bind(e,59368)).then(F=>F.TechDocsReaderPage),mountPoint:H})),Wt=g.provide((0,O.E5)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(function(){return Lt}).then(F=>F.TechDocsSearchResultListItem),predicate:F=>F.type==="techdocs"})),cn=({entity:F})=>{const le=(0,rn.iB)(F);return a.createElement(xt,{entityRef:le},a.createElement(Ht,null),a.createElement(Me,{withSearch:!1}))},mn=F=>(0,c.pC)()||a.createElement(i,{...F});var Sn=Object.freeze({__proto__:null,TechDocsIndexPage:mn});const Ln="backstage.io/techdocs-ref";var Qn=Object.freeze({__proto__:null,isTechDocsAvailable:F=>{var le,Pe;return Boolean((Pe=(le=F==null?void 0:F.metadata)==null?void 0:le.annotations)==null?void 0:Pe[Ln])},Router:()=>a.createElement(c.Z5,null,a.createElement(c.AW,{path:"/",element:a.createElement(mn,null)}),a.createElement(c.AW,{path:"/:namespace/:kind/:name/*",element:a.createElement(Cn,null)})),EmbeddedDocsRouter:F=>{var le;const{children:Pe}=F,{entity:qe}=(0,mt.X2)(),At=(0,c.V$)([{path:"/*",element:a.createElement(cn,{entity:qe}),children:[{path:"*",element:Pe}]}]);return((le=qe.metadata.annotations)==null?void 0:le[Ln])?At:a.createElement(v.sk,{annotation:Ln})}})},70557:function(Rt,d,e){e.d(d,{$d:function(){return n.E},I6:function(){return n.g},Jl:function(){return n.e},bf:function(){return n.h},s4:function(){return n.t}});var n=e(1383),l=e(30705),u=e(32272),m=e(76372),a=e.n(m),c=e(2784),P=e(66565),b=e(80236),t=e(92573),v=e(49462),h=e(35368),$=e.n(h),L=e(1854),k=e(28316),G=e(82717),E=e.n(G),A=e(18671),x=e(73495),f=e(34520),T=e(76635),C=e.n(T)},43229:function(Rt,d,e){e.d(d,{F0:function(){return ut},H2:function(){return N},Zr:function(){return te},kG:function(){return _t}});var n=e(53907),l=e(32272),u=e(82394),m=e.n(u),a=e(30705),c=e(2784),P=e(47603),b=e(80236),t=e(73557),v=e(90436),h=e(77277),$=e(79692),L=e(43434),k=e(38402),G=e(86136),E=e(49378),A=e(80030),x=e(60905),f=e(9520),T=e(11776),C=e(82938),_=e(86619),p=e(61837),W=e(48348),K=e(12231),Ie=e(11640),ge=e(33375),Xe=e(64279),$t=e(71554),ot=e(43054),Vt=e(72164),kt=e(59324),J=e(13737),sn=e(31168),Se=e(73495);const Ne={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},O=new Map;class Le{constructor(S,z,Q,me,xe,Fe){this.namespace=S,this.fetchApi=z,this.discoveryApi=Q,this.errorApi=me,this.identityApi=xe,this.fallback=Fe,this.subscribers=new Set,this.observables=new Map}static create(S){var z;return new Le((z=S.namespace)!=null?z:"default",S.fetchApi,S.discoveryApi,S.errorApi,S.identityApi,WebStorage.create({namespace:S.namespace,errorApi:S.errorApi}))}forBucket(S){const z=`${this.namespace}.${S}`;return O.has(z)||O.set(z,new Le(z,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),O.get(z)}async remove(S){const z=await this.getFetchUrl(S),Q=await this.fetchApi.fetch(z,{method:"DELETE"});if(!Q.ok&&Q.status!==404)throw await ResponseError.fromResponse(Q);this.notifyChanges({key:S,presence:"absent"})}async set(S,z){if(!await this.isSignedIn()){await this.fallback.set(S,z),this.notifyChanges({key:S,presence:"present",value:z});return}const Q=await this.getFetchUrl(S),me=await this.fetchApi.fetch(Q,{method:"PUT",headers:Ne,body:JSON.stringify({value:z})});if(!me.ok)throw await ResponseError.fromResponse(me);const{value:xe}=await me.json();this.notifyChanges({key:S,value:xe,presence:"present"})}observe$(S){return this.observables.has(S)||this.observables.set(S,new ObservableImpl(z=>(this.subscribers.add(z),Promise.resolve().then(()=>this.get(S)).then(Q=>z.next(Q)).catch(Q=>this.errorApi.post(Q)),()=>{this.subscribers.delete(z)})).filter(({key:z})=>z===S)),this.observables.get(S)}snapshot(S){return{key:S,presence:"unknown"}}async get(S){if(!await this.isSignedIn())return this.fallback.snapshot(S);const z=await this.getFetchUrl(S),Q=await this.fetchApi.fetch(z);if(Q.status===404)return{key:S,presence:"absent"};if(!Q.ok)throw await ResponseError.fromResponse(Q);try{const{value:me}=await Q.json(),xe=JSON.parse(JSON.stringify(me),(Fe,He)=>(typeof He=="object"&&He!==null&&Object.freeze(He),He));return{key:S,presence:"present",value:xe}}catch{return{key:S,presence:"absent"}}}async getFetchUrl(S){const z=await this.discoveryApi.getBaseUrl("user-settings"),Q=encodeURIComponent(this.namespace),me=encodeURIComponent(S);return`${z}/buckets/${Q}/keys/${me}`}async notifyChanges(S){for(const z of this.subscribers)try{z.next(S)}catch{}}async isSignedIn(){try{const S=await this.identityApi.getCredentials();return!!(S!=null&&S.token)}catch{return!1}}}const ce=(0,a.NT)({id:"user-settings"}),N=(0,a.rx)({id:"user-settings",routes:{settingsPage:ce}}).provide((0,a.P4)({name:"UserSettingsPage",component:()=>e.e(8278).then(e.bind(e,38278)).then(ne=>ne.SettingsPage),mountPoint:ce})),te=ne=>{const S=(0,a.tg)(ce),z=ne.icon?ne.icon:P.Z;return c.createElement(b.R6,{text:"Settings",to:S(),icon:z})},_e=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Ge=()=>c.createElement(b.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:c.createElement(c.Fragment,null,c.createElement(v.Z,{variant:"body1"},"Open ",c.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),c.createElement(b.Oi,{text:_e,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(h.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),wt=(0,$.Z)(ne=>({avatar:{width:({size:S})=>S,height:({size:S})=>S,fontSize:({size:S})=>S*.7,border:`1px solid ${ne.palette.textSubtle}`}})),pt=({size:ne,picture:S})=>{const{iconSize:z}=b.sidebarConfig,Q=wt(ne?{size:ne}:{size:z});return c.createElement(L.Z,{src:S,className:Q.avatar})},Tt=ne=>{const{title:S,description:z,icon:Q,apiRef:me}=ne,xe=(0,a.h_)(me),Fe=(0,a.h_)(a.VE),[He,dt]=(0,c.useState)(!1),ae={},[pe,ve]=(0,c.useState)(ae);return(0,c.useEffect)(()=>{let Te=!1;const nt=xe.sessionState$().subscribe(Bt=>{Te||xe.getProfile({optional:!0}).then(Ut=>{Te||(Bt===a.sM.SignedIn&&dt(!0),Ut&&ve(Ut))})});return()=>{Te=!0,nt.unsubscribe()}},[xe]),c.createElement(k.Z,null,c.createElement(G.Z,null,c.createElement(Q,null)),c.createElement(E.Z,{primary:S,secondary:c.createElement(A.ZP,{placement:"top",arrow:!0,title:z},c.createElement(x.Z,{container:!0,spacing:6},c.createElement(x.Z,{item:!0},c.createElement(pt,{size:48,picture:pe.picture})),c.createElement(x.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(x.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(x.Z,{item:!0,xs:!0},c.createElement(v.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},pe.displayName),c.createElement(v.Z,{variant:"body2",color:"textSecondary"},pe.email),c.createElement(v.Z,{variant:"body2",color:"textSecondary"},z)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),c.createElement(f.Z,null,c.createElement(A.ZP,{placement:"top",arrow:!0,title:He?`Sign out from ${S}`:`Sign in to ${S}`},c.createElement(h.Z,{variant:"outlined",color:"primary",onClick:()=>{(He?xe.signOut():xe.signIn()).catch(nt=>Fe.post(nt))}},He?"Sign out":"Sign in"))))},q=ne=>{const{configuredProviders:S}=ne;return c.createElement(c.Fragment,null,S.includes("google")&&c.createElement(Tt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:a.Kp,icon:Ie.Z}),S.includes("microsoft")&&c.createElement(Tt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:a.p_,icon:Ie.Z}),S.includes("github")&&c.createElement(Tt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:a.F4,icon:Ie.Z}),S.includes("gitlab")&&c.createElement(Tt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:a.ux,icon:Ie.Z}),S.includes("okta")&&c.createElement(Tt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:a.D,icon:Ie.Z}),S.includes("bitbucket")&&c.createElement(Tt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:a.bq,icon:Ie.Z}),S.includes("onelogin")&&c.createElement(Tt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:a.gW,icon:Ie.Z}),S.includes("atlassian")&&c.createElement(Tt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:a.uB,icon:Ie.Z}),S.includes("bitbucketServer")&&c.createElement(Tt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:a.Km,icon:Ie.Z}))},oe=ne=>{const{providerSettings:S}=ne,Q=(0,a.h_)(a.Ds).getOptionalConfig("auth.providers"),me=(Q==null?void 0:Q.keys())||[],xe=S!=null?S:c.createElement(q,{configuredProviders:me});return!S&&!(me!=null&&me.length)?c.createElement(Ge,null):c.createElement(b.rJ,{title:"Available Providers"},c.createElement(T.Z,{dense:!0},xe))},Ae=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,Je=()=>c.createElement(b.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:c.createElement(c.Fragment,null,c.createElement(v.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),c.createElement(b.Oi,{text:Ae,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(h.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),St=ne=>ne.description?ne.description:ne.pluginId?`Registered in ${ne.pluginId} plugin`:"Registered in the application",mt=({flag:ne,enabled:S,toggleHandler:z})=>c.createElement(k.Z,{divider:!0,button:!0,onClick:()=>z(ne.name)},c.createElement(G.Z,null,c.createElement(A.ZP,{placement:"top",arrow:!0,title:S?"Disable":"Enable"},c.createElement(C.Z,{color:"primary",checked:S,name:ne.name}))),c.createElement(E.Z,{primary:ne.name,secondary:St(ne)})),rn=()=>{const ne=(0,a.h_)(a.W0),S=ne.getRegisteredFlags(),z=Object.fromEntries(S.map(({name:Te})=>[Te,ne.isActive(Te)])),[Q,me]=(0,c.useState)(z),[xe,Fe]=(0,c.useState)(""),He=c.useRef(),dt=(0,c.useCallback)(Te=>{const nt=ne.isActive(Te)?a.CL.None:a.CL.Active;ne.save({states:{[Te]:nt},merge:!0}),me(Bt=>({...Bt,[Te]:nt===a.CL.Active}))},[ne]);if(!S.length)return c.createElement(Je,null);const ae=()=>{var Te;Fe(""),(Te=He==null?void 0:He.current)==null||Te.focus()},pe=S.filter(Te=>Te.name.toLocaleLowerCase("en-US").includes(xe.toLocaleLowerCase("en-US"))),ve=()=>c.createElement(x.Z,{container:!0,style:{justifyContent:"space-between"}},c.createElement(x.Z,{item:!0,xs:6,md:8},c.createElement(v.Z,{variant:"h5"},"Feature Flags"),c.createElement(v.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),S.length>=10&&c.createElement(x.Z,{item:!0,xs:6,md:4},c.createElement(_.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Te=>Te&&Te.focus(),InputProps:{...xe.length&&{endAdornment:c.createElement(p.Z,{"aria-label":"Clear filter",onClick:ae,edge:"end"},c.createElement(ge.Z,null))}},onChange:Te=>Fe(Te.target.value),value:xe})));return c.createElement(b.rJ,{title:c.createElement(ve,null)},c.createElement(T.Z,{dense:!0},pe.map(Te=>{const nt=Boolean(Q[Te.name]);return c.createElement(mt,{key:Te.name,flag:Te,enabled:nt,toggleHandler:dt})})))},Kt=()=>{var ne;const S=(0,a.h_)(a.$4),z=(0,a.h_)(a.$v),{value:Q,loading:me,error:xe}=(0,Xe.default)(async()=>({profile:await S.getProfileInfo(),identity:await S.getBackstageIdentity()}),[]);return(0,c.useEffect)(()=>{xe&&z.post({message:`Failed to load user identity: ${xe}`,severity:"error"})},[xe,z]),me||xe?{profile:{},displayName:"",loading:me}:{profile:Q.profile,backstageIdentity:Q.identity,displayName:(ne=Q.profile.displayName)!=null?ne:Q.identity.userEntityRef,loading:me}},$e=(0,$.Z)(ne=>({avatar:{width:({size:S})=>S,height:({size:S})=>S,fontSize:({size:S})=>S*.7,border:`1px solid ${ne.palette.textSubtle}`}})),_t=ne=>{const{size:S}=ne,{iconSize:z}=b.sidebarConfig,Q=$e(S?{size:S}:{size:z}),{profile:me}=Kt();return c.createElement(L.Z,{src:me.picture,className:Q.avatar,alt:"Profile picture"})},ct=()=>{const ne=(0,a.h_)(a.VE),S=(0,a.h_)(a.$4),[z,Q]=c.useState(!1),[me,xe]=c.useState(void 0),Fe=dt=>{xe(dt.currentTarget),Q(!0)},He=()=>{xe(void 0),Q(!1)};return c.createElement(c.Fragment,null,c.createElement(p.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Fe},c.createElement(ot.Z,null)),c.createElement(W.Z,{anchorEl:me,open:z,onClose:He},c.createElement(K.Z,{"data-testid":"sign-out",onClick:()=>S.signOut().catch(dt=>ne.post(dt))},c.createElement(G.Z,null,c.createElement($t.Z,null)),"Sign Out")))},hn=()=>{const{profile:ne,displayName:S}=Kt();return c.createElement(b.rJ,{title:"Profile",variant:"gridItem"},c.createElement(x.Z,{container:!0,spacing:6},c.createElement(x.Z,{item:!0},c.createElement(_t,{size:96})),c.createElement(x.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(x.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(x.Z,{item:!0,xs:!0},c.createElement(v.Z,{variant:"subtitle1",gutterBottom:!0},S),c.createElement(v.Z,{variant:"body2",color:"textSecondary"},ne.email))),c.createElement(x.Z,{item:!0},c.createElement(ct,null)))))},un=()=>{const{isPinned:ne,toggleSidebarPinState:S}=(0,b.Pf)();return c.createElement(k.Z,null,c.createElement(E.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),c.createElement(f.Z,null,c.createElement(A.ZP,{placement:"top",arrow:!0,title:`${ne?"Unpin":"Pin"} Sidebar`},c.createElement(C.Z,{color:"primary",checked:ne,onChange:()=>S(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},vn=({id:ne,activeId:S,icon:z})=>z?(0,c.cloneElement)(z,{color:S===ne?"primary":void 0}):c.createElement(kt.Z,{color:S===ne?"primary":void 0}),st=(0,$.Z)(ne=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[ne.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[ne.breakpoints.down("xs")]:{paddingLeft:0}}})),Pt=({children:ne,title:S,value:z,...Q})=>c.createElement(A.ZP,{placement:"top",arrow:!0,title:S},c.createElement(J.Z,{value:z,...Q},ne)),fn=()=>{const ne=st(),S=(0,a.h_)(a.hg),z=(0,Vt.Z)(S.activeThemeId$(),S.getActiveThemeId()),Q=S.getInstalledThemes(),me=(xe,Fe)=>{Q.some(He=>He.id===Fe)?S.setActiveThemeId(Fe):S.setActiveThemeId(void 0)};return c.createElement(k.Z,{className:ne.list,classes:{container:ne.container}},c.createElement(E.Z,{className:ne.listItemText,primary:"Theme",secondary:"Change the theme mode"}),c.createElement(f.Z,{className:ne.listItemSecondaryAction},c.createElement(sn.Z,{exclusive:!0,size:"small",value:z!=null?z:"auto",onChange:me},Q.map(xe=>{var Fe;const He=(Fe=Q.find(dt=>dt.id===xe.id))==null?void 0:Fe.icon;return c.createElement(Pt,{key:xe.id,title:`Select ${xe.title}`,value:xe.id},c.createElement(c.Fragment,null,xe.title,"\xA0",c.createElement(vn,{id:xe.id,icon:He,activeId:z})))}),c.createElement(A.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},c.createElement(J.Z,{value:"auto",selected:z===void 0},"Auto\xA0",c.createElement(kt.Z,{color:z===void 0?"primary":void 0}))))))},pn=()=>{const{isMobile:ne}=(0,b.Pf)();return c.createElement(b.rJ,{title:"Appearance",variant:"gridItem"},c.createElement(T.Z,{dense:!0},c.createElement(fn,null),!ne&&c.createElement(un,null)))},fe=()=>{const{backstageIdentity:ne}=Kt();return ne?c.createElement(x.Z,{container:!0,spacing:1},c.createElement(x.Z,{item:!0,xs:12},c.createElement(v.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",c.createElement(Se.rI,{entityRefs:[ne.userEntityRef],getTitle:S=>S}))),c.createElement(x.Z,{item:!0,xs:12},c.createElement(v.Z,{variant:"subtitle1"},"Ownership Entities:"," ",c.createElement(Se.rI,{entityRefs:ne.ownershipEntityRefs,getTitle:S=>S})))):c.createElement(v.Z,null,"No Backstage Identity")},j=()=>c.createElement(b.rJ,{title:"Backstage Identity"},c.createElement(fe,null)),X=()=>c.createElement(x.Z,{container:!0,direction:"row",spacing:3},c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(hn,null)),c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(pn,null)),c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(j,null))),ue="plugin.user-settings.settingsLayout",he="plugin.user-settings.settingsLayoutRoute",De=()=>null;(0,a.R5)(De,he,!0),(0,a.R5)(De,"core.gatherMountPoints",!0);const at=ne=>{const{title:S,children:z}=ne,{isMobile:Q}=(0,b.Pf)(),me=(0,a.vJ)(z,xe=>xe.selectByComponentData({key:he,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Fe=>Fe.props));return c.createElement(b.T3,{themeId:"home"},!Q&&c.createElement(b.h4,{title:S!=null?S:"Settings"}),c.createElement(b.tn,{routes:me}))};(0,a.R5)(at,ue,!0),at.Route=De;const tt=ne=>{const{providerSettings:S,tabs:z}=ne;return c.createElement(at,null,c.createElement(at.Route,{path:"general",title:"General"},c.createElement(X,null)),c.createElement(at.Route,{path:"auth-providers",title:"Authentication Providers"},c.createElement(oe,{providerSettings:S})),c.createElement(at.Route,{path:"feature-flags",title:"Feature Flags"},c.createElement(rn,null)),z)},ut=ne=>{const{providerSettings:S}=ne,z=(0,t.pC)(),Q=(0,a.vJ)(z,xe=>xe.selectByComponentData({key:ue}).getElements()),me=(0,a.vJ)(z,xe=>xe.selectByComponentData({key:he}).getElements());return c.createElement(c.Fragment,null,Q.length!==0&&Q||c.createElement(tt,{tabs:me,providerSettings:S}))},Lt=he,de=ne=>c.createElement(at.Route,{path:ne.path,title:ne.title},c.createElement(c.Fragment,null,"props.children"));(0,a.R5)(de,Lt,"UserSettingsTab")},18473:function(Rt,d,e){e.d(d,{CT:function(){return P},EI:function(){return c},Vt:function(){return b},uW:function(){return a}});var n=e(2784);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const u=l(),m=v=>`__@backstage/${v}__`;function a(v,h){const $=m(v);let L=u[$];return L||(L=h(),u[$]=L,L)}function c(v){Object.freeze(v);const h={atVersion($){return v[$]}};return Object.defineProperty(h,"$map",{configurable:!0,enumerable:!0,get(){return v}}),h}function P(v){return a(v,()=>(0,n.createContext)(void 0))}function b(v){return(0,n.useContext)(P(v))}function t(v){return{set(h){globalThis[`__@backstage/${v}__`]=createContext(c(h))},reset(){delete globalThis[`__@backstage/${v}__`]}}}},52059:function(Rt,d,e){Rt.exports=e.p+"static/createComponent.975d1e1e..svg"},79265:function(Rt,d,e){Rt.exports=e.p+"static/missingAnnotation.67f79e98..svg"},38225:function(Rt,d,e){Rt.exports=e.p+"static/noBuild.1715fa71..svg"},85910:function(Rt,d,e){Rt.exports=e.p+"static/noInformation.4b426325..svg"},53305:function(Rt,d,e){Rt.exports=e.p+"static/mic-drop.fe3ef4d0..svg"},85310:function(Rt){Rt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Rt){Rt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.f9fb19ab.js.map